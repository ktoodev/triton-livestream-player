!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e,n){(function(t){var n;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */!function(e,n){"use strict";"object"===i(t)&&"object"===i(t.exports)?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(r,a){"use strict";var o=[],s=Object.getPrototypeOf,u=o.slice,l=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},c=o.push,d=o.indexOf,h={},f=h.toString,p=h.hasOwnProperty,g=p.toString,m=g.call(Object),v={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},_=function(t){return null!=t&&t===t.window},b=r.document,E={type:!0,src:!0,nonce:!0,noModule:!0};function T(t,e,n){var i,r,a=(n=n||b).createElement("script");if(a.text=t,e)for(i in E)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&a.setAttribute(i,r);n.head.appendChild(a).parentNode.removeChild(a)}function A(t){return null==t?t+"":"object"===i(t)||"function"==typeof t?h[f.call(t)]||"object":i(t)}var S=function t(e,n){return new t.fn.init(e,n)};function w(t){var e=!!t&&"length"in t&&t.length,n=A(t);return!y(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}S.fn=S.prototype={jquery:"3.6.0",constructor:S,length:0,toArray:function(){return u.call(this)},get:function(t){return null==t?u.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return S.each(this,t)},map:function(t){return this.pushStack(S.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},S.extend=S.fn.extend=function(){var t,e,n,r,a,o,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[u]||{},u++),"object"===i(s)||y(s)||(s={}),u===l&&(s=this,u--);u<l;u++)if(null!=(t=arguments[u]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(c&&r&&(S.isPlainObject(r)||(a=Array.isArray(r)))?(n=s[e],o=a&&!Array.isArray(n)?[]:a||S.isPlainObject(n)?n:{},a=!1,s[e]=S.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},S.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t))&&(!(e=s(t))||"function"==typeof(n=p.call(e,"constructor")&&e.constructor)&&g.call(n)===m)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){T(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(w(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?S.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:d.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,a=t.length,o=!n;r<a;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,a=0,o=[];if(w(t))for(i=t.length;a<i;a++)null!=(r=e(t[a],a,n))&&o.push(r);else for(a in t)null!=(r=e(t[a],a,n))&&o.push(r);return l(o)},guid:1,support:v}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=o[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var k=
/*!
   * Sizzle CSS Selector Engine v2.3.6
   * https://sizzlejs.com/
   *
   * Copyright JS Foundation and other contributors
   * Released under the MIT license
   * https://js.foundation/
   *
   * Date: 2021-02-16
   */
function(t){var e,n,i,r,a,o,s,u,l,c,d,h,f,p,g,m,v,y,_,b="sizzle"+1*new Date,E=t.document,T=0,A=0,S=ut(),w=ut(),k=ut(),C=ut(),x=function(t,e){return t===e&&(d=!0),0},D={}.hasOwnProperty,L=[],R=L.pop,I=L.push,P=L.push,O=L.slice,N=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",U="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+F+"*("+U+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+F+"*\\]",j=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",H=new RegExp(F+"+","g"),V=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),G=new RegExp("^"+F+"*,"+F+"*"),q=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),W=new RegExp(F+"|>"),K=new RegExp(j),Y=new RegExp("^"+U+"$"),z={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},at=function(){h()},ot=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(L=O.call(E.childNodes),E.childNodes),L[E.childNodes.length].nodeType}catch(t){P={apply:L.length?function(t,e){I.apply(t,O.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function st(t,e,i,r){var a,s,l,c,d,p,v,y=e&&e.ownerDocument,E=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==E&&9!==E&&11!==E)return i;if(!r&&(h(e),e=e||f,g)){if(11!==E&&(d=Z.exec(t)))if(a=d[1]){if(9===E){if(!(l=e.getElementById(a)))return i;if(l.id===a)return i.push(l),i}else if(y&&(l=y.getElementById(a))&&_(e,l)&&l.id===a)return i.push(l),i}else{if(d[2])return P.apply(i,e.getElementsByTagName(t)),i;if((a=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return P.apply(i,e.getElementsByClassName(a)),i}if(n.qsa&&!C[t+" "]&&(!m||!m.test(t))&&(1!==E||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===E&&(W.test(t)||q.test(t))){for((y=tt.test(t)&&vt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(it,rt):e.setAttribute("id",c=b)),s=(p=o(t)).length;s--;)p[s]=(c?"#"+c:":scope")+" "+_t(p[s]);v=p.join(",")}try{return P.apply(i,y.querySelectorAll(v)),i}catch(e){C(t,!0)}finally{c===b&&e.removeAttribute("id")}}}return u(t.replace(V,"$1"),e,i,r)}function ut(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function lt(t){return t[b]=!0,t}function ct(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function dt(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function ht(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return lt((function(e){return e=+e,lt((function(n,i){for(var r,a=t([],n.length,e),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},a=st.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!X.test(e||n&&n.nodeName||"HTML")},h=st.setDocument=function(t){var e,r,o=t?t.ownerDocument||t:E;return o!=f&&9===o.nodeType&&o.documentElement?(p=(f=o).documentElement,g=!a(f),E!=f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",at,!1):r.attachEvent&&r.attachEvent("onunload",at)),n.scope=ct((function(t){return p.appendChild(t).appendChild(f.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=ct((function(t){return p.appendChild(t).id=b,!f.getElementsByName||!f.getElementsByName(b).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,i,r,a=e.getElementById(t);if(a){if((n=a.getAttributeNode("id"))&&n.value===t)return[a];for(r=e.getElementsByName(t),i=0;a=r[i++];)if((n=a.getAttributeNode("id"))&&n.value===t)return[a]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=J.test(f.querySelectorAll))&&(ct((function(t){var e;p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+M+")"),t.querySelectorAll("[id~="+b+"-]").length||m.push("~="),(e=f.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",j)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(p.compareDocumentPosition),_=e||J.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},x=e?function(t,e){if(t===e)return d=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==f||t.ownerDocument==E&&_(E,t)?-1:e==f||e.ownerDocument==E&&_(E,e)?1:c?N(c,t)-N(c,e):0:4&i?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,i=0,r=t.parentNode,a=e.parentNode,o=[t],s=[e];if(!r||!a)return t==f?-1:e==f?1:r?-1:a?1:c?N(c,t)-N(c,e):0;if(r===a)return ht(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;o[i]===s[i];)i++;return i?ht(o[i],s[i]):o[i]==E?-1:s[i]==E?1:0},f):f},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(h(t),n.matchesSelector&&g&&!C[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){C(e,!0)}return st(e,f,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!=f&&h(t),_(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=f&&h(t);var r=i.attrHandle[e.toLowerCase()],a=r&&D.call(i.attrHandle,e.toLowerCase())?r(t,e,!g):void 0;return void 0!==a?a:n.attributes||!g?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null},st.escape=function(t){return(t+"").replace(it,rt)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,i=[],r=0,a=0;if(d=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(x),d){for(;e=t[a++];)e===t[a]&&(r=i.push(a));for(;r--;)t.splice(i[r],1)}return c=null,t},r=st.getText=function(t){var e,n="",i=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(i=st.selectors={cacheLength:50,createPseudo:lt,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return z.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&K.test(n)&&(e=o(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&S(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=st.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(H," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var l,c,d,h,f,p,g=a!==o?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!u&&!s,_=!1;if(m){if(a){for(;g;){for(h=e;h=h[g];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&y){for(_=(f=(l=(c=(d=(h=m)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]||[])[0]===T&&l[1])&&l[2],h=f&&m.childNodes[f];h=++f&&h&&h[g]||(_=f=0)||p.pop();)if(1===h.nodeType&&++_&&h===e){c[t]=[T,f,_];break}}else if(y&&(_=f=(l=(c=(d=(h=e)[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]||[])[0]===T&&l[1]),!1===_)for(;(h=++f&&h&&h[g]||(_=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++_||(y&&((c=(d=h[b]||(h[b]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]=[T,_]),h!==e)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return r[b]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,n){for(var i,a=r(t,e),o=a.length;o--;)t[i=N(t,a[o])]=!(n[i]=a[o])})):function(t){return r(t,0,n)}):r}},pseudos:{not:lt((function(t){var e=[],n=[],i=s(t.replace(V,"$1"));return i[b]?lt((function(t,e,n,r){for(var a,o=i(t,null,r,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))})):function(t,r,a){return e[0]=t,i(e,null,a,n),e[0]=null,!n.pop()}})),has:lt((function(t){return function(e){return st(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:lt((function(t){return Y.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return $.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:mt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=pt(e);function yt(){}function _t(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function bt(t,e,n){var i=e.dir,r=e.next,a=r||i,o=n&&"parentNode"===a,s=A++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,u){var l,c,d,h=[T,s];if(u){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,u))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(c=(d=e[b]||(e[b]={}))[e.uniqueID]||(d[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=c[a])&&l[0]===T&&l[1]===s)return h[2]=l[2];if(c[a]=h,h[2]=t(e,n,u))return!0}return!1}}function Et(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function Tt(t,e,n,i,r){for(var a,o=[],s=0,u=t.length,l=null!=e;s<u;s++)(a=t[s])&&(n&&!n(a,i,r)||(o.push(a),l&&e.push(s)));return o}function At(t,e,n,i,r,a){return i&&!i[b]&&(i=At(i)),r&&!r[b]&&(r=At(r,a)),lt((function(a,o,s,u){var l,c,d,h=[],f=[],p=o.length,g=a||function(t,e,n){for(var i=0,r=e.length;i<r;i++)st(t,e[i],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!a&&e?g:Tt(g,h,t,s,u),v=n?r||(a?t:p||i)?[]:o:m;if(n&&n(m,v,s,u),i)for(l=Tt(v,f),i(l,[],s,u),c=l.length;c--;)(d=l[c])&&(v[f[c]]=!(m[f[c]]=d));if(a){if(r||t){if(r){for(l=[],c=v.length;c--;)(d=v[c])&&l.push(m[c]=d);r(null,v=[],l,u)}for(c=v.length;c--;)(d=v[c])&&(l=r?N(a,d):h[c])>-1&&(a[l]=!(o[l]=d))}}else v=Tt(v===o?v.splice(p,v.length):v),r?r(null,o,v,u):P.apply(o,v)}))}function St(t){for(var e,n,r,a=t.length,o=i.relative[t[0].type],s=o||i.relative[" "],u=o?1:0,c=bt((function(t){return t===e}),s,!0),d=bt((function(t){return N(e,t)>-1}),s,!0),h=[function(t,n,i){var r=!o&&(i||n!==l)||((e=n).nodeType?c(t,n,i):d(t,n,i));return e=null,r}];u<a;u++)if(n=i.relative[t[u].type])h=[bt(Et(h),n)];else{if((n=i.filter[t[u].type].apply(null,t[u].matches))[b]){for(r=++u;r<a&&!i.relative[t[r].type];r++);return At(u>1&&Et(h),u>1&&_t(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(V,"$1"),n,u<r&&St(t.slice(u,r)),r<a&&St(t=t.slice(r)),r<a&&_t(t))}h.push(n)}return Et(h)}return yt.prototype=i.filters=i.pseudos,i.setFilters=new yt,o=st.tokenize=function(t,e){var n,r,a,o,s,u,l,c=w[t+" "];if(c)return e?0:c.slice(0);for(s=t,u=[],l=i.preFilter;s;){for(o in n&&!(r=G.exec(s))||(r&&(s=s.slice(r[0].length)||s),u.push(a=[])),n=!1,(r=q.exec(s))&&(n=r.shift(),a.push({value:n,type:r[0].replace(V," ")}),s=s.slice(n.length)),i.filter)!(r=z[o].exec(s))||l[o]&&!(r=l[o](r))||(n=r.shift(),a.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):w(t,u).slice(0)},s=st.compile=function(t,e){var n,r=[],a=[],s=k[t+" "];if(!s){for(e||(e=o(t)),n=e.length;n--;)(s=St(e[n]))[b]?r.push(s):a.push(s);(s=k(t,function(t,e){var n=e.length>0,r=t.length>0,a=function(a,o,s,u,c){var d,p,m,v=0,y="0",_=a&&[],b=[],E=l,A=a||r&&i.find.TAG("*",c),S=T+=null==E?1:Math.random()||.1,w=A.length;for(c&&(l=o==f||o||c);y!==w&&null!=(d=A[y]);y++){if(r&&d){for(p=0,o||d.ownerDocument==f||(h(d),s=!g);m=t[p++];)if(m(d,o||f,s)){u.push(d);break}c&&(T=S)}n&&((d=!m&&d)&&v--,a&&_.push(d))}if(v+=y,n&&y!==v){for(p=0;m=e[p++];)m(_,b,o,s);if(a){if(v>0)for(;y--;)_[y]||b[y]||(b[y]=R.call(u));b=Tt(b)}P.apply(u,b),c&&!a&&b.length>0&&v+e.length>1&&st.uniqueSort(u)}return c&&(T=S,l=E),_};return n?lt(a):a}(a,r))).selector=t}return s},u=st.select=function(t,e,n,r){var a,u,l,c,d,h="function"==typeof t&&t,f=!r&&o(t=h.selector||t);if(n=n||[],1===f.length){if((u=f[0]=f[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===e.nodeType&&g&&i.relative[u[1].type]){if(!(e=(i.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(a=z.needsContext.test(t)?0:u.length;a--&&(l=u[a],!i.relative[c=l.type]);)if((d=i.find[c])&&(r=d(l.matches[0].replace(et,nt),tt.test(u[0].type)&&vt(e.parentNode)||e))){if(u.splice(a,1),!(t=r.length&&_t(u)))return P.apply(n,r),n;break}}return(h||s(t,f))(r,e,!g,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=b.split("").sort(x).join("")===b,n.detectDuplicates=!!d,h(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||dt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||dt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||dt(M,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),st}(r);S.find=k,(S.expr=k.selectors)[":"]=S.expr.pseudos,S.uniqueSort=S.unique=k.uniqueSort,S.text=k.getText,S.isXMLDoc=k.isXML,S.contains=k.contains,S.escapeSelector=k.escape;var C=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&S(t).is(n))break;i.push(t)}return i},x=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},D=S.expr.match.needsContext;function L(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(t,e,n){return y(e)?S.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?S.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?S.grep(t,(function(t){return d.call(e,t)>-1!==n})):S.filter(e,t,n)}S.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?S.find.matchesSelector(i,t)?[i]:[]:S.find.matches(t,S.grep(e,(function(t){return 1===t.nodeType})))},S.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(S(t).filter((function(){for(e=0;e<i;e++)if(S.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)S.find(t,r[e],n);return i>1?S.uniqueSort(n):n},filter:function(t){return this.pushStack(I(this,t||[],!1))},not:function(t){return this.pushStack(I(this,t||[],!0))},is:function(t){return!!I(this,"string"==typeof t&&D.test(t)?S(t):t||[],!1).length}});var P,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:O.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof S?e[0]:e,S.merge(this,S.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),R.test(i[1])&&S.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=b.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(S):S.makeArray(t,this)}).prototype=S.fn,P=S(b);var N=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function F(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.fn.extend({has:function(t){var e=S(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(S.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,r=this.length,a=[],o="string"!=typeof t&&S(t);if(!D.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?S.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?d.call(S(t),this[0]):d.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C(t,"parentNode")},parentsUntil:function(t,e,n){return C(t,"parentNode",n)},next:function(t){return F(t,"nextSibling")},prev:function(t){return F(t,"previousSibling")},nextAll:function(t){return C(t,"nextSibling")},prevAll:function(t){return C(t,"previousSibling")},nextUntil:function(t,e,n){return C(t,"nextSibling",n)},prevUntil:function(t,e,n){return C(t,"previousSibling",n)},siblings:function(t){return x((t.parentNode||{}).firstChild,t)},children:function(t){return x(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(L(t,"template")&&(t=t.content||t),S.merge([],t.childNodes))}},(function(t,e){S.fn[t]=function(n,i){var r=S.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=S.filter(i,r)),this.length>1&&(M[t]||S.uniqueSort(r),N.test(t)&&r.reverse()),this.pushStack(r)}}));var U=/[^\x20\t\r\n\f]+/g;function B(t){return t}function j(t){throw t}function H(t,e,n,i){var r;try{t&&y(r=t.promise)?r.call(t).done(e).fail(n):t&&y(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}S.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return S.each(t.match(U)||[],(function(t,n){e[n]=!0})),e}(t):S.extend({},t);var e,n,i,r,a=[],o=[],s=-1,u=function(){for(r=r||t.once,i=e=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=a.length,n=!1);t.memory||(n=!1),e=!1,r&&(a=n?[]:"")},l={add:function(){return a&&(n&&!e&&(s=a.length-1,o.push(n)),function e(n){S.each(n,(function(n,i){y(i)?t.unique&&l.has(i)||a.push(i):i&&i.length&&"string"!==A(i)&&e(i)}))}(arguments),n&&!e&&u()),this},remove:function(){return S.each(arguments,(function(t,e){for(var n;(n=S.inArray(e,a,n))>-1;)a.splice(n,1),n<=s&&s--})),this},has:function(t){return t?S.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=o=[],n||e||(a=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},S.extend({Deferred:function(t){var e=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var t=arguments;return S.Deferred((function(n){S.each(e,(function(e,i){var r=y(t[i[4]])&&t[i[4]];o[i[1]]((function(){var t=r&&r.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,a){var o=0;function s(t,e,n,a){return function(){var u=this,l=arguments,c=function(){var r,c;if(!(t<o)){if((r=n.apply(u,l))===e.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"===i(r)||"function"==typeof r)&&r.then,y(c)?a?c.call(r,s(o,e,B,a),s(o,e,j,a)):(o++,c.call(r,s(o,e,B,a),s(o,e,j,a),s(o,e,B,e.notifyWith))):(n!==B&&(u=void 0,l=[r]),(a||e.resolveWith)(u,l))}},d=a?c:function(){try{c()}catch(i){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(i,d.stackTrace),t+1>=o&&(n!==j&&(u=void 0,l=[i]),e.rejectWith(u,l))}};t?d():(S.Deferred.getStackHook&&(d.stackTrace=S.Deferred.getStackHook()),r.setTimeout(d))}}return S.Deferred((function(i){e[0][3].add(s(0,i,y(a)?a:B,i.notifyWith)),e[1][3].add(s(0,i,y(t)?t:B)),e[2][3].add(s(0,i,y(n)?n:j))})).promise()},promise:function(t){return null!=t?S.extend(t,a):a}},o={};return S.each(e,(function(t,i){var r=i[2],s=i[5];a[i[1]]=r.add,s&&r.add((function(){n=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),r.add(i[3].fire),o[i[0]]=function(){return o[i[0]+"With"](this===o?void 0:this,arguments),this},o[i[0]+"With"]=r.fireWith})),a.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,i=Array(n),r=u.call(arguments),a=S.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?u.call(arguments):n,--e||a.resolveWith(i,r)}};if(e<=1&&(H(t,a.done(o(n)).resolve,a.reject,!e),"pending"===a.state()||y(r[n]&&r[n].then)))return a.then();for(;n--;)H(r[n],o(n),a.reject);return a.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&V.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},S.readyException=function(t){r.setTimeout((function(){throw t}))};var G=S.Deferred();function q(){b.removeEventListener("DOMContentLoaded",q),r.removeEventListener("load",q),S.ready()}S.fn.ready=function(t){return G.then(t).catch((function(t){S.readyException(t)})),this},S.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==t&&--S.readyWait>0||G.resolveWith(b,[S]))}}),S.ready.then=G.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(S.ready):(b.addEventListener("DOMContentLoaded",q),r.addEventListener("load",q));var W=function t(e,n,i,r,a,o,s){var u=0,l=e.length,c=null==i;if("object"===A(i))for(u in a=!0,i)t(e,n,u,i[u],!0,o,s);else if(void 0!==r&&(a=!0,y(r)||(s=!0),c&&(s?(n.call(e,r),n=null):(c=n,n=function(t,e,n){return c.call(S(t),n)})),n))for(;u<l;u++)n(e[u],i,s?r:r.call(e[u],u,n(e[u],i)));return a?e:c?n.call(e):l?n(e[0],i):o},K=/^-ms-/,Y=/-([a-z])/g;function z(t,e){return e.toUpperCase()}function X(t){return t.replace(K,"ms-").replace(Y,z)}var $=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=S.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},$(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[X(e)]=n;else for(i in e)r[X(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][X(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(X):(e=X(e))in i?[e]:e.match(U)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||S.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var J=new Q,Z=new Q,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}S.extend({hasData:function(t){return Z.hasData(t)||J.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),S.fn.extend({data:function(t,e){var n,r,a,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(a=Z.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=X(r.slice(5)),nt(o,r,a[r]));J.set(o,"hasDataAttrs",!0)}return a}return"object"===i(t)?this.each((function(){Z.set(this,t)})):W(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=Z.get(o,t))||void 0!==(n=nt(o,t))?n:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),S.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=J.get(t,e),n&&(!i||Array.isArray(n)?i=J.access(t,e,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){var n=S.queue(t,e=e||"fx"),i=n.length,r=n.shift(),a=S._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete a.stop,r.call(t,(function(){S.dequeue(t,e)}),a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:S.Callbacks("once memory").add((function(){J.remove(t,[e+"queue",n])}))})}}),S.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?S.queue(this[0],t):void 0===e?this:this.each((function(){var n=S.queue(this,t,e);S._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&S.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){S.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=S.Deferred(),a=this,o=this.length,s=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=J.get(a[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),at=["Top","Right","Bottom","Left"],ot=b.documentElement,st=function(t){return S.contains(t.ownerDocument,t)},ut={composed:!0};ot.getRootNode&&(st=function(t){return S.contains(t.ownerDocument,t)||t.getRootNode(ut)===t.ownerDocument});var lt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&st(t)&&"none"===S.css(t,"display")};function ct(t,e,n,i){var r,a,o=20,s=i?function(){return i.cur()}:function(){return S.css(t,e,"")},u=s(),l=n&&n[3]||(S.cssNumber[e]?"":"px"),c=t.nodeType&&(S.cssNumber[e]||"px"!==l&&+u)&&rt.exec(S.css(t,e));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;o--;)S.style(t,e,c+l),(1-a)*(1-(a=s()/u||.5))<=0&&(o=0),c/=a;S.style(t,e,(c*=2)+l),n=n||[]}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}var dt={};function ht(t){var e,n=t.ownerDocument,i=t.nodeName,r=dt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=S.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),dt[i]=r,r)}function ft(t,e){for(var n,i,r=[],a=0,o=t.length;a<o;a++)(i=t[a]).style&&(n=i.style.display,e?("none"===n&&(r[a]=J.get(i,"display")||null,r[a]||(i.style.display="")),""===i.style.display&&lt(i)&&(r[a]=ht(i))):"none"!==n&&(r[a]="none",J.set(i,"display",n)));for(a=0;a<o;a++)null!=r[a]&&(t[a].style.display=r[a]);return t}S.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){lt(this)?S(this).show():S(this).hide()}))}});var pt,gt,mt=/^(?:checkbox|radio)$/i,vt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yt=/^$|^module$|\/(?:java|ecma)script/i;pt=b.createDocumentFragment().appendChild(b.createElement("div")),(gt=b.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),pt.appendChild(gt),v.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",v.option=!!pt.lastChild;var _t={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function bt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&L(t,e)?S.merge([t],n):n}function Et(t,e){for(var n=0,i=t.length;n<i;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}_t.tbody=_t.tfoot=_t.colgroup=_t.caption=_t.thead,_t.th=_t.td,v.option||(_t.optgroup=_t.option=[1,"<select multiple='multiple'>","</select>"]);var Tt=/<|&#?\w+;/;function At(t,e,n,i,r){for(var a,o,s,u,l,c,d=e.createDocumentFragment(),h=[],f=0,p=t.length;f<p;f++)if((a=t[f])||0===a)if("object"===A(a))S.merge(h,a.nodeType?[a]:a);else if(Tt.test(a)){for(o=o||d.appendChild(e.createElement("div")),s=(vt.exec(a)||["",""])[1].toLowerCase(),u=_t[s]||_t._default,o.innerHTML=u[1]+S.htmlPrefilter(a)+u[2],c=u[0];c--;)o=o.lastChild;S.merge(h,o.childNodes),(o=d.firstChild).textContent=""}else h.push(e.createTextNode(a));for(d.textContent="",f=0;a=h[f++];)if(i&&S.inArray(a,i)>-1)r&&r.push(a);else if(l=st(a),o=bt(d.appendChild(a),"script"),l&&Et(o),n)for(c=0;a=o[c++];)yt.test(a.type||"")&&n.push(a);return d}var St=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function kt(){return!1}function Ct(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function xt(t,e,n,r,a,o){var s,u;if("object"===i(e)){for(u in"string"!=typeof n&&(r=r||n,n=void 0),e)xt(t,u,n,r,e[u],o);return t}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=kt;else if(!a)return t;return 1===o&&(s=a,(a=function(t){return S().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),t.each((function(){S.event.add(this,e,a,r,n)}))}function Dt(t,e,n){n?(J.set(t,e,!1),S.event.add(t,e,{namespace:!1,handler:function(t){var i,r,a=J.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(S.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=u.call(arguments),J.set(this,e,a),i=n(this,e),this[e](),a!==(r=J.get(this,e))||i?J.set(this,e,!1):r={},a!==r)return t.stopImmediatePropagation(),t.preventDefault(),r&&r.value}else a.length&&(J.set(this,e,{value:S.event.trigger(S.extend(a[0],S.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&S.event.add(t,e,wt)}S.event={global:{},add:function(t,e,n,i,r){var a,o,s,u,l,c,d,h,f,p,g,m=J.get(t);if($(t))for(n.handler&&(n=(a=n).handler,r=a.selector),r&&S.find.matchesSelector(ot,r),n.guid||(n.guid=S.guid++),(u=m.events)||(u=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(U)||[""]).length;l--;)f=g=(s=St.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),f&&(d=S.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=S.event.special[f]||{},c=S.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&S.expr.match.needsContext.test(r),namespace:p.join(".")},a),(h=u[f])||((h=u[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,p,o)||t.addEventListener&&t.addEventListener(f,o)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),S.event.global[f]=!0)},remove:function(t,e,n,i,r){var a,o,s,u,l,c,d,h,f,p,g,m=J.hasData(t)&&J.get(t);if(m&&(u=m.events)){for(l=(e=(e||"").match(U)||[""]).length;l--;)if(f=g=(s=St.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),f){for(d=S.event.special[f]||{},h=u[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)c=h[a],!r&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(a,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(t,c));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,p,m.handle)||S.removeEvent(t,f,m.handle),delete u[f])}else for(f in u)S.event.remove(t,f+e[l],n,i,!0);S.isEmptyObject(u)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,a,o,s=new Array(arguments.length),u=S.event.fix(t),l=(J.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(o=S.event.handlers.call(this,u,l),e=0;(r=o[e++])&&!u.isPropagationStopped();)for(u.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==a.namespace&&!u.rnamespace.test(a.namespace)||(u.handleObj=a,u.data=a.data,void 0!==(i=((S.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,s))&&!1===(u.result=i)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,i,r,a,o,s=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(a=[],o={},n=0;n<u;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?S(r,this).index(l)>-1:S.find(r,this,null,[l]).length),o[r]&&a.push(i);a.length&&s.push({elem:l,handlers:a})}return l=this,u<e.length&&s.push({elem:l,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[S.expando]?t:new S.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return mt.test(e.type)&&e.click&&L(e,"input")&&Dt(e,"click",wt),!1},trigger:function(t){var e=this||t;return mt.test(e.type)&&e.click&&L(e,"input")&&Dt(e,"click"),!0},_default:function(t){var e=t.target;return mt.test(e.type)&&e.click&&L(e,"input")&&J.get(e,"click")||L(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},S.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},(S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:kt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[S.expando]=!0}).prototype={constructor:S.Event,isDefaultPrevented:kt,isPropagationStopped:kt,isImmediatePropagationStopped:kt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(t,e){S.event.special[t]={setup:function(){return Dt(this,t,Ct),!1},trigger:function(){return Dt(this,t),!0},_default:function(){return!0},delegateType:e}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){S.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,a=t.handleObj;return r&&(r===i||S.contains(i,r))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}})),S.fn.extend({on:function(t,e,n,i){return xt(this,t,e,n,i)},one:function(t,e,n,i){return xt(this,t,e,n,i,1)},off:function(t,e,n){var r,a;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,S(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===i(t)){for(a in t)this.off(a,e,t[a]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=kt),this.each((function(){S.event.remove(this,t,n,e)}))}});var Lt=/<script|<style|<link/i,Rt=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pt(t,e){return L(t,"table")&&L(11!==e.nodeType?e:e.firstChild,"tr")&&S(t).children("tbody")[0]||t}function Ot(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Mt(t,e){var n,i,r,a,o,s;if(1===e.nodeType){if(J.hasData(t)&&(s=J.get(t).events))for(r in J.remove(e,"handle events"),s)for(n=0,i=s[r].length;n<i;n++)S.event.add(e,r,s[r][n]);Z.hasData(t)&&(a=Z.access(t),o=S.extend({},a),Z.set(e,o))}}function Ft(t,e){var n=e.nodeName.toLowerCase();"input"===n&&mt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Ut(t,e,n,i){e=l(e);var r,a,o,s,u,c,d=0,h=t.length,f=h-1,p=e[0],g=y(p);if(g||h>1&&"string"==typeof p&&!v.checkClone&&Rt.test(p))return t.each((function(r){var a=t.eq(r);g&&(e[0]=p.call(this,r,a.html())),Ut(a,e,n,i)}));if(h&&(a=(r=At(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=a),a||i)){for(s=(o=S.map(bt(r,"script"),Ot)).length;d<h;d++)u=r,d!==f&&(u=S.clone(u,!0,!0),s&&S.merge(o,bt(u,"script"))),n.call(t[d],u,d);if(s)for(c=o[o.length-1].ownerDocument,S.map(o,Nt),d=0;d<s;d++)u=o[d],yt.test(u.type||"")&&!J.access(u,"globalEval")&&S.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):T(u.textContent.replace(It,""),u,c))}return t}function Bt(t,e,n){for(var i,r=e?S.filter(e,t):t,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||S.cleanData(bt(i)),i.parentNode&&(n&&st(i)&&Et(bt(i,"script")),i.parentNode.removeChild(i));return t}S.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,a,o,s=t.cloneNode(!0),u=st(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(o=bt(s),i=0,r=(a=bt(t)).length;i<r;i++)Ft(a[i],o[i]);if(e)if(n)for(a=a||bt(t),o=o||bt(s),i=0,r=a.length;i<r;i++)Mt(a[i],o[i]);else Mt(t,s);return(o=bt(s,"script")).length>0&&Et(o,!u&&bt(t,"script")),s},cleanData:function(t){for(var e,n,i,r=S.event.special,a=0;void 0!==(n=t[a]);a++)if($(n)){if(e=n[J.expando]){if(e.events)for(i in e.events)r[i]?S.event.remove(n,i):S.removeEvent(n,i,e.handle);n[J.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),S.fn.extend({detach:function(t){return Bt(this,t,!0)},remove:function(t){return Bt(this,t)},text:function(t){return W(this,(function(t){return void 0===t?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ut(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)}))},prepend:function(){return Ut(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Pt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ut(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ut(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(S.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return S.clone(this,t,e)}))},html:function(t){return W(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Lt.test(t)&&!_t[(vt.exec(t)||["",""])[1].toLowerCase()]){t=S.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(S.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ut(this,arguments,(function(e){var n=this.parentNode;S.inArray(this,t)<0&&(S.cleanData(bt(this)),n&&n.replaceChild(e,this))}),t)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){S.fn[t]=function(t){for(var n,i=[],r=S(t),a=r.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),S(r[o])[e](n),c.apply(i,n.get());return this.pushStack(i)}}));var jt=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Ht=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Vt=function(t,e,n){var i,r,a={};for(r in e)a[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=a[r];return i},Gt=new RegExp(at.join("|"),"i");function qt(t,e,n){var i,r,a,o,s=t.style;return(n=n||Ht(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||st(t)||(o=S.style(t,e)),!v.pixelBoxStyles()&&jt.test(o)&&Gt.test(e)&&(i=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=r,s.maxWidth=a)),void 0!==o?o+"":o}function Wt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ot.appendChild(l).appendChild(c);var t=r.getComputedStyle(c);n="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",o=36===e(t.right),i=36===e(t.width),c.style.position="absolute",a=12===e(c.offsetWidth/3),ot.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var n,i,a,o,s,u,l=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(v,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,e,n,i;return null==s&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",ot.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,ot.removeChild(t)),s}}))}();var Kt=["Webkit","Moz","ms"],Yt=b.createElement("div").style,zt={};function Xt(t){var e=S.cssProps[t]||zt[t];return e||(t in Yt?t:zt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Kt.length;n--;)if((t=Kt[n]+e)in Yt)return t}(t)||t)}var $t=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,Jt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"};function te(t,e,n){var i=rt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ee(t,e,n,i,r,a){var o="width"===e?1:0,s=0,u=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(u+=S.css(t,n+at[o],!0,r)),i?("content"===n&&(u-=S.css(t,"padding"+at[o],!0,r)),"margin"!==n&&(u-=S.css(t,"border"+at[o]+"Width",!0,r))):(u+=S.css(t,"padding"+at[o],!0,r),"padding"!==n?u+=S.css(t,"border"+at[o]+"Width",!0,r):s+=S.css(t,"border"+at[o]+"Width",!0,r));return!i&&a>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-u-s-.5))||0),u}function ne(t,e,n){var i=Ht(t),r=(!v.boxSizingReliable()||n)&&"border-box"===S.css(t,"boxSizing",!1,i),a=r,o=qt(t,e,i),s="offset"+e[0].toUpperCase()+e.slice(1);if(jt.test(o)){if(!n)return o;o="auto"}return(!v.boxSizingReliable()&&r||!v.reliableTrDimensions()&&L(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===S.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===S.css(t,"boxSizing",!1,i),(a=s in t)&&(o=t[s])),(o=parseFloat(o)||0)+ee(t,e,n||(r?"border":"content"),a,i,o)+"px"}function ie(t,e,n,i,r){return new ie.prototype.init(t,e,n,i,r)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=qt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,o,s,u=X(e),l=Qt.test(e),c=t.style;if(l||(e=Xt(u)),s=S.cssHooks[e]||S.cssHooks[u],void 0===n)return s&&"get"in s&&void 0!==(a=s.get(t,!1,r))?a:c[e];"string"===(o=i(n))&&(a=rt.exec(n))&&a[1]&&(n=ct(t,e,a),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=a&&a[3]||(S.cssNumber[u]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var r,a,o,s=X(e);return Qt.test(e)||(e=Xt(s)),(o=S.cssHooks[e]||S.cssHooks[s])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=qt(t,e,i)),"normal"===r&&e in Zt&&(r=Zt[e]),""===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),S.each(["height","width"],(function(t,e){S.cssHooks[e]={get:function(t,n,i){if(n)return!$t.test(S.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,i):Vt(t,Jt,(function(){return ne(t,e,i)}))},set:function(t,n,i){var r,a=Ht(t),o=!v.scrollboxSize()&&"absolute"===a.position,s=(o||i)&&"border-box"===S.css(t,"boxSizing",!1,a),u=i?ee(t,e,i,s,a):0;return s&&o&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-ee(t,e,"border",!1,a)-.5)),u&&(r=rt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=S.css(t,e)),te(0,n,u)}}})),S.cssHooks.marginLeft=Wt(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(qt(t,"marginLeft"))||t.getBoundingClientRect().left-Vt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(t,e){S.cssHooks[t+e]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+at[i]+e]=a[i]||a[i-2]||a[0];return r}},"margin"!==t&&(S.cssHooks[t+e].set=te)})),S.fn.extend({css:function(t,e){return W(this,(function(t,e,n){var i,r,a={},o=0;if(Array.isArray(e)){for(i=Ht(t),r=e.length;o<r;o++)a[e[o]]=S.css(t,e[o],!1,i);return a}return void 0!==n?S.style(t,e,n):S.css(t,e)}),t,e,arguments.length>1)}}),S.Tween=ie,ie.prototype={constructor:ie,init:function(t,e,n,i,r,a){this.elem=t,this.prop=n,this.easing=r||S.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(S.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.options.duration?this.pos=e=S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}},ie.prototype.init.prototype=ie.prototype,ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):1!==t.elem.nodeType||!S.cssHooks[t.prop]&&null==t.elem.style[Xt(t.prop)]?t.elem[t.prop]=t.now:S.style(t.elem,t.prop,t.now+t.unit)}}},ie.propHooks.scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},(S.fx=ie.prototype.init).step={};var re,ae,oe=/^(?:toggle|show|hide)$/,se=/queueHooks$/;function ue(){ae&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ue):r.setTimeout(ue,S.fx.interval),S.fx.tick())}function le(){return r.setTimeout((function(){re=void 0})),re=Date.now()}function ce(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=at[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function de(t,e,n){for(var i,r=(he.tweeners[e]||[]).concat(he.tweeners["*"]),a=0,o=r.length;a<o;a++)if(i=r[a].call(n,e,t))return i}function he(t,e,n){var i,r,a=0,o=he.prefilters.length,s=S.Deferred().always((function(){delete u.elem})),u=function(){if(r)return!1;for(var e=re||le(),n=Math.max(0,l.startTime+l.duration-e),i=1-(n/l.duration||0),a=0,o=l.tweens.length;a<o;a++)l.tweens[a].run(i);return s.notifyWith(t,[l,i,n]),i<1&&o?n:(o||s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||le(),duration:n.duration,tweens:[],createTween:function(e,n){var i=S.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),c=l.props;for(!function(t,e){var n,i,r,a,o;for(n in t)if(r=e[i=X(n)],a=t[n],Array.isArray(a)&&(r=a[1],a=t[n]=a[0]),n!==i&&(t[i]=a,delete t[n]),(o=S.cssHooks[i])&&"expand"in o)for(n in a=o.expand(a),delete t[i],a)n in t||(t[n]=a[n],e[n]=r);else e[i]=r}(c,l.opts.specialEasing);a<o;a++)if(i=he.prefilters[a].call(l,t,c,l.opts))return y(i.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return S.map(c,de,l),y(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(he,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ct(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(U);for(var n,i=0,r=t.length;i<r;i++)n=t[i],he.tweeners[n]=he.tweeners[n]||[],he.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,a,o,s,u,l,c,d="width"in e||"height"in e,h=this,f={},p=t.style,g=t.nodeType&&lt(t),m=J.get(t,"fxshow");for(i in n.queue||(null==(o=S._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,S.queue(t,"fx").length||o.empty.fire()}))}))),e)if(r=e[i],oe.test(r)){if(delete e[i],a=a||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}f[i]=m&&m[i]||S.style(t,i)}if((u=!S.isEmptyObject(e))||!S.isEmptyObject(f))for(i in d&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=m&&m.display)&&(l=J.get(t,"display")),"none"===(c=S.css(t,"display"))&&(l?c=l:(ft([t],!0),l=t.style.display||l,c=S.css(t,"display"),ft([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(t,"float")&&(u||(h.done((function(){p.display=l})),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,f)u||(m?"hidden"in m&&(g=m.hidden):m=J.access(t,"fxshow",{display:l}),a&&(m.hidden=!g),g&&ft([t],!0),h.done((function(){for(i in g||ft([t]),J.remove(t,"fxshow"),f)S.style(t,i,f[i])}))),u=de(g?m[i]:0,i,h),i in m||(m[i]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?he.prefilters.unshift(t):he.prefilters.push(t)}}),S.speed=function(t,e,n){var r=t&&"object"===i(t)?S.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(t,e,n,i){return this.filter(lt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=S.isEmptyObject(t),a=S.speed(e,n,i),o=function(){var e=he(this,S.extend({},t),a);(r||J.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",a=S.timers,o=J.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&se.test(r)&&i(o[r]);for(r=a.length;r--;)a[r].elem!==this||null!=t&&a[r].queue!==t||(a[r].anim.stop(n),e=!1,a.splice(r,1));!e&&n||S.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=J.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],a=S.timers,o=i?i.length:0;for(n.finish=!0,S.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(t,e){var n=S.fn[e];S.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ce(e,!0),t,i,r)}})),S.each({slideDown:ce("show"),slideUp:ce("hide"),slideToggle:ce("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){S.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),S.timers=[],S.fx.tick=function(){var t,e=0,n=S.timers;for(re=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||S.fx.stop(),re=void 0},S.fx.timer=function(t){S.timers.push(t),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ae||(ae=!0,ue())},S.fx.stop=function(){ae=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(t,e){return t=S.fx&&S.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var fe,pe=S.expr.attrHandle;S.fn.extend({attr:function(t,e){return W(this,S.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){S.removeAttr(this,t)}))}}),S.extend({attr:function(t,e,n){var i,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?S.prop(t,e,n):(1===a&&S.isXMLDoc(t)||(r=S.attrHooks[e.toLowerCase()]||(S.expr.match.bool.test(e)?fe:void 0)),void 0!==n?null===n?void S.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=S.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&L(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(U);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),fe={set:function(t,e,n){return!1===e?S.removeAttr(t,n):t.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=pe[e]||S.find.attr;pe[e]=function(t,e,i){var r,a,o=e.toLowerCase();return i||(a=pe[o],pe[o]=r,r=null!=n(t,e,i)?o:null,pe[o]=a),r}}));var ge=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ve(t){return(t.match(U)||[]).join(" ")}function ye(t){return t.getAttribute&&t.getAttribute("class")||""}function _e(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(U)||[]}S.fn.extend({prop:function(t,e){return W(this,S.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[S.propFix[t]||t]}))}}),S.extend({prop:function(t,e,n){var i,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(t)||(e=S.propFix[e]||e,r=S.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(S.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(t){var e,n,i,r,a,o,s,u=0;if(y(t))return this.each((function(e){S(this).addClass(t.call(this,e,ye(this)))}));if((e=_e(t)).length)for(;n=this[u++];)if(r=ye(n),i=1===n.nodeType&&" "+ve(r)+" "){for(o=0;a=e[o++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(s=ve(i))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,a,o,s,u=0;if(y(t))return this.each((function(e){S(this).removeClass(t.call(this,e,ye(this)))}));if(!arguments.length)return this.attr("class","");if((e=_e(t)).length)for(;n=this[u++];)if(r=ye(n),i=1===n.nodeType&&" "+ve(r)+" "){for(o=0;a=e[o++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");r!==(s=ve(i))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=i(t),r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):y(t)?this.each((function(n){S(this).toggleClass(t.call(this,n,ye(this),e),e)})):this.each((function(){var e,i,a,o;if(r)for(i=0,a=S(this),o=_e(t);e=o[i++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==n||((e=ye(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ve(ye(n))+" ").indexOf(e)>-1)return!0;return!1}});var be=/\r/g;S.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=y(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,S(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=S.map(r,(function(t){return null==t?"":t+""}))),(e=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=S.valHooks[r.type]||S.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(be,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:ve(S.text(t))}},select:{get:function(t){var e,n,i,r=t.options,a=t.selectedIndex,o="select-one"===t.type,s=o?null:[],u=o?a+1:r.length;for(i=a<0?u:o?a:0;i<u;i++)if(((n=r[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!L(n.parentNode,"optgroup"))){if(e=S(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,a=S.makeArray(e),o=r.length;o--;)((i=r[o]).selected=S.inArray(S.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(t.selectedIndex=-1),a}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=S.inArray(S(t).val(),e)>-1}},v.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),v.focusin="onfocusin"in r;var Ee=/^(?:focusinfocus|focusoutblur)$/,Te=function(t){t.stopPropagation()};S.extend(S.event,{trigger:function(t,e,n,a){var o,s,u,l,c,d,h,f,g=[n||b],m=p.call(t,"type")?t.type:t,v=p.call(t,"namespace")?t.namespace.split("."):[];if(s=f=u=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!Ee.test(m+S.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),c=m.indexOf(":")<0&&"on"+m,(t=t[S.expando]?t:new S.Event(m,"object"===i(t)&&t)).isTrigger=a?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:S.makeArray(e,[t]),h=S.event.special[m]||{},a||!h.trigger||!1!==h.trigger.apply(n,e))){if(!a&&!h.noBubble&&!_(n)){for(l=h.delegateType||m,Ee.test(l+m)||(s=s.parentNode);s;s=s.parentNode)g.push(s),u=s;u===(n.ownerDocument||b)&&g.push(u.defaultView||u.parentWindow||r)}for(o=0;(s=g[o++])&&!t.isPropagationStopped();)f=s,t.type=o>1?l:h.bindType||m,(d=(J.get(s,"events")||Object.create(null))[t.type]&&J.get(s,"handle"))&&d.apply(s,e),(d=c&&s[c])&&d.apply&&$(s)&&(t.result=d.apply(s,e),!1===t.result&&t.preventDefault());return t.type=m,a||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(g.pop(),e)||!$(n)||c&&y(n[m])&&!_(n)&&((u=n[c])&&(n[c]=null),S.event.triggered=m,t.isPropagationStopped()&&f.addEventListener(m,Te),n[m](),t.isPropagationStopped()&&f.removeEventListener(m,Te),S.event.triggered=void 0,u&&(n[c]=u)),t.result}},simulate:function(t,e,n){var i=S.extend(new S.Event,n,{type:t,isSimulated:!0});S.event.trigger(i,null,e)}}),S.fn.extend({trigger:function(t,e){return this.each((function(){S.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return S.event.trigger(t,e,n,!0)}}),v.focusin||S.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){S.event.simulate(e,t.target,S.event.fix(t))};S.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=J.access(i,e);r||i.addEventListener(t,n,!0),J.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=J.access(i,e)-1;r?J.access(i,e,r):(i.removeEventListener(t,n,!0),J.remove(i,e))}}}));var Ae=r.location,Se={guid:Date.now()},we=/\?/;S.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var ke=/\[\]$/,Ce=/\r?\n/g,xe=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;function Le(t,e,n,r){var a;if(Array.isArray(e))S.each(e,(function(e,a){n||ke.test(t)?r(t,a):Le(t+"["+("object"===i(a)&&null!=a?e:"")+"]",a,n,r)}));else if(n||"object"!==A(e))r(t,e);else for(a in e)Le(t+"["+a+"]",e[a],n,r)}S.param=function(t,e){var n,i=[],r=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,(function(){r(this.name,this.value)}));else for(n in t)Le(n,t[n],e,r);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&De.test(this.nodeName)&&!xe.test(t)&&(this.checked||!mt.test(t))})).map((function(t,e){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(t){return{name:e.name,value:t.replace(Ce,"\r\n")}})):{name:e.name,value:n.replace(Ce,"\r\n")}})).get()}});var Re=/%20/g,Ie=/#.*$/,Pe=/([?&])_=[^&]*/,Oe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ne=/^(?:GET|HEAD)$/,Me=/^\/\//,Fe={},Ue={},Be="*/".concat("*"),je=b.createElement("a");function He(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,a=e.toLowerCase().match(U)||[];if(y(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Ve(t,e,n,i){var r={},a=t===Ue;function o(s){var u;return r[s]=!0,S.each(t[s]||[],(function(t,s){var l=s(e,n,i);return"string"!=typeof l||a||r[l]?a?!(u=l):void 0:(e.dataTypes.unshift(l),o(l),!1)})),u}return o(e.dataTypes[0])||!r["*"]&&o("*")}function Ge(t,e){var n,i,r=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&S.extend(!0,t,i),t}je.href=Ae.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ae.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ae.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ge(Ge(t,S.ajaxSettings),e):Ge(S.ajaxSettings,t)},ajaxPrefilter:He(Fe),ajaxTransport:He(Ue),ajax:function(t,e){"object"===i(t)&&(e=t,t=void 0);var n,a,o,s,u,l,c,d,h,f,p=S.ajaxSetup({},e=e||{}),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?S(g):S.event,v=S.Deferred(),y=S.Callbacks("once memory"),_=p.statusCode||{},E={},T={},A="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Oe.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=T[t.toLowerCase()]=T[t.toLowerCase()]||t,E[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)w.always(t[w.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||A;return n&&n.abort(e),k(0,e),this}};if(v.promise(w),p.url=((t||p.url||Ae.href)+"").replace(Me,Ae.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(U)||[""],null==p.crossDomain){l=b.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=je.protocol+"//"+je.host!=l.protocol+"//"+l.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=S.param(p.data,p.traditional)),Ve(Fe,p,e,w),c)return w;for(h in(d=S.event&&p.global)&&0==S.active++&&S.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ne.test(p.type),a=p.url.replace(Ie,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Re,"+")):(f=p.url.slice(a.length),p.data&&(p.processData||"string"==typeof p.data)&&(a+=(we.test(a)?"&":"?")+p.data,delete p.data),!1===p.cache&&(a=a.replace(Pe,"$1"),f=(we.test(a)?"&":"?")+"_="+Se.guid+++f),p.url=a+f),p.ifModified&&(S.lastModified[a]&&w.setRequestHeader("If-Modified-Since",S.lastModified[a]),S.etag[a]&&w.setRequestHeader("If-None-Match",S.etag[a])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Be+"; q=0.01":""):p.accepts["*"]),p.headers)w.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(g,w,p)||c))return w.abort();if(A="abort",y.add(p.complete),w.done(p.success),w.fail(p.error),n=Ve(Ue,p,e,w)){if(w.readyState=1,d&&m.trigger("ajaxSend",[w,p]),c)return w;p.async&&p.timeout>0&&(u=r.setTimeout((function(){w.abort("timeout")}),p.timeout));try{c=!1,n.send(E,k)}catch(t){if(c)throw t;k(-1,t)}}else k(-1,"No Transport");function k(t,e,i,s){var l,h,f,b,E,T=e;c||(c=!0,u&&r.clearTimeout(u),n=void 0,o=s||"",w.readyState=t>0?4:0,l=t>=200&&t<300||304===t,i&&(b=function(t,e,n){for(var i,r,a,o,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){u.unshift(r);break}if(u[0]in n)a=u[0];else{for(r in n){if(!u[0]||t.converters[r+" "+u[0]]){a=r;break}o||(o=r)}a=a||o}if(a)return a!==u[0]&&u.unshift(a),n[a]}(p,w,i)),!l&&S.inArray("script",p.dataTypes)>-1&&S.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),b=function(t,e,n,i){var r,a,o,s,u,l={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(a=c.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(o=l[u+" "+a]||l["* "+a]))for(r in l)if((s=r.split(" "))[1]===a&&(o=l[u+" "+s[0]]||l["* "+s[0]])){!0===o?o=l[r]:!0!==l[r]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+u+" to "+a}}}return{state:"success",data:e}}(p,b,w,l),l?(p.ifModified&&((E=w.getResponseHeader("Last-Modified"))&&(S.lastModified[a]=E),(E=w.getResponseHeader("etag"))&&(S.etag[a]=E)),204===t||"HEAD"===p.type?T="nocontent":304===t?T="notmodified":(T=b.state,h=b.data,l=!(f=b.error))):(f=T,!t&&T||(T="error",t<0&&(t=0))),w.status=t,w.statusText=(e||T)+"",l?v.resolveWith(g,[h,T,w]):v.rejectWith(g,[w,T,f]),w.statusCode(_),_=void 0,d&&m.trigger(l?"ajaxSuccess":"ajaxError",[w,p,l?h:f]),y.fireWith(g,[w,T]),d&&(m.trigger("ajaxComplete",[w,p]),--S.active||S.event.trigger("ajaxStop")))}return w},getJSON:function(t,e,n){return S.get(t,e,n,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],(function(t,e){S[e]=function(t,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),S.ajax(S.extend({url:t,type:e,dataType:r,data:n,success:i},S.isPlainObject(t)&&t))}})),S.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),S._evalUrl=function(t,e,n){return S.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){S.globalEval(t,e,n)}})},S.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){S(this).wrapInner(t.call(this,e))})):this.each((function(){var e=S(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){S(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(t){return!S.expr.pseudos.visible(t)},S.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var qe={0:200,1223:204},We=S.ajaxSettings.xhr();v.cors=!!We&&"withCredentials"in We,v.ajax=We=!!We,S.ajaxTransport((function(t){var e,n;if(v.cors||We&&!t.crossDomain)return{send:function(i,a){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(qe[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){e&&n()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),S.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),S.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=S("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Ke,Ye=[],ze=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||S.expando+"_"+Se.guid++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",(function(t,e,n){var i,a,o,s=!1!==t.jsonp&&(ze.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ze.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ze,"$1"+i):!1!==t.jsonp&&(t.url+=(we.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||S.error(i+" was not called"),o[0]},t.dataTypes[0]="json",a=r[i],r[i]=function(){o=arguments},n.always((function(){void 0===a?S(r).removeProp(i):r[i]=a,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ye.push(i)),o&&y(a)&&a(o[0]),o=a=void 0})),"script"})),v.createHTMLDocument=((Ke=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ke.childNodes.length),S.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((i=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(i)):e=b),a=!n&&[],(r=R.exec(t))?[e.createElement(r[1])]:(r=At([t],e,a),a&&a.length&&S(a).remove(),S.merge([],r.childNodes)));var i,r,a},S.fn.load=function(t,e,n){var r,a,o,s=this,u=t.indexOf(" ");return u>-1&&(r=ve(t.slice(u)),t=t.slice(0,u)),y(e)?(n=e,e=void 0):e&&"object"===i(e)&&(a="POST"),s.length>0&&S.ajax({url:t,type:a||"GET",dataType:"html",data:e}).done((function(t){o=arguments,s.html(r?S("<div>").append(S.parseHTML(t)).find(r):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,(function(e){return t===e.elem})).length},S.offset={setOffset:function(t,e,n){var i,r,a,o,s,u,l=S.css(t,"position"),c=S(t),d={};"static"===l&&(t.style.position="relative"),s=c.offset(),a=S.css(t,"top"),u=S.css(t,"left"),("absolute"===l||"fixed"===l)&&(a+u).indexOf("auto")>-1?(o=(i=c.position()).top,r=i.left):(o=parseFloat(a)||0,r=parseFloat(u)||0),y(e)&&(e=e.call(t,n,S.extend({},s))),null!=e.top&&(d.top=e.top-s.top+o),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):c.css(d)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){S.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===S.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===S.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=S(t).offset()).top+=S.css(t,"borderTopWidth",!0),r.left+=S.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-S.css(i,"marginTop",!0),left:e.left-r.left-S.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===S.css(t,"position");)t=t.offsetParent;return t||ot}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;S.fn[t]=function(i){return W(this,(function(t,i,r){var a;if(_(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===r)return a?a[e]:t[i];a?a.scrollTo(n?a.pageXOffset:r,n?r:a.pageYOffset):t[i]=r}),t,i,arguments.length)}})),S.each(["top","left"],(function(t,e){S.cssHooks[e]=Wt(v.pixelPosition,(function(t,n){if(n)return n=qt(t,e),jt.test(n)?S(t).position()[e]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(t,e){S.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){S.fn[i]=function(r,a){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===a?"margin":"border");return W(this,(function(e,n,r){var a;return _(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===r?S.css(e,n,s):S.style(e,n,r,s)}),e,o?r:void 0,o)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){S.fn[e]=function(t){return this.on(e,t)}})),S.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){S.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Xe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=u.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(u.call(arguments)))}).guid=t.guid=t.guid||S.guid++,r},S.holdReady=function(t){t?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=L,S.isFunction=y,S.isWindow=_,S.camelCase=X,S.type=A,S.now=Date.now,S.isNumeric=function(t){var e=S.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},S.trim=function(t){return null==t?"":(t+"").replace(Xe,"")},void 0===(n=function(){return S}.apply(e,[]))||(t.exports=n);var $e=r.jQuery,Qe=r.$;return S.noConflict=function(t){return r.$===S&&(r.$=Qe),t&&r.jQuery===S&&(r.jQuery=$e),S},void 0===a&&(r.jQuery=r.$=S),S}))}).call(this,n(6)(t))},function(t,e,n){var i,r,a;r=[n(0)],void 0===(a="function"==typeof(i=function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"})?i.apply(e,r):i)||(t.exports=a)},function(t,e,n){var i,r;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(o){var s;if(void 0===(r="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=r),s=!0,"object"===a(e)&&(t.exports=o(),s=!0),!s){var u=window.Cookies,l=window.Cookies=o();l.noConflict=function(){return window.Cookies=u,l}}}((function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function r(){}function a(e,n,a){if("undefined"!=typeof document){"number"==typeof(a=t({path:"/"},r.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(t){}n=i.write?i.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,!0!==a[u]&&(s+="="+a[u].split(";")[0]));return document.cookie=e+"="+n+s}}function o(t,n){if("undefined"!=typeof document){for(var r={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var l=e(s[0]);if(u=(i.read||i)(u,l)||e(u),n)try{u=JSON.parse(u)}catch(t){}if(r[l]=u,t===l)break}catch(t){}}return t?r[t]:r}}return r.set=a,r.get=function(t){return o(t,!1)},r.getJSON=function(t){return o(t,!0)},r.remove=function(e,n){a(e,"",t(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))}))},function(t,e,n){"use strict";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function s(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function u(t,e){for(var n={},i=[],r=0;r<t.length;r++){var a=t[r],u=e.base?a[0]+e.base:a[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var d=s(c),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(o[d].references++,o[d].updater(h)):o.push({identifier:c,updater:m(h,e),references:1}),i.push(c)}return i}function l(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var o=a(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var c,d=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function h(t,e,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var a=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function f(t,e,n){var i=n.css,r=n.media,a=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var p=null,g=0;function m(t,e){var n,i,r;if(e.singleton){var a=g++;n=p||(p=l(e)),i=h.bind(null,n,a,!1),r=h.bind(null,n,a,!0)}else n=l(e),i=f.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=u(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var r=s(n[i]);o[r].references--}for(var a=u(t,e),l=0;l<n.length;l++){var c=s(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=a}}}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=(o=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),a=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(a).concat([r]).join("\n")}var o,s,u;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);i&&r[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e){t.exports='<svg class="spinner transport-icon" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path outline" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg>'},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(0),n(1)],void 0===(a="function"==typeof(i=function(t){var e,n=0,i=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(n){var i,r,a;for(a=0;null!=(r=n[a]);a++)try{(i=t._data(r,"events"))&&i.remove&&t(r).triggerHandler("remove")}catch(t){}e(n)}),t.widget=function(e,n,i){var r,a,o,s={},u=e.split(".")[0],l=u+"-"+(e=e.split(".")[1]);return i||(i=n,n=t.Widget),t.isArray(i)&&(i=t.extend.apply(null,[{}].concat(i))),t.expr[":"][l.toLowerCase()]=function(e){return!!t.data(e,l)},t[u]=t[u]||{},r=t[u][e],a=t[u][e]=function(t,e){if(!this._createWidget)return new a(t,e);arguments.length&&this._createWidget(t,e)},t.extend(a,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),(o=new n).options=t.widget.extend({},o.options),t.each(i,(function(e,i){t.isFunction(i)?s[e]=function(){function t(){return n.prototype[e].apply(this,arguments)}function r(t){return n.prototype[e].apply(this,t)}return function(){var e,n=this._super,a=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=a,e}}():s[e]=i})),a.prototype=t.widget.extend(o,{widgetEventPrefix:r&&o.widgetEventPrefix||e},s,{constructor:a,namespace:u,widgetName:e,widgetFullName:l}),r?(t.each(r._childConstructors,(function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)})),delete r._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var n,r,a=i.call(arguments,1),o=0,s=a.length;o<s;o++)for(n in a[o])r=a[o][n],a[o].hasOwnProperty(n)&&void 0!==r&&(t.isPlainObject(r)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],r):t.widget.extend({},r):e[n]=r);return e},t.widget.bridge=function(e,n){var r=n.prototype.widgetFullName||e;t.fn[e]=function(a){var o="string"==typeof a,s=i.call(arguments,1),u=this;return o?this.length||"instance"!==a?this.each((function(){var n,i=t.data(this,r);return"instance"===a?(u=i,!1):i?t.isFunction(i[a])&&"_"!==a.charAt(0)?(n=i[a].apply(i,s))!==i&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0:t.error("no such method '"+a+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+a+"'")})):u=void 0:(s.length&&(a=t.widget.extend.apply(null,[a].concat(s))),this.each((function(){var e=t.data(this,r);e?(e.option(a||{}),e._init&&e._init()):t.data(this,r,new n(a,this))}))),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,n){e._removeClass(n,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,a,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},i=e.split("."),e=i.shift(),i.length){for(r=o[e]=t.widget.extend({},this.options[e]),a=0;a<i.length-1;a++)r[i[a]]=r[i[a]]||{},r=r[i[a]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=n}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var n,i,r;for(n in e)r=this.classesElementLookup[n],e[n]!==this.options.classes[n]&&r&&r.length&&(i=t(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var n=[],i=this;function r(r,a){var o,s;for(s=0;s<r.length;s++)o=i.classesElementLookup[r[s]]||t(),o=e.add?t(t.unique(o.get().concat(e.element.get()))):t(o.not(e.element).get()),i.classesElementLookup[r[s]]=o,n.push(r[s]),a&&e.classes[r[s]]&&n.push(e.classes[r[s]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&r(e.keys.match(/\S+/g)||[],!0),e.extra&&r(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var n=this;t.each(n.classesElementLookup,(function(i,r){-1!==t.inArray(e.target,r)&&(n.classesElementLookup[i]=t(r.not(e.target).get()))}))},_removeClass:function(t,e,n){return this._toggleClass(t,e,n,!1)},_addClass:function(t,e,n){return this._toggleClass(t,e,n,!0)},_toggleClass:function(t,e,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof t||null===t,a={extra:r?e:n,keys:r?t:e,element:r?this.element:t,add:i};return a.element.toggleClass(this._classes(a),i),this},_on:function(e,n,i){var r,a=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,(function(i,o){function s(){if(e||!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||t.guid++);var u=i.match(/^([\w:-]*)\s*(.*)$/),l=u[1]+a.eventNamespace,c=u[2];c?r.on(l,c,s):n.on(l,s)}))},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(n).off(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var n=this;return setTimeout((function(){return("string"==typeof t?n[t]:t).apply(n,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,n,i){var r,a,o=this.options[e];if(i=i||{},(n=t.Event(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(r in a)r in n||(n[r]=a[r]);return this.element.trigger(n,i),!(t.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,n){t.Widget.prototype["_"+e]=function(i,r,a){var o;"string"==typeof r&&(r={effect:r});var s=r?!0===r||"number"==typeof r?n:r.effect||n:e;"number"==typeof(r=r||{})&&(r={duration:r}),o=!t.isEmptyObject(r),r.complete=a,r.delay&&i.delay(r.delay),o&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,a):i.queue((function(n){t(this)[e](),a&&a.call(i[0]),n()}))}})),t.widget})?i.apply(e,r):i)||(t.exports=a)},function(t,e,n){"use strict";var i=n(25);t.exports=function(t,e){var n=i(t);null==e&&(e=n.alpha);if("h"===n.space[0])return n.space+["a(",n.values[0],",",n.values[1],"%,",n.values[2],"%,",e,")"].join("");return n.space+["a(",n.values,",",e,")"].join("")}},function(t,e,n){"use strict";var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.target,i=void 0===n?document.body:n,r=document.createElement("textarea"),a=document.activeElement;r.value=t,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";var o=document.getSelection(),s=!1;o.rangeCount>0&&(s=o.getRangeAt(0)),i.append(r),r.select(),r.selectionStart=0,r.selectionEnd=t.length;var u=!1;try{u=document.execCommand("copy")}catch(t){}return r.remove(),s&&(o.removeAllRanges(),o.addRange(s)),a&&a.focus(),u};t.exports=i,t.exports.default=i},function(t,e){t.exports='<div class="td_container"></div> <button class="loading transport-button" aria-live="polite"></button> <div class="volume-slider-container" style="display:none"><div class="volume-slider" style="display:none"></div></div> '},function(t,e){t.exports='<svg class="play transport-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34.64 40"><polygon class="shape" points="34.64,20 0,0 0,40 "></polygon></svg>'},function(t,e){t.exports='<svg class="stop transport-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><rect class="shape" width="40" height="40"></rect></svg>'},function(t,e,n){t.exports=n(27)},function(module,exports,__webpack_require__){(function(module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,e;function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e=function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="./",e(0)}([function(t,e,n){n(63),n(112),t.exports=n(113)},function(t,e,n){var i,r;i=[n(5),n(4),n(2)],void 0===(r=function(t,e,n){function i(t,e){throw new Error("declare"+(e?" "+e:"")+": "+t)}function r(t,e){for(var n,r,a,o,s,u,l,c,d=[],h=[{cls:0,refs:[]}],f={},p=1,g=t.length,m=0;m<g;++m){for((a=t[m])?"[object Function]"!=b.call(a)&&i("mixin #"+m+" is not a callable constructor.",e):i("mixin #"+m+" is unknown. Did you use dojo.require to pull it in?",e),o=0,n=(r=a._meta?a._meta.bases:[a]).length-1;n>=0;--n)(s=r[n].prototype).hasOwnProperty("declaredClass")||(s.declaredClass="uniqName_"+T++),l=s.declaredClass,f.hasOwnProperty(l)||(f[l]={count:0,refs:[],cls:r[n]},++p),u=f[l],o&&o!==u&&(u.refs.push(o),++o.count),o=u;++o.count,h[0].refs.push(o)}for(;h.length;){for(o=h.pop(),d.push(o.cls),--p;1==(c=o.refs).length;){if(!(o=c[0])||--o.count){o=0;break}d.push(o.cls),--p}if(o)for(m=0,g=c.length;m<g;++m)--(o=c[m]).count||h.push(o)}return p&&i("can't build consistent linearization",e),a=t[0],d[0]=a?a._meta&&a===d[d.length-a._meta.bases.length]?a._meta.bases.length:1:0,d}function a(t,e,n){var r,a,o,s,u,l,c,d,h,f=this._inherited=this._inherited||{};if("string"==typeof t&&(r=t,t=e,e=n),n=0,s=t.callee,(r=r||s.nom)||i("can't deduce a name to call inherited()",this.declaredClass),o=(u=this.constructor._meta).bases,h=f.p,r!=A){if(f.c!==s&&(h=0,(u=(l=o[0])._meta).hidden[r]!==s)){(a=u.chains)&&"string"==typeof a[r]&&i("calling chained method with inherited: "+r,this.declaredClass);do{if(u=l._meta,c=l.prototype,u&&(c[r]===s&&c.hasOwnProperty(r)||u.hidden[r]===s))break}while(l=o[++h]);h=l?h:-1}if(l=o[++h])if(c=l.prototype,l._meta&&c.hasOwnProperty(r))n=c[r];else{d=_[r];do{if((n=(c=l.prototype)[r])&&(l._meta?c.hasOwnProperty(r):n!==d))break}while(l=o[++h])}n=l&&n||_[r]}else{if(f.c!==s&&(h=0,(u=o[0]._meta)&&u.ctor!==s)){for((a=u.chains)&&"manual"===a.constructor||i("calling chained constructor with inherited",this.declaredClass);(l=o[++h])&&(!(u=l._meta)||u.ctor!==s););h=l?h:-1}for(;(l=o[++h])&&!(n=(u=l._meta)?u.ctor:l););n=l&&n}if(f.c=n,f.p=h,n)return!0===e?n:n.apply(this,e||t)}function o(t,e){return"string"==typeof t?this.__inherited(t,e,!0):this.__inherited(t,!0)}function s(t){for(var e=this.constructor._meta.bases,n=0,i=e.length;n<i;++n)if(e[n]===t)return!0;return this instanceof t}function u(t,i){for(var r in i)r!=A&&i.hasOwnProperty(r)&&(t[r]=i[r]);if(e("bug-for-in-skips-shadowed"))for(var a=n._extraNames,o=a.length;o;)(r=a[--o])!=A&&i.hasOwnProperty(r)&&(t[r]=i[r])}function l(t){return v.safeMixin(this.prototype,t),this}function c(t,e){return v([this].concat(t),e||{})}function d(t,e){return function(){var n,i,r,a,o=arguments,s=o,u=o[0],l=t.length;if(!(this instanceof o.callee))return m(o);if(e&&(u&&u.preamble||this.preamble))for((a=new Array(t.length))[0]=o,i=0;(u=o[0])&&(n=u.preamble)&&(o=n.apply(this,o)||o),(n=(n=t[i].prototype).hasOwnProperty("preamble")&&n.preamble)&&(o=n.apply(this,o)||o),++i!=l;)a[i]=o;for(i=l-1;i>=0;--i)(n=(r=(n=t[i])._meta)?r.ctor:n)&&n.apply(this,a?a[i]:o);(n=this.postscript)&&n.apply(this,s)}}function h(t,e){return function(){var n,i=arguments,r=i,a=i[0];return this instanceof i.callee?(e&&(a&&(n=a.preamble)&&(r=n.apply(this,r)||r),(n=this.preamble)&&n.apply(this,r)),t&&t.apply(this,i),void((n=this.postscript)&&n.apply(this,i))):m(i)}}function f(t){return function(){var e,n,i=arguments,r=0;if(!(this instanceof i.callee))return m(i);for(;e=t[r];++r)if(e=(n=e._meta)?n.ctor:e){e.apply(this,i);break}(e=this.postscript)&&e.apply(this,i)}}function p(t,e,n){return function(){var i,r,a,o=0,s=1;for(n&&(o=e.length-1,s=-1);i=e[o];o+=s)(a=((r=i._meta)?r.hidden:i.prototype)[t])&&a.apply(this,arguments)}}function g(t){E.prototype=t.prototype;var e=new E;return E.prototype=null,e}function m(t){var e=t.callee,n=g(e);return e.apply(n,t),n}function v(t,e,m){"string"!=typeof t&&(m=e,e=t,t=""),m=m||{};var E,T,w,k,C,x,D,L=1,R=e;if("[object Array]"==b.call(e)?(w=(x=r(e,t))[0],e=x[L=x.length-w]):(x=[0],e?"[object Function]"==b.call(e)?(w=e._meta,x=x.concat(w?w.bases:e)):i("base class is not a callable constructor.",t):null!==e&&i("unknown base class. Did you use dojo.require to pull it in?",t)),e)for(T=L-1;E=g(e),T;--T)((w=x[T])._meta?u:y)(E,w.prototype),(k=new Function).superclass=e,k.prototype=E,e=E.constructor=k;else E={};for(v.safeMixin(E,m),(w=m.constructor)!==_.constructor&&(w.nom=A,E.constructor=w),T=L-1;T;--T)(w=x[T]._meta)&&w.chains&&(D=y(D||{},w.chains));if(E["-chains-"]&&(D=y(D||{},E["-chains-"])),w=!D||!D.hasOwnProperty(A),x[0]=k=D&&"manual"===D.constructor?f(x):1==x.length?h(m.constructor,w):d(x,w),k._meta={bases:x,hidden:m,chains:D,parents:R,ctor:m.constructor},k.superclass=e&&e.prototype,k.extend=l,k.createSubclass=c,k.prototype=E,E.constructor=k,E.getInherited=o,E.isInstanceOf=s,E.inherited=S,E.__inherited=a,t&&(E.declaredClass=t,n.setObject(t,k)),D)for(C in D)E[C]&&"string"==typeof D[C]&&C!=A&&((w=E[C]=p(C,x,"after"===D[C])).nom=C);return k}var y=n.mixin,_=Object.prototype,b=_.toString,E=new Function,T=0,A="constructor",S=t.config.isDebug?function(t,e,n){var i=this.getInherited(t,e);if(i)return i.apply(this,n||e||t)}:a;return t.safeMixin=v.safeMixin=function(t,i){var r,a;for(r in i)(a=i[r])===_[r]&&r in _||r==A||("[object Function]"==b.call(a)&&(a.nom=r),t[r]=a);if(e("bug-for-in-skips-shadowed"))for(var o=n._extraNames,s=o.length;s;)(a=i[r=o[--s]])===_[r]&&r in _||r==A||("[object Function]"==b.call(a)&&(a.nom=r),t[r]=a);return t},t.declare=v,v}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(5),n(4),n(9)],void 0===(r=function(t,e){e.add("bug-for-in-skips-shadowed",(function(){for(var t in{toString:1})return 0;return 1}));var n=e("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],i=n.length,r=function(e,n,i){var r,a=0,o=t.global;if(!i){if(!e.length)return o;r=e[a++];try{i=t.scopeMap[r]&&t.scopeMap[r][1]}catch(t){}i=i||(r in o?o[r]:n?o[r]={}:void 0)}for(;i&&(r=e[a++]);)i=r in i?i[r]:n?i[r]={}:void 0;return i},a=Object.prototype.toString,o=function(t,e,n){return(n||[]).concat(Array.prototype.slice.call(t,e||0))},s=/\{([^\}]+)\}/g,u={_extraNames:n,_mixin:function(t,r,a){var o,s,u,l={};for(o in r)s=r[o],o in t&&(t[o]===s||o in l&&l[o]===s)||(t[o]=a?a(s):s);if(e("bug-for-in-skips-shadowed")&&r)for(u=0;u<i;++u)s=r[o=n[u]],o in t&&(t[o]===s||o in l&&l[o]===s)||(t[o]=a?a(s):s);return t},mixin:function(t,e){t||(t={});for(var n=1,i=arguments.length;n<i;n++)u._mixin(t,arguments[n]);return t},setObject:function(t,e,n){var i=t.split("."),a=i.pop(),o=r(i,!0,n);return o&&a?o[a]=e:void 0},getObject:function(t,e,n){return r(t.split("."),e,n)},exists:function(t,e){return void 0!==u.getObject(t,!1,e)},isString:function(t){return"string"==typeof t||t instanceof String},isArray:function(t){return t&&(t instanceof Array||"array"==typeof t)},isFunction:function(t){return"[object Function]"===a.call(t)},isObject:function(t){return void 0!==t&&(null===t||"object"==_typeof(t)||u.isArray(t)||u.isFunction(t))},isArrayLike:function(t){return t&&void 0!==t&&!u.isString(t)&&!u.isFunction(t)&&!(t.tagName&&"form"==t.tagName.toLowerCase())&&(u.isArray(t)||isFinite(t.length))},isAlien:function(t){return t&&!u.isFunction(t)&&/\{\s*\[native code\]\s*\}/.test(String(t))},extend:function(t,e){for(var n=1,i=arguments.length;n<i;n++)u._mixin(t.prototype,arguments[n]);return t},_hitchArgs:function(e,n){var i=u._toArray(arguments,2),r=u.isString(n);return function(){var a=u._toArray(arguments),o=r?(e||t.global)[n]:n;return o&&o.apply(e||this,i.concat(a))}},hitch:function(e,n){if(arguments.length>2)return u._hitchArgs.apply(t,arguments);if(n||(n=e,e=null),u.isString(n)){if(!(e=e||t.global)[n])throw['lang.hitch: scope["',n,'"] is null (scope="',e,'")'].join("");return function(){return e[n].apply(e,arguments||[])}}return e?function(){return n.apply(e,arguments||[])}:n},delegate:function(){function t(){}return function(e,n){t.prototype=e;var i=new t;return t.prototype=null,n&&u._mixin(i,n),i}}(),_toArray:e("ie")?function(){function t(t,e,n){for(var i=n||[],r=e||0;r<t.length;r++)i.push(t[r]);return i}return function(e){return(e.item?t:o).apply(this,arguments)}}():o,partial:function(e){var n=[null];return u.hitch.apply(t,n.concat(u._toArray(arguments)))},clone:function(t){if(!t||"object"!=_typeof(t)||u.isFunction(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var e,n,i;if(u.isArray(t))for(e=[],n=0,i=t.length;n<i;++n)n in t&&e.push(u.clone(t[n]));else e=t.constructor?new t.constructor:{};return u._mixin(e,t,u.clone)},trim:String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(t,e,n){return t.replace(n||s,u.isFunction(e)?e:function(t,n){return u.getObject(n,!1,e)})}};return e("extend-dojo")&&u.mixin(t,u),u}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(33),n(5),n(9)],void 0===(r=function(t,e,n){"use strict";function i(t,e,i,r,a){var o=e.match(/(.*):(.*)/);if(o)return e=o[2],o=o[1],s.selector(o,e).call(a,t,i);if(n("touch")&&(u.test(e)&&(i=A(i)),n("event-orientationchange")||"orientationchange"!=e||(e="resize",t=window,i=A(i))),f&&(i=f(i)),t.addEventListener){var l=e in d,c=l?d[e]:e;return t.addEventListener(c,i,l),{remove:function(){t.removeEventListener(c,i,l)}}}if(e="on"+e,v&&t.attachEvent)return v(t,e,i);throw new Error("Target must be an event emitter")}function r(){this.cancelable=!1,this.defaultPrevented=!0}function a(){this.bubbles=!1}if(n("dom")){var o=window.ScriptEngineMajorVersion;n.add("jscript",o&&o()+ScriptEngineMinorVersion()/10),n.add("event-orientationchange",n("touch")&&!n("android")),n.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),n.add("event-focusin",(function(t,e,n){return!!n.attachEvent}))}var s=function t(e,n,r,a){return"function"!=typeof e.on||"function"==typeof n||e.nodeType?t.parse(e,n,r,i,a,this):e.on(n,r)};s.pausable=function(t,e,n,i){var r,a=s(t,e,(function(){if(!r)return n.apply(this,arguments)}),i);return a.pause=function(){r=!0},a.resume=function(){r=!1},a},s.once=function(t,e,n,i){var r=s(t,e,(function(){return r.remove(),n.apply(this,arguments)}));return r},s.parse=function(t,e,n,i,r,a){if(e.call)return e.call(a,t,n);if(e.indexOf(",")>-1){for(var o,s=e.split(/\s*,\s*/),u=[],l=0;o=s[l++];)u.push(i(t,o,n,r,a));return u.remove=function(){for(var t=0;t<u.length;t++)u[t].remove()},u}return i(t,e,n,r,a)};var u=/^touch/;s.selector=function(t,n,i){return function(r,a){function o(n){for(u=u&&u.matches?u:e.query;!u.matches(n,t,r);)if(n==r||!1===i||!(n=n.parentNode)||1!=n.nodeType)return;return n}var u="function"==typeof t?{matches:t}:this,l=n.bubble;return l?s(r,l(o),a):s(r,n,(function(t){var e=o(t.target);return e&&a.call(e,t)}))}};var l=[].slice,c=s.emit=function(t,e,n){var i=l.call(arguments,2),o="on"+e;if("parentNode"in t){var s=i[0]={};for(var u in n)s[u]=n[u];s.preventDefault=r,s.stopPropagation=a,s.target=t,s.type=e,n=s}do{t[o]&&t[o].apply(t,i)}while(n&&n.bubbles&&(t=t.parentNode));return n&&n.cancelable&&n},d=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var h=function(){this.immediatelyStopped=!0,this.modified=!0},f=function(t){return function(e){if(!e.immediatelyStopped)return e.stopImmediatePropagation=h,t.apply(this,arguments)}};if(n("dom-addeventlistener"))s.emit=function(t,e,n){if(t.dispatchEvent&&document.createEvent){var i=t.ownerDocument.createEvent("HTMLEvents");for(var r in i.initEvent(e,!!n.bubbles,!!n.cancelable),n)r in i||(i[r]=n[r]);return t.dispatchEvent(i)&&i}return c.apply(s,arguments)};else{s._fixEvent=function(t,e){if(t||(t=(e&&(e.ownerDocument||e.document||e).parentWindow||window).event),!t)return t;try{p&&t.type==p.type&&t.srcElement==p.target&&(t=p)}catch(t){}if(!t.target)switch(t.target=t.srcElement,t.currentTarget=e||t.srcElement,"mouseover"==t.type&&(t.relatedTarget=t.fromElement),"mouseout"==t.type&&(t.relatedTarget=t.toElement),t.stopPropagation||(t.stopPropagation=_,t.preventDefault=b),t.type){case"keypress":var n="charCode"in t?t.charCode:t.keyCode;10==n?(n=0,t.keyCode=13):13==n||27==n?n=0:3==n&&(n=99),t.charCode=n,y(t)}return t};var p,g=function(t){this.handle=t};g.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var m=function(t){return function(e){e=s._fixEvent(e,this);var n=t.call(this,e);return e.modified&&(p||setTimeout((function(){p=null})),p=e),n}},v=function(e,i,r){if(r=m(r),((e.ownerDocument?e.ownerDocument.parentWindow:e.parentWindow||e.window||window)!=top||n("jscript")<5.8)&&!n("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var a,o=e[i];if(!o||!o.listeners){var s=o;(o=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}")).listeners=[],e[i]=o,o.global=this,s&&o.listeners.push(_dojoIEListeners_.push(s)-1)}return o.listeners.push(a=o.global._dojoIEListeners_.push(r)-1),new g(a)}return t.after(e,i,r,!0)},y=function(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode},_=function(){this.cancelBubble=!0},b=s._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(t){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(n("touch"))var E=function(){},T=window.orientation,A=function(t){return function(e){if(!(r=e.corrected)){var i=e.type;try{delete e.type}catch(t){}if(e.type){if(n("mozilla")){var r={};for(var a in e)r[a]=e[a]}else E.prototype=e,r=new E;r.preventDefault=function(){e.preventDefault()},r.stopPropagation=function(){e.stopPropagation()}}else(r=e).type=i;if(e.corrected=r,"resize"==i)return T==window.orientation?null:(T=window.orientation,r.type="orientationchange",t.call(this,r));"rotation"in r||(r.rotation=0,r.scale=1);var o=r.changedTouches[0];for(var s in o)delete r[s],r[s]=o[s]}return t.call(this,r)}};return s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(27)],void 0===(r=function(t){var e={config:function(){return{"config-deferredInstrumentation":0,"config-dojo-loader-catches":0,"config-tlmSiblingOfDojo":0,"dojo-amd-factory-scan":0,"dojo-combo-api":0,"dojo-config-api":1,"dojo-config-require":0,"dojo-debug-messages":0,"dojo-dom-ready-api":1,"dojo-firebug":0,"dojo-guarantee-console":1,"dojo-has-api":1,"dojo-inject-api":1,"dojo-loader":1,"dojo-log-api":0,"dojo-modulePaths":0,"dojo-moduleUrl":0,"dojo-publish-privates":0,"dojo-requirejs-api":0,"dojo-sniff":1,"dojo-sync-loader":0,"dojo-test-sniff":0,"dojo-timeout-api":0,"dojo-trace-api":0,"dojo-undef-api":0,"dojo-v1x-i18n-Api":1,dom:1,"host-browser":1,"extend-dojo":1,touch:0}}},n=t.has||function(){};if(!n("dojo-has-api")){var i="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,r=this,a=i&&document,o=a&&a.createElement("DiV"),s=e.config&&e.config()||{};(n=function(t){return"function"==typeof s[t]?s[t]=s[t](r,a,o):s[t]}).cache=s,n.add=function(t,e,i,r){return(void 0===s[t]||r)&&(s[t]=e),i&&n(t)},n.add("host-browser",i),n.add("dom",i),n.add("dojo-dom-ready-api",1),n.add("dojo-sniff",1)}if(n("host-browser")){n.add("dom-addeventlistener",!!document.addEventListener),n.add("touch","ontouchstart"in document||window.navigator.msMaxTouchPoints>0),n.add("device-width",screen.availWidth||innerWidth);var u=document.createElement("form");n.add("dom-attributes-explicit",0==u.attributes.length),n.add("dom-attributes-specified-flag",u.attributes.length>0&&u.attributes.length<40)}return n.clearElement=function(t){return t.innerHTML="",t},n.normalize=function(t,e){var i=t.match(/[\?:]|[^:\?]*/g),r=0;return(t=function t(e){var a=i[r++];return":"==a?0:"?"==i[r++]?!e&&n(a)?t():(t(!0),t(e)):a||0}())&&e(t)},n.load=function(t,e,n){t?e([t],n):n()},n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;(function(t){i=[n(4),n(76),n(27),t],void 0===(r=function(t,e,n,i){i={id:"dojo/_base/kernel"};var r,a,o,s={},u={},l={config:e,global:this,dijit:s,dojox:u},c={dojo:["dojo",l],dijit:["dijit",s],dojox:["dojox",u]},d=n.map&&n.map[i.id.match(/[^\/]+/)[0]];for(a in d)c[a]?c[a][0]=d[a]:c[a]=[d[a],{}];for(a in c)(o=c[a])[1]._scopeName=o[0],e.noGlobals||(this[o[0]]=o[1]);l.scopeMap=c,l.baseUrl=l.config.baseUrl=n.baseUrl,l.isAsync=!t("dojo-loader")||n.async,l.locale=e.locale;var h="$Rev: 31379 $".match(/\d+/);if(l.version={major:1,minor:9,patch:0,flag:"",revision:h?+h[0]:NaN,toString:function(){var t=l.version;return t.major+"."+t.minor+"."+t.patch+t.flag+" ("+t.revision+")"}},t.add("extend-dojo",1),Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l),t("host-rhino")?l.exit=function(t){quit(t)}:l.exit=function(){},t.add("dojo-guarantee-console",1),t("dojo-guarantee-console")){"undefined"!=typeof console||(console={});var f,p=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];for(r=0;f=p[r++];)console[f]||function(){var t=f+"";console[t]="log"in console?function(){var e=Array.apply({},arguments);e.unshift(t+":")}:function(){},console[t]._fake=!0}()}if(t.add("dojo-debug-messages",!!e.isDebug),l.deprecated=l.experimental=function(){},t("dojo-debug-messages")&&(l.deprecated=function(t,e,n){var i="DEPRECATED: "+t;e&&(i+=" "+e),n&&(i+=" -- will be removed in version: "+n),console.warn(i)},l.experimental=function(t,e){var n="EXPERIMENTAL: "+t+" -- APIs subject to change without notice.";e&&(n+=" "+e),console.warn(n)}),t.add("dojo-modulePaths",1),t("dojo-modulePaths")&&e.modulePaths){l.deprecated("dojo.modulePaths","use paths configuration");var g={};for(a in e.modulePaths)g[a.replace(/\./g,"/")]=e.modulePaths[a];n({paths:g})}return t.add("dojo-moduleUrl",1),t("dojo-moduleUrl")&&(l.moduleUrl=function(t,e){l.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var i=null;return t&&(i=n.toUrl(t.replace(/\./g,"/")+(e?"/"+e:"")+"/*.*").replace(/\/\*\.\*/,"")+(e?"":"/")),i}),l._hasResource={},l}.apply(e,i))||(t.exports=r)}).call(e,n(28)(t))},function(t,e,n){var i,r;i=[n(5),n(4),n(2)],void 0===(r=function(t,e,n){function i(t){return o[t]=new Function("item","index","array",t)}function r(t){var e=!t;return function(n,r,a){var s,u=0,l=n&&n.length||0;if(l&&"string"==typeof n&&(n=n.split("")),"string"==typeof r&&(r=o[r]||i(r)),a){for(;u<l;++u)if(s=!r.call(a,n[u],u,n),t^s)return!s}else for(;u<l;++u)if(s=!r(n[u],u,n),t^s)return!s;return e}}function a(t){var e=1,n=0,i=0;return t||(e=n=i=-1),function(r,a,o,u){if(u&&e>0)return s.lastIndexOf(r,a,o);var l,c=r&&r.length||0,d=t?c+i:n;for(void 0===o?l=t?n:c+i:o<0?(l=c+o)<0&&(l=n):l=o>=c?c+i:o,c&&"string"==typeof r&&(r=r.split(""));l!=d;l+=e)if(r[l]==a)return l;return-1}}var o={},s={every:r(!1),some:r(!0),indexOf:a(!0),lastIndexOf:a(!1),forEach:function(t,e,n){var r=0,a=t&&t.length||0;if(a&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=o[e]||i(e)),n)for(;r<a;++r)e.call(n,t[r],r,t);else for(;r<a;++r)e(t[r],r,t)},map:function(t,e,n,r){var a=0,s=t&&t.length||0,u=new(r||Array)(s);if(s&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=o[e]||i(e)),n)for(;a<s;++a)u[a]=e.call(n,t[a],a,t);else for(;a<s;++a)u[a]=e(t[a],a,t);return u},filter:function(t,e,n){var r,a=0,s=t&&t.length||0,u=[];if(s&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=o[e]||i(e)),n)for(;a<s;++a)r=t[a],e.call(n,r,a,t)&&u.push(r);else for(;a<s;++a)e(r=t[a],a,t)&&u.push(r);return u},clearCache:function(){o={}}};return e("extend-dojo")&&n.mixin(t,s),s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(9),n(17)],void 0===(r=function(t,e){if(t("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}var n={};t("ie")?n.byId=function(t,n){if("string"!=typeof t)return t;var i=n||e.doc,r=t&&i.getElementById(t);if(r&&(r.attributes.id.value==t||r.id==t))return r;var a=i.all[t];a&&!a.nodeName||(a=[a]);for(var o=0;r=a[o++];)if(r.attributes&&r.attributes.id&&r.attributes.id.value==t||r.id==t)return r}:n.byId=function(t,n){return("string"==typeof t?(n||e.doc).getElementById(t):t)||null},n.isDescendant=function(t,e){try{for(t=n.byId(t),e=n.byId(e);t;){if(t==e)return!0;t=t.parentNode}}catch(t){}return!1},t.add("css-user-select",(function(t,e,n){if(!n)return!1;var i=n.style,r=["Khtml","O","ms","Moz","Webkit"],a=r.length,o="userSelect";do{if(void 0!==i[o])return o}while(a--&&(o=r[a]+"UserSelect"));return!1}));var i=t("css-user-select");return n.setSelectable=i?function(t,e){n.byId(t).style[i]=e?"":"none"}:function(t,e){var i=(t=n.byId(t)).getElementsByTagName("*"),r=i.length;if(e)for(t.removeAttribute("unselectable");r--;)i[r].removeAttribute("unselectable");else for(t.setAttribute("unselectable","on");r--;)i[r].setAttribute("unselectable","on")},n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;(function(t,r){(function(){function a(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function o(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function s(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function u(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function l(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function c(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function d(t,e){return!(null==t||!t.length)&&E(t,e,0)>-1}function h(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function f(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function p(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function g(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function m(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function v(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function y(t){return t.match(Xt)||[]}function _(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function b(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function E(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):b(t,A,n)}function T(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function A(t){return t!=t}function S(t,e){var n=null==t?0:t.length;return n?x(t,e)/n:J}function w(t){return function(e){return null==e?K:e[t]}}function k(t){return function(e){return null==t?K:t[e]}}function C(t,e,n,i,r){return r(t,(function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)})),n}function x(t,e){for(var n,i=-1,r=t.length;++i<r;){var a=e(t[i]);a!==K&&(n=n===K?a:n+a)}return n}function D(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function L(t){return function(e){return t(e)}}function R(t,e){return f(e,(function(e){return t[e]}))}function I(t,e){return t.has(e)}function P(t,e){for(var n=-1,i=t.length;++n<i&&E(e,t[n],0)>-1;);return n}function O(t,e){for(var n=t.length;n--&&E(e,t[n],0)>-1;);return n}function N(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function M(t){return"\\"+Ke[t]}function F(t){return je.test(t)}function U(t){return He.test(t)}function B(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function j(t,e){return function(n){return t(e(n))}}function H(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n];o!==e&&o!==X||(t[n]=X,a[r++]=n)}return a}function V(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function G(t){return F(t)?function(t){for(var e=Ue.lastIndex=0;Ue.test(t);)++e;return e}(t):cn(t)}function q(t){return F(t)?function(t){return t.match(Ue)||[]}(t):function(t){return t.split("")}(t)}function W(t){return t.match(Be)||[]}var K,Y="Expected a function",z="__lodash_hash_undefined__",X="__lodash_placeholder__",$=128,Q=9007199254740991,J=NaN,Z=4294967295,tt=[["ary",$],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],et="[object Arguments]",nt="[object Array]",it="[object Boolean]",rt="[object Date]",at="[object Error]",ot="[object Function]",st="[object GeneratorFunction]",ut="[object Map]",lt="[object Number]",ct="[object Object]",dt="[object Promise]",ht="[object RegExp]",ft="[object Set]",pt="[object String]",gt="[object Symbol]",mt="[object WeakMap]",vt="[object ArrayBuffer]",yt="[object DataView]",_t="[object Float32Array]",bt="[object Float64Array]",Et="[object Int8Array]",Tt="[object Int16Array]",At="[object Int32Array]",St="[object Uint8Array]",wt="[object Uint8ClampedArray]",kt="[object Uint16Array]",Ct="[object Uint32Array]",xt=/\b__p \+= '';/g,Dt=/\b(__p \+=) '' \+/g,Lt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rt=/&(?:amp|lt|gt|quot|#39);/g,It=/[&<>"']/g,Pt=RegExp(Rt.source),Ot=RegExp(It.source),Nt=/<%-([\s\S]+?)%>/g,Mt=/<%([\s\S]+?)%>/g,Ft=/<%=([\s\S]+?)%>/g,Ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bt=/^\w*$/,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/[\\^$.*+?()[\]{}|]/g,Vt=RegExp(Ht.source),Gt=/^\s+|\s+$/g,qt=/^\s+/,Wt=/\s+$/,Kt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yt=/\{\n\/\* \[wrapped with (.+)\] \*/,zt=/,? & /,Xt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$t=/\\(\\)?/g,Qt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Jt=/\w*$/,Zt=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,ee=/^\[object .+?Constructor\]$/,ne=/^0o[0-7]+$/i,ie=/^(?:0|[1-9]\d*)$/,re=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ae=/($^)/,oe=/['\n\r\u2028\u2029\\]/g,se="\\ud800-\\udfff",ue="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",le="\\u2700-\\u27bf",ce="a-z\\xdf-\\xf6\\xf8-\\xff",de="A-Z\\xc0-\\xd6\\xd8-\\xde",he="\\ufe0e\\ufe0f",fe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="['â]",ge="["+se+"]",me="["+fe+"]",ve="["+ue+"]",ye="\\d+",_e="["+le+"]",be="["+ce+"]",Ee="[^"+se+fe+ye+le+ce+de+"]",Te="\\ud83c[\\udffb-\\udfff]",Ae="[^"+se+"]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",we="[\\ud800-\\udbff][\\udc00-\\udfff]",ke="["+de+"]",Ce="(?:"+be+"|"+Ee+")",xe="(?:"+ke+"|"+Ee+")",De="(?:['â](?:d|ll|m|re|s|t|ve))?",Le="(?:['â](?:D|LL|M|RE|S|T|VE))?",Re="(?:"+ve+"|"+Te+")?",Ie="["+he+"]?",Pe=Ie+Re+"(?:\\u200d(?:"+[Ae,Se,we].join("|")+")"+Ie+Re+")*",Oe="(?:"+[_e,Se,we].join("|")+")"+Pe,Ne="(?:"+[Ae+ve+"?",ve,Se,we,ge].join("|")+")",Me=RegExp(pe,"g"),Fe=RegExp(ve,"g"),Ue=RegExp(Te+"(?="+Te+")|"+Ne+Pe,"g"),Be=RegExp([ke+"?"+be+"+"+De+"(?="+[me,ke,"$"].join("|")+")",xe+"+"+Le+"(?="+[me,ke+Ce,"$"].join("|")+")",ke+"?"+Ce+"+"+De,ke+"+"+Le,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ye,Oe].join("|"),"g"),je=RegExp("[\\u200d"+se+ue+he+"]"),He=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ve=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ge=-1,qe={};qe[_t]=qe[bt]=qe[Et]=qe[Tt]=qe[At]=qe[St]=qe[wt]=qe[kt]=qe[Ct]=!0,qe[et]=qe[nt]=qe[vt]=qe[it]=qe[yt]=qe[rt]=qe[at]=qe[ot]=qe[ut]=qe[lt]=qe[ct]=qe[ht]=qe[ft]=qe[pt]=qe[mt]=!1;var We={};We[et]=We[nt]=We[vt]=We[yt]=We[it]=We[rt]=We[_t]=We[bt]=We[Et]=We[Tt]=We[At]=We[ut]=We[lt]=We[ct]=We[ht]=We[ft]=We[pt]=We[gt]=We[St]=We[wt]=We[kt]=We[Ct]=!0,We[at]=We[ot]=We[mt]=!1;var Ke={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ye=parseFloat,ze=parseInt,Xe="object"==_typeof(t)&&t&&t.Object===Object&&t,$e="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,Qe=Xe||$e||Function("return this")(),Je="object"==_typeof(e)&&e&&!e.nodeType&&e,Ze=Je&&"object"==_typeof(r)&&r&&!r.nodeType&&r,tn=Ze&&Ze.exports===Je,en=tn&&Xe.process,nn=function(){try{var t=Ze&&Ze.require&&Ze.require("util").types;return t||en&&en.binding&&en.binding("util")}catch(t){}}(),rn=nn&&nn.isArrayBuffer,an=nn&&nn.isDate,on=nn&&nn.isMap,sn=nn&&nn.isRegExp,un=nn&&nn.isSet,ln=nn&&nn.isTypedArray,cn=w("length"),dn=k({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),hn=k({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),fn=k({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function t(e){function n(t){if(Pr(t)&&!As(t)&&!(t instanceof k)){if(t instanceof r)return t;if(Ta.call(t,"__wrapped__"))return ar(t)}return new r(t)}function i(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=K}function k(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function Xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function se(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function ue(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function le(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ue;++e<n;)this.add(t[e])}function ce(t){var e=this.__data__=new se(t);this.size=e.size}function de(t,e){var n=As(t),i=!n&&Ts(t),r=!n&&!i&&ws(t),a=!n&&!i&&!r&&Ls(t),o=n||i||r||a,s=o?D(t.length,ga):[],u=s.length;for(var l in t)!e&&!Ta.call(t,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Gi(l,u))||s.push(l);return s}function he(t){var e=t.length;return e?t[kn(0,e-1)]:K}function fe(t,e){return nr(ii(t),Te(e,0,t.length))}function pe(t){return nr(ii(t))}function ge(t,e,n){(n===K||wr(t[e],n))&&(n!==K||e in t)||be(t,e,n)}function me(t,e,n){var i=t[e];Ta.call(t,e)&&wr(i,n)&&(n!==K||e in t)||be(t,e,n)}function ve(t,e){for(var n=t.length;n--;)if(wr(t[n][0],e))return n;return-1}function ye(t,e,n,i){return Eo(t,(function(t,r,a){e(i,t,n(t),a)})),i}function _e(t,e){return t&&ri(e,Yr(e),t)}function be(t,e,n){"__proto__"==e&&ja?ja(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Ee(t,e){for(var n=-1,i=e.length,r=ua(i),a=null==t;++n<i;)r[n]=a?K:Wr(t,e[n]);return r}function Te(t,e,n){return t==t&&(n!==K&&(t=t<=n?t:n),e!==K&&(t=t>=e?t:e)),t}function Ae(t,e,n,i,r,a){var o,u=1&e,l=2&e,c=4&e;if(n&&(o=r?n(t,i,r,a):n(t)),o!==K)return o;if(!Ir(t))return t;var d=As(t);if(d){if(o=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ta.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return ii(t,o)}else{var h=Po(t),f=h==ot||h==st;if(ws(t))return Qn(t,u);if(h==ct||h==et||f&&!r){if(o=l||f?{}:Hi(t),!u)return l?function(t,e){return ri(t,Io(t),e)}(t,function(t,e){return t&&ri(e,zr(e),t)}(o,t)):function(t,e){return ri(t,Ro(t),e)}(t,_e(o,t))}else{if(!We[h])return r?t:{};o=function(t,e,n){var i=t.constructor;switch(e){case vt:return Jn(t);case it:case rt:return new i(+t);case yt:return function(t,e){var n=e?Jn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case _t:case bt:case Et:case Tt:case At:case St:case wt:case kt:case Ct:return Zn(t,n);case ut:return new i;case lt:case pt:return new i(t);case ht:return function(t){var e=new t.constructor(t.source,Jt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case ft:return new i;case gt:return function(t){return yo?fa(yo.call(t)):{}}(t)}}(t,h,u)}}a||(a=new ce);var p=a.get(t);if(p)return p;a.set(t,o),Ds(t)?t.forEach((function(i){o.add(Ae(i,e,n,i,t,a))})):Cs(t)&&t.forEach((function(i,r){o.set(r,Ae(i,e,n,r,t,a))}));var g=d?K:(c?l?Pi:Ii:l?zr:Yr)(t);return s(g||t,(function(i,r){g&&(i=t[r=i]),me(o,r,Ae(i,e,n,r,t,a))})),o}function Se(t,e,n){var i=n.length;if(null==t)return!i;for(t=fa(t);i--;){var r=n[i],a=e[r],o=t[r];if(o===K&&!(r in t)||!a(o))return!1}return!0}function we(t,e,n){if("function"!=typeof t)throw new ma(Y);return Mo((function(){t.apply(K,n)}),e)}function ke(t,e,n,i){var r=-1,a=d,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=f(e,L(n))),i?(a=h,o=!1):e.length>=200&&(a=I,o=!1,e=new le(e));t:for(;++r<s;){var c=t[r],p=null==n?c:n(c);if(c=i||0!==c?c:0,o&&p==p){for(var g=l;g--;)if(e[g]===p)continue t;u.push(c)}else a(e,p,i)||u.push(c)}return u}function Ce(t,e){var n=!0;return Eo(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function xe(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],o=e(a);if(null!=o&&(s===K?o==o&&!Fr(o):n(o,s)))var s=o,u=a}return u}function De(t,e){var n=[];return Eo(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function Le(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=Vi),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?Le(s,e-1,n,i,r):p(r,s):i||(r[r.length]=s)}return r}function Re(t,e){return t&&Ao(t,e,Yr)}function Ie(t,e){return t&&So(t,e,Yr)}function Pe(t,e){return c(e,(function(e){return Dr(t[e])}))}function Oe(t,e){for(var n=0,i=(e=Xn(e,t)).length;null!=t&&n<i;)t=t[ir(e[n++])];return n&&n==i?t:K}function Ne(t,e,n){var i=e(t);return As(t)?i:p(i,n(t))}function Ue(t){return null==t?t===K?"[object Undefined]":"[object Null]":Ba&&Ba in fa(t)?function(t){var e=Ta.call(t,Ba),n=t[Ba];try{t[Ba]=K;var i=!0}catch(t){}var r=wa.call(t);return i&&(e?t[Ba]=n:delete t[Ba]),r}(t):function(t){return wa.call(t)}(t)}function Be(t,e){return t>e}function je(t,e){return null!=t&&Ta.call(t,e)}function He(t,e){return null!=t&&e in fa(t)}function Ke(t,e,n){for(var i=n?h:d,r=t[0].length,a=t.length,o=a,s=ua(a),u=1/0,l=[];o--;){var c=t[o];o&&e&&(c=f(c,L(e))),u=Ja(c.length,u),s[o]=!n&&(e||r>=120&&c.length>=120)?new le(o&&c):K}c=t[0];var p=-1,g=s[0];t:for(;++p<r&&l.length<u;){var m=c[p],v=e?e(m):m;if(m=n||0!==m?m:0,!(g?I(g,v):i(l,v,n))){for(o=a;--o;){var y=s[o];if(!(y?I(y,v):i(t[o],v,n)))continue t}g&&g.push(v),l.push(m)}}return l}function Xe(t,e,n){var i=null==(t=Qi(t,e=Xn(e,t)))?t:t[ir(cr(e))];return null==i?K:a(i,t,n)}function $e(t){return Pr(t)&&Ue(t)==et}function Je(t,e,n,i,r){return t===e||(null==t||null==e||!Pr(t)&&!Pr(e)?t!=t&&e!=e:function(t,e,n,i,r,a){var o=As(t),s=As(e),u=o?nt:Po(t),l=s?nt:Po(e),c=(u=u==et?ct:u)==ct,d=(l=l==et?ct:l)==ct,h=u==l;if(h&&ws(t)){if(!ws(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new ce),o||Ls(t)?Li(t,e,n,i,r,a):function(t,e,n,i,r,a,o){switch(n){case yt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case vt:return!(t.byteLength!=e.byteLength||!a(new Ra(t),new Ra(e)));case it:case rt:case lt:return wr(+t,+e);case at:return t.name==e.name&&t.message==e.message;case ht:case pt:return t==e+"";case ut:var s=B;case ft:var u=1&i;if(s||(s=V),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;i|=2,o.set(t,e);var c=Li(s(t),s(e),i,r,a,o);return o.delete(t),c;case gt:if(yo)return yo.call(t)==yo.call(e)}return!1}(t,e,u,n,i,r,a);if(!(1&n)){var f=c&&Ta.call(t,"__wrapped__"),p=d&&Ta.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,m=p?e.value():e;return a||(a=new ce),r(g,m,n,i,a)}}return!!h&&(a||(a=new ce),function(t,e,n,i,r,a){var o=1&n,s=Ii(t),u=s.length,l=Ii(e).length;if(u!=l&&!o)return!1;for(var c=u;c--;){var d=s[c];if(!(o?d in e:Ta.call(e,d)))return!1}var h=a.get(t);if(h&&a.get(e))return h==e;var f=!0;a.set(t,e),a.set(e,t);for(var p=o;++c<u;){d=s[c];var g=t[d],m=e[d];if(i)var v=o?i(m,g,d,e,t,a):i(g,m,d,t,e,a);if(!(v===K?g===m||r(g,m,n,i,a):v)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var y=t.constructor,_=e.constructor;y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(f=!1)}return a.delete(t),a.delete(e),f}(t,e,n,i,r,a))}(t,e,n,i,Je,r))}function Ze(t,e,n,i){var r=n.length,a=r,o=!i;if(null==t)return!a;for(t=fa(t);r--;){var s=n[r];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<a;){var u=(s=n[r])[0],l=t[u],c=s[1];if(o&&s[2]){if(l===K&&!(u in t))return!1}else{var d=new ce;if(i)var h=i(l,c,u,t,e,d);if(!(h===K?Je(c,l,3,i,d):h))return!1}}return!0}function en(t){return!(!Ir(t)||function(t){return!!Sa&&Sa in t}(t))&&(Dr(t)?xa:ee).test(rr(t))}function nn(t){return"function"==typeof t?t:null==t?ea:"object"==_typeof(t)?As(t)?_n(t[0],t[1]):yn(t):aa(t)}function cn(t){if(!Yi(t))return $a(t);var e=[];for(var n in fa(t))Ta.call(t,n)&&"constructor"!=n&&e.push(n);return e}function gn(t){if(!Ir(t))return function(t){var e=[];if(null!=t)for(var n in fa(t))e.push(n);return e}(t);var e=Yi(t),n=[];for(var i in t)("constructor"!=i||!e&&Ta.call(t,i))&&n.push(i);return n}function mn(t,e){return t<e}function vn(t,e){var n=-1,i=kr(t)?ua(t.length):[];return Eo(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function yn(t){var e=Ui(t);return 1==e.length&&e[0][2]?Xi(e[0][0],e[0][1]):function(n){return n===t||Ze(n,t,e)}}function _n(t,e){return Wi(t)&&zi(e)?Xi(ir(t),e):function(n){var i=Wr(n,t);return i===K&&i===e?Kr(n,t):Je(e,i,3)}}function bn(t,e,n,i,r){t!==e&&Ao(e,(function(a,o){if(r||(r=new ce),Ir(a))!function(t,e,n,i,r,a,o){var s=Zi(t,n),u=Zi(e,n),l=o.get(u);if(l)ge(t,n,l);else{var c=a?a(s,u,n+"",t,e,o):K,d=c===K;if(d){var h=As(u),f=!h&&ws(u),p=!h&&!f&&Ls(u);c=u,h||f||p?As(s)?c=s:Cr(s)?c=ii(s):f?(d=!1,c=Qn(u,!0)):p?(d=!1,c=Zn(u,!0)):c=[]:Nr(u)||Ts(u)?(c=s,Ts(s)?c=Gr(s):Ir(s)&&!Dr(s)||(c=Hi(u))):d=!1}d&&(o.set(u,c),r(c,u,i,a,o),o.delete(u)),ge(t,n,c)}}(t,e,o,n,bn,i,r);else{var s=i?i(Zi(t,o),a,o+"",t,e,r):K;s===K&&(s=a),ge(t,o,s)}}),zr)}function En(t,e){var n=t.length;if(n)return Gi(e+=e<0?n:0,n)?t[e]:K}function Tn(t,e,n){var i=-1;return e=f(e.length?e:[ea],L(Mi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(vn(t,(function(t,n,r){return{criteria:f(e,(function(e){return e(t)})),index:++i,value:t}})),(function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;++i<o;){var u=ti(r[i],a[i]);if(u){if(i>=s)return u;var l=n[i];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)}))}function An(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=Oe(t,o);n(s,o)&&Rn(a,Xn(o,t),s)}return a}function Sn(t,e,n,i){var r=i?T:E,a=-1,o=e.length,s=t;for(t===e&&(e=ii(e)),n&&(s=f(t,L(n)));++a<o;)for(var u=0,l=e[a],c=n?n(l):l;(u=r(s,c,u,i))>-1;)s!==t&&Ma.call(s,u,1),Ma.call(t,u,1);return t}function wn(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;Gi(r)?Ma.call(t,r,1):Hn(t,r)}}return t}function kn(t,e){return t+Wa(eo()*(e-t+1))}function Cn(t,e){var n="";if(!t||e<1||e>Q)return n;do{e%2&&(n+=t),(e=Wa(e/2))&&(t+=t)}while(e);return n}function xn(t,e){return Fo($i(t,e,ea),t+"")}function Dn(t){return he($r(t))}function Ln(t,e){var n=$r(t);return nr(n,Te(e,0,n.length))}function Rn(t,e,n,i){if(!Ir(t))return t;for(var r=-1,a=(e=Xn(e,t)).length,o=a-1,s=t;null!=s&&++r<a;){var u=ir(e[r]),l=n;if(r!=o){var c=s[u];(l=i?i(c,u,s):K)===K&&(l=Ir(c)?c:Gi(e[r+1])?[]:{})}me(s,u,l),s=s[u]}return t}function In(t){return nr($r(t))}function Pn(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=ua(r);++i<r;)a[i]=t[i+e];return a}function On(t,e){var n;return Eo(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function Nn(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!Fr(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return Mn(t,e,ea,n)}function Mn(t,e,n,i){e=n(e);for(var r=0,a=null==t?0:t.length,o=e!=e,s=null===e,u=Fr(e),l=e===K;r<a;){var c=Wa((r+a)/2),d=n(t[c]),h=d!==K,f=null===d,p=d==d,g=Fr(d);if(o)var m=i||p;else m=l?p&&(i||h):s?p&&h&&(i||!f):u?p&&h&&!f&&(i||!g):!f&&!g&&(i?d<=e:d<e);m?r=c+1:a=c}return Ja(a,4294967294)}function Fn(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!wr(s,u)){var u=s;a[r++]=0===o?0:o}}return a}function Un(t){return"number"==typeof t?t:Fr(t)?J:+t}function Bn(t){if("string"==typeof t)return t;if(As(t))return f(t,Bn)+"";if(Fr(t))return _o?_o.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function jn(t,e,n){var i=-1,r=d,a=t.length,o=!0,s=[],u=s;if(n)o=!1,r=h;else if(a>=200){var l=e?null:Do(t);if(l)return V(l);o=!1,r=I,u=new le}else u=e?[]:s;t:for(;++i<a;){var c=t[i],f=e?e(c):c;if(c=n||0!==c?c:0,o&&f==f){for(var p=u.length;p--;)if(u[p]===f)continue t;e&&u.push(f),s.push(c)}else r(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function Hn(t,e){return null==(t=Qi(t,e=Xn(e,t)))||delete t[ir(cr(e))]}function Vn(t,e,n,i){return Rn(t,e,n(Oe(t,e)),i)}function Gn(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?Pn(t,i?0:a,i?a+1:r):Pn(t,i?a+1:0,i?r:a)}function qn(t,e){var n=t;return n instanceof k&&(n=n.value()),g(e,(function(t,e){return e.func.apply(e.thisArg,p([t],e.args))}),n)}function Wn(t,e,n){var i=t.length;if(i<2)return i?jn(t[0]):[];for(var r=-1,a=ua(i);++r<i;)for(var o=t[r],s=-1;++s<i;)s!=r&&(a[r]=ke(a[r]||o,t[s],e,n));return jn(Le(a,1),e,n)}function Kn(t,e,n){for(var i=-1,r=t.length,a=e.length,o={};++i<r;){var s=i<a?e[i]:K;n(o,t[i],s)}return o}function Yn(t){return Cr(t)?t:[]}function zn(t){return"function"==typeof t?t:ea}function Xn(t,e){return As(t)?t:Wi(t,e)?[t]:Uo(qr(t))}function $n(t,e,n){var i=t.length;return n=n===K?i:n,!e&&n>=i?t:Pn(t,e,n)}function Qn(t,e){if(e)return t.slice();var n=t.length,i=Ia?Ia(n):new t.constructor(n);return t.copy(i),i}function Jn(t){var e=new t.constructor(t.byteLength);return new Ra(e).set(new Ra(t)),e}function Zn(t,e){var n=e?Jn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ti(t,e){if(t!==e){var n=t!==K,i=null===t,r=t==t,a=Fr(t),o=e!==K,s=null===e,u=e==e,l=Fr(e);if(!s&&!l&&!a&&t>e||a&&o&&u&&!s&&!l||i&&o&&u||!n&&u||!r)return 1;if(!i&&!a&&!l&&t<e||l&&n&&r&&!i&&!a||s&&n&&r||!o&&r||!u)return-1}return 0}function ei(t,e,n,i){for(var r=-1,a=t.length,o=n.length,s=-1,u=e.length,l=Qa(a-o,0),c=ua(u+l),d=!i;++s<u;)c[s]=e[s];for(;++r<o;)(d||r<a)&&(c[n[r]]=t[r]);for(;l--;)c[s++]=t[r++];return c}function ni(t,e,n,i){for(var r=-1,a=t.length,o=-1,s=n.length,u=-1,l=e.length,c=Qa(a-s,0),d=ua(c+l),h=!i;++r<c;)d[r]=t[r];for(var f=r;++u<l;)d[f+u]=e[u];for(;++o<s;)(h||r<a)&&(d[f+n[o]]=t[r++]);return d}function ii(t,e){var n=-1,i=t.length;for(e||(e=ua(i));++n<i;)e[n]=t[n];return e}function ri(t,e,n,i){var r=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=i?i(n[s],t[s],s,n,t):K;u===K&&(u=t[s]),r?be(n,s,u):me(n,s,u)}return n}function ai(t,e){return function(n,i){var r=As(n)?o:ye,a=e?e():{};return r(n,t,Mi(i,2),a)}}function oi(t){return xn((function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:K,o=r>2?n[2]:K;for(a=t.length>3&&"function"==typeof a?(r--,a):K,o&&qi(n[0],n[1],o)&&(a=r<3?K:a,r=1),e=fa(e);++i<r;){var s=n[i];s&&t(e,s,i,a)}return e}))}function si(t,e){return function(n,i){if(null==n)return n;if(!kr(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=fa(n);(e?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function ui(t){return function(e,n,i){for(var r=-1,a=fa(e),o=i(e),s=o.length;s--;){var u=o[t?s:++r];if(!1===n(a[u],u,a))break}return e}}function li(t){return function(e){var n=F(e=qr(e))?q(e):K,i=n?n[0]:e.charAt(0),r=n?$n(n,1).join(""):e.slice(1);return i[t]()+r}}function ci(t){return function(e){return g(Zr(Jr(e).replace(Me,"")),t,"")}}function di(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=bo(t.prototype),i=t.apply(n,e);return Ir(i)?i:n}}function hi(t,e,n){var i=di(t);return function r(){for(var o=arguments.length,s=ua(o),u=o,l=Ni(r);u--;)s[u]=arguments[u];var c=o<3&&s[0]!==l&&s[o-1]!==l?[]:H(s,l);if((o-=c.length)<n)return Ai(t,e,gi,r.placeholder,K,s,c,K,K,n-o);var d=this&&this!==Qe&&this instanceof r?i:t;return a(d,this,s)}}function fi(t){return function(e,n,i){var r=fa(e);if(!kr(e)){var a=Mi(n,3);e=Yr(e),n=function(t){return a(r[t],t,r)}}var o=t(e,n,i);return o>-1?r[a?e[o]:o]:K}}function pi(t){return Ri((function(e){var n=e.length,i=n,a=r.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new ma(Y);if(a&&!s&&"wrapper"==Oi(o))var s=new r([],!0)}for(i=s?i:n;++i<n;){var u=Oi(o=e[i]),l="wrapper"==u?Lo(o):K;s=l&&Ki(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Oi(l[0])].apply(s,l[3]):1==o.length&&Ki(o)?s[u]():s.thru(o)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&As(i))return s.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}}))}function gi(t,e,n,i,r,a,o,s,u,l){var c=e&$,d=1&e,h=2&e,f=24&e,p=512&e,g=h?K:di(t);return function m(){for(var v=arguments.length,y=ua(v),_=v;_--;)y[_]=arguments[_];if(f)var b=Ni(m),E=N(y,b);if(i&&(y=ei(y,i,r,f)),a&&(y=ni(y,a,o,f)),v-=E,f&&v<l){var T=H(y,b);return Ai(t,e,gi,m.placeholder,n,y,T,s,u,l-v)}var A=d?n:this,S=h?A[t]:t;return v=y.length,s?y=Ji(y,s):p&&v>1&&y.reverse(),c&&u<v&&(y.length=u),this&&this!==Qe&&this instanceof m&&(S=g||di(S)),S.apply(A,y)}}function mi(t,e){return function(n,i){return function(t,e,n,i){return Re(t,(function(t,r,a){e(i,n(t),r,a)})),i}(n,t,e(i),{})}}function vi(t,e){return function(n,i){var r;if(n===K&&i===K)return e;if(n!==K&&(r=n),i!==K){if(r===K)return i;"string"==typeof n||"string"==typeof i?(n=Bn(n),i=Bn(i)):(n=Un(n),i=Un(i)),r=t(n,i)}return r}}function yi(t){return Ri((function(e){return e=f(e,L(Mi())),xn((function(n){var i=this;return t(e,(function(t){return a(t,i,n)}))}))}))}function _i(t,e){var n=(e=e===K?" ":Bn(e)).length;if(n<2)return n?Cn(e,t):e;var i=Cn(e,qa(t/G(e)));return F(e)?$n(q(i),0,t).join(""):i.slice(0,t)}function bi(t,e,n,i){var r=1&e,o=di(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,d=ua(c+u),h=this&&this!==Qe&&this instanceof e?o:t;++l<c;)d[l]=i[l];for(;u--;)d[l++]=arguments[++s];return a(h,r?n:this,d)}}function Ei(t){return function(e,n,i){return i&&"number"!=typeof i&&qi(e,n,i)&&(n=i=K),e=Br(e),n===K?(n=e,e=0):n=Br(n),function(t,e,n,i){for(var r=-1,a=Qa(qa((e-t)/(n||1)),0),o=ua(a);a--;)o[i?a:++r]=t,t+=n;return o}(e,n,i=i===K?e<n?1:-1:Br(i),t)}}function Ti(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Vr(e),n=Vr(n)),t(e,n)}}function Ai(t,e,n,i,r,a,o,s,u,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var d=[t,e,r,c?a:K,c?o:K,c?K:a,c?K:o,s,u,l],h=n.apply(K,d);return Ki(t)&&No(h,d),h.placeholder=i,tr(h,t,e)}function Si(t){var e=ha[t];return function(t,n){if(t=Vr(t),(n=null==n?0:Ja(jr(n),292))&&za(t)){var i=(qr(t)+"e").split("e");return+((i=(qr(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}function wi(t){return function(e){var n=Po(e);return n==ut?B(e):n==ft?function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}(e):function(t,e){return f(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function ki(t,e,n,i,r,a,o,s){var u=2&e;if(!u&&"function"!=typeof t)throw new ma(Y);var l=i?i.length:0;if(l||(e&=-97,i=r=K),o=o===K?o:Qa(jr(o),0),s=s===K?s:jr(s),l-=r?r.length:0,64&e){var c=i,d=r;i=r=K}var h=u?K:Lo(t),f=[t,e,n,i,r,c,d,a,o,s];if(h&&function(t,e){var n=t[1],i=e[1],r=n|i,a=r<131,o=i==$&&8==n||i==$&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!a&&!o)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var s=e[3];if(s){var u=t[3];t[3]=u?ei(u,s,e[4]):s,t[4]=u?H(t[3],X):e[4]}(s=e[5])&&(u=t[5],t[5]=u?ni(u,s,e[6]):s,t[6]=u?H(t[5],X):e[6]),(s=e[7])&&(t[7]=s),i&$&&(t[8]=null==t[8]?e[8]:Ja(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(f,h),t=f[0],e=f[1],n=f[2],i=f[3],r=f[4],!(s=f[9]=f[9]===K?u?0:t.length:Qa(f[9]-l,0))&&24&e&&(e&=-25),e&&1!=e)p=8==e||16==e?hi(t,e,s):32!=e&&33!=e||r.length?gi.apply(K,f):bi(t,e,n,i);else var p=function(t,e,n){var i=1&e,r=di(t);return function e(){var a=this&&this!==Qe&&this instanceof e?r:t;return a.apply(i?n:this,arguments)}}(t,e,n);return tr((h?wo:No)(p,f),t,e)}function Ci(t,e,n,i){return t===K||wr(t,_a[n])&&!Ta.call(i,n)?e:t}function xi(t,e,n,i,r,a){return Ir(t)&&Ir(e)&&(a.set(e,t),bn(t,e,K,xi,a),a.delete(e)),t}function Di(t){return Nr(t)?K:t}function Li(t,e,n,i,r,a){var o=1&n,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var c=-1,d=!0,h=2&n?new le:K;for(a.set(t,e),a.set(e,t);++c<s;){var f=t[c],p=e[c];if(i)var g=o?i(p,f,c,e,t,a):i(f,p,c,t,e,a);if(g!==K){if(g)continue;d=!1;break}if(h){if(!v(e,(function(t,e){if(!I(h,e)&&(f===t||r(f,t,n,i,a)))return h.push(e)}))){d=!1;break}}else if(f!==p&&!r(f,p,n,i,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function Ri(t){return Fo($i(t,K,ur),t+"")}function Ii(t){return Ne(t,Yr,Ro)}function Pi(t){return Ne(t,zr,Io)}function Oi(t){for(var e=t.name+"",n=co[e],i=Ta.call(co,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function Ni(t){return(Ta.call(n,"placeholder")?n:t).placeholder}function Mi(){var t=n.iteratee||na;return t=t===na?nn:t,arguments.length?t(arguments[0],arguments[1]):t}function Fi(t,e){var n=t.__data__;return function(t){var e=_typeof(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ui(t){for(var e=Yr(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,zi(r)]}return e}function Bi(t,e){var n=function(t,e){return null==t?K:t[e]}(t,e);return en(n)?n:K}function ji(t,e,n){for(var i=-1,r=(e=Xn(e,t)).length,a=!1;++i<r;){var o=ir(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&Rr(r)&&Gi(o,r)&&(As(t)||Ts(t))}function Hi(t){return"function"!=typeof t.constructor||Yi(t)?{}:bo(Pa(t))}function Vi(t){return As(t)||Ts(t)||!!(Fa&&t&&t[Fa])}function Gi(t,e){var n=_typeof(t);return!!(e=null==e?Q:e)&&("number"==n||"symbol"!=n&&ie.test(t))&&t>-1&&t%1==0&&t<e}function qi(t,e,n){if(!Ir(n))return!1;var i=_typeof(e);return!!("number"==i?kr(n)&&Gi(e,n.length):"string"==i&&e in n)&&wr(n[e],t)}function Wi(t,e){if(As(t))return!1;var n=_typeof(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Fr(t))||Bt.test(t)||!Ut.test(t)||null!=e&&t in fa(e)}function Ki(t){var e=Oi(t),i=n[e];if("function"!=typeof i||!(e in k.prototype))return!1;if(t===i)return!0;var r=Lo(i);return!!r&&t===r[0]}function Yi(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||_a)}function zi(t){return t==t&&!Ir(t)}function Xi(t,e){return function(n){return null!=n&&n[t]===e&&(e!==K||t in fa(n))}}function $i(t,e,n){return e=Qa(e===K?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=Qa(i.length-e,0),s=ua(o);++r<o;)s[r]=i[e+r];r=-1;for(var u=ua(e+1);++r<e;)u[r]=i[r];return u[e]=n(s),a(t,this,u)}}function Qi(t,e){return e.length<2?t:Oe(t,Pn(e,0,-1))}function Ji(t,e){for(var n=t.length,i=Ja(e.length,n),r=ii(t);i--;){var a=e[i];t[i]=Gi(a,n)?r[a]:K}return t}function Zi(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function tr(t,e,n){var i=e+"";return Fo(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Kt,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return s(tt,(function(n){var i="_."+n[0];e&n[1]&&!d(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(Yt);return e?e[1].split(zt):[]}(i),n)))}function er(t){var e=0,n=0;return function(){var i=Za(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(K,arguments)}}function nr(t,e){var n=-1,i=t.length,r=i-1;for(e=e===K?i:e;++n<e;){var a=kn(n,r),o=t[a];t[a]=t[n],t[n]=o}return t.length=e,t}function ir(t){if("string"==typeof t||Fr(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function rr(t){if(null!=t){try{return Ea.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ar(t){if(t instanceof k)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=ii(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function or(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:jr(n);return r<0&&(r=Qa(i+r,0)),b(t,Mi(e,3),r)}function sr(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==K&&(r=jr(n),r=n<0?Qa(i+r,0):Ja(r,i-1)),b(t,Mi(e,3),r,!0)}function ur(t){return null!=t&&t.length?Le(t,1):[]}function lr(t){return t&&t.length?t[0]:K}function cr(t){var e=null==t?0:t.length;return e?t[e-1]:K}function dr(t,e){return t&&t.length&&e&&e.length?Sn(t,e):t}function hr(t){return null==t?t:no.call(t)}function fr(t){if(!t||!t.length)return[];var e=0;return t=c(t,(function(t){if(Cr(t))return e=Qa(t.length,e),!0})),D(e,(function(e){return f(t,w(e))}))}function pr(t,e){if(!t||!t.length)return[];var n=fr(t);return null==e?n:f(n,(function(t){return a(e,K,t)}))}function gr(t){var e=n(t);return e.__chain__=!0,e}function mr(t,e){return e(t)}function vr(t,e){return(As(t)?s:Eo)(t,Mi(e,3))}function yr(t,e){return(As(t)?u:To)(t,Mi(e,3))}function _r(t,e){return(As(t)?f:vn)(t,Mi(e,3))}function br(t,e,n){return e=n?K:e,e=t&&null==e?t.length:e,ki(t,$,K,K,K,K,e)}function Er(t,e){var n;if("function"!=typeof e)throw new ma(Y);return t=jr(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=K),n}}function Tr(t,e,n){function i(e){var n=l,i=c;return l=c=K,g=e,h=t.apply(i,n)}function r(t){return g=t,f=Mo(o,e),m?i(t):h}function a(t){var n=t-p;return p===K||n>=e||n<0||v&&t-g>=d}function o(){var t=ds();return a(t)?s(t):void(f=Mo(o,function(t){var n=e-(t-p);return v?Ja(n,d-(t-g)):n}(t)))}function s(t){return f=K,y&&l?i(t):(l=c=K,h)}function u(){var t=ds(),n=a(t);if(l=arguments,c=this,p=t,n){if(f===K)return r(p);if(v)return xo(f),f=Mo(o,e),i(p)}return f===K&&(f=Mo(o,e)),h}var l,c,d,h,f,p,g=0,m=!1,v=!1,y=!0;if("function"!=typeof t)throw new ma(Y);return e=Vr(e)||0,Ir(n)&&(m=!!n.leading,d=(v="maxWait"in n)?Qa(Vr(n.maxWait)||0,e):d,y="trailing"in n?!!n.trailing:y),u.cancel=function(){f!==K&&xo(f),g=0,l=p=c=f=K},u.flush=function(){return f===K?h:s(ds())},u}function Ar(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ma(Y);var n=function n(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(Ar.Cache||ue),n}function Sr(t){if("function"!=typeof t)throw new ma(Y);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function wr(t,e){return t===e||t!=t&&e!=e}function kr(t){return null!=t&&Rr(t.length)&&!Dr(t)}function Cr(t){return Pr(t)&&kr(t)}function xr(t){if(!Pr(t))return!1;var e=Ue(t);return e==at||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Nr(t)}function Dr(t){if(!Ir(t))return!1;var e=Ue(t);return e==ot||e==st||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Lr(t){return"number"==typeof t&&t==jr(t)}function Rr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Q}function Ir(t){var e=_typeof(t);return null!=t&&("object"==e||"function"==e)}function Pr(t){return null!=t&&"object"==_typeof(t)}function Or(t){return"number"==typeof t||Pr(t)&&Ue(t)==lt}function Nr(t){if(!Pr(t)||Ue(t)!=ct)return!1;var e=Pa(t);if(null===e)return!0;var n=Ta.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ea.call(n)==ka}function Mr(t){return"string"==typeof t||!As(t)&&Pr(t)&&Ue(t)==pt}function Fr(t){return"symbol"==_typeof(t)||Pr(t)&&Ue(t)==gt}function Ur(t){if(!t)return[];if(kr(t))return Mr(t)?q(t):ii(t);if(Ua&&t[Ua])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ua]());var e=Po(t);return(e==ut?B:e==ft?V:$r)(t)}function Br(t){return t?(t=Vr(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function jr(t){var e=Br(t),n=e%1;return e==e?n?e-n:e:0}function Hr(t){return t?Te(jr(t),0,Z):0}function Vr(t){if("number"==typeof t)return t;if(Fr(t))return J;if(Ir(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ir(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Gt,"");var n=te.test(t);return n||ne.test(t)?ze(t.slice(2),n?2:8):Zt.test(t)?J:+t}function Gr(t){return ri(t,zr(t))}function qr(t){return null==t?"":Bn(t)}function Wr(t,e,n){var i=null==t?K:Oe(t,e);return i===K?n:i}function Kr(t,e){return null!=t&&ji(t,e,He)}function Yr(t){return kr(t)?de(t):cn(t)}function zr(t){return kr(t)?de(t,!0):gn(t)}function Xr(t,e){if(null==t)return{};var n=f(Pi(t),(function(t){return[t]}));return e=Mi(e),An(t,n,(function(t,n){return e(t,n[0])}))}function $r(t){return null==t?[]:R(t,Yr(t))}function Qr(t){return nu(qr(t).toLowerCase())}function Jr(t){return(t=qr(t))&&t.replace(re,dn).replace(Fe,"")}function Zr(t,e,n){return t=qr(t),(e=n?K:e)===K?U(t)?W(t):y(t):t.match(e)||[]}function ta(t){return function(){return t}}function ea(t){return t}function na(t){return nn("function"==typeof t?t:Ae(t,1))}function ia(t,e,n){var i=Yr(e),r=Pe(e,i);null!=n||Ir(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Pe(e,Yr(e)));var a=!(Ir(n)&&"chain"in n&&!n.chain),o=Dr(t);return s(r,(function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),r=n.__actions__=ii(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,p([this.value()],arguments))})})),t}function ra(){}function aa(t){return Wi(t)?w(ir(t)):function(t){return function(e){return Oe(e,t)}}(t)}function oa(){return[]}function sa(){return!1}var ua=(e=null==e?Qe:pn.defaults(Qe.Object(),e,pn.pick(Qe,Ve))).Array,la=e.Date,ca=e.Error,da=e.Function,ha=e.Math,fa=e.Object,pa=e.RegExp,ga=e.String,ma=e.TypeError,va=ua.prototype,ya=da.prototype,_a=fa.prototype,ba=e["__core-js_shared__"],Ea=ya.toString,Ta=_a.hasOwnProperty,Aa=0,Sa=function(){var t=/[^.]+$/.exec(ba&&ba.keys&&ba.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),wa=_a.toString,ka=Ea.call(fa),Ca=Qe._,xa=pa("^"+Ea.call(Ta).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Da=tn?e.Buffer:K,La=e.Symbol,Ra=e.Uint8Array,Ia=Da?Da.allocUnsafe:K,Pa=j(fa.getPrototypeOf,fa),Oa=fa.create,Na=_a.propertyIsEnumerable,Ma=va.splice,Fa=La?La.isConcatSpreadable:K,Ua=La?La.iterator:K,Ba=La?La.toStringTag:K,ja=function(){try{var t=Bi(fa,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ha=e.clearTimeout!==Qe.clearTimeout&&e.clearTimeout,Va=la&&la.now!==Qe.Date.now&&la.now,Ga=e.setTimeout!==Qe.setTimeout&&e.setTimeout,qa=ha.ceil,Wa=ha.floor,Ka=fa.getOwnPropertySymbols,Ya=Da?Da.isBuffer:K,za=e.isFinite,Xa=va.join,$a=j(fa.keys,fa),Qa=ha.max,Ja=ha.min,Za=la.now,to=e.parseInt,eo=ha.random,no=va.reverse,io=Bi(e,"DataView"),ro=Bi(e,"Map"),ao=Bi(e,"Promise"),oo=Bi(e,"Set"),so=Bi(e,"WeakMap"),uo=Bi(fa,"create"),lo=so&&new so,co={},ho=rr(io),fo=rr(ro),po=rr(ao),go=rr(oo),mo=rr(so),vo=La?La.prototype:K,yo=vo?vo.valueOf:K,_o=vo?vo.toString:K,bo=function(){function t(){}return function(e){if(!Ir(e))return{};if(Oa)return Oa(e);t.prototype=e;var n=new t;return t.prototype=K,n}}();n.templateSettings={escape:Nt,evaluate:Mt,interpolate:Ft,variable:"",imports:{_:n}},n.prototype=i.prototype,n.prototype.constructor=n,r.prototype=bo(i.prototype),r.prototype.constructor=r,k.prototype=bo(i.prototype),k.prototype.constructor=k,Xt.prototype.clear=function(){this.__data__=uo?uo(null):{},this.size=0},Xt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Xt.prototype.get=function(t){var e=this.__data__;if(uo){var n=e[t];return n===z?K:n}return Ta.call(e,t)?e[t]:K},Xt.prototype.has=function(t){var e=this.__data__;return uo?e[t]!==K:Ta.call(e,t)},Xt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=uo&&e===K?z:e,this},se.prototype.clear=function(){this.__data__=[],this.size=0},se.prototype.delete=function(t){var e=this.__data__,n=ve(e,t);return!(n<0||(n==e.length-1?e.pop():Ma.call(e,n,1),--this.size,0))},se.prototype.get=function(t){var e=this.__data__,n=ve(e,t);return n<0?K:e[n][1]},se.prototype.has=function(t){return ve(this.__data__,t)>-1},se.prototype.set=function(t,e){var n=this.__data__,i=ve(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},ue.prototype.clear=function(){this.size=0,this.__data__={hash:new Xt,map:new(ro||se),string:new Xt}},ue.prototype.delete=function(t){var e=Fi(this,t).delete(t);return this.size-=e?1:0,e},ue.prototype.get=function(t){return Fi(this,t).get(t)},ue.prototype.has=function(t){return Fi(this,t).has(t)},ue.prototype.set=function(t,e){var n=Fi(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},le.prototype.add=le.prototype.push=function(t){return this.__data__.set(t,z),this},le.prototype.has=function(t){return this.__data__.has(t)},ce.prototype.clear=function(){this.__data__=new se,this.size=0},ce.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ce.prototype.get=function(t){return this.__data__.get(t)},ce.prototype.has=function(t){return this.__data__.has(t)},ce.prototype.set=function(t,e){var n=this.__data__;if(n instanceof se){var i=n.__data__;if(!ro||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new ue(i)}return n.set(t,e),this.size=n.size,this};var Eo=si(Re),To=si(Ie,!0),Ao=ui(),So=ui(!0),wo=lo?function(t,e){return lo.set(t,e),t}:ea,ko=ja?function(t,e){return ja(t,"toString",{configurable:!0,enumerable:!1,value:ta(e),writable:!0})}:ea,Co=xn,xo=Ha||function(t){return Qe.clearTimeout(t)},Do=oo&&1/V(new oo([,-0]))[1]==1/0?function(t){return new oo(t)}:ra,Lo=lo?function(t){return lo.get(t)}:ra,Ro=Ka?function(t){return null==t?[]:(t=fa(t),c(Ka(t),(function(e){return Na.call(t,e)})))}:oa,Io=Ka?function(t){for(var e=[];t;)p(e,Ro(t)),t=Pa(t);return e}:oa,Po=Ue;(io&&Po(new io(new ArrayBuffer(1)))!=yt||ro&&Po(new ro)!=ut||ao&&Po(ao.resolve())!=dt||oo&&Po(new oo)!=ft||so&&Po(new so)!=mt)&&(Po=function(t){var e=Ue(t),n=e==ct?t.constructor:K,i=n?rr(n):"";if(i)switch(i){case ho:return yt;case fo:return ut;case po:return dt;case go:return ft;case mo:return mt}return e});var Oo=ba?Dr:sa,No=er(wo),Mo=Ga||function(t,e){return Qe.setTimeout(t,e)},Fo=er(ko),Uo=function(t){var e=Ar(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(jt,(function(t,n,i,r){e.push(i?r.replace($t,"$1"):n||t)})),e})),Bo=xn((function(t,e){return Cr(t)?ke(t,Le(e,1,Cr,!0)):[]})),jo=xn((function(t,e){var n=cr(e);return Cr(n)&&(n=K),Cr(t)?ke(t,Le(e,1,Cr,!0),Mi(n,2)):[]})),Ho=xn((function(t,e){var n=cr(e);return Cr(n)&&(n=K),Cr(t)?ke(t,Le(e,1,Cr,!0),K,n):[]})),Vo=xn((function(t){var e=f(t,Yn);return e.length&&e[0]===t[0]?Ke(e):[]})),Go=xn((function(t){var e=cr(t),n=f(t,Yn);return e===cr(n)?e=K:n.pop(),n.length&&n[0]===t[0]?Ke(n,Mi(e,2)):[]})),qo=xn((function(t){var e=cr(t),n=f(t,Yn);return(e="function"==typeof e?e:K)&&n.pop(),n.length&&n[0]===t[0]?Ke(n,K,e):[]})),Wo=xn(dr),Ko=Ri((function(t,e){var n=null==t?0:t.length,i=Ee(t,e);return wn(t,f(e,(function(t){return Gi(t,n)?+t:t})).sort(ti)),i})),Yo=xn((function(t){return jn(Le(t,1,Cr,!0))})),zo=xn((function(t){var e=cr(t);return Cr(e)&&(e=K),jn(Le(t,1,Cr,!0),Mi(e,2))})),Xo=xn((function(t){var e=cr(t);return e="function"==typeof e?e:K,jn(Le(t,1,Cr,!0),K,e)})),$o=xn((function(t,e){return Cr(t)?ke(t,e):[]})),Qo=xn((function(t){return Wn(c(t,Cr))})),Jo=xn((function(t){var e=cr(t);return Cr(e)&&(e=K),Wn(c(t,Cr),Mi(e,2))})),Zo=xn((function(t){var e=cr(t);return e="function"==typeof e?e:K,Wn(c(t,Cr),K,e)})),ts=xn(fr),es=xn((function(t){var e=t.length,n=e>1?t[e-1]:K;return n="function"==typeof n?(t.pop(),n):K,pr(t,n)})),ns=Ri((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,a=function(e){return Ee(e,t)};return!(e>1||this.__actions__.length)&&i instanceof k&&Gi(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:mr,args:[a],thisArg:K}),new r(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(K),t}))):this.thru(a)})),is=ai((function(t,e,n){Ta.call(t,n)?++t[n]:be(t,n,1)})),rs=fi(or),as=fi(sr),os=ai((function(t,e,n){Ta.call(t,n)?t[n].push(e):be(t,n,[e])})),ss=xn((function(t,e,n){var i=-1,r="function"==typeof e,o=kr(t)?ua(t.length):[];return Eo(t,(function(t){o[++i]=r?a(e,t,n):Xe(t,e,n)})),o})),us=ai((function(t,e,n){be(t,n,e)})),ls=ai((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),cs=xn((function(t,e){if(null==t)return[];var n=e.length;return n>1&&qi(t,e[0],e[1])?e=[]:n>2&&qi(e[0],e[1],e[2])&&(e=[e[0]]),Tn(t,Le(e,1),[])})),ds=Va||function(){return Qe.Date.now()},hs=xn((function(t,e,n){var i=1;if(n.length){var r=H(n,Ni(hs));i|=32}return ki(t,i,e,n,r)})),fs=xn((function(t,e,n){var i=3;if(n.length){var r=H(n,Ni(fs));i|=32}return ki(e,i,t,n,r)})),ps=xn((function(t,e){return we(t,1,e)})),gs=xn((function(t,e,n){return we(t,Vr(e)||0,n)}));Ar.Cache=ue;var ms=Co((function(t,e){var n=(e=1==e.length&&As(e[0])?f(e[0],L(Mi())):f(Le(e,1),L(Mi()))).length;return xn((function(i){for(var r=-1,o=Ja(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return a(t,this,i)}))})),vs=xn((function(t,e){var n=H(e,Ni(vs));return ki(t,32,K,e,n)})),ys=xn((function(t,e){var n=H(e,Ni(ys));return ki(t,64,K,e,n)})),_s=Ri((function(t,e){return ki(t,256,K,K,K,e)})),bs=Ti(Be),Es=Ti((function(t,e){return t>=e})),Ts=$e(function(){return arguments}())?$e:function(t){return Pr(t)&&Ta.call(t,"callee")&&!Na.call(t,"callee")},As=ua.isArray,Ss=rn?L(rn):function(t){return Pr(t)&&Ue(t)==vt},ws=Ya||sa,ks=an?L(an):function(t){return Pr(t)&&Ue(t)==rt},Cs=on?L(on):function(t){return Pr(t)&&Po(t)==ut},xs=sn?L(sn):function(t){return Pr(t)&&Ue(t)==ht},Ds=un?L(un):function(t){return Pr(t)&&Po(t)==ft},Ls=ln?L(ln):function(t){return Pr(t)&&Rr(t.length)&&!!qe[Ue(t)]},Rs=Ti(mn),Is=Ti((function(t,e){return t<=e})),Ps=oi((function(t,e){if(Yi(e)||kr(e))ri(e,Yr(e),t);else for(var n in e)Ta.call(e,n)&&me(t,n,e[n])})),Os=oi((function(t,e){ri(e,zr(e),t)})),Ns=oi((function(t,e,n,i){ri(e,zr(e),t,i)})),Ms=oi((function(t,e,n,i){ri(e,Yr(e),t,i)})),Fs=Ri(Ee),Us=xn((function(t,e){t=fa(t);var n=-1,i=e.length,r=i>2?e[2]:K;for(r&&qi(e[0],e[1],r)&&(i=1);++n<i;)for(var a=e[n],o=zr(a),s=-1,u=o.length;++s<u;){var l=o[s],c=t[l];(c===K||wr(c,_a[l])&&!Ta.call(t,l))&&(t[l]=a[l])}return t})),Bs=xn((function(t){return t.push(K,xi),a(qs,K,t)})),js=mi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=wa.call(e)),t[e]=n}),ta(ea)),Hs=mi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=wa.call(e)),Ta.call(t,e)?t[e].push(n):t[e]=[n]}),Mi),Vs=xn(Xe),Gs=oi((function(t,e,n){bn(t,e,n)})),qs=oi((function(t,e,n,i){bn(t,e,n,i)})),Ws=Ri((function(t,e){var n={};if(null==t)return n;var i=!1;e=f(e,(function(e){return e=Xn(e,t),i||(i=e.length>1),e})),ri(t,Pi(t),n),i&&(n=Ae(n,7,Di));for(var r=e.length;r--;)Hn(n,e[r]);return n})),Ks=Ri((function(t,e){return null==t?{}:function(t,e){return An(t,e,(function(e,n){return Kr(t,n)}))}(t,e)})),Ys=wi(Yr),zs=wi(zr),Xs=ci((function(t,e,n){return e=e.toLowerCase(),t+(n?Qr(e):e)})),$s=ci((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Qs=ci((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Js=li("toLowerCase"),Zs=ci((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),tu=ci((function(t,e,n){return t+(n?" ":"")+nu(e)})),eu=ci((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),nu=li("toUpperCase"),iu=xn((function(t,e){try{return a(t,K,e)}catch(t){return xr(t)?t:new ca(t)}})),ru=Ri((function(t,e){return s(e,(function(e){e=ir(e),be(t,e,hs(t[e],t))})),t})),au=pi(),ou=pi(!0),su=xn((function(t,e){return function(n){return Xe(n,t,e)}})),uu=xn((function(t,e){return function(n){return Xe(t,n,e)}})),lu=yi(f),cu=yi(l),du=yi(v),hu=Ei(),fu=Ei(!0),pu=vi((function(t,e){return t+e}),0),gu=Si("ceil"),mu=vi((function(t,e){return t/e}),1),vu=Si("floor"),yu=vi((function(t,e){return t*e}),1),_u=Si("round"),bu=vi((function(t,e){return t-e}),0);return n.after=function(t,e){if("function"!=typeof e)throw new ma(Y);return t=jr(t),function(){if(--t<1)return e.apply(this,arguments)}},n.ary=br,n.assign=Ps,n.assignIn=Os,n.assignInWith=Ns,n.assignWith=Ms,n.at=Fs,n.before=Er,n.bind=hs,n.bindAll=ru,n.bindKey=fs,n.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return As(t)?t:[t]},n.chain=gr,n.chunk=function(t,e,n){e=(n?qi(t,e,n):e===K)?1:Qa(jr(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,a=0,o=ua(qa(i/e));r<i;)o[a++]=Pn(t,r,r+=e);return o},n.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},n.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ua(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return p(As(n)?ii(n):[n],Le(e,1))},n.cond=function(t){var e=null==t?0:t.length,n=Mi();return t=e?f(t,(function(t){if("function"!=typeof t[1])throw new ma(Y);return[n(t[0]),t[1]]})):[],xn((function(n){for(var i=-1;++i<e;){var r=t[i];if(a(r[0],this,n))return a(r[1],this,n)}}))},n.conforms=function(t){return function(t){var e=Yr(t);return function(n){return Se(n,t,e)}}(Ae(t,1))},n.constant=ta,n.countBy=is,n.create=function(t,e){var n=bo(t);return null==e?n:_e(n,e)},n.curry=function t(e,n,i){var r=ki(e,8,K,K,K,K,K,n=i?K:n);return r.placeholder=t.placeholder,r},n.curryRight=function t(e,n,i){var r=ki(e,16,K,K,K,K,K,n=i?K:n);return r.placeholder=t.placeholder,r},n.debounce=Tr,n.defaults=Us,n.defaultsDeep=Bs,n.defer=ps,n.delay=gs,n.difference=Bo,n.differenceBy=jo,n.differenceWith=Ho,n.drop=function(t,e,n){var i=null==t?0:t.length;return i?Pn(t,(e=n||e===K?1:jr(e))<0?0:e,i):[]},n.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Pn(t,0,(e=i-(e=n||e===K?1:jr(e)))<0?0:e):[]},n.dropRightWhile=function(t,e){return t&&t.length?Gn(t,Mi(e,3),!0,!0):[]},n.dropWhile=function(t,e){return t&&t.length?Gn(t,Mi(e,3),!0):[]},n.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&qi(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=jr(n))<0&&(n=-n>r?0:r+n),(i=i===K||i>r?r:jr(i))<0&&(i+=r),i=n>i?0:Hr(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},n.filter=function(t,e){return(As(t)?c:De)(t,Mi(e,3))},n.flatMap=function(t,e){return Le(_r(t,e),1)},n.flatMapDeep=function(t,e){return Le(_r(t,e),1/0)},n.flatMapDepth=function(t,e,n){return n=n===K?1:jr(n),Le(_r(t,e),n)},n.flatten=ur,n.flattenDeep=function(t){return null!=t&&t.length?Le(t,1/0):[]},n.flattenDepth=function(t,e){return null!=t&&t.length?Le(t,e=e===K?1:jr(e)):[]},n.flip=function(t){return ki(t,512)},n.flow=au,n.flowRight=ou,n.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},n.functions=function(t){return null==t?[]:Pe(t,Yr(t))},n.functionsIn=function(t){return null==t?[]:Pe(t,zr(t))},n.groupBy=os,n.initial=function(t){return null!=t&&t.length?Pn(t,0,-1):[]},n.intersection=Vo,n.intersectionBy=Go,n.intersectionWith=qo,n.invert=js,n.invertBy=Hs,n.invokeMap=ss,n.iteratee=na,n.keyBy=us,n.keys=Yr,n.keysIn=zr,n.map=_r,n.mapKeys=function(t,e){var n={};return e=Mi(e,3),Re(t,(function(t,i,r){be(n,e(t,i,r),t)})),n},n.mapValues=function(t,e){var n={};return e=Mi(e,3),Re(t,(function(t,i,r){be(n,i,e(t,i,r))})),n},n.matches=function(t){return yn(Ae(t,1))},n.matchesProperty=function(t,e){return _n(t,Ae(e,1))},n.memoize=Ar,n.merge=Gs,n.mergeWith=qs,n.method=su,n.methodOf=uu,n.mixin=ia,n.negate=Sr,n.nthArg=function(t){return t=jr(t),xn((function(e){return En(e,t)}))},n.omit=Ws,n.omitBy=function(t,e){return Xr(t,Sr(Mi(e)))},n.once=function(t){return Er(2,t)},n.orderBy=function(t,e,n,i){return null==t?[]:(As(e)||(e=null==e?[]:[e]),As(n=i?K:n)||(n=null==n?[]:[n]),Tn(t,e,n))},n.over=lu,n.overArgs=ms,n.overEvery=cu,n.overSome=du,n.partial=vs,n.partialRight=ys,n.partition=ls,n.pick=Ks,n.pickBy=Xr,n.property=aa,n.propertyOf=function(t){return function(e){return null==t?K:Oe(t,e)}},n.pull=Wo,n.pullAll=dr,n.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Sn(t,e,Mi(n,2)):t},n.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Sn(t,e,K,n):t},n.pullAt=Ko,n.range=hu,n.rangeRight=fu,n.rearg=_s,n.reject=function(t,e){return(As(t)?c:De)(t,Sr(Mi(e,3)))},n.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=Mi(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return wn(t,r),n},n.rest=function(t,e){if("function"!=typeof t)throw new ma(Y);return xn(t,e=e===K?e:jr(e))},n.reverse=hr,n.sampleSize=function(t,e,n){return e=(n?qi(t,e,n):e===K)?1:jr(e),(As(t)?fe:Ln)(t,e)},n.set=function(t,e,n){return null==t?t:Rn(t,e,n)},n.setWith=function(t,e,n,i){return i="function"==typeof i?i:K,null==t?t:Rn(t,e,n,i)},n.shuffle=function(t){return(As(t)?pe:In)(t)},n.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&qi(t,e,n)?(e=0,n=i):(e=null==e?0:jr(e),n=n===K?i:jr(n)),Pn(t,e,n)):[]},n.sortBy=cs,n.sortedUniq=function(t){return t&&t.length?Fn(t):[]},n.sortedUniqBy=function(t,e){return t&&t.length?Fn(t,Mi(e,2)):[]},n.split=function(t,e,n){return n&&"number"!=typeof n&&qi(t,e,n)&&(e=n=K),(n=n===K?Z:n>>>0)?(t=qr(t))&&("string"==typeof e||null!=e&&!xs(e))&&!(e=Bn(e))&&F(t)?$n(q(t),0,n):t.split(e,n):[]},n.spread=function(t,e){if("function"!=typeof t)throw new ma(Y);return e=null==e?0:Qa(jr(e),0),xn((function(n){var i=n[e],r=$n(n,0,e);return i&&p(r,i),a(t,this,r)}))},n.tail=function(t){var e=null==t?0:t.length;return e?Pn(t,1,e):[]},n.take=function(t,e,n){return t&&t.length?Pn(t,0,(e=n||e===K?1:jr(e))<0?0:e):[]},n.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Pn(t,(e=i-(e=n||e===K?1:jr(e)))<0?0:e,i):[]},n.takeRightWhile=function(t,e){return t&&t.length?Gn(t,Mi(e,3),!1,!0):[]},n.takeWhile=function(t,e){return t&&t.length?Gn(t,Mi(e,3)):[]},n.tap=function(t,e){return e(t),t},n.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new ma(Y);return Ir(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Tr(t,e,{leading:i,maxWait:e,trailing:r})},n.thru=mr,n.toArray=Ur,n.toPairs=Ys,n.toPairsIn=zs,n.toPath=function(t){return As(t)?f(t,ir):Fr(t)?[t]:ii(Uo(qr(t)))},n.toPlainObject=Gr,n.transform=function(t,e,n){var i=As(t),r=i||ws(t)||Ls(t);if(e=Mi(e,4),null==n){var a=t&&t.constructor;n=r?i?new a:[]:Ir(t)&&Dr(a)?bo(Pa(t)):{}}return(r?s:Re)(t,(function(t,i,r){return e(n,t,i,r)})),n},n.unary=function(t){return br(t,1)},n.union=Yo,n.unionBy=zo,n.unionWith=Xo,n.uniq=function(t){return t&&t.length?jn(t):[]},n.uniqBy=function(t,e){return t&&t.length?jn(t,Mi(e,2)):[]},n.uniqWith=function(t,e){return e="function"==typeof e?e:K,t&&t.length?jn(t,K,e):[]},n.unset=function(t,e){return null==t||Hn(t,e)},n.unzip=fr,n.unzipWith=pr,n.update=function(t,e,n){return null==t?t:Vn(t,e,zn(n))},n.updateWith=function(t,e,n,i){return i="function"==typeof i?i:K,null==t?t:Vn(t,e,zn(n),i)},n.values=$r,n.valuesIn=function(t){return null==t?[]:R(t,zr(t))},n.without=$o,n.words=Zr,n.wrap=function(t,e){return vs(zn(e),t)},n.xor=Qo,n.xorBy=Jo,n.xorWith=Zo,n.zip=ts,n.zipObject=function(t,e){return Kn(t||[],e||[],me)},n.zipObjectDeep=function(t,e){return Kn(t||[],e||[],Rn)},n.zipWith=es,n.entries=Ys,n.entriesIn=zs,n.extend=Os,n.extendWith=Ns,ia(n,n),n.add=pu,n.attempt=iu,n.camelCase=Xs,n.capitalize=Qr,n.ceil=gu,n.clamp=function(t,e,n){return n===K&&(n=e,e=K),n!==K&&(n=(n=Vr(n))==n?n:0),e!==K&&(e=(e=Vr(e))==e?e:0),Te(Vr(t),e,n)},n.clone=function(t){return Ae(t,4)},n.cloneDeep=function(t){return Ae(t,5)},n.cloneDeepWith=function(t,e){return Ae(t,5,e="function"==typeof e?e:K)},n.cloneWith=function(t,e){return Ae(t,4,e="function"==typeof e?e:K)},n.conformsTo=function(t,e){return null==e||Se(t,e,Yr(e))},n.deburr=Jr,n.defaultTo=function(t,e){return null==t||t!=t?e:t},n.divide=mu,n.endsWith=function(t,e,n){t=qr(t),e=Bn(e);var i=t.length,r=n=n===K?i:Te(jr(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},n.eq=wr,n.escape=function(t){return(t=qr(t))&&Ot.test(t)?t.replace(It,hn):t},n.escapeRegExp=function(t){return(t=qr(t))&&Vt.test(t)?t.replace(Ht,"\\$&"):t},n.every=function(t,e,n){var i=As(t)?l:Ce;return n&&qi(t,e,n)&&(e=K),i(t,Mi(e,3))},n.find=rs,n.findIndex=or,n.findKey=function(t,e){return _(t,Mi(e,3),Re)},n.findLast=as,n.findLastIndex=sr,n.findLastKey=function(t,e){return _(t,Mi(e,3),Ie)},n.floor=vu,n.forEach=vr,n.forEachRight=yr,n.forIn=function(t,e){return null==t?t:Ao(t,Mi(e,3),zr)},n.forInRight=function(t,e){return null==t?t:So(t,Mi(e,3),zr)},n.forOwn=function(t,e){return t&&Re(t,Mi(e,3))},n.forOwnRight=function(t,e){return t&&Ie(t,Mi(e,3))},n.get=Wr,n.gt=bs,n.gte=Es,n.has=function(t,e){return null!=t&&ji(t,e,je)},n.hasIn=Kr,n.head=lr,n.identity=ea,n.includes=function(t,e,n,i){t=kr(t)?t:$r(t),n=n&&!i?jr(n):0;var r=t.length;return n<0&&(n=Qa(r+n,0)),Mr(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&E(t,e,n)>-1},n.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:jr(n);return r<0&&(r=Qa(i+r,0)),E(t,e,r)},n.inRange=function(t,e,n){return e=Br(e),n===K?(n=e,e=0):n=Br(n),function(t,e,n){return t>=Ja(e,n)&&t<Qa(e,n)}(t=Vr(t),e,n)},n.invoke=Vs,n.isArguments=Ts,n.isArray=As,n.isArrayBuffer=Ss,n.isArrayLike=kr,n.isArrayLikeObject=Cr,n.isBoolean=function(t){return!0===t||!1===t||Pr(t)&&Ue(t)==it},n.isBuffer=ws,n.isDate=ks,n.isElement=function(t){return Pr(t)&&1===t.nodeType&&!Nr(t)},n.isEmpty=function(t){if(null==t)return!0;if(kr(t)&&(As(t)||"string"==typeof t||"function"==typeof t.splice||ws(t)||Ls(t)||Ts(t)))return!t.length;var e=Po(t);if(e==ut||e==ft)return!t.size;if(Yi(t))return!cn(t).length;for(var n in t)if(Ta.call(t,n))return!1;return!0},n.isEqual=function(t,e){return Je(t,e)},n.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:K)?n(t,e):K;return i===K?Je(t,e,K,n):!!i},n.isError=xr,n.isFinite=function(t){return"number"==typeof t&&za(t)},n.isFunction=Dr,n.isInteger=Lr,n.isLength=Rr,n.isMap=Cs,n.isMatch=function(t,e){return t===e||Ze(t,e,Ui(e))},n.isMatchWith=function(t,e,n){return n="function"==typeof n?n:K,Ze(t,e,Ui(e),n)},n.isNaN=function(t){return Or(t)&&t!=+t},n.isNative=function(t){if(Oo(t))throw new ca("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return en(t)},n.isNil=function(t){return null==t},n.isNull=function(t){return null===t},n.isNumber=Or,n.isObject=Ir,n.isObjectLike=Pr,n.isPlainObject=Nr,n.isRegExp=xs,n.isSafeInteger=function(t){return Lr(t)&&t>=-Q&&t<=Q},n.isSet=Ds,n.isString=Mr,n.isSymbol=Fr,n.isTypedArray=Ls,n.isUndefined=function(t){return t===K},n.isWeakMap=function(t){return Pr(t)&&Po(t)==mt},n.isWeakSet=function(t){return Pr(t)&&"[object WeakSet]"==Ue(t)},n.join=function(t,e){return null==t?"":Xa.call(t,e)},n.kebabCase=$s,n.last=cr,n.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==K&&(r=(r=jr(n))<0?Qa(i+r,0):Ja(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):b(t,A,r,!0)},n.lowerCase=Qs,n.lowerFirst=Js,n.lt=Rs,n.lte=Is,n.max=function(t){return t&&t.length?xe(t,ea,Be):K},n.maxBy=function(t,e){return t&&t.length?xe(t,Mi(e,2),Be):K},n.mean=function(t){return S(t,ea)},n.meanBy=function(t,e){return S(t,Mi(e,2))},n.min=function(t){return t&&t.length?xe(t,ea,mn):K},n.minBy=function(t,e){return t&&t.length?xe(t,Mi(e,2),mn):K},n.stubArray=oa,n.stubFalse=sa,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=yu,n.nth=function(t,e){return t&&t.length?En(t,jr(e)):K},n.noConflict=function(){return Qe._===this&&(Qe._=Ca),this},n.noop=ra,n.now=ds,n.pad=function(t,e,n){t=qr(t);var i=(e=jr(e))?G(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return _i(Wa(r),n)+t+_i(qa(r),n)},n.padEnd=function(t,e,n){t=qr(t);var i=(e=jr(e))?G(t):0;return e&&i<e?t+_i(e-i,n):t},n.padStart=function(t,e,n){t=qr(t);var i=(e=jr(e))?G(t):0;return e&&i<e?_i(e-i,n)+t:t},n.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),to(qr(t).replace(qt,""),e||0)},n.random=function(t,e,n){if(n&&"boolean"!=typeof n&&qi(t,e,n)&&(e=n=K),n===K&&("boolean"==typeof e?(n=e,e=K):"boolean"==typeof t&&(n=t,t=K)),t===K&&e===K?(t=0,e=1):(t=Br(t),e===K?(e=t,t=0):e=Br(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=eo();return Ja(t+r*(e-t+Ye("1e-"+((r+"").length-1))),e)}return kn(t,e)},n.reduce=function(t,e,n){var i=As(t)?g:C,r=arguments.length<3;return i(t,Mi(e,4),n,r,Eo)},n.reduceRight=function(t,e,n){var i=As(t)?m:C,r=arguments.length<3;return i(t,Mi(e,4),n,r,To)},n.repeat=function(t,e,n){return e=(n?qi(t,e,n):e===K)?1:jr(e),Cn(qr(t),e)},n.replace=function(){var t=arguments,e=qr(t[0]);return t.length<3?e:e.replace(t[1],t[2])},n.result=function(t,e,n){var i=-1,r=(e=Xn(e,t)).length;for(r||(r=1,t=K);++i<r;){var a=null==t?K:t[ir(e[i])];a===K&&(i=r,a=n),t=Dr(a)?a.call(t):a}return t},n.round=_u,n.runInContext=t,n.sample=function(t){return(As(t)?he:Dn)(t)},n.size=function(t){if(null==t)return 0;if(kr(t))return Mr(t)?G(t):t.length;var e=Po(t);return e==ut||e==ft?t.size:cn(t).length},n.snakeCase=Zs,n.some=function(t,e,n){var i=As(t)?v:On;return n&&qi(t,e,n)&&(e=K),i(t,Mi(e,3))},n.sortedIndex=function(t,e){return Nn(t,e)},n.sortedIndexBy=function(t,e,n){return Mn(t,e,Mi(n,2))},n.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Nn(t,e);if(i<n&&wr(t[i],e))return i}return-1},n.sortedLastIndex=function(t,e){return Nn(t,e,!0)},n.sortedLastIndexBy=function(t,e,n){return Mn(t,e,Mi(n,2),!0)},n.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Nn(t,e,!0)-1;if(wr(t[n],e))return n}return-1},n.startCase=tu,n.startsWith=function(t,e,n){return t=qr(t),n=null==n?0:Te(jr(n),0,t.length),e=Bn(e),t.slice(n,n+e.length)==e},n.subtract=bu,n.sum=function(t){return t&&t.length?x(t,ea):0},n.sumBy=function(t,e){return t&&t.length?x(t,Mi(e,2)):0},n.template=function(t,e,i){var r=n.templateSettings;i&&qi(t,e,i)&&(e=K),t=qr(t),e=Ns({},e,r,Ci);var a,o,s=Ns({},e.imports,r.imports,Ci),u=Yr(s),l=R(s,u),c=0,d=e.interpolate||ae,h="__p += '",f=pa((e.escape||ae).source+"|"+d.source+"|"+(d===Ft?Qt:ae).source+"|"+(e.evaluate||ae).source+"|$","g"),p="//# sourceURL="+(Ta.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Ge+"]")+"\n";t.replace(f,(function(e,n,i,r,s,u){return i||(i=r),h+=t.slice(c,u).replace(oe,M),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),h+="';\n";var g=Ta.call(e,"variable")&&e.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(xt,""):h).replace(Dt,"$1").replace(Lt,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=iu((function(){return da(u,p+"return "+h).apply(K,l)}));if(m.source=h,xr(m))throw m;return m},n.times=function(t,e){if((t=jr(t))<1||t>Q)return[];var n=Z,i=Ja(t,Z);e=Mi(e),t-=Z;for(var r=D(i,e);++n<t;)e(n);return r},n.toFinite=Br,n.toInteger=jr,n.toLength=Hr,n.toLower=function(t){return qr(t).toLowerCase()},n.toNumber=Vr,n.toSafeInteger=function(t){return t?Te(jr(t),-Q,Q):0===t?t:0},n.toString=qr,n.toUpper=function(t){return qr(t).toUpperCase()},n.trim=function(t,e,n){if((t=qr(t))&&(n||e===K))return t.replace(Gt,"");if(!t||!(e=Bn(e)))return t;var i=q(t),r=q(e);return $n(i,P(i,r),O(i,r)+1).join("")},n.trimEnd=function(t,e,n){if((t=qr(t))&&(n||e===K))return t.replace(Wt,"");if(!t||!(e=Bn(e)))return t;var i=q(t);return $n(i,0,O(i,q(e))+1).join("")},n.trimStart=function(t,e,n){if((t=qr(t))&&(n||e===K))return t.replace(qt,"");if(!t||!(e=Bn(e)))return t;var i=q(t);return $n(i,P(i,q(e))).join("")},n.truncate=function(t,e){var n=30,i="...";if(Ir(e)){var r="separator"in e?e.separator:r;n="length"in e?jr(e.length):n,i="omission"in e?Bn(e.omission):i}var a=(t=qr(t)).length;if(F(t)){var o=q(t);a=o.length}if(n>=a)return t;var s=n-G(i);if(s<1)return i;var u=o?$n(o,0,s).join(""):t.slice(0,s);if(r===K)return u+i;if(o&&(s+=u.length-s),xs(r)){if(t.slice(s).search(r)){var l,c=u;for(r.global||(r=pa(r.source,qr(Jt.exec(r))+"g")),r.lastIndex=0;l=r.exec(c);)var d=l.index;u=u.slice(0,d===K?s:d)}}else if(t.indexOf(Bn(r),s)!=s){var h=u.lastIndexOf(r);h>-1&&(u=u.slice(0,h))}return u+i},n.unescape=function(t){return(t=qr(t))&&Pt.test(t)?t.replace(Rt,fn):t},n.uniqueId=function(t){var e=++Aa;return qr(t)+e},n.upperCase=eu,n.upperFirst=nu,n.each=vr,n.eachRight=yr,n.first=lr,ia(n,function(){var t={};return Re(n,(function(e,i){Ta.call(n.prototype,i)||(t[i]=e)})),t}(),{chain:!1}),n.VERSION="4.17.15",s(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){n[t].placeholder=n})),s(["drop","take"],(function(t,e){k.prototype[t]=function(n){n=n===K?1:Qa(jr(n),0);var i=this.__filtered__&&!e?new k(this):this.clone();return i.__filtered__?i.__takeCount__=Ja(n,i.__takeCount__):i.__views__.push({size:Ja(n,Z),type:t+(i.__dir__<0?"Right":"")}),i},k.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),s(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;k.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Mi(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),s(["head","last"],(function(t,e){var n="take"+(e?"Right":"");k.prototype[t]=function(){return this[n](1).value()[0]}})),s(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");k.prototype[t]=function(){return this.__filtered__?new k(this):this[n](1)}})),k.prototype.compact=function(){return this.filter(ea)},k.prototype.find=function(t){return this.filter(t).head()},k.prototype.findLast=function(t){return this.reverse().find(t)},k.prototype.invokeMap=xn((function(t,e){return"function"==typeof t?new k(this):this.map((function(n){return Xe(n,t,e)}))})),k.prototype.reject=function(t){return this.filter(Sr(Mi(t)))},k.prototype.slice=function(t,e){t=jr(t);var n=this;return n.__filtered__&&(t>0||e<0)?new k(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==K&&(n=(e=jr(e))<0?n.dropRight(-e):n.take(e-t)),n)},k.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},k.prototype.toArray=function(){return this.take(Z)},Re(k.prototype,(function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),a=/^(?:head|last)$/.test(e),o=n[a?"take"+("last"==e?"Right":""):e],s=a||/^find/.test(e);o&&(n.prototype[e]=function(){var e=this.__wrapped__,u=a?[1]:arguments,l=e instanceof k,c=u[0],d=l||As(e),h=function(t){var e=o.apply(n,p([t],u));return a&&f?e[0]:e};d&&i&&"function"==typeof c&&1!=c.length&&(l=d=!1);var f=this.__chain__,g=!!this.__actions__.length,m=s&&!f,v=l&&!g;if(!s&&d){e=v?e:new k(this);var y=t.apply(e,u);return y.__actions__.push({func:mr,args:[h],thisArg:K}),new r(y,f)}return m&&v?t.apply(this,u):(y=this.thru(h),m?a?y.value()[0]:y.value():y)})})),s(["pop","push","shift","sort","splice","unshift"],(function(t){var e=va[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var n=this.value();return e.apply(As(n)?n:[],t)}return this[i]((function(n){return e.apply(As(n)?n:[],t)}))}})),Re(k.prototype,(function(t,e){var i=n[e];if(i){var r=i.name+"";Ta.call(co,r)||(co[r]=[]),co[r].push({name:e,func:i})}})),co[gi(K,2).name]=[{name:"wrapper",func:K}],k.prototype.clone=function(){var t=new k(this.__wrapped__);return t.__actions__=ii(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ii(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ii(this.__views__),t},k.prototype.reverse=function(){if(this.__filtered__){var t=new k(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},k.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=As(t),i=e<0,r=n?t.length:0,a=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Ja(e,t+o);break;case"takeRight":t=Qa(t,e-o)}}return{start:t,end:e}}(0,r,this.__views__),o=a.start,s=a.end,u=s-o,l=i?s:o-1,c=this.__iteratees__,d=c.length,h=0,f=Ja(u,this.__takeCount__);if(!n||!i&&r==u&&f==u)return qn(t,this.__actions__);var p=[];t:for(;u--&&h<f;){for(var g=-1,m=t[l+=e];++g<d;){var v=c[g],y=v.iteratee,_=v.type,b=y(m);if(2==_)m=b;else if(!b){if(1==_)continue t;break t}}p[h++]=m}return p},n.prototype.at=ns,n.prototype.chain=function(){return gr(this)},n.prototype.commit=function(){return new r(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===K&&(this.__values__=Ur(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?K:this.__values__[this.__index__++]}},n.prototype.plant=function(t){for(var e,n=this;n instanceof i;){var r=ar(n);r.__index__=0,r.__values__=K,e?a.__wrapped__=r:e=r;var a=r;n=n.__wrapped__}return a.__wrapped__=t,e},n.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof k){var e=t;return this.__actions__.length&&(e=new k(this)),(e=e.reverse()).__actions__.push({func:mr,args:[hr],thisArg:K}),new r(e,this.__chain__)}return this.thru(hr)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return qn(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,Ua&&(n.prototype[Ua]=function(){return this}),n}();Qe._=pn,(i=function(){return pn}.call(e,n,e,r))===K||(r.exports=i)}).call(this)}).call(e,function(){return this}(),n(28)(t))},function(t,e,n){var i,r;i=[n(4)],void 0===(r=function(t){if(t("host-browser")){var e=navigator,n=e.userAgent,i=e.appVersion,r=parseFloat(i);if(t.add("ie11",n.indexOf("Trident")>=0),t.add("air",n.indexOf("AdobeAIR")>=0),t.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),t.add("khtml",i.indexOf("Konqueror")>=0?r:void 0),t.add("webkit",parseFloat(n.split("WebKit/")[1])||void 0),t.add("chrome",parseFloat(n.split("Chrome/")[1])||void 0),t.add("safari",i.indexOf("Safari")>=0&&!t("chrome")?parseFloat(i.split("Version/")[1]):void 0),t.add("mac",i.indexOf("Macintosh")>=0),t.add("quirks","BackCompat"==document.compatMode),n.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),o=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(o.replace(/_/,".").replace(/_/g,""));t.add(a,s),t.add("ios",s)}if(t.add("android",parseFloat(n.split("Android ")[1])||void 0),t.add("bb",(n.indexOf("BlackBerry")>=0||n.indexOf("BB10")>=0)&&parseFloat(n.split("Version/")[1])||void 0),t.add("svg","undefined"!=typeof SVGAngle),!t("webkit")){if(n.indexOf("Opera")>=0&&t.add("opera",r>=9.8&&parseFloat(n.split("Version/")[1])||r),n.indexOf("Gecko")>=0&&!t("khtml")&&!t("webkit")&&t.add("mozilla",r),t("mozilla")&&t.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0),document.all&&!t("opera")){var u=parseFloat(i.split("MSIE ")[1])||void 0,l=document.documentMode;l&&5!=l&&Math.floor(u)!=l&&(u=l),t.add("ie",u)}t.add("wii","undefined"!=typeof opera&&opera.wiiremote)}}return t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(54)],void 0===(r=function(t,e){return t([],{constructor:function(){"withCredentials"in new XMLHttpRequest?this.corsSupport="xhr":"object"==("undefined"==typeof XDomainRequest?"undefined":_typeof(XDomainRequest))||"function"==typeof XDomainRequest?this.corsSupport="xd":console.error("xhrProvider::constructor - CORS in not supported by the browser")},request:function(t,n,i,r,a){if("xd"==this.corsSupport){for(var o in i.query)t+=-1!=t.indexOf("?")?"&":"?",t+=o+"="+i.query[o];i.preventCache&&(t+=-1!=t.indexOf("?")?"&":"?",t+="_cb="+(new Date).getTime());var s=new XDomainRequest;s.open(i.method||"GET",t),s.timeout=0,s.onload=function(){var t;"json"==i.handleAs.toLowerCase()?null!=r&&null!=r&&r(n,JSON.parse(s.responseText)):(window.DOMParser?t=(new window.DOMParser).parseFromString(s.responseText,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(s.responseText)),null!=r&&null!=r&&r(n,t.documentElement||t))},s.onprogress=function(){},s.ontimeout=function(){},s.onerror=function(){null!=a&&null!=a&&a(n,"An unexpected error occurred")},setTimeout((function(){s.send()}),250)}else"xhr"==this.corsSupport?e(t,i).then((function(t){null!=r&&null!=r&&r(n,t.documentElement||t)}),(function(t){null!=a&&null!=a&&a(n,"An unexpected error occurred: "+t)})):console.error("xhrProvider::request - CORS in not supported by the browser")}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[e,n(5),n(9),n(17),n(7),n(19)],void 0===(r=function(t,e,n,i,r,a){function o(t,e){var n=e.parentNode;n&&n.insertBefore(t,e)}function s(t){if(t.canHaveChildren)try{return void(t.innerHTML="")}catch(t){}for(var e;e=t.lastChild;)u(e,t)}function u(t,e){t.firstChild&&s(t),e&&(n("ie")&&e.canHaveChildren&&"removeNode"in t?t.removeNode(!1):e.removeChild(t))}var l,c={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},d=/<\s*([\w\:]+)/,h={},f=0,p="__"+e._scopeName+"ToDomId";for(var g in c)if(c.hasOwnProperty(g)){var m=c[g];m.pre="option"==g?'<select multiple="multiple">':"<"+m.join("><")+">",m.post="</"+m.reverse().join("></")+">"}n("ie")<=8&&(l=function(t){t.__dojo_html5_tested="yes";var e=v("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},t.body);1!==e.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,(function(e){t.createElement(e)})),y(e)}),t.toDom=function(t,e){var r=(e=e||i.doc)[p];r||(e[p]=r=++f+"",h[r]=e.createElement("div")),n("ie")<=8&&!e.__dojo_html5_tested&&e.body&&l(e);var a,o,s,u,g=(t+="").match(d),m=g?g[1].toLowerCase():"",v=h[r];if(g&&c[m])for(a=c[m],v.innerHTML=a.pre+t+a.post,o=a.length;o;--o)v=v.firstChild;else v.innerHTML=t;if(1==v.childNodes.length)return v.removeChild(v.firstChild);for(u=e.createDocumentFragment();s=v.firstChild;)u.appendChild(s);return u},t.place=function(e,n,i){if(n=r.byId(n),"string"==typeof e&&(e=/^\s*</.test(e)?t.toDom(e,n.ownerDocument):r.byId(e)),"number"==typeof i){var a=n.childNodes;!a.length||a.length<=i?n.appendChild(e):o(e,a[i<0?0:i])}else switch(i){case"before":o(e,n);break;case"after":!function(t,e){var n=e.parentNode;n&&(n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling))}(e,n);break;case"replace":n.parentNode.replaceChild(e,n);break;case"only":t.empty(n),n.appendChild(e);break;case"first":if(n.firstChild){o(e,n.firstChild);break}default:n.appendChild(e)}return e};var v=t.create=function(e,n,o,s){var u=i.doc;return o&&(u=(o=r.byId(o)).ownerDocument),"string"==typeof e&&(e=u.createElement(e)),n&&a.set(e,n),o&&t.place(e,o,s),e};t.empty=function(t){s(r.byId(t))};var y=t.destroy=function(t){(t=r.byId(t))&&u(t,t.parentNode)}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(3)],void 0===(r=function(t,e){return t([],{INTERNAL_REQUEST_API_FUNCTIONS:{"get-alternate-content":"_onApiRequestGetAlternateContent","get-vast-instream":"_onApiRequestGetVastInstream"},constructor:function(t,e){this.config=t,this.target=e},emit:function(t,n,i){i&&this.config.playerId!=i.id||e.emit(this.target,t,{data:n,bubbles:!0,cancelable:!0})}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(33),n(3)],void 0===(r=function(t,e){"use strict";function n(){}var i=t.after;return n.prototype={on:function(t,n){return e.parse(this,t,n,(function(t,e){return i(t,"on"+e,n,!0)}))},emit:function(t,n){var i=[this];return i.push.apply(i,arguments),e.emit.apply(e,i)}},n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(5),n(32),n(25),n(24),n(4),n(2),n(90)],void 0===(r=function(t,e,n,i,r,a,o){var s=function(){},u=Object.freeze||function(){},l=t.Deferred=function(t){function o(t){if(h)throw new Error("This deferred has already been resolved");d=t,h=!0,c()}function c(){for(var t;!t&&v;){var n=v;v=v.next,(t=n.progress==s)&&(h=!1);var i=g?n.error:n.resolved;if(r("config-useDeferredInstrumentation")&&g&&e.instrumentRejected&&e.instrumentRejected(d,!!i),i)try{var o=i(d);if(o&&"function"==typeof o.then){o.then(a.hitch(n.deferred,"resolve"),a.hitch(n.deferred,"reject"),a.hitch(n.deferred,"progress"));continue}var u=t&&void 0===o;t&&!u&&(g=o instanceof Error),n.deferred[u&&g?"reject":"resolve"](u?d:o)}catch(t){n.deferred.reject(t)}else g?n.deferred.reject(d):n.deferred.resolve(d)}}var d,h,f,p,g,m,v,y=this.promise=new n;this.isResolved=y.isResolved=function(){return 0==p},this.isRejected=y.isRejected=function(){return 1==p},this.isFulfilled=y.isFulfilled=function(){return p>=0},this.isCanceled=y.isCanceled=function(){return f},this.resolve=this.callback=function(t){this.fired=p=0,this.results=[t,null],o(t)},this.reject=this.errback=function(t){g=!0,this.fired=p=1,r("config-useDeferredInstrumentation")&&e.instrumentRejected&&e.instrumentRejected(t,!!v),o(t),this.results=[null,t]},this.progress=function(t){for(var e=v;e;){var n=e.progress;n&&n(t),e=e.next}},this.addCallbacks=function(t,e){return this.then(t,e,s),this},y.then=this.then=function(t,e,n){var i=n==s?this:new l(y.cancel),r={resolved:t,error:e,progress:n,deferred:i};return v?m=m.next=r:v=m=r,h&&c(),i.promise};var _=this;y.cancel=this.cancel=function(){if(!h){var e=t&&t(_);h||(e instanceof Error||(e=new i(e)),e.log=!1,_.reject(e))}f=!0},u(y)};return a.extend(l,{addCallback:function(e){return this.addCallbacks(a.hitch.apply(t,arguments))},addErrback:function(e){return this.addCallbacks(null,a.hitch.apply(t,arguments))},addBoth:function(e){var n=a.hitch.apply(t,arguments);return this.addCallbacks(n,n)},fired:-1}),l.when=t.when=o,l}.apply(e,i))||(t.exports=r)},function(t,e,n){var i=n(8),r=n(21),a=r.getProtocol(),o={prod01:{liveStream:"playerservices.streamtheworld.com/api/livestream",nowPlayingHistory:a+"//np.tritondigital.com/public/nowplaying",playerWebAdmin:a+"//pwav4.tritondigital.com/jsonconfig.php",coreModuleDir:a+"//sdk.listenlive.co/core/swf/",npe:a+"//npe2.listenlive.co/services/",see:a+"//see-p-elb-01.tritondigital.net/widget/{tenantId}/see.js",UA:"UA-34627310-11"}},s=window.TdPlatform=function(t){var e=function(t){var e=i.keys(o);return null!=t&&e.indexOf(t)>-1}(t)?t:"prod01";this.endpoint=o[e]};t.exports=s},function(t,e,n){var i=n(8),r=n(110),a={parse:function(t){var e;return window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)),e},textContent:function(t){var e="";return t&&i.forEach(t.childNodes,(function(t){switch(t.nodeType){case 3:case 2:case 4:e+=t.nodeValue}})),e},xmlToJson:function(t){return r.parseXML(t,{mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!1,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!1})}};t.exports=a},function(t,e,n){var i,r;i=[n(5),n(2),n(9)],void 0===(r=function(t,e,n){var i={global:t.global,doc:this.document||null,body:function(e){return(e=e||t.doc).body||e.getElementsByTagName("body")[0]},setContext:function(e,n){t.global=i.global=e,t.doc=i.doc=n},withGlobal:function(e,n,r,a){var o=t.global;try{return t.global=i.global=e,i.withDoc.call(null,e.document,n,r,a)}finally{t.global=i.global=o}},withDoc:function(e,r,a,o){var s,u,l,c=i.doc,d=n("quirks"),h=n("ie");try{return t.doc=i.doc=e,t.isQuirks=n.add("quirks","BackCompat"==t.doc.compatMode,!0,!0),n("ie")&&(l=e.parentWindow)&&l.navigator&&(s=parseFloat(l.navigator.appVersion.split("MSIE ")[1])||void 0,(u=e.documentMode)&&5!=u&&Math.floor(s)!=u&&(s=u),t.isIE=n.add("ie",s,!0,!0)),a&&"string"==typeof r&&(r=a[r]),r.apply(a,o||[])}finally{t.doc=i.doc=c,t.isQuirks=n.add("quirks",d,!0,!0),t.isIE=n.add("ie",h,!0,!0)}}};return n("extend-dojo")&&e.mixin(t,i),i}.apply(e,i))||(t.exports=r)},function(t,e,n){var i=n(8);window.lodash=i.noConflict(),t.exports=new function t(){if("object"==_typeof(t.instance))return t.instance;var e="en",r=["en","fr","pt","es"],a=document.getElementsByTagName("script");if(!i.isEmpty(a)){var o=a[a.length-1].getAttribute("tdsdk-lang");i.isEmpty(o)||(e=o)}this.setLocalization=function(t){e=t},this.getLocalization=function(){return i.indexOf(r,e)>-1?n(111)("./"+e+".json"):n(57)},t.instance=this}},function(t,e,n){var i,r;i=[e,n(9),n(2),n(7),n(23),n(81)],void 0===(r=function(t,e,n,i,r,a){function o(t,e){var n=t.getAttributeNode&&t.getAttributeNode(e);return n&&n.specified}var s={innerHTML:1,className:1,htmlFor:e("ie"),value:1},u={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};t.has=function(t,e){var n=e.toLowerCase();return s[a.names[n]||e]||o(i.byId(t),u[n]||e)},t.get=function(t,e){t=i.byId(t);var r=e.toLowerCase(),l=a.names[r]||e,c=s[l],d=t[l];if(c&&void 0!==d)return d;if("href"!=l&&("boolean"==typeof d||n.isFunction(d)))return d;var h=u[r]||e;return o(t,h)?t.getAttribute(h):null},t.set=function(e,o,l){if(e=i.byId(e),2==arguments.length){for(var c in o)t.set(e,c,o[c]);return e}var d=o.toLowerCase(),h=a.names[d]||o,f=s[h];return"style"==h&&"string"!=typeof l?(r.set(e,l),e):f||"boolean"==typeof l||n.isFunction(l)?a.set(e,o,l):(e.setAttribute(u[d]||o,l),e)},t.remove=function(t,e){i.byId(t).removeAttribute(u[e.toLowerCase()]||e)},t.getNodeProp=function(t,e){t=i.byId(t);var n=e.toLowerCase(),r=a.names[n]||e;if(r in t&&"href"!=r)return t[r];var s=u[n]||e;return o(t,s)?t.getAttribute(s):null}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;(function(t,r){(function(){"use strict";function a(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function o(t){return t=d(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:a(t)}function s(t,e){for(var n in t)b.call(t,n)&&e(t[n],n,t)}function u(t){return null==t?a(t):E.call(t).slice(8,-1)}function l(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function c(t,e){var n=null;return function(t,e){var n=-1,i=t?t.length:0;if("number"==typeof i&&i>-1&&i<=v)for(;++n<i;)e(t[n],n,t);else s(t,e)}(t,(function(i,r){n=e(n,i,r,t)})),n}function d(t){return String(t).replace(/^ +| +$/g,"")}var h={function:!0,object:!0},f=h["undefined"==typeof window?"undefined":_typeof(window)]&&window||this,p=h[_typeof(e)]&&e,g=h[_typeof(t)]&&t&&!t.nodeType&&t,m=p&&g&&"object"==_typeof(r)&&r;!m||m.global!==m&&m.window!==m&&m.self!==m||(f=m);var v=Math.pow(2,53)-1,y=/\bOpera/,_=Object.prototype,b=_.hasOwnProperty,E=_.toString,T=function t(e){function n(t){return c(t,(function(t,n){var i=n.pattern||l(n);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=o(t[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}var i=f,r=e&&"object"==_typeof(e)&&"String"!=u(e);r&&(i=e,e=null);var a=i.navigator||{},h=a.userAgent||"";e||(e=h);var p,g,m=r?!!a.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(E.toString()),v="Object",_=r?v:"ScriptBridgingProxyObject",b=r?v:"Environment",T=r&&i.java?"JavaPackage":u(i.java),A=r?v:"RuntimeObject",S=/\bJava/.test(T)&&i.java,w=S&&u(i.environment)==b,k=S?"a":"Î±",C=S?"b":"Î²",x=i.document||{},D=i.operamini||i.opera,L=y.test(L=r&&D?D["[[Class]]"]:u(D))?L:D=null,R=e,I=[],P=null,O=e==h,N=O&&D&&"function"==typeof D.version&&D.version(),M=function(t){return c(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||l(n))+"\\b","i").exec(e)&&(n.label||n)}))}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),F=function(t){return c(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||l(n))+"\\b","i").exec(e)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),U=n([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),B=function(t){return c(t,(function(t,n,i){return t||(n[U]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(U)]||RegExp("\\b"+l(i)+"(?:\\b|\\w*\\d)","i").exec(e))&&i}))}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),j=function(t){return c(t,(function(t,n){var i=n.pattern||l(n);return!t&&(t=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(i=i[/[\d.]+$/.exec(t)])&&(t="Windows "+i),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),o(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,i,n.label||n)),t}))}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(M&&(M=[M]),B&&!U&&(U=n([B])),(p=/\bGoogle TV\b/.exec(U))&&(U=p[0]),/\bSimulator\b/i.test(e)&&(U=(U?U+" ":"")+"Simulator"),"Opera Mini"==F&&/\bOPiOS\b/.test(e)&&I.push("running in Turbo/Uncompressed mode"),"IE"==F&&/\blike iPhone OS\b/.test(e)?(B=(p=t(e.replace(/like iPhone OS/,""))).manufacturer,U=p.product):/^iP/.test(U)?(F||(F="Safari"),j="iOS"+((p=/ OS ([\d_]+)/i.exec(e))?" "+p[1].replace(/_/g,"."):"")):"Konqueror"!=F||/buntu/i.test(j)?B&&"Google"!=B&&(/Chrome/.test(F)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(U))||/\bAndroid\b/.test(j)&&/^Chrome/.test(F)&&/\bVersion\//i.test(e)?(F="Android Browser",j=/\bAndroid\b/.test(j)?j:"Android"):"Silk"==F?(/\bMobi/i.test(e)||(j="Android",I.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&I.unshift("accelerated")):"PaleMoon"==F&&(p=/\bFirefox\/([\d.]+)\b/.exec(e))?I.push("identifying as Firefox "+p[1]):"Firefox"==F&&(p=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(j||(j="Firefox OS"),U||(U=p[1])):!F||(p=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(F))?(F&&!U&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(p+"/")+8))&&(F=null),(p=U||B||j)&&(U||B||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(j))&&(F=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(j)?j:p)+" Browser")):"Electron"==F&&(p=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&I.push("Chromium "+p):j="Kubuntu",N||(N=function(t){return c(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",l(F),"(?:Firefox|Minefield|NetFront)"])),(p=("iCab"==M&&parseFloat(N)>3?"WebKit":/\bOpera\b/.test(F)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(M)&&"WebKit"||!M&&/\bMSIE\b/i.test(e)&&("Mac OS"==j?"Tasman":"Trident")||"WebKit"==M&&/\bPlayStation\b(?! Vita\b)/i.test(F)&&"NetFront")&&(M=[p]),"IE"==F&&(p=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(F+=" Mobile",j="Windows Phone "+(/\+$/.test(p)?p:p+".x"),I.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(F="IE Mobile",j="Windows Phone 8.x",I.unshift("desktop mode"),N||(N=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=F&&"Trident"==M&&(p=/\brv:([\d.]+)/.exec(e))&&(F&&I.push("identifying as "+F+(N?" "+N:"")),F="IE",N=p[1]),O){if(function(t,e){var n=null!=t?_typeof(t[e]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!t[e])}(i,"global"))if(S&&(R=(p=S.lang.System).getProperty("os.arch"),j=j||p.getProperty("os.name")+" "+p.getProperty("os.version")),w){try{N=i.require("ringo/engine").version.join("."),F="RingoJS"}catch(e){(p=i.system)&&p.global.system==i.system&&(F="Narwhal",j||(j=p[0].os||null))}F||(F="Rhino")}else"object"==_typeof(i.process)&&!i.process.browser&&(p=i.process)&&("object"==_typeof(p.versions)&&("string"==typeof p.versions.electron?(I.push("Node "+p.versions.node),F="Electron",N=p.versions.electron):"string"==typeof p.versions.nw&&(I.push("Chromium "+N,"Node "+p.versions.node),F="NW.js",N=p.versions.nw)),F||(F="Node.js",R=p.arch,j=p.platform,N=(N=/[\d.]+/.exec(p.version))?N[0]:null));else u(p=i.runtime)==_?(F="Adobe AIR",j=p.flash.system.Capabilities.os):u(p=i.phantom)==A?(F="PhantomJS",N=(p=p.version||null)&&p.major+"."+p.minor+"."+p.patch):"number"==typeof x.documentMode&&(p=/\bTrident\/(\d+)/i.exec(e))?(N=[N,x.documentMode],(p=+p[1]+4)!=N[1]&&(I.push("IE "+N[1]+" mode"),M&&(M[1]=""),N[1]=p),N="IE"==F?String(N[1].toFixed(1)):N[0]):"number"==typeof x.documentMode&&/^(?:Chrome|Firefox)\b/.test(F)&&(I.push("masking as "+F+" "+N),F="IE",N="11.0",M=["Trident"],j="Windows");j=j&&o(j)}if(N&&(p=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(N)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(O&&a.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(P=/b/i.test(p)?"beta":"alpha",N=N.replace(RegExp(p+"\\+?$"),"")+("beta"==P?C:k)+(/\d+\+?/.exec(p)||"")),"Fennec"==F||"Firefox"==F&&/\b(?:Android|Firefox OS)\b/.test(j))F="Firefox Mobile";else if("Maxthon"==F&&N)N=N.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(U))"Xbox 360"==U&&(j=null),"Xbox 360"==U&&/\bIEMobile\b/.test(e)&&I.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(F)&&(!F||U||/Browser|Mobi/.test(F))||"Windows CE"!=j&&!/Mobi/i.test(e))if("IE"==F&&O)try{null===i.external&&I.unshift("platform preview")}catch(e){I.unshift("embedded")}else(/\bBlackBerry\b/.test(U)||/\bBB10\b/.test(e))&&(p=(RegExp(U.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||N)?(j=((p=[p,/BB10/.test(e)])[1]?(U=null,B="BlackBerry"):"Device Software")+" "+p[0],N=null):this!=s&&"Wii"!=U&&(O&&D||/Opera/.test(F)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==F&&/\bOS X (?:\d+\.){2,}/.test(j)||"IE"==F&&(j&&!/^Win/.test(j)&&N>5.5||/\bWindows XP\b/.test(j)&&N>8||8==N&&!/\bTrident\b/.test(e)))&&!y.test(p=t.call(s,e.replace(y,"")+";"))&&p.name&&(p="ing as "+p.name+((p=p.version)?" "+p:""),y.test(F)?(/\bIE\b/.test(p)&&"Mac OS"==j&&(j=null),p="identify"+p):(p="mask"+p,F=L?o(L.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(p)&&(j=null),O||(N=null)),M=["Presto"],I.push(p));else F+=" Mobile";(p=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(p=[parseFloat(p.replace(/\.(\d)$/,".0$1")),p],"Safari"==F&&"+"==p[1].slice(-1)?(F="WebKit Nightly",P="alpha",N=p[1].slice(0,-1)):N!=p[1]&&N!=(p[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(N=null),p[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==p[0]&&537.36==p[2]&&parseFloat(p[1])>=28&&"WebKit"==M&&(M=["Blink"]),O&&(m||p[1])?(M&&(M[1]="like Chrome"),p=p[1]||((p=p[0])<530?1:p<532?2:p<532.05?3:p<533?4:p<534.03?5:p<534.07?6:p<534.1?7:p<534.13?8:p<534.16?9:p<534.24?10:p<534.3?11:p<535.01?12:p<535.02?"13+":p<535.07?15:p<535.11?16:p<535.19?17:p<536.05?18:p<536.1?19:p<537.01?20:p<537.11?"21+":p<537.13?23:p<537.18?24:p<537.24?25:p<537.36?26:"Blink"!=M?"27":"28")):(M&&(M[1]="like Safari"),p=(p=p[0])<400?1:p<500?2:p<526?3:p<533?4:p<534?"4+":p<535?5:p<537?6:p<538?7:p<601?8:"8"),M&&(M[1]+=" "+(p+="number"==typeof p?".x":/[.+]/.test(p)?"":"+")),"Safari"==F&&(!N||parseInt(N)>45)&&(N=p)),"Opera"==F&&(p=/\bzbov|zvav$/.exec(j))?(F+=" ",I.unshift("desktop mode"),"zvav"==p?(F+="Mini",N=null):F+="Mobile",j=j.replace(RegExp(" *"+p+"$"),"")):"Safari"==F&&/\bChrome\b/.exec(M&&M[1])&&(I.unshift("desktop mode"),F="Chrome Mobile",N=null,/\bOS X\b/.test(j)?(B="Apple",j="iOS 4.3+"):j=null),N&&0==N.indexOf(p=/[\d.]+$/.exec(j))&&e.indexOf("/"+p+"-")>-1&&(j=d(j.replace(p,""))),M&&!/\b(?:Avant|Nook)\b/.test(F)&&(/Browser|Lunascape|Maxthon/.test(F)||"Safari"!=F&&/^iOS/.test(j)&&/\bSafari\b/.test(M[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(F)&&M[1])&&(p=M[M.length-1])&&I.push(p),I.length&&(I=["("+I.join("; ")+")"]),B&&U&&U.indexOf(B)<0&&I.push("on "+B),U&&I.push((/^on /.test(I[I.length-1])?"":"on ")+U),j&&(p=/ ([\d.+]+)$/.exec(j),g=p&&"/"==j.charAt(j.length-p[0].length-1),j={architecture:32,family:p&&!g?j.replace(p[0],""):j,version:p?p[1]:null,toString:function(){var t=this.version;return this.family+(t&&!g?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(p=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(j&&(j.architecture=64,j.family=j.family.replace(RegExp(" *"+p),"")),F&&(/\bWOW64\b/i.test(e)||O&&/\w(?:86|32)$/.test(a.cpuClass||a.platform)&&!/\bWin64; x64\b/i.test(e))&&I.unshift("32-bit")):j&&/^OS X/.test(j.family)&&"Chrome"==F&&parseFloat(N)>=39&&(j.architecture=64),e||(e=null);var H={};return H.description=e,H.layout=M&&M[0],H.manufacturer=B,H.name=F,H.prerelease=P,H.product=U,H.ua=e,H.version=F&&N,H.os=j||{architecture:null,family:null,version:null,toString:function(){return"null"}},H.parse=t,H.toString=function(){return this.description||""},H.version&&I.unshift(N),H.name&&I.unshift(F),j&&F&&(j!=String(j).split(" ")[0]||j!=F.split(" ")[0]&&!U)&&I.push(U?"("+j+")":"on "+j),I.length&&(H.description=I.join(" ")),H}();f.platform=T,void 0===(i=function(){return T}.call(e,n,e,t))||(t.exports=i)}).call(this)}).call(e,n(28)(t),function(){return this}())},function(t,e){t.exports={currentProtocolIsHttps:function(){return"https:"===window.location.protocol},getProtocol:function(){return window.location.protocol}}},function(t,e,n){function i(){k.is(w.STOPPED)||k.is(w.PAUSED)||this.emit("html5-playback-status",{type:T.DATA_LOADING,mediaNode:this.audioNode})}function r(){k.is(w.STOPPED)||k.is(w.PAUSED)||this.emit("html5-playback-status",{type:T.LOAD_START,mediaNode:this.audioNode})}function a(){var t=this;k.is(w.STOPPED)||k.is(w.PAUSED)||null!==this.url&&("IE"===S.name&&"11.0"===S.version&&parseInt(S.os.version)>=7?this.audioNode.play():(t.emit("html5-playback-status",{type:T.CAN_PLAY,mediaNode:t.audioNode}),this.audioNode.play().then((function(){})).catch((function(e){t.handleHTMLPlayError(e)}))))}function o(){var t=this;k.is(w.STOPPED)||k.is(w.PAUSED)||null!==this.url&&("IE"===S.name&&"11.0"===S.version&&parseInt(S.os.version)>=7?this.audioNode.play():this.audioNode.play().then((function(){t.emit("html5-playback-status",{type:T.CAN_PLAY_THROUGH,mediaNode:t.audioNode})})).catch((function(e){t.handleHTMLPlayError(e)})))}function s(){k.is(w.STOPPED)||k.is(w.PAUSED)||this.emit("html5-playback-status",{type:T.WAITING,mediaNode:this.audioNode})}function u(){k.is(w.STOPPED)||k.is(w.PAUSED)||this.emit("html5-playback-status",{type:T.EMPTIED,mediaNode:this.audioNode})}function l(){k.is(w.STOPPED)||k.is(w.PAUSED)||this.emit("html5-playback-status",{type:T.ABORT,mediaNode:this.audioNode})}function c(){k.is(w.STOPPED)||this.emit("html5-playback-status",{type:T.ENDED,mediaNode:this.audioNode})}function d(){null!==this.url&&this.emit("html5-playback-status",{type:T.PLAY,mediaNode:this.audioNode})}function h(){k.is(w.STOPPED)?this.emit("html5-playback-status",{type:T.STOP,mediaNode:this.audioNode}):this.emit("html5-playback-status",{type:T.PAUSE,mediaNode:this.audioNode})}function f(){var t=this.audioNode;k.is(w.STOPPED)?this.emit("html5-playback-status",{type:T.STOP,mediaNode:t}):3!=t.readyState?(this.resetAudioNode(),this.emit("html5-playback-status",{type:T.ERROR,mediaNode:t})):this.emit("html5-playback-status",{type:T.STOP,mediaNode:t})}function p(){var t=this.audioNode;this.emit("html5-playback-status",{type:T.ERROR,mediaNode:t})}function g(){k.is(w.STOPPED)||k.is(w.PAUSED)||(this.audioNode.currentTime.toFixed(1)==this.audioNode.duration.toFixed(1)?this.emit("html5-playback-status",{type:T.ENDED,mediaNode:this.audioNode}):this.isLive||this.emit("html5-playback-status",{type:T.TIME_UPDATE,mediaNode:this.audioNode}))}function m(){this.boundOnOffline=p.bind(this),this.audioNode.addEventListener("loadeddata",i.bind(this)),this.audioNode.addEventListener("loadstart",r.bind(this)),this.audioNode.addEventListener("canplay",a.bind(this)),this.audioNode.addEventListener("canplaythrough",o.bind(this)),this.audioNode.addEventListener("waiting",s.bind(this)),this.audioNode.addEventListener("emptied",u.bind(this)),this.audioNode.addEventListener("abort",l.bind(this)),this.audioNode.addEventListener("ended",c.bind(this)),this.audioNode.addEventListener("play",d.bind(this)),this.audioNode.addEventListener("pause",h.bind(this)),this.audioNode.addEventListener("timeupdate",g.bind(this)),this.audioNode.addEventListener("error",f.bind(this)),window.addEventListener("offline",this.boundOnOffline)}function v(){this.audioNode.removeEventListener("loadeddata",i),this.audioNode.removeEventListener("loadstart",r),this.audioNode.removeEventListener("canplay",a),this.audioNode.removeEventListener("canplaythrough",o),this.audioNode.removeEventListener("waiting",s),this.audioNode.removeEventListener("emptied",u),this.audioNode.removeEventListener("abort",l),this.audioNode.removeEventListener("ended",c),this.audioNode.removeEventListener("play",d),this.audioNode.removeEventListener("pause",h),this.audioNode.removeEventListener("timeupdate",g),this.audioNode.removeEventListener("error",f),window.removeEventListener("offline",this.boundOnOffline)}function y(){return this.audioNode||(this.audioNode=new Audio,this.audioNode.autoplay=!1,this.audioNode.preload="none",m.call(this)),this.audioNode}var _=n(8),b=n(91).EventEmitter,E=n(36),T=n(39),A=n(92),S=n(20),w={IDLE:"IDLE",PLAYING:"PLAYING",STOPPED:"STOPPED",PAUSED:"PAUSED"},k=A.create({initial:w.STOPPED,error:function(t,e){console.warn("Event",t,"inappropriate in current state",e)},events:[{name:"play",from:w.STOPPED,to:w.PLAYING},{name:"play",from:w.PLAYING,to:w.PLAYING},{name:"stop",from:w.PLAYING,to:w.STOPPED},{name:"stop",from:w.PAUSED,to:w.STOPPED},{name:"pause",from:w.PLAYING,to:w.PAUSED},{name:"resume",from:w.PAUSED,to:w.PLAYING}]});t.exports=_.assign(new b,{audioNode:null,init:function(){this.audioNode=y.call(this),this.url=null,this.audioNode.src=""},playAudio:function(t,e,n){this.audioNode&&this.stop(),this.audioNode=y.call(this),this.url=t||this.url,this.isLive=n||this.isLive,this.useHlsLibrary=e||this.useHlsLibrary,this.useHlsLibrary?(this.hls=new E({maxBufferLength:30}),this.hls.loadSource(t),this.hls.attachMedia(this.audioNode)):(this.audioNode.src=t,this.audioNode.load()),k.play()},stop:function(){var t=this;k.is(w.STOPPED)||(this.audioNode=y.call(this),k.stop(),this.audioNode.pause(),"Safari"!==S.name||this.audioNode.src.indexOf("m3u8")>-1||this.useHlsLibrary?setTimeout((function(){t.audioNode.src="",t.url=null,t.resetAudioNode()}),300):setTimeout((function(){t.url=null,t.resetAudioNode()}),300),"iOS"===S.os.family&&"Chrome Mobile"===S.name&&window.stop(),this.useHlsLibrary&&(this.hls.detachMedia(),this.hls.stopLoad(),this.hls.destroy()))},pause:function(){k.is(w.PAUSED)||(this.audioNode=y.call(this),this.audioNode.pause(),k.pause())},resume:function(){var t=this;k.is(w.PAUSED)&&(this.audioNode=y.call(this),"IE"===S.name&&"11.0"===S.version&&parseInt(S.os.version)>=7?this.audioNode.play():this.audioNode.play().catch((function(e){t.handleHTMLPlayError(e)})),k.resume())},mute:function(){k.is(w.PLAYING)&&(this.audioNode=y.call(this),this.stop())},unMute:function(){k.is(w.PLAYING)||(this.audioNode=y.call(this))},setVolume:function(t){this.audioNode=y.call(this),this.audioNode.volume=t,0==t&&this.mute()},isStopped:function(){return k.is(w.STOPPED)},resetAudioNode:function(){v.call(this),this.audioNode=null,k.can("stop")&&k.stop()},destroyAudioElement:function(){this.emit("destroyAudioElement")},handleHTMLPlayError:function(t){"NotSupportedError"!==t.name&&"NotAllowedError"===t.name&&this.emit("html5-playback-status",{type:T.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})}})},function(t,e,n){var i,r;i=[n(9),n(7)],void 0===(r=function(t,e){function n(e,n,i){if(n=n.toLowerCase(),t("ie")){if("auto"==i){if("height"==n)return e.offsetHeight;if("width"==n)return e.offsetWidth}if("fontweight"==n)switch(i){case 700:return"bold";case 400:default:return"normal"}}return n in c||(c[n]=d.test(n)),c[n]?r(e,i):i}var i,r,a={};i=t("webkit")?function(t){var e;if(1==t.nodeType){var n=t.ownerDocument.defaultView;!(e=n.getComputedStyle(t,null))&&t.style&&(t.style.display="",e=n.getComputedStyle(t,null))}return e||{}}:t("ie")&&(t("ie")<9||t("quirks"))?function(t){return 1==t.nodeType&&t.currentStyle?t.currentStyle:{}}:function(t){return 1==t.nodeType?t.ownerDocument.defaultView.getComputedStyle(t,null):{}},a.getComputedStyle=i,r=t("ie")?function(t,e){if(!e)return 0;if("medium"==e)return 4;if(e.slice&&"px"==e.slice(-2))return parseFloat(e);var n=t.style,i=t.runtimeStyle,r=t.currentStyle,a=n.left,o=i.left;i.left=r.left;try{n.left=e,e=n.pixelLeft}catch(t){e=0}return n.left=a,i.left=o,e}:function(t,e){return parseFloat(e)||0},a.toPixelValue=r;var o="DXImageTransform.Microsoft.Alpha",s=function(t,e){try{return t.filters.item(o)}catch(t){return e?{}:null}},u=t("ie")<9||t("ie")<10&&t("quirks")?function(t){try{return s(t).Opacity/100}catch(t){return 1}}:function(t){return i(t).opacity},l=t("ie")<9||t("ie")<10&&t("quirks")?function(t,e){""===e&&(e=1);var n=100*e;if(1===e?(t.style.zoom="",s(t)&&(t.style.filter=t.style.filter.replace(new RegExp("\\s*progid:"+o+"\\([^\\)]+?\\)","i"),""))):(t.style.zoom=1,s(t)?s(t,1).Opacity=n:t.style.filter+=" progid:"+o+"(Opacity="+n+")",s(t,1).Enabled=!0),"tr"==t.tagName.toLowerCase())for(var i=t.firstChild;i;i=i.nextSibling)"td"==i.tagName.toLowerCase()&&l(i,e);return e}:function(t,e){return t.style.opacity=e},c={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,h={cssFloat:1,styleFloat:1,float:1};return a.get=function(t,i){var r=e.byId(t),o=arguments.length,s="opacity"==i;if(2==o&&s)return u(r);i=h[i]?"cssFloat"in r.style?"cssFloat":"styleFloat":i;var l=a.getComputedStyle(r);return 1==o?l:n(r,i,l[i]||r.style[i])},a.set=function(t,n,i){var r=e.byId(t),o=arguments.length,s="opacity"==n;if(n=h[n]?"cssFloat"in r.style?"cssFloat":"styleFloat":n,3==o)return s?l(r,i):r.style[n]=i;for(var u in n)a.set(t,u,n[u]);return a.getComputedStyle(r)},a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(35)],void 0===(r=function(t){return t("CancelError",null,null,{dojoType:"cancel"})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2)],void 0===(r=function(t){"use strict";function e(){throw new TypeError("abstract")}return t.extend((function(){}),{then:function(t,n,i){e()},cancel:function(t,n){e()},isResolved:function(){e()},isRejected:function(){e()},isFulfilled:function(){e()},isCanceled:function(){e()},always:function(t){return this.then(t,t)},otherwise:function(t){return this.then(null,t)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(13)],void 0===(r=function(t){var e=new t;return{publish:function(t,n){return e.emit.apply(e,arguments)},subscribe:function(t,n){return e.on.apply(e,arguments)}}}.apply(e,i))||(t.exports=r)},function(t,e){function n(t,e){if(t instanceof Array){var r=t.map((function(t){return n(t)}));e&&e.apply(this,r)}else{if(i[t])return i[t];console.error('Dynamic dojo require is not supported. Trying to require "'+t+'"')}}var i={};n.async=!0,n.toUrl=function(t){return t},n.register=function(t,e){return i[t]=e,e},n.unregister=function(t){delete i[t]},t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){var i;void 0===(i=function(){return{VAST_AD:"vastAd",MEDIA_AD:"mediaAd",ANDO_RUN_SPOT:"andoRunSpot",TRITON_AD_PLATFORM:"tap"}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i=n(8);t.exports={toSafeArray:function(t){return t?i.isArray(t)?t:[t]:[]}}},function(t,e,n){var i,r,a=n(15);i=[n(1),n(2),n(6),n(3),n(13)],void 0===(r=function(t,e,n,i,r){return t([r],{constructor:function(t,e){this.data=t,this.platformId=e,this.url=t.staticURL,this.id=t.id,this.listeners=[],this.platform=new a(e),this.alreadyFetched=!1},getStaticUrl:function(){return this.data.staticURL},getDynamicUrl:function(){return this.platform.endpoint.npe},getDynamicArtistUrl:function(t){return this.getDynamicUrl()+"artist/"+t},getDynamicAlbumUrl:function(t){return this.getDynamicUrl()+"album/"+t},getDynamicTrackUrl:function(t){return this.getDynamicUrl()+"track/"+t},getDynamicArtistPictureUrl:function(t,e){return this.getDynamicUrl()+"artist/"+t+"/picture/"+e},getDynamicAlbumPictureUrl:function(t,e){return this.getDynamicUrl()+"album/"+t+"/picture/"+e},notify:function(t,e){this.emit(t,e)},getRequestArgs:function(){return{handleAs:"json",preventCache:!1,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}},addEventListener:function(t,r){var a=-1;n.forEach(this.listeners,(function(e,n){e.eventName==t&&e.callback==r&&(a=n)}),this),-1==a&&this.listeners.push({eventName:t,callback:r,listener:i(this,t,e.hitch(this,r))})},removeEventListener:function(t,e){var i=-1;n.forEach(this.listeners,(function(n,r){n.eventName==t&&n.callback==e&&(i=r)}),this),i>-1&&(this.listeners[i].listener.remove(),this.listeners.splice(i,1))}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(4),n(2),n(24),n(25),n(56)],void 0===(r=function(t,e,n,i,r){"use strict";var a="This deferred has already been fulfilled.",o=Object.freeze||function(){},s=function(e,n,i,r,a){t("config-deferredInstrumentation")&&2===n&&d.instrumentRejected&&0===e.length&&d.instrumentRejected(i,!1,r,a);for(var o=0;o<e.length;o++)u(e[o],n,i,r)},u=function(e,n,i,r){var a=e[n],o=e.deferred;if(a)try{var s=a(i);if(0===n)void 0!==s&&c(o,n,s);else{if(s&&"function"==typeof s.then)return e.cancel=s.cancel,void s.then(l(o,1),l(o,2),l(o,0));c(o,1,s)}}catch(t){c(o,2,t)}else c(o,n,i);t("config-deferredInstrumentation")&&2===n&&d.instrumentRejected&&d.instrumentRejected(i,!!a,r,o.promise)},l=function(t,e){return function(n){c(t,e,n)}},c=function(t,e,n){if(!t.isCanceled())switch(e){case 0:t.progress(n);break;case 1:t.resolve(n);break;case 2:t.reject(n)}},d=function e(r){var l,c,d,h=this.promise=new i,f=this,p=!1,g=[];t("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(f,e),Error.captureStackTrace(h,e)),this.isResolved=h.isResolved=function(){return 1===l},this.isRejected=h.isRejected=function(){return 2===l},this.isFulfilled=h.isFulfilled=function(){return!!l},this.isCanceled=h.isCanceled=function(){return p},this.progress=function(t,e){if(l){if(!0===e)throw new Error(a);return h}return s(g,0,t,null,f),h},this.resolve=function(t,e){if(l){if(!0===e)throw new Error(a);return h}return s(g,l=1,c=t,null,f),g=null,h};var m=this.reject=function(e,n){if(l){if(!0===n)throw new Error(a);return h}return t("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(d={},m),s(g,l=2,c=e,d,f),g=null,h};this.then=h.then=function(t,n,i){var r=[i,t,n];return r.cancel=h.cancel,r.deferred=new e((function(t){return r.cancel&&r.cancel(t)})),l&&!g?u(r,l,c,d):g.push(r),r.deferred.promise},this.cancel=h.cancel=function(t,e){if(l){if(!0===e)throw new Error(a)}else{if(r){var i=r(t);t=void 0===i?t:i}if(p=!0,!l)return void 0===t&&(t=new n),m(t),t;if(2===l&&c===t)return t}},o(h)};return d.prototype.toString=function(){return"[object Deferred]"},r&&r(d),d}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){"use strict";function t(t){return function(i,r,a,o){var s,u=i[r];u&&u.target==i||(i[r]=s=function(){for(var t=n,i=arguments,r=s.before;r;)i=r.advice.apply(this,i)||i,r=r.next;if(s.around)var a=s.around.advice(this,i);for(var o=s.after;o&&o.id<t;){if(o.receiveArguments){var u=o.advice.apply(this,i);a=u===e?a:u}else a=o.advice.call(this,a,i);o=o.next}return a},u&&(s.around={advice:function(t,e){return u.apply(t,e)}}),s.target=i);var l=function(t,e,i,r){var a,o=t[e],s="around"==e;if(s){var u=i((function(){return o.advice(this,arguments)}));a={remove:function(){u&&(u=t=i=null)},advice:function(t,e){return u?u.apply(t,e):o.advice(t,e)}}}else a={remove:function(){if(a.advice){var n=a.previous,r=a.next;r||n?(n?n.next=r:t[e]=r,r&&(r.previous=n)):delete t[e],t=i=a.advice=null}},id:n++,advice:i,receiveArguments:r};if(o&&!s)if("after"==e){for(;o.next&&(o=o.next););o.next=a,a.previous=o}else"before"==e&&(t[e]=a,a.next=o,o.previous=a);else t[e]=a;return a}(s||u,t,a,o);return a=null,l}}var e,n=0,i=t("after");return{before:t("before"),around:t("around"),after:i}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,r;i=[n(35)],void 0===(r=function(t){return t("RequestError",(function(t,e){this.response=e}))}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2)],void 0===(r=function(t){return function(e,n,i,r){i=i||Error;var a=function t(e){if(i===Error){Error.captureStackTrace&&Error.captureStackTrace(this,t);var r,a=Error.call(this,e);for(r in a)a.hasOwnProperty(r)&&(this[r]=a[r]);this.message=e,this.stack=a.stack}else i.apply(this,arguments);n&&n.apply(this,arguments)};return(a.prototype=t.delegate(i.prototype,r)).name=e,a.prototype.constructor=a,a}}.apply(e,i))||(t.exports=r)},function(t,e,n){"undefined"!=typeof window&&(t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==_typeof(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
	  !*** ./node_modules/eventemitter3/index.js ***!
	  \*********************************************/
/*! no static exports found */ /*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,n){"use strict";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new r(n,i||t,a),s=l?l+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function s(){this._events=new i,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,l="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(l=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)u.call(t,e)&&n.push(l?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t){var e=l?l+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,a=new Array(r);i<r;i++)a[i]=n[i].fn;return a},s.prototype.listenerCount=function(t){var e=l?l+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,i,r,a){var o=l?l+t:t;if(!this._events[o])return!1;var s,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,r),!0;case 6:return c.fn.call(c.context,e,n,i,r,a),!0}for(u=1,s=new Array(d-1);u<d;u++)s[u-1]=arguments[u];c.fn.apply(c.context,s)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,i);break;default:if(!s)for(h=1,s=new Array(d-1);h<d;h++)s[h-1]=arguments[h];c[u].fn.apply(c[u].context,s)}}return!0},s.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,n,i){var r=l?l+t:t;if(!this._events[r])return this;if(!e)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||o(this,r);else{for(var s=0,u=[],c=a.length;s<c;s++)(a[s].fn!==e||i&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[r]=1===u.length?u[0]:u:o(this,r)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=l?l+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=l,s.EventEmitter=s,t.exports=s},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
	  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
	  \*****************************************************/
/*! no static exports found */ /*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,n){!function(e){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,i=/^([^\/?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=o.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=i.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(d)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=o}()},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
	  !*** ./node_modules/webworkify-webpack/index.js ***!
	  \**************************************************/
/*! no static exports found */ /*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,n){function i(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var i=e(e.s=ENTRY_MODULE);return i.default||i}function r(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t){return!isNaN(1*t)}function o(t,e,i){var o={};o[i]=[];var s=e.toString(),u=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return o;for(var d,h=u[1],f=new RegExp("(\\\\n|\\W)"+r(h)+c,"g");d=f.exec(s);)"dll-reference"!==d[3]&&o[i].push(d[3]);for(f=new RegExp("\\("+r(h)+'\\("(dll-reference\\s('+l+'))"\\)\\)'+c,"g");d=f.exec(s);)t[d[2]]||(o[i].push(d[1]),t[d[2]]=n(d[1]).m),o[d[2]]=o[d[2]]||[],o[d[2]].push(d[4]);for(var p=Object.keys(o),g=0;g<p.length;g++)for(var m=0;m<o[p[g]].length;m++)a(o[p[g]][m])&&(o[p[g]][m]=1*o[p[g]][m]);return o}function s(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}function u(t,e){for(var n={main:[e]},i={main:[]},r={main:{}};s(n);)for(var a=Object.keys(n),u=0;u<a.length;u++){var l=a[u],c=n[l].pop();if(r[l]=r[l]||{},!r[l][c]&&t[l][c]){r[l][c]=!0,i[l]=i[l]||[],i[l].push(c);for(var d=o(t,t[l][c],l),h=Object.keys(d),f=0;f<h.length;f++)n[h[f]]=n[h[f]]||[],n[h[f]]=n[h[f]].concat(d[h[f]])}}return i}var l="[\\.|\\-|\\+|\\w|/|@]+",c="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+l+").*?\\)";t.exports=function(t,e){e=e||{};var r={main:n.m},a=e.all?{main:Object.keys(r.main)}:u(r,t),o="";Object.keys(a).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;a[t][e];)e++;a[t].push(e),r[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a[t].map((function(e){return JSON.stringify(e)+": "+r[t][e].toString()})).join(",")+"});\n"})),o=o+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a.main.map((function(t){return JSON.stringify(t)+": "+r.main[t].toString()})).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(e.bare)return s;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),c=new window.Worker(l);return c.objectURL=l,c}},"./src/crypt/decrypter.js":
/*!********************************************!*\
	  !*** ./src/crypt/decrypter.js + 3 modules ***!
	  \********************************************/
/*! exports provided: default */ /*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(t,e,n){"use strict";n.r(e);var i=function(){function t(t,e){this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),r=function(){function t(t,e){this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),i=0;i<4;i++)n[i]=e.getUint32(4*i);return n},e.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],o=n[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,t[f]=m,e[m]=f;var v=h[f],y=h[v],_=h[y],b=257*h[m]^16843008*m;i[f]=b<<24|b>>>8,r[f]=b<<16|b>>>16,a[f]=b<<8|b>>>24,o[f]=b,b=16843009*_^65537*y^257*v^16843008*f,u[m]=b<<24|b>>>8,l[m]=b<<16|b>>>16,c[m]=b<<8|b>>>24,d[m]=b,f?(f=v^h[h[h[_^v]]],p^=h[h[p]]):f=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,i=0;i<e.length&&n;)n=e[i]===this.key[i],i++;if(!n){this.key=e;var r=this.keySize=e.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a,o,s,u,l=this.ksRows=4*(r+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<l;a++)a<r?s=c[a]=e[a]:(u=s,a%r==0?(u=h[(u=u<<8|u>>>24)>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u],u^=f[a/r|0]<<24):r>6&&a%r==4&&(u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u]),c[a]=s=(c[a-r]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?u:g[h[u>>>24]]^m[h[u>>>16&255]]^v[h[u>>>8&255]]^y[h[255&u]],d[o]=d[o]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,n,i){for(var r,a,o,s,u,l,c,d,h,f,p,g,m,v,y=this.keySize+6,_=this.invKeySchedule,b=this.invSBox,E=this.invSubMix,T=E[0],A=E[1],S=E[2],w=E[3],k=this.uint8ArrayToUint32Array_(n),C=k[0],x=k[1],D=k[2],L=k[3],R=new Int32Array(t),I=new Int32Array(R.length),P=this.networkToHostOrderSwap;e<R.length;){for(h=P(R[e]),f=P(R[e+1]),p=P(R[e+2]),g=P(R[e+3]),u=h^_[0],l=g^_[1],c=p^_[2],d=f^_[3],m=4,v=1;v<y;v++)r=T[u>>>24]^A[l>>16&255]^S[c>>8&255]^w[255&d]^_[m],a=T[l>>>24]^A[c>>16&255]^S[d>>8&255]^w[255&u]^_[m+1],o=T[c>>>24]^A[d>>16&255]^S[u>>8&255]^w[255&l]^_[m+2],s=T[d>>>24]^A[u>>16&255]^S[l>>8&255]^w[255&c]^_[m+3],u=r,l=a,c=o,d=s,m+=4;r=b[u>>>24]<<24^b[l>>16&255]<<16^b[c>>8&255]<<8^b[255&d]^_[m],a=b[l>>>24]<<24^b[c>>16&255]<<16^b[d>>8&255]<<8^b[255&u]^_[m+1],o=b[c>>>24]<<24^b[d>>16&255]<<16^b[u>>8&255]<<8^b[255&l]^_[m+2],s=b[d>>>24]<<24^b[u>>16&255]<<16^b[l>>8&255]<<8^b[255&c]^_[m+3],m+=3,I[e]=P(r^C),I[e+1]=P(s^x),I[e+2]=P(o^D),I[e+3]=P(a^L),C=h,x=f,D=p,L=g,e+=4}return i?function(t){var e=t.byteLength,n=e&&new DataView(t).getUint8(e-1);return n?t.slice(0,e-n):t}(I.buffer):I.buffer},e.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=n("./src/errors.ts"),s=n("./src/utils/logger.js"),u=n("./src/events.js"),l=n("./src/utils/get-self-scope.js"),c=Object(l.getSelfScope)(),d=function(){function t(t,e,n){var i=(void 0===n?{}:n).removePKCS7Padding,r=void 0===i||i;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=r,r)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var e=t.prototype;return e.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.decrypt=function(t,e,n,o){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new a),l.expandKey(e),o(l.decrypt(t,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new r(c,e)),this.fastAesKey.expandKey().then((function(r){new i(c,n).decrypt(t,r).catch((function(i){u.onWebCryptoError(i,t,e,n,o)})).then((function(t){o(t)}))})).catch((function(i){u.onWebCryptoError(i,t,e,n,o)}))}},e.onWebCryptoError=function(t,e,n,i,r){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,i,r)):(s.logger.error("decrypting error : "+t.message),this.observer.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},e.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.default=d},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
	  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
	  \**************************************************/
/*! exports provided: default */ /*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */ /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(t,e,n){"use strict";function i(t,e){return 255===t[e]&&240==(246&t[e+1])}function r(t,e){return 1&t[e+1]?7:9}function a(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function o(t,e){return!!(e+1<t.length&&i(t,e))}function s(t,e){if(o(t,e)){var n=r(t,e);if(e+n>=t.length)return!1;var s=a(t,e);if(s<=n)return!1;var u=e+s;if(u===t.length||u+1<t.length&&i(t,u))return!0}return!1}function u(t,e,n,i,r){if(!t.samplerate){var a=function(t,e,n,i){var r,a,o,s,u,l=navigator.userAgent.toLowerCase(),c=i,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return r=1+((192&e[n+2])>>>6),(a=(60&e[n+2])>>>2)>d.length-1?void t.trigger(v.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a}):(s=(1&e[n+2])<<2,s|=(192&e[n+3])>>>6,E.logger.log("manifest codec:"+i+",ADTS data:type:"+r+",sampleingIndex:"+a+"["+d[a]+"Hz],channelConfig:"+s),/firefox/i.test(l)?a>=6?(r=5,u=new Array(4),o=a-3):(r=2,u=new Array(2),o=a):-1!==l.indexOf("android")?(r=2,u=new Array(2),o=a):(r=5,u=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&a>=6?o=a-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(a>=6&&1===s||/vivaldi/i.test(l))||!i&&1===s)&&(r=2,u=new Array(2)),o=a)),u[0]=r<<3,u[0]|=(14&a)>>1,u[1]|=(1&a)<<7,u[1]|=s<<3,5===r&&(u[1]|=(14&o)>>1,u[2]=(1&o)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:d[a],channelCount:s,codec:"mp4a.40."+r,manifestCodec:c})}(e,n,i,r);t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,E.logger.log("parsed codec:"+t.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function l(t){return 9216e4/t}function c(t,e,n,i,o){var s,u,l=t.length;if(s=r(t,e),u=a(t,e),(u-=s)>0&&e+s+u<=l)return{headerLength:s,frameLength:u,stamp:n+i*o}}function d(t,e,n,i,r){var a=c(e,n,i,r,l(t.samplerate));if(a){var o=a.stamp,s=a.headerLength,u=a.frameLength,d={unit:e.subarray(n+s,n+s+u),pts:o,dts:o};return t.samples.push(d),{sample:d,length:u+s}}}function h(t,e,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var r=t*e*n;return i?Math.round(r):r}function f(t,e){return void 0===e&&(e=!1),h(t,1e3,1/M,e)}function p(t,e){return void 0===e&&(e=1),h(t,M,1/e)}function g(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}n.r(e);var m,v=n("./src/events.js"),y=n("./src/errors.ts"),_=n("./src/crypt/decrypter.js"),b=n("./src/polyfills/number.js"),E=n("./src/utils/logger.js"),T=n("./src/utils/get-self-scope.js"),A=n("./src/demux/id3.js"),S=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(A.default.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(s(t,e))return E.logger.log("ADTS sync word found !"),!0;return!1},e.append=function(t,e,n,i){for(var r=this._audioTrack,a=A.default.getID3Data(t,0)||[],s=A.default.getTimeStamp(a),l=Object(b.isFiniteNumber)(s)?90*s:9e4*e,c=0,h=l,f=t.length,p=a.length,g=[{pts:h,dts:h,data:a}];p<f-1;)if(o(t,p)&&p+5<f){u(r,this.observer,t,p,r.manifestCodec);var m=d(r,t,p,l,c);if(!m){E.logger.log("Unable to parse AAC frame");break}p+=m.length,h=m.sample.pts,c++}else A.default.isHeader(t,p)?(a=A.default.getID3Data(t,p),g.push({pts:h,dts:h,data:a}),p+=a.length):p++;this.remuxer.remux(r,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},e,n,i)},e.destroy=function(){},t}(),w=n("./src/demux/mp4demuxer.js"),k={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,n,i,r){if(!(n+24>e.length)){var a=this.parseHeader(e,n);if(a&&n+a.frameLength<=e.length){var o=i+r*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:e.subarray(n,n+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(s),{sample:s,length:a.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,i=t[e+1]>>1&3,r=t[e+2]>>4&15,a=t[e+2]>>2&3,o=t[e+2]>>1&1;if(1!==n&&0!==r&&15!==r&&3!==a){var s=3===n?3-i:3===i?3:4,u=1e3*k.BitratesMap[14*s+r-1],l=3===n?0:2===n?1:2,c=k.SamplingRateMap[3*l+a],d=t[e+3]>>6==3?1:2,h=k.SamplesCoefficients[n][i],f=k.BytesInSlot[i],p=8*h*f;return{sampleRate:c,channelCount:d,frameLength:parseInt(h*u/c+o,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=this.parseHeader(t,e),i=4;n&&n.frameLength&&(i=n.frameLength);var r=e+i;if(r===t.length||r+1<t.length&&this.isHeaderPattern(t,r))return!0}return!1}},C=k,x=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,i=new Uint8Array(4),r=Math.min(4,e);if(0===r)throw new Error("no bytes available");i.set(t.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&E.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?n<<e|this.readBits(e):n},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){var e,n=8,i=8;for(e=0;e<t;e++)0!==i&&(i=(n+this.readEG()+256)%256),n=0===i?n:i},e.readSPS=function(){var t,e,n,i,r,a,o,s=0,u=0,l=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),t=d(),h(5),g(3),d(),v(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var _=f();if(3===_&&g(1),v(),v(),g(1),p())for(a=3!==_?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}v();var b=f();if(0===b)f();else if(1===b)for(g(1),m(),m(),e=f(),o=0;o<e;o++)m();v(),g(1),n=f(),i=f(),0===(r=h(1))&&g(1),g(1),p()&&(s=f(),u=f(),l=f(),c=f());var E=[1,1];if(p()&&p())switch(d()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*s-2*u),height:(2-r)*(i+1)*16-(r?2:4)*(l+c),pixelRatio:E}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),D=function(){function t(t,e,n,i){this.decryptdata=n,this.discardEPB=i,this.decrypter=new _.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},e.decryptAacSample=function(t,e,n,i){var r=t[e].unit,a=r.subarray(16,r.length-r.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),r.set(a,16),i||s.decryptAacSamples(t,e+1,n)}))},e.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,i),!i)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),i=0,r=32;r<=t.length-16;r+=160,i+=16)n.set(t.subarray(r,r+16),i);return n},e.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,i=32;i<=t.length-16;i+=160,n+=16)t.set(e.subarray(n,n+16),i);return t},e.decryptAvcSample=function(t,e,n,i,r,a){var o=this.discardEPB(r.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,(function(s){r.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(t,e,n+1,i)}))},e.decryptAvcSamples=function(t,e,n,i){for(;;e++,n=0){if(e>=t.length)return void i();for(var r=t[e].units;!(n>=r.length);n++){var a=r[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,i,a,o),!o)return}}}},t}(),L={video:1,audio:2,id3:3,text:4},R=function(){function t(t,e,n,i){this.observer=t,this.config=n,this.typeSupported=i,this.remuxer=e,this.sampleAes=null,this.pmtUnknownTypes={}}var e=t.prototype;return e.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new D(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var n=t._syncOffset(e);return!(n<0||(n&&E.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:L[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},e.resetInitSegment=function(e,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=t.createTrack("video",r),this._audioTrack=t.createTrack("audio",r),this._id3Track=t.createTrack("id3",r),this._txtTrack=t.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=i,this._duration=r},e.resetTimeStamp=function(){},e.append=function(e,n,i,r){var a,o,s,u,l,c=e.length,d=!1;this.pmtUnknownTypes={},this.contiguous=i;var h=this.pmtParsed,f=this._avcTrack,p=this._audioTrack,g=this._id3Track,m=f.pid,_=p.pid,b=g.pid,T=this._pmtId,A=f.pesData,S=p.pesData,w=g.pesData,k=this._parsePAT,C=this._parsePMT.bind(this),x=this._parsePES,D=this._parseAVCPES.bind(this),L=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),I=this._parseID3PES.bind(this),P=t._syncOffset(e);for(c-=(c+P)%188,a=P;a<c;a+=188)if(71===e[a]){if(o=!!(64&e[a+1]),s=((31&e[a+1])<<8)+e[a+2],(48&e[a+3])>>4>1){if((u=a+5+e[a+4])===a+188)continue}else u=a+4;switch(s){case m:o&&(A&&(l=x(A))&&D(l,!1),A={data:[],size:0}),A&&(A.data.push(e.subarray(u,a+188)),A.size+=a+188-u);break;case _:o&&(S&&(l=x(S))&&(p.isAAC?L(l):R(l)),S={data:[],size:0}),S&&(S.data.push(e.subarray(u,a+188)),S.size+=a+188-u);break;case b:o&&(w&&(l=x(w))&&I(l),w={data:[],size:0}),w&&(w.data.push(e.subarray(u,a+188)),w.size+=a+188-u);break;case 0:o&&(u+=e[u]+1),T=this._pmtId=k(e,u);break;case T:o&&(u+=e[u]+1);var O=C(e,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(m=O.avc)>0&&(f.pid=m),(_=O.audio)>0&&(p.pid=_,p.isAAC=O.isAAC),(b=O.id3)>0&&(g.pid=b),d&&!h&&(E.logger.log("reparse from beginning"),d=!1,a=P-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(v.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});A&&(l=x(A))?(D(l,!0),f.pesData=null):f.pesData=A,S&&(l=x(S))?(p.isAAC?L(l):R(l),p.pesData=null):(S&&S.size&&E.logger.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=S),w&&(l=x(w))?(I(l),g.pesData=null):g.pesData=w,null==this.sampleAes?this.remuxer.remux(p,f,g,this._txtTrack,n,i,r):this.decryptAndRemux(p,f,g,this._txtTrack,n,i,r)},e.decryptAndRemux=function(t,e,n,i,r,a,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,(function(){s.decryptAndRemuxAvc(t,e,n,i,r,a,o)}))}else this.decryptAndRemuxAvc(t,e,n,i,r,a,o)},e.decryptAndRemuxAvc=function(t,e,n,i,r,a,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,(function(){s.remuxer.remux(t,e,n,i,r,a,o)}))}else this.remuxer.remux(t,e,n,i,r,a,o)},e.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},e._trackUnknownPmt=function(t,e,n){var i=this.pmtUnknownTypes[t]||0;return 0===i&&(this.pmtUnknownTypes[t]=0,e.call(E.logger,n)),this.pmtUnknownTypes[t]++,i},e._parsePMT=function(t,e,n,i){var r,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<r;){switch(a=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!i){this._trackUnknownPmt(t[e],E.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!i){this._trackUnknownPmt(t[e],E.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:n?-1===o.audio&&(o.audio=a,o.isAAC=!1):this._trackUnknownPmt(t[e],E.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(t[e],E.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(t[e],E.logger.log,"Unknown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return o},e._parsePES=function(t){var e,n,i,r,a,o,s,u,l=0,c=t.data;if(!t||0===t.size)return null;for(;c[0].length<19&&c.length>1;){var d=new Uint8Array(c[0].length+c[1].length);d.set(c[0]),d.set(c[1],c[0].length),c[0]=d,c.splice(1,1)}if(1===((e=c[0])[0]<<16)+(e[1]<<8)+e[2]){if((i=(e[4]<<8)+e[5])&&i>t.size-6)return null;if(192&(n=e[7])&&(o=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&n?o-(s=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(E.logger.warn(Math.round((o-s)/9e4)+"s delta between PTS and DTS, align them"),o=s):s=o),u=(r=e[8])+9,t.size<=u)return null;t.size-=u,a=new Uint8Array(t.size);for(var h=0,f=c.length;h<f;h++){var p=(e=c[h]).byteLength;if(u){if(u>p){u-=p;continue}e=e.subarray(u),p-=u,u=0}a.set(e,l),l+=p}return i&&(i-=r+3),{data:a,pts:o,dts:s,len:i}}return null},e.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,i=n.length;if(isNaN(t.pts)){if(!i)return void e.dropped++;var r=n[i-1];t.pts=r.pts,t.dts=r.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(i||this.contiguous)?(t.id=i,n.push(t)):e.dropped++}t.debug.length&&E.logger.log(t.pts+"/"+t.dts+":"+t.debug)},e._parseAVCPES=function(t,e){var n,i,r,a=this,o=this._avcTrack,s=this._parseAVCNALu(t.data),u=this.avcSample,l=!1,c=this.pushAccesUnit.bind(this),d=function(t,e,n,i){return{key:t,pts:e,dts:n,units:[],debug:i}};t.data=null,u&&s.length&&!o.audFound&&(c(u,o),u=this.avcSample=d(!1,t.pts,t.dts,"")),s.forEach((function(e){switch(e.type){case 1:i=!0,u||(u=a.avcSample=d(!0,t.pts,t.dts,"")),u.frame=!0;var s=e.data;if(l&&s.length>4){var h=new x(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(u.key=!0)}break;case 5:i=!0,u||(u=a.avcSample=d(!0,t.pts,t.dts,"")),u.key=!0,u.frame=!0;break;case 6:i=!0,(n=new x(a.discardEPB(e.data))).readUByte();for(var f=0,p=0,g=!1,m=0;!g&&n.bytesAvailable>1;){f=0;do{f+=m=n.readUByte()}while(255===m);p=0;do{p+=m=n.readUByte()}while(255===m);if(4===f&&0!==n.bytesAvailable){if(g=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var v=n.readUByte(),y=31&v,_=[v,n.readUByte()];for(r=0;r<y;r++)_.push(n.readUByte()),_.push(n.readUByte()),_.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:t.pts,bytes:_})}}else if(5===f&&0!==n.bytesAvailable){if(g=!0,p>16){var b=[];for(r=0;r<16;r++)b.push(n.readUByte().toString(16)),3!==r&&5!==r&&7!==r&&9!==r||b.push("-");var E=p-16,T=new Uint8Array(E);for(r=0;r<E;r++)T[r]=n.readUByte();a._insertSampleInOrder(a._txtTrack.samples,{pts:t.pts,payloadType:f,uuid:b.join(""),userDataBytes:T,userData:Object(A.utf8ArrayToStr)(T.buffer)})}}else if(p<n.bytesAvailable)for(r=0;r<p;r++)n.readUByte()}break;case 7:if(i=!0,l=!0,!o.sps){var S=(n=new x(e.data)).readSPS();o.width=S.width,o.height=S.height,o.pixelRatio=S.pixelRatio,o.sps=[e.data],o.duration=a._duration;var w=e.data.subarray(1,4),k="avc1.";for(r=0;r<3;r++){var C=w[r].toString(16);C.length<2&&(C="0"+C),k+=C}o.codec=k}break;case 8:i=!0,o.pps||(o.pps=[e.data]);break;case 9:i=!1,o.audFound=!0,u&&c(u,o),u=a.avcSample=d(!1,t.pts,t.dts,"");break;case 12:i=!1;break;default:i=!1,u&&(u.debug+="unknown NAL "+e.type+" ")}u&&i&&u.units.push(e)})),e&&u&&(c(u,o),this.avcSample=null)},e._insertSampleInOrder=function(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var i=n-1;i>=0;i--)if(e.pts<t[i].pts){t.splice(i,0,e);break}}else t.push(e)},e._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t},e._parseAVCNALu=function(t){var e,n,i,r,a=0,o=t.byteLength,s=this._avcTrack,u=s.naluState||0,l=u,c=[],d=-1;for(-1===u&&(d=0,r=31&t[0],u=0,a=1);a<o;)if(e=t[a++],u)if(1!==u)if(e)if(1===e){if(d>=0)i={data:t.subarray(d,a-u-1),type:r},c.push(i);else{var h=this._getLastNalUnit();if(h&&(l&&a<=4-l&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-l)),(n=a-u-1)>0)){var f=new Uint8Array(h.data.byteLength+n);f.set(h.data,0),f.set(t.subarray(0,n),h.data.byteLength),h.data=f}}a<o?(d=a,r=31&t[a],u=0):u=-1}else u=0;else u=3;else u=e?0:2;else u=e?0:1;if(d>=0&&u>=0&&(i={data:t.subarray(d,o),type:r,state:u},c.push(i)),0===c.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+t.byteLength);g.set(p.data,0),g.set(t,p.data.byteLength),p.data=g}}return s.naluState=u,c},e.discardEPB=function(t){for(var e,n,i=t.byteLength,r=[],a=1;a<i-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=t[o];return n},e._parseAACPES=function(t){var e,n,i,r,a,s,c,h=this._audioTrack,f=t.data,p=t.pts,g=this.aacOverFlow,m=this.aacLastPTS;if(g){var _=new Uint8Array(g.byteLength+f.byteLength);_.set(g,0),_.set(f,g.byteLength),f=_}for(i=0,a=f.length;i<a-1&&!o(f,i);i++);if(!i||(i<a-1?(s="AAC PES did not start with ADTS header,offset:"+i,c=!1):(s="no ADTS header found in AAC PES",c=!0),E.logger.warn("parsing error:"+s),this.observer.trigger(v.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:s}),!c)){if(u(h,this.observer,f,i,this.audioCodec),n=0,e=l(h.samplerate),g&&m){var b=m+e;Math.abs(b-p)>1&&(E.logger.log("AAC: align PTS for overlapping frames by "+Math.round((b-p)/90)),p=b)}for(;i<a;){if(o(f,i)){if(i+5<a){var T=d(h,f,i,p,n);if(T){i+=T.length,r=T.sample.pts,n++;continue}}break}i++}g=i<a?f.subarray(i,a):null,this.aacOverFlow=g,this.aacLastPTS=r}},e._parseMPEGPES=function(t){for(var e=t.data,n=e.length,i=0,r=0,a=t.pts;r<n;)if(C.isHeader(e,r)){var o=C.appendFrame(this._audioTrack,e,r,a,i);if(!o)break;r+=o.length,i++}else r++},e._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),I=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:i,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){var e,n,i=A.default.getID3Data(t,0);if(i&&void 0!==A.default.getTimeStamp(i))for(e=i.length,n=Math.min(t.length-1,e+100);e<n;e++)if(C.probe(t,e))return E.logger.log("MPEG Audio sync word found !"),!0;return!1},e.append=function(t,e,n,i){for(var r=A.default.getID3Data(t,0)||[],a=A.default.getTimeStamp(r),o=void 0!==a?90*a:9e4*e,s=r.length,u=t.length,l=0,c=0,d=this._audioTrack,h=[{pts:o,dts:o,data:r}];s<u;)if(C.isHeader(t,s)){var f=C.appendFrame(d,t,s,o,l);if(!f)break;s+=f.length,c=f.sample.pts,l++}else A.default.isHeader(t,s)?(r=A.default.getID3Data(t,s),h.push({pts:c,dts:c,data:r}),s+=r.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,n,i)},e.destroy=function(){},t}(),P=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),O=Math.pow(2,32)-1,N=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,u,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,r))},t.box=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,a=r;r--;)i+=n[r].byteLength;for((e=new Uint8Array(i))[0]=i>>24&255,e[1]=i>>16&255,e[2]=i>>8&255,e[3]=255&i,e.set(t,4),r=0,i=8;r<a;r++)e.set(n[r],i),i+=n[r].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var i=Math.floor(n/(O+1)),r=Math.floor(n%(O+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,n))},t.moov=function(e){for(var n=e.length,i=[];n--;)i[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,i=[];n--;)i[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,n){n*=e;var i=Math.floor(n/(O+1)),r=Math.floor(n%(O+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var n,i,r=e.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,i,r,a=[],o=[];for(n=0;n<e.sps.length;n++)r=(i=e.sps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<e.pps.length;n++)r=(i=e.pps[n]).byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),u=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var n=e.id,i=e.duration*e.timescale,r=e.width,a=e.height,o=Math.floor(i/(O+1)),s=Math.floor(i%(O+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,n){var i=t.sdtp(e),r=e.id,a=Math.floor(n/(O+1)),o=Math.floor(n%(O+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var i,r,a,o,s,u,l=e.samples||[],c=l.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)a=(r=l[i]).duration,o=r.size,s=r.flags,u=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*i);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var n,i=t.moov(e);return(n=new Uint8Array(t.FTYP.byteLength+i.byteLength)).set(t.FTYP),n.set(i,t.FTYP.byteLength),n},t}(),M=9e4,F=p(10),U=p(.2),B=null,j=function(){function t(t,e,n,i){if(this.observer=t,this.config=e,this.typeSupported=n,this.ISGenerated=!1,null===B){var r=navigator.userAgent.match(/Chrome\/(\d+)/i);B=r?parseInt(r[1]):0}}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},e.resetInitSegment=function(){this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,n=t.reduce((function(t,n){var i=n.pts-t;return i<-4294967296?(e=!0,t):i>0?t:n.pts}),t[0].pts);return e&&E.logger.debug("PTS rollover detected"),n},e.remux=function(t,e,n,i,r,a,o){if(this.ISGenerated||this.generateIS(t,e,r),this.ISGenerated){var s=t.samples.length,u=e.samples.length,l=r,c=r;if(s&&u){var d=this.getVideoStartPts(e.samples),h=(t.samples[0].pts-d)/e.inputTimeScale;l+=Math.max(0,h),c+=Math.max(0,-h)}if(s){t.timescale||(E.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,r));var f,p=this.remuxAudio(t,l,a,o);u&&(p&&(f=p.endPTS-p.startPTS),e.timescale||(E.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,r)),this.remuxVideo(e,c,a,f))}else if(u){var g=this.remuxVideo(e,c,a,0,o);g&&t.codec&&this.remuxEmptyAudio(t,l,a,g)}}n.samples.length&&this.remuxID3(n,r),i.samples.length&&this.remuxText(i,r),this.observer.trigger(v.default.FRAG_PARSED)},e.generateIS=function(t,e,n){var i,r,a=this.observer,o=t.samples,s=e.samples,u=this.typeSupported,l="audio/mp4",c={},d={tracks:c},h=void 0===this._initPTS;if(h&&(i=r=1/0),t.config&&o.length&&(t.timescale=t.samplerate,E.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(u.mpeg?(l="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),c.audio={container:l,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array:N.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(i=r=o[0].pts-Math.round(t.inputTimeScale*n))),e.sps&&e.pps&&s.length){var f=e.inputTimeScale;if(e.timescale=f,c.video={container:"video/mp4",codec:e.codec,initSegment:N.initSegment([e]),metadata:{width:e.width,height:e.height}},h){var p=this.getVideoStartPts(s),g=Math.round(f*n);r=Math.min(r,s[0].dts-g),i=Math.min(i,p-g),this.observer.trigger(v.default.INIT_PTS_FOUND,{initPTS:i})}}else h&&c.audio&&this.observer.trigger(v.default.INIT_PTS_FOUND,{initPTS:i});Object.keys(c).length?(a.trigger(v.default.FRAG_PARSING_INIT_SEGMENT,d),this.ISGenerated=!0,h&&(this._initPTS=i,this._initDTS=r)):a.trigger(v.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.remuxVideo=function(t,e,n,i){var r,a,o,s,u,l=t.timescale,c=t.samples,d=[],h=c.length,p=this._initPTS,m=8,_=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,T=0,A=!1,S=this.nextAvcDts;if(0!==h){n||(S=e*l-(c[0].pts-g(c[0].dts,c[0].pts)));for(var w=0;w<h;w++){var k=c[w];k.pts=g(k.pts-p,S),k.dts=g(k.dts-p,S),k.dts>k.pts&&(T=Math.max(Math.min(T,k.pts-k.dts),-1*U)),k.dts<c[w>0?w-1:w].dts&&(A=!0)}A&&c.sort((function(t,e){var n=t.dts-e.dts,i=t.pts-e.pts;return n||i||t.id-e.id})),s=c[0].dts,u=c[h-1].dts;var C=Math.round((u-s)/(h-1));if(T<0){if(T<-2*C){E.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+f(-C,!0)+" ms");for(var x=T,D=0;D<h;D++)c[D].dts=x=Math.max(x,c[D].pts-C),c[D].pts=Math.max(x,c[D].pts)}else{E.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+f(T,!0)+" ms to overcome this issue");for(var L=0;L<h;L++)c[L].dts=c[L].dts+T}s=c[0].dts,u=c[h-1].dts}if(n){var R=s-S,I=R>C;if(I||R<-1){I?E.logger.warn("AVC: "+f(R,!0)+" ms ("+R+"dts) hole between fragments detected, filling it"):E.logger.warn("AVC: "+f(-R,!0)+" ms ("+R+"dts) overlapping between fragments detected"),s=S;var P=c[0].pts-R;c[0].dts=s,c[0].pts=P,E.logger.log("Video: First PTS/DTS adjusted: "+f(P,!0)+"/"+f(s,!0)+", delta: "+f(R,!0)+" ms")}}B&&B<75&&(s=Math.max(0,s));for(var O=0,M=0,F=0;F<h;F++){for(var j=c[F],H=j.units,V=H.length,G=0,q=0;q<V;q++)G+=H[q].data.length;M+=G,O+=V,j.length=G,j.dts=Math.max(j.dts,s),j.pts=Math.max(j.pts,j.dts,0),_=Math.min(j.pts,_),b=Math.max(j.pts,b)}u=c[h-1].dts;var W=M+4*O+8;try{a=new Uint8Array(W)}catch(t){return void this.observer.trigger(v.default.ERROR,{type:y.ErrorTypes.MUX_ERROR,details:y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:W,reason:"fail allocating video mdat "+W})}var K=new DataView(a.buffer);K.setUint32(0,W),a.set(N.types.mdat,4);for(var Y=0;Y<h;Y++){for(var z,X=c[Y],$=X.units,Q=0,J=0,Z=$.length;J<Z;J++){var tt=$[J],et=tt.data,nt=tt.data.byteLength;K.setUint32(m,nt),m+=4,a.set(et,m),m+=nt,Q+=4+nt}if(Y<h-1)r=c[Y+1].dts-X.dts;else{var it=this.config,rt=X.dts-c[Y>0?Y-1:Y].dts;if(it.stretchShortVideoTrack){var at=it.maxBufferHole,ot=Math.floor(at*l),st=(i?_+i*l:this.nextAudioPts)-X.pts;st>ot?((r=st-rt)<0&&(r=rt),E.logger.log("It is approximately "+f(st,!1)+" ms to the next segment; using duration "+f(r,!1)+" ms for the last video frame.")):r=rt}else r=rt}z=Math.round(X.pts-X.dts),d.push({size:Q,duration:r,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:X.key?2:1,isNonSync:X.key?0:1}})}this.nextAvcDts=u+r;var ut=t.dropped;if(t.nbNalu=0,t.dropped=0,d.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var lt=d[0].flags;lt.dependsOn=2,lt.isNonSync=0}t.samples=d,o=N.moof(t.sequenceNumber++,s,t),t.samples=[];var ct={data1:o,data2:a,startPTS:_/l,endPTS:(b+r)/l,startDTS:s/l,endDTS:this.nextAvcDts/l,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:ut};return this.observer.trigger(v.default.FRAG_PARSING_DATA,ct),ct}},e.remuxAudio=function(t,e,n,i){var r,a,o,s,u,l,c=t.inputTimeScale,d=t.timescale,h=c/d,p=(t.isAAC?1024:1152)*h,m=this._initPTS,_=!t.isAAC&&this.typeSupported.mpeg,b=_?0:8,T=t.samples,A=[],S=this.nextAudioPts;if(n|=T.length&&S&&(i&&Math.abs(e-S/c)<.1||Math.abs(T[0].pts-S-m)<20*p),T.forEach((function(t){t.pts=t.dts=g(t.pts-m,e*c)})),0!==(T=T.filter((function(t){return t.pts>=0}))).length){if(n||(S=i?Math.max(0,e*c):T[0].pts),t.isAAC)for(var w=this.config.maxAudioFramesDrift,k=0,C=S;k<T.length;){var x=T[k],D=x.pts,L=D-C;if(L<=-w*p)n||k>0?(E.logger.warn("Dropping 1 audio frame @ "+f(C,!0)/1e3+"s due to "+f(L,!0)+" ms overlap."),T.splice(k,1)):(E.logger.warn("Audio frame @ "+f(D,!0)/1e3+"s overlaps nextAudioPts by "+f(L,!0)+" ms."),C=D+p,k++);else if(L>=w*p&&L<F&&C){var R=Math.round(L/p);E.logger.warn("Injecting "+R+" audio frames @ "+f(C,!0)/1e3+"s due to "+f(L,!0)+" ms gap.");for(var I=0;I<R;I++){var O=Math.max(C,0);(a=P.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(E.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=x.unit.subarray()),T.splice(k,0,{unit:a,pts:O,dts:O}),C+=p,k++}x.pts=x.dts=C,C+=p,k++}else Math.abs(L),x.pts=x.dts=C,C+=p,k++}for(var M=T.length,U=0;M--;)U+=T[M].unit.byteLength;for(var B=0,j=T.length;B<j;B++){var H=T[B],V=H.unit,G=H.pts;if(void 0!==l&&r)r.duration=Math.round((G-l)/h);else{var q=G-S,W=0;if(n&&t.isAAC&&q){if(q>0&&q<F)W=Math.round((G-S)/p),E.logger.log(f(q,!0)+" ms hole between AAC samples detected,filling it"),W>0&&((a=P.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(a=V.subarray()),U+=W*a.length);else if(q<-12){E.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+f(S,!0)+" ms / "+f(G,!0)+" ms / "+f(-q,!0)+" ms"),U-=V.byteLength;continue}G=S}if(u=G,!(U>0))return;U+=b;try{o=new Uint8Array(U)}catch(t){return void this.observer.trigger(v.default.ERROR,{type:y.ErrorTypes.MUX_ERROR,details:y.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}_||(new DataView(o.buffer).setUint32(0,U),o.set(N.types.mdat,4));for(var K=0;K<W;K++)(a=P.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(E.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=V.subarray()),o.set(a,b),b+=a.byteLength,r={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(r)}o.set(V,b);var Y=V.byteLength;b+=Y,r={size:Y,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(r),l=G}var z=0;if((M=A.length)>=2&&(z=A[M-2].duration,r.duration=z),M){this.nextAudioPts=S=l+h*z,t.samples=A,s=_?new Uint8Array:N.moof(t.sequenceNumber++,u/h,t),t.samples=[];var X=u/c,$=S/c,Q={data1:s,data2:o,startPTS:X,endPTS:$,startDTS:X,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:M};return this.observer.trigger(v.default.FRAG_PARSING_DATA,Q),Q}return null}},e.remuxEmptyAudio=function(t,e,n,i){var r=t.inputTimeScale,a=r/(t.samplerate?t.samplerate:r),o=this.nextAudioPts,s=(void 0!==o?o:i.startDTS*r)+this._initDTS,u=i.endDTS*r+this._initDTS,l=1024*a,c=Math.ceil((u-s)/l),d=P.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(E.logger.warn("remux empty Audio"),d){for(var h=[],f=0;f<c;f++){var p=s+f*l;h.push({unit:d,pts:p,dts:p})}t.samples=h,this.remuxAudio(t,e,n)}else E.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.remuxID3=function(t,e){var n=t.samples.length;if(n){for(var i=t.inputTimeScale,r=this._initPTS,a=this._initDTS,o=0;o<n;o++){var s=t.samples[o];s.pts=g(s.pts-r,e*i)/i,s.dts=g(s.dts-a,e*i)/i}this.observer.trigger(v.default.FRAG_PARSING_METADATA,{samples:t.samples}),t.samples=[]}},e.remuxText=function(t,e){var n=t.samples.length,i=t.inputTimeScale,r=this._initPTS;if(n){for(var a=0;a<n;a++){var o=t.samples[a];o.pts=g(o.pts-r,e*i)/i}t.samples.sort((function(t,e){return t.pts-e.pts})),this.observer.trigger(v.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},t}(),H=function(){function t(t){this.observer=t}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.remux=function(t,e,n,i,r,a,o,s){var u=this.observer,l="";t&&(l+="audio"),e&&(l+="video"),u.trigger(v.default.FRAG_PARSING_DATA,{data1:s,startPTS:r,startDTS:r,type:l,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),u.trigger(v.default.FRAG_PARSED)},t}(),V=Object(T.getSelfScope)();try{m=V.performance.now.bind(V.performance)}catch(t){E.logger.debug("Unable to use Performance API on this environment"),m=V.Date.now}var G=function(){function t(t,e,n,i){this.observer=t,this.typeSupported=e,this.config=n,this.vendor=i}var e=t.prototype;return e.destroy=function(){var t=this.demuxer;t&&t.destroy()},e.push=function(t,e,n,i,r,a,o,s,u,l,c,d){var h=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var f=this.decrypter;null==f&&(f=this.decrypter=new _.default(this.observer,this.config));var p=m();f.decrypt(t,e.key.buffer,e.iv.buffer,(function(t){var f=m();h.observer.trigger(v.default.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:f}}),h.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,r,a,o,s,u,l,c,d)}))}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,r,a,o,s,u,l,c,d)},e.pushDecrypted=function(t,e,n,i,r,a,o,s,u,l,c,d){var h=this.demuxer,f=this.remuxer;if(!h||o||s){for(var p,g=this.observer,m=this.typeSupported,_=this.config,b=[{demux:R,remux:j},{demux:w.default,remux:H},{demux:S,remux:j},{demux:I,remux:j}],E=0,T=b.length;E<T&&!(p=b[E]).demux.probe(t);E++);if(!p)return void g.trigger(v.default.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});f&&f instanceof p.remux||(f=new p.remux(g,_,m,this.vendor)),h&&h instanceof p.demux||(h=new p.demux(g,f,_,m),this.probe=p.demux.probe),this.demuxer=h,this.remuxer=f}(o||s)&&(h.resetInitSegment(n,i,r,l),f.resetInitSegment()),o&&(h.resetTimeStamp(d),f.resetTimeStamp(d)),"function"==typeof h.setDecryptData&&h.setDecryptData(e),h.append(t,a,u,c)},t}();e.default=G},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
	  !*** ./src/demux/demuxer-worker.js ***!
	  \*************************************/
/*! exports provided: default */ /*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(t,e,n){"use strict";n.r(e);var i=n(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),r=n(/*! ../events */"./src/events.js"),a=n(/*! ../utils/logger */"./src/utils/logger.js"),o=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),s=(n.n(o),function(t){var e=new o.EventEmitter;e.trigger=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.emit.apply(e,[t,t].concat(i))},e.off=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.removeListener.apply(e,[t].concat(i))};var n=function(e,n){t.postMessage({event:e,data:n})};t.addEventListener("message",(function(r){var o=r.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new i.default(e,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),n("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),e.on(r.default.FRAG_DECRYPTED,n),e.on(r.default.FRAG_PARSING_INIT_SEGMENT,n),e.on(r.default.FRAG_PARSED,n),e.on(r.default.ERROR,n),e.on(r.default.FRAG_PARSING_METADATA,n),e.on(r.default.FRAG_PARSING_USERDATA,n),e.on(r.default.INIT_PTS_FOUND,n),e.on(r.default.FRAG_PARSING_DATA,(function(e,n){var i=[],r={event:e,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),t.postMessage(r,i)}))});e.default=s},"./src/demux/id3.js":
/*!**************************!*\
	  !*** ./src/demux/id3.js ***!
	  \**************************/
/*! exports provided: default, utf8ArrayToStr */function(t,e,n){"use strict";function i(){var t=Object(a.getSelfScope)();return r||void 0===t.TextDecoder||(r=new t.TextDecoder("utf-8")),r}n.r(e),n.d(e,"utf8ArrayToStr",(function(){return s}));var r,a=n(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),o=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,n){for(var i=n,r=0;t.isHeader(e,n);)r+=10,r+=t._readSize(e,n+6),t.isFooter(e,n+10)&&(r+=10),n+=r;if(r>0)return e.subarray(i,i+r)},t._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,(n|=(127&t[e+2])<<7)|127&t[e+3]},t.getTimeStamp=function(e){for(var n=t.getID3Frames(e),i=0;i<n.length;i++){var r=n[i];if(t.isTimeStampFrame(r))return t._readTimeStamp(r)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var n=String.fromCharCode(e[0],e[1],e[2],e[3]),i=t._readSize(e,4);return{type:n,size:i,data:e.subarray(10,10+i)}},t.getID3Frames=function(e){for(var n=0,i=[];t.isHeader(e,n);){for(var r=t._readSize(e,n+6),a=(n+=10)+r;n+8<a;){var o=t._getFrameData(e.subarray(n)),s=t._decodeFrame(o);s&&i.push(s),n+=o.size+10}t.isFooter(e,n)&&(n+=10)}return i},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var n=t._utf8ArrayToStr(e.data,!0),i=new Uint8Array(e.data.subarray(n.length+1));return{key:e.type,info:n,data:i.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var n=1,i=t._utf8ArrayToStr(e.data.subarray(n),!0);n+=i.length+1;var r=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:i,data:r}}var a=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:a}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var n=1,i=t._utf8ArrayToStr(e.data.subarray(n),!0);n+=i.length+1;var r=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:i,data:r}}var a=t._utf8ArrayToStr(e.data);return{key:e.type,data:a}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);var n=i();if(n){var r=n.decode(t);if(e){var a=r.indexOf("\0");return-1!==a?r.substring(0,a):r}return r.replace(/\0/g,"")}for(var o,s,u,l=t.length,c="",d=0;d<l;){if(0===(o=t[d++])&&e)return c;if(0!==o&&3!==o)switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(o);break;case 12:case 13:s=t[d++],c+=String.fromCharCode((31&o)<<6|63&s);break;case 14:s=t[d++],u=t[d++],c+=String.fromCharCode((15&o)<<12|(63&s)<<6|(63&u)<<0)}}return c},t}(),s=o._utf8ArrayToStr;e.default=o},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
	  !*** ./src/demux/mp4demuxer.js ***!
	  \*********************************/
/*! exports provided: default */function(t,e,n){"use strict";n.r(e);var i=n(/*! ../utils/logger */"./src/utils/logger.js"),r=n(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function t(t,e){this.observer=t,this.remuxer=e}var e=t.prototype;return e.resetTimeStamp=function(t){this.initPTS=t},e.resetInitSegment=function(e,n,i,a){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==n&&(n="mp4a.40.5"),null==i&&(i="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:a?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:a?e:null}),o.video&&(s.video={container:"video/mp4",codec:i,initSegment:a?e:null})),this.observer.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},t.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},t.findBox=function(e,n){var i,r,a,o,s,u,l=[];if(e.data?(s=e.start,a=e.end,e=e.data):(s=0,a=e.byteLength),!n.length)return null;for(i=s;i<a;)u=(r=t.readUint32(e,i))>1?i+r:a,t.bin2str(e.subarray(i+4,i+8))===n[0]&&(1===n.length?l.push({data:e,start:i+8,end:u}):(o=t.findBox({data:e,start:i+8,end:u},n.slice(1))).length&&(l=l.concat(o))),i=u;return l},t.parseSegmentIndex=function(e){var n,i=t.findBox(e,["moov"])[0],r=i?i.end:null,a=0,o=t.findBox(e,["sidx"]);if(!o||!o[0])return null;n=[];var s=(o=o[0]).data[0];a=0===s?8:16;var u=t.readUint32(o,a);a+=4,a+=0===s?8:16,a+=2;var l=o.end+0,c=t.readUint16(o,a);a+=2;for(var d=0;d<c;d++){var h=a,f=t.readUint32(o,h);h+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=t.readUint32(o,h);h+=4,n.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/u,start:l,end:l+p-1}}),l+=p,a=h+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:c,references:n,moovEndOffset:r}},t.parseInitSegment=function(e){var n=[];return t.findBox(e,["moov","trak"]).forEach((function(e){var r=t.findBox(e,["tkhd"])[0];if(r){var a=r.data[r.start],o=0===a?12:20,s=t.readUint32(r,o),u=t.findBox(e,["mdia","mdhd"])[0];if(u){o=0===(a=u.data[u.start])?12:20;var l=t.readUint32(u,o),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[t.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=t.bin2str(h.data.subarray(h.start+12,h.start+16));i.logger.log("MP4Demuxer:"+d+":"+f+" found")}n[s]={timescale:l,type:d},n[d]={timescale:l,id:s}}}}}})),n},t.getStartDTS=function(e,n){var i,r,a;return i=t.findBox(n,["moof","traf"]),r=[].concat.apply([],i.map((function(n){return t.findBox(n,["tfhd"]).map((function(i){var r,a;return r=t.readUint32(i,4),a=e[r].timescale||9e4,t.findBox(n,["tfdt"]).map((function(e){var n,i;return n=e.data[e.start],i=t.readUint32(e,4),1===n&&(i*=Math.pow(2,32),i+=t.readUint32(e,8)),i}))[0]/a}))}))),a=Math.min.apply(null,r),isFinite(a)?a:0},t.offsetStartDTS=function(e,n,i){t.findBox(n,["moof","traf"]).map((function(n){return t.findBox(n,["tfhd"]).map((function(r){var o=t.readUint32(r,4),s=e[o].timescale||9e4;t.findBox(n,["tfdt"]).map((function(e){var n=e.data[e.start],r=t.readUint32(e,4);if(0===n)t.writeUint32(e,4,r-i*s);else{r*=Math.pow(2,32),r+=t.readUint32(e,8),r-=i*s,r=Math.max(r,0);var o=Math.floor(r/(a+1)),u=Math.floor(r%(a+1));t.writeUint32(e,4,o),t.writeUint32(e,8,u)}}))}))}))},e.append=function(e,n,i,a){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,u=this.initPTS;if(void 0===u){var l=t.getStartDTS(o,e);this.initPTS=u=l-n,this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:u})}t.offsetStartDTS(o,e,u),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,i,a,e)},e.destroy=function(){},t}();e.default=o},"./src/errors.ts":
/*!***********************!*\
	  !*** ./src/errors.ts ***!
	  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(t,e,n){"use strict";var i,r;n.r(e),n.d(e,"ErrorTypes",(function(){return i})),n.d(e,"ErrorDetails",(function(){return r})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(i||(i={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(r||(r={}))},"./src/events.js":
/*!***********************!*\
	  !*** ./src/events.js ***!
	  \***********************/
/*! exports provided: default */function(t,e,n){"use strict";n.r(e),e.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":
/*!*********************************!*\
	  !*** ./src/hls.ts + 50 modules ***!
	  \*********************************/
/*! exports provided: default */ /*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */ /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */ /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */ /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */ /*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */ /*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */ /*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */ /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */ /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */ /*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */ /*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}function s(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):(null==e?void 0:e.programDateTime)&&(t.programDateTime=e.endProgramDateTime),Object(rt.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function u(){return window.MediaSource||window.WebKitMediaSource}function l(t,e,n){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(n);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(n)}}function c(t,e,n){var i=t[e],r=t[n],a=r.startPTS;if(Object(rt.isFiniteNumber)(a))n>e?(i.duration=a-i.start,i.duration<0&&ot.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-a,r.duration<0&&ot.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"));else if(n>e){var o=i.cc===r.cc;r.start=i.start+(o&&i.minEndPTS?i.minEndPTS-i.start:i.duration)}else r.start=Math.max(i.start-r.duration,0)}function d(t,e,n,i,r,a){var o=n,s=i;if(Object(rt.isFiniteNumber)(e.startPTS)){var u=Math.abs(e.startPTS-n);Object(rt.isFiniteNumber)(e.deltaPTS)?e.deltaPTS=Math.max(u,e.deltaPTS):e.deltaPTS=u,o=Math.max(n,e.startPTS),n=Math.min(n,e.startPTS),s=Math.min(i,e.endPTS),i=Math.max(i,e.endPTS),r=Math.min(r,e.startDTS),a=Math.max(a,e.endDTS)}var l=n-e.start;e.start=e.startPTS=n,e.maxStartPTS=o,e.endPTS=i,e.minEndPTS=s,e.startDTS=r,e.endDTS=a,e.duration=i-n;var d,h,f,p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;for(d=p-t.startSN,(h=t.fragments)[d]=e,f=d;f>0;f--)c(h,f,f-1);for(f=d;f<h.length-1;f++)c(h,f,f+1);return t.PTSKnown=!0,l}function h(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment);var n,i=0;if(f(t,e,(function(t,r){i=t.cc-r.cc,Object(rt.isFiniteNumber)(t.startPTS)&&(r.start=r.startPTS=t.startPTS,r.endPTS=t.endPTS,r.duration=t.duration,r.backtracked=t.backtracked,r.dropped=t.dropped,n=r),e.PTSKnown=!0})),e.PTSKnown){if(i){ot.logger.log("discontinuity sliding from playlist, take drift into account");for(var r=e.fragments,a=0;a<r.length;a++)r[a].cc+=i}n?d(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(t,e){var n=e.startSN-t.startSN,i=t.fragments,r=e.fragments;if(!(n<0||n>i.length))for(var a=0;a<r.length;a++)r[a].start+=i[n].start}(t,e),e.PTSKnown=t.PTSKnown}}function f(t,e,n){if(t&&e)for(var i=Math.max(t.startSN,e.startSN)-e.startSN,r=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,o=i;o<=r;o++){var s=t.fragments[a+o],u=e.fragments[o];if(!s||!u)break;n(s,u,o)}}function p(t,e,n){var i=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),r=i/2;return t&&e.endSN===t.endSN&&(i=r),n&&(i=Math.max(r,i-(window.performance.now()-n))),Math.round(i)}function g(t,e){e.fragments.forEach((function(e){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}})),e.PTSKnown=!0}function m(t,e,n){(function(t,e,n){if(function(t,e,n){var i=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(i=!0),i}(t,n,e)){var i=function(t,e){var n=t.fragments,i=e.fragments;if(i.length&&n.length){var r=function(t,e){for(var n=null,i=0;i<t.length;i+=1){var r=t[i];if(r&&r.cc===e){n=r;break}}return n}(n,i[0].cc);return!r||r&&!r.startPTS?void ot.logger.log("No frag in previous level to align on"):r}ot.logger.log("No fragments to align")}(n.details,e);i&&(ot.logger.log("Adjusting PTS using last level due to CC increase within current level"),g(i.start,e))}})(t,n,e),!n.PTSKnown&&e&&function(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var n=e.fragments[0].programDateTime,i=(t.fragments[0].programDateTime-n)/1e3+e.fragments[0].start;Object(rt.isFiniteNumber)(i)&&(ot.logger.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),g(i,t))}}(n,e.details)}function v(t,e,n){if(null===e||!Array.isArray(t)||!t.length||!Object(rt.isFiniteNumber)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<t.length;++i){var r=t[i];if(b(e,n,r))return r}return null}function y(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var r=null;if(t?r=e[t.sn-e[0].sn+1]:0===n&&0===e[0].start&&(r=e[0]),r&&0===_(n,i,r))return r;var a=Ot.search(e,_.bind(null,n,i));return a||r}function _(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var i=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=t?1:n.start-i>t&&n.start?-1:0}function b(t,e,n){var i=1e3*Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-i>t}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function A(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e){var n;try{n=new Event("addtrack")}catch(t){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function w(t){if(null==t?void 0:t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function L(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Ce,this.regionList=[]}function R(){this.values=Object.create(null)}function I(t,e,n,i){var r=i?t.split(i):[t];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);2===o.length&&e(o[0],o[1])}}function P(t,e,n){function i(){var e=function(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function r(){t=t.replace(/^\s+/,"")}var a=t;if(r(),e.startTime=i(),r(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);t=t.substr(3),r(),e.endTime=i(),r(),function(t,e){var i=new R;I(t,(function(t,e){switch(t){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===e){i.set(t,n[r].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var a=e.split(","),o=a[0];i.integer(t,o),i.percent(t,o)&&i.set("snapToLines",!1),i.alt(t,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",De,"end"]);break;case"position":a=e.split(","),i.percent(t,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",De,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",De,"end","left","right"])}}),/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===xe.line&&(r=-1),e.line=r,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",De);var a=i.get("position","auto");"auto"===a&&50===xe.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function O(t){return t.replace(/<br(?: \/)?>/gi,"\n")}function N(t,e,n,i){for(var r,a,o,s,u,l=[],c=window.VTTCue||TextTrackCue,d=0;d<i.rows.length;d++)if(o=!0,s=0,u="",!(r=i.rows[d]).isEmpty()){for(var h=0;h<r.chars.length;h++)r.chars[h].uchar.match(/\s/)&&o?s++:(u+=r.chars[h].uchar,o=!1);r.cueStartTime=e,e===n&&(n+=1e-4),a=new c(e,n,O(u.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),l.push(a),t&&t.addCue(a)}return l}function M(t,e,n){n.a=t,n.b=e}function F(t,e,n){return n.a===t&&n.b===e}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function j(t,e,n,i){return Math.min(e,i)-Math.max(t,n)}function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function V(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];"subtitles"===i.kind&&i.label&&e.push(t[n])}return e}function G(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){K(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){X(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function J(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t}n.r(e),n.d(e,"default",(function(){return un}));var Z={};n.r(Z),n.d(Z,"newCue",(function(){return N}));var tt,et,nt=n("./node_modules/url-toolkit/src/url-toolkit.js"),it=n("./src/errors.ts"),rt=n("./src/polyfills/number.js"),at=n("./src/events.js"),ot=n("./src/utils/logger.js"),st={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},ut=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){},e.onHandlerDestroyed=function(){},e.isEventHandler=function(){return"object"==_typeof(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){if(st[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)}),this)},e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){this.hls.off(t,this.onEvent)}),this)},e.onEvent=function(t,e){this.onEventGeneric(t,e)},e.onEventGeneric=function(t,e){try{(function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)}).call(this,t,e).call()}catch(e){ot.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.OTHER_ERROR,details:it.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}();!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(tt||(tt={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(et||(et={}));var lt,ct=n("./src/demux/mp4demuxer.js"),dt=function(){function t(t,e){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=e}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(nt.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}();!function(t){t.AUDIO="audio",t.VIDEO="video"}(lt||(lt={}));var ht,ft=function(){function t(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((t={})[lt.AUDIO]=!1,t[lt.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var e=t.prototype;return e.setByteRange=function(t,e){var n=t.split("@",2),i=[];1===n.length?i[0]=e?e.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i},e.addElementaryStream=function(t){this._elementaryStreams[t]=!0},e.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},e.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},e.setDecryptDataFromLevelKey=function(t,e){var n=t;return(null==t?void 0:t.method)&&t.uri&&!t.iv&&((n=new dt(t.baseuri,t.reluri)).method=t.method,n.iv=this.createInitializationVector(e)),n},function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(nt.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&ot.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(rt.isFiniteNumber)(this.programDateTime))return null;var t=Object(rt.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),t}(),pt=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(rt.isFiniteNumber)(this.fragments[0].programDateTime))}}]),t}(),gt=/^(\d+)x(\d+)$/,mt=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,vt=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)n[i]=parseInt(e.slice(2*i,2*i+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.enumeratedString=function(t){return this[t]},e.decimalResolution=function(t){var e=gt.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(mt.lastIndex=0;null!==(e=mt.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[e[1]]=i}return n},t}(),yt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},_t=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,bt=/#EXT-X-MEDIA:(.*)/g,Et=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),Tt=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,At=/\.(mp4|m4s|m4v|m4a)$/i,St=function(){function t(){}return t.findGroup=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.id===e)return i}},t.convertAVC1ToAVCOTI=function(t){var e,n=t.split(".");return n.length>2?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return nt.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){function i(t,e){["video","audio"].forEach((function(n){var i=t.filter((function(t){return function(t,e){var n=yt[e];return!!n&&!0===n[t.slice(0,4)]}(t,n)}));if(i.length){var r=i.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[n+"Codec"]=r.length>0?r[0]:i[0],t=t.filter((function(t){return-1===i.indexOf(t)}))}})),e.unknownCodecs=t}var r,a=[],o={},s=!1;for(_t.lastIndex=0;null!=(r=_t.exec(e));)if(r[1]){var u={},l=u.attrs=new vt(r[1]);u.url=t.resolve(r[2],n);var c=l.decimalResolution("RESOLUTION");c&&(u.width=c.width,u.height=c.height),u.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),u.name=l.NAME,i([].concat((l.CODECS||"").split(/[ ,]+/)),u),u.videoCodec&&-1!==u.videoCodec.indexOf("avc1")&&(u.videoCodec=t.convertAVC1ToAVCOTI(u.videoCodec)),a.push(u)}else if(r[3]){var d=new vt(r[3]);d["DATA-ID"]&&(s=!0,o[d["DATA-ID"]]=d)}return{levels:a,sessionData:s?o:null}},t.parseMasterPlaylistMedia=function(e,n,i,r){void 0===r&&(r=[]);var a,o=[],s=0;for(bt.lastIndex=0;null!==(a=bt.exec(e));){var u=new vt(a[1]);if(u.TYPE===i){var l={attrs:u,id:s++,groupId:u["GROUP-ID"],instreamId:u["INSTREAM-ID"],name:u.NAME||u.LANGUAGE,type:i,default:"YES"===u.DEFAULT,autoselect:"YES"===u.AUTOSELECT,forced:"YES"===u.FORCED,lang:u.LANGUAGE};if(u.URI&&(l.url=t.resolve(u.URI,n)),r.length){var c=t.findGroup(r,l.groupId);l.audioCodec=c?c.codec:r[0].codec}o.push(l)}}return o},t.parseLevelPlaylist=function(t,e,n,i,r){var a,o,u,l=0,c=0,d=new pt(e),h=0,f=null,p=new ft,g=null;for(Et.lastIndex=0;null!==(a=Et.exec(t));){var m=a[1];if(m){p.duration=parseFloat(m);var v=(" "+a[2]).slice(1);p.title=v||null,p.tagList.push(v?["INF",m,v]:["INF",m])}else if(a[3]){if(Object(rt.isFiniteNumber)(p.duration)){var y=l++;p.type=i,p.start=c,u&&(p.levelkey=u),p.sn=y,p.level=n,p.cc=h,p.urlId=r,p.baseurl=e,p.relurl=(" "+a[3]).slice(1),s(p,f),d.fragments.push(p),f=p,c+=p.duration,p=new ft}}else if(a[4]){var _=(" "+a[4]).slice(1);f?p.setByteRange(_,f):p.setByteRange(_)}else if(a[5])p.rawProgramDateTime=(" "+a[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),null===g&&(g=d.fragments.length);else{if(!(a=a[0].match(Tt))){ot.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var b=(" "+a[o+1]).slice(1),E=(" "+a[o+2]).slice(1);switch(a[o]){case"#":p.tagList.push(E?[b,E]:[b]);break;case"PLAYLIST-TYPE":d.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":l=d.startSN=parseInt(b);break;case"TARGETDURATION":d.targetduration=parseFloat(b);break;case"VERSION":d.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":d.live=!1;break;case"DIS":h++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(b);break;case"KEY":var T=new vt(b),A=T.enumeratedString("METHOD"),S=T.URI,w=T.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(T.KEYFORMAT||"identity")){ot.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}A&&(u=new dt(e,S),S&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(A)>=0&&(u.method=A,u.key=null,u.iv=w));break;case"START":var k=new vt(b).decimalFloatingPoint("TIME-OFFSET");Object(rt.isFiniteNumber)(k)&&(d.startTimeOffset=k);break;case"MAP":var C=new vt(b);p.relurl=C.URI,C.BYTERANGE&&p.setByteRange(C.BYTERANGE),p.baseurl=e,p.level=n,p.type=i,p.sn="initSegment",d.initSegment=p,(p=new ft).rawProgramDateTime=d.initSegment.rawProgramDateTime;break;default:ot.logger.warn("line parsed but not handled: "+a)}}}return(p=f)&&!p.relurl&&(d.fragments.pop(),c-=p.duration),d.totalduration=c,d.averagetargetduration=c/d.fragments.length,d.endSN=l-1,d.startCC=d.fragments[0]?d.fragments[0].cc:0,d.endCC=h,!d.initSegment&&d.fragments.length&&d.fragments.every((function(t){return At.test(t.relurl)}))&&(ot.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(p=new ft).relurl=d.fragments[0].relurl,p.baseurl=e,p.level=n,p.type=i,p.sn="initSegment",d.initSegment=p,d.needSidxRanges=!0),g&&function(t,e){for(var n=t[e],i=e-1;i>=0;i--){var r=t[i];r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}(d.fragments,g),d},t}(),wt=window.performance,kt=function(t){function e(e){var n;return(n=t.call(this,e,at.default.MANIFEST_LOADING,at.default.LEVEL_LOADING,at.default.AUDIO_TRACK_LOADING,at.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}(function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e})(e,t),e.canHaveQualityLevels=function(t){return t!==tt.AUDIO_TRACK&&t!==tt.SUBTITLE_TRACK},e.mapContextToLevelType=function(t){switch(t.type){case tt.AUDIO_TRACK:return et.AUDIO;case tt.SUBTITLE_TRACK:return et.SUBTITLE;default:return et.MAIN}},e.getResponseUrl=function(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n};var n=e.prototype;return n.createInternalLoader=function(t){var e=this.hls.config,n=e.pLoader,i=e.loader,r=new(n||i)(e);return t.loader=r,this.loaders[t.type]=r,r},n.getInternalLoader=function(t){return this.loaders[t.type]},n.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},n.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},n.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},n.onManifestLoading=function(t){this.load({url:t.url,type:tt.MANIFEST,level:0,id:null,responseType:"text"})},n.onLevelLoading=function(t){this.load({url:t.url,type:tt.LEVEL,level:t.level,id:t.id,responseType:"text"})},n.onAudioTrackLoading=function(t){this.load({url:t.url,type:tt.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},n.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:tt.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},n.load=function(t){var e=this.hls.config;ot.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n,i,r,a,o=this.getInternalLoader(t);if(o){var s=o.context;if(s&&s.url===t.url)return ot.logger.trace("playlist request ongoing"),!1;ot.logger.warn("aborting previous loader for type: "+t.type),o.abort()}switch(t.type){case tt.MANIFEST:n=e.manifestLoadingMaxRetry,i=e.manifestLoadingTimeOut,r=e.manifestLoadingRetryDelay,a=e.manifestLoadingMaxRetryTimeout;break;case tt.LEVEL:n=0,a=0,r=0,i=e.levelLoadingTimeOut;break;default:n=e.levelLoadingMaxRetry,i=e.levelLoadingTimeOut,r=e.levelLoadingRetryDelay,a=e.levelLoadingMaxRetryTimeout}o=this.createInternalLoader(t);var u={timeout:i,maxRetry:n,retryDelay:r,maxRetryDelay:a},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return ot.logger.debug("Calling internal loader delegate for URL: "+t.url),o.load(t,u,l),!0},n.loadsuccess=function(t,e,n,i){if(void 0===i&&(i=null),n.isSidxRequest)return this._handleSidxRequest(t,n),void this._handlePlaylistLoaded(t,e,n,i);if(this.resetInternalLoader(n.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var r=t.data;return e.tload=wt.now(),0!==r.indexOf("#EXTM3U")?void this._handleManifestParsingError(t,n,"no EXTM3U delimiter",i):void(r.indexOf("#EXTINF:")>0||r.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,n,i):this._handleMasterPlaylist(t,e,n,i))},n.loaderror=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!1,t)},n.loadtimeout=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!0)},n._handleMasterPlaylist=function(t,n,i,r){var a=this.hls,o=t.data,s=e.getResponseUrl(t,i),u=St.parseMasterPlaylist(o,s),l=u.levels,c=u.sessionData;if(l.length){var d=l.map((function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}})),h=St.parseMasterPlaylistMedia(o,s,"AUDIO",d),f=St.parseMasterPlaylistMedia(o,s,"SUBTITLES"),p=St.parseMasterPlaylistMedia(o,s,"CLOSED-CAPTIONS");if(h.length){var g=!1;h.forEach((function(t){t.url||(g=!0)})),!1===g&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(ot.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(at.default.MANIFEST_LOADED,{levels:l,audioTracks:h,subtitles:f,captions:p,url:s,stats:n,networkDetails:r,sessionData:c})}else this._handleManifestParsingError(t,i,"no level found in manifest",r)},n._handleTrackOrLevelPlaylist=function(t,n,i,r){var a=this.hls,o=i.id,s=i.level,u=i.type,l=e.getResponseUrl(t,i),c=Object(rt.isFiniteNumber)(o)?o:0,d=Object(rt.isFiniteNumber)(s)?s:c,h=e.mapContextToLevelType(i),f=St.parseLevelPlaylist(t.data,l,d,h,c);if(f.tload=n.tload,f.fragments.length){if(u===tt.MANIFEST){var p={url:l,details:f};a.trigger(at.default.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:l,stats:n,networkDetails:r,sessionData:null})}if(n.tparsed=wt.now(),f.needSidxRanges){var g=f.initSegment.url;this.load({url:g,isSidxRequest:!0,type:u,level:s,levelDetails:f,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else i.levelDetails=f,this._handlePlaylistLoaded(t,n,i,r)}else a.trigger(at.default.ERROR,{type:it.ErrorTypes.NETWORK_ERROR,details:it.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:l,reason:"no fragments found in level",level:"number"==typeof i.level?i.level:void 0})},n._handleSidxRequest=function(t,e){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var n=ct.default.parseSegmentIndex(new Uint8Array(t.data));if(n){var i=n.references,r=e.levelDetails;i.forEach((function(t,e){var n=t.info;if(r){var i=r.fragments[e];0===i.byteRange.length&&i.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),r&&r.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},n._handleManifestParsingError=function(t,e,n,i){this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.NETWORK_ERROR,details:it.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:n,networkDetails:i})},n._handleNetworkError=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=null),ot.logger.info("A network error occured while loading a "+t.type+"-type playlist");var r,a,o=this.getInternalLoader(t);switch(t.type){case tt.MANIFEST:r=n?it.ErrorDetails.MANIFEST_LOAD_TIMEOUT:it.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case tt.LEVEL:r=n?it.ErrorDetails.LEVEL_LOAD_TIMEOUT:it.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case tt.AUDIO_TRACK:r=n?it.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:it.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}o&&(o.abort(),this.resetInternalLoader(t.type));var s={type:it.ErrorTypes.NETWORK_ERROR,details:r,fatal:a,url:t.url,loader:o,context:t,networkDetails:e};i&&(s.response=i),this.hls.trigger(at.default.ERROR,s)},n._handlePlaylistLoaded=function(t,n,i,r){var a=i.type,o=i.level,s=i.id,u=i.levelDetails;if(u&&u.targetduration)if(e.canHaveQualityLevels(i.type))this.hls.trigger(at.default.LEVEL_LOADED,{details:u,level:o||0,id:s||0,stats:n,networkDetails:r});else switch(a){case tt.AUDIO_TRACK:this.hls.trigger(at.default.AUDIO_TRACK_LOADED,{details:u,id:s,stats:n,networkDetails:r});break;case tt.SUBTITLE_TRACK:this.hls.trigger(at.default.SUBTITLE_TRACK_LOADED,{details:u,id:s,stats:n,networkDetails:r})}else this._handleManifestParsingError(t,i,"invalid target duration",r)},e}(ut),Ct=function(t){function e(e){var n;return(n=t.call(this,e,at.default.FRAG_LOADING)||this).loaders={},n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){var e=this.loaders;for(var n in e){var i=e[n];i&&i.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onFragLoading=function(t){var e=t.frag,n=e.type,i=this.loaders,r=this.hls.config,a=r.fLoader,o=r.loader;e.loaded=0;var s,u,l,c=i[n];c&&(ot.logger.warn("abort previous fragment loader for type: "+n),c.abort()),c=i[n]=e.loader=r.fLoader?new a(r):new o(r),s={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var d=e.byteRangeStartOffset,h=e.byteRangeEndOffset;Object(rt.isFiniteNumber)(d)&&Object(rt.isFiniteNumber)(h)&&(s.rangeStart=d,s.rangeEnd=h),u={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},c.load(s,u,l)},n.loadsuccess=function(t,e,n,i){void 0===i&&(i=null);var r=t.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(at.default.FRAG_LOADED,{payload:r,frag:a,stats:e,networkDetails:i})},n.loaderror=function(t,e,n){void 0===n&&(n=null);var i=e.frag,r=i.loader;r&&r.abort(),this.loaders[i.type]=void 0,this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.NETWORK_ERROR,details:it.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:n})},n.loadtimeout=function(t,e,n){void 0===n&&(n=null);var i=e.frag,r=i.loader;r&&r.abort(),this.loaders[i.type]=void 0,this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.NETWORK_ERROR,details:it.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:n})},n.loadprogress=function(t,e,n,i){void 0===i&&(i=null);var r=e.frag;r.loaded=t.loaded,this.hls.trigger(at.default.FRAG_LOAD_PROGRESS,{frag:r,stats:t,networkDetails:i})},e}(ut),xt=function(t){function e(e){var n;return(n=t.call(this,e,at.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){for(var e in this.loaders){var n=this.loaders[e];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onKeyLoading=function(t){var e=t.frag,n=e.type,i=this.loaders[n];if(e.decryptdata){var r=e.decryptdata.uri;if(r!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(i&&(ot.logger.warn("abort previous key loader for type:"+n),i.abort()),!r)return void ot.logger.warn("key uri is falsy");e.loader=this.loaders[n]=new a.loader(a),this.decrypturl=r,this.decryptkey=null;var o={url:r,frag:e,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};e.loader.load(o,s,u)}else this.decryptkey&&(e.decryptdata.key=this.decryptkey,this.hls.trigger(at.default.KEY_LOADED,{frag:e}))}else ot.logger.warn("Missing decryption data on fragment in onKeyLoading")},n.loadsuccess=function(t,e,n){var i=n.frag;return i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,delete this.loaders[i.type],void this.hls.trigger(at.default.KEY_LOADED,{frag:i})):void ot.logger.error("after key load, decryptdata unset")},n.loaderror=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.NETWORK_ERROR,details:it.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},n.loadtimeout=function(t,e){var n=e.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.NETWORK_ERROR,details:it.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}(ut),Dt="NOT_LOADED",Lt="APPENDING",Rt="PARTIAL",It="OK",Pt=function(t){function e(e){var n;return(n=t.call(this,e,at.default.BUFFER_APPENDED,at.default.FRAG_BUFFERED,at.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=e.config,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,ut.prototype.destroy.call(this),t.prototype.destroy.call(this)},n.getBufferedFrag=function(t,e){var n=this.fragments,i=Object.keys(n).filter((function(i){var r=n[i];if(r.body.type!==e)return!1;if(!r.buffered)return!1;var a=r.body;return a.startPTS<=t&&t<=a.endPTS}));if(0===i.length)return null;var r=i.pop();return n[r].body},n.detectEvictedFragments=function(t,e){var n=this;Object.keys(this.fragments).forEach((function(i){var r=n.fragments[i];if(r&&r.buffered){var a=r.range[t];if(a)for(var o=a.time,s=0;s<o.length;s++){var u=o[s];if(!n.isTimeBuffered(u.startPTS,u.endPTS,e)){n.removeFragment(r.body);break}}}}))},n.detectPartialFragments=function(t){var e=this,n=this.getFragmentKey(t),i=this.fragments[n];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(t.hasElementaryStream(n)){var r=e.timeRanges[n];i.range[n]=e.getBufferedTimes(t.startPTS,t.endPTS,r)}})))},n.getBufferedTimes=function(t,e,n){for(var i,r,a=[],o=!1,s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,r=n.end(s)+this.bufferPadding,t>=i&&e<=r){a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))});break}if(t<r&&e>i)a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))}),o=!0;else if(e<=i)break}return{time:a,partial:o}},n.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},n.getPartialFragment=function(t){var e,n,i,r=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var u=r.fragments[s];r.isPartial(u)&&(n=u.body.startPTS-r.bufferPadding,i=u.body.endPTS+r.bufferPadding,t>=n&&t<=i&&(e=Math.min(t-n,i-t),o<=e&&(a=u.body,o=e)))})),a},n.getState=function(t){var e=this.getFragmentKey(t),n=this.fragments[e],i=Dt;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?Rt:It:Lt),i},n.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},n.isTimeBuffered=function(t,e,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,t>=i&&e<=r)return!0;if(e<=i)return!1}return!1},n.onFragLoaded=function(t){var e=t.frag;Object(rt.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach((function(t){var n=e.timeRanges[t];e.detectEvictedFragments(t,n)}))},n.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},n.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},n.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},n.removeAllFragments=function(){this.fragments=Object.create(null)},e}(ut),Ot={search:function(t,e){for(var n=0,i=t.length-1,r=null,a=null;n<=i;){var o=e(a=t[r=(n+i)/2|0]);if(o>0)n=r+1;else{if(!(o<0))return a;i=r-1}}return null}},Nt=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var n=t.buffered,i=0;i<n.length;i++)if(e>=n.start(i)&&e<=n.end(i))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,n){try{if(t){var i,r=t.buffered,a=[];for(i=0;i<r.length;i++)a.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(a,e,n)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,n){t.sort((function(t,e){var n=t.start-e.start;return n||e.end-t.end}));var i=[];if(n)for(var r=0;r<t.length;r++){var a=i.length;if(a){var o=i[a-1].end;t[r].start-o<n?t[r].end>o&&(i[a-1].end=t[r].end):i.push(t[r])}else i.push(t[r])}else i=t;for(var s,u=0,l=e,c=e,d=0;d<i.length;d++){var h=i[d].start,f=i[d].end;if(e+n>=h&&e<f)l=h,u=(c=f)-e;else if(e+n<h){s=h;break}}return{len:u,start:l,end:c,nextStart:s}},t}(),Mt=n("./node_modules/eventemitter3/index.js"),Ft=n("./node_modules/webworkify-webpack/index.js"),Ut=n("./src/demux/demuxer-inline.js"),Bt=n("./src/utils/get-self-scope.js"),jt=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.trigger=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.emit.apply(this,[t,t].concat(n))},e}(Mt.EventEmitter),Ht=Object(Bt.getSelfScope)(),Vt=u()||{isTypeSupported:function(){return!1}},Gt=function(){function t(t,e){var n=this;this.hls=t,this.id=e;var i=this.observer=new jt,r=t.config,a=function(e,i){(i=i||{}).frag=n.frag,i.id=n.id,t.trigger(e,i)};i.on(at.default.FRAG_DECRYPTED,a),i.on(at.default.FRAG_PARSING_INIT_SEGMENT,a),i.on(at.default.FRAG_PARSING_DATA,a),i.on(at.default.FRAG_PARSED,a),i.on(at.default.ERROR,a),i.on(at.default.FRAG_PARSING_METADATA,a),i.on(at.default.FRAG_PARSING_USERDATA,a),i.on(at.default.INIT_PTS_FOUND,a);var o={mp4:Vt.isTypeSupported("video/mp4"),mpeg:Vt.isTypeSupported("audio/mpeg"),mp3:Vt.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){var u;ot.logger.log("demuxing in webworker");try{u=this.w=Ft("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),u.addEventListener("message",this.onwmsg),u.onerror=function(e){t.trigger(at.default.ERROR,{type:it.ErrorTypes.OTHER_ERROR,details:it.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},u.postMessage({cmd:"init",typeSupported:o,vendor:s,id:e,config:JSON.stringify(r)})}catch(t){ot.logger.warn("Error in worker:",t),ot.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),u&&Ht.URL.revokeObjectURL(u.objectURL),this.demuxer=new Ut.default(i,o,r,s),this.w=void 0}}else this.demuxer=new Ut.default(i,o,r,s)}var e=t.prototype;return e.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.push=function(t,e,n,i,r,a,o,s){var u=this.w,l=Object(rt.isFiniteNumber)(r.startPTS)?r.startPTS:r.start,c=r.decryptdata,d=this.frag,h=!(d&&r.cc===d.cc),f=!(d&&r.level===d.level),p=d&&r.sn===d.sn+1,g=!f&&p;if(h&&ot.logger.log(this.id+":discontinuity detected"),f&&ot.logger.log(this.id+":switch detected"),this.frag=r,u)u.postMessage({cmd:"demux",data:t,decryptdata:c,initSegment:e,audioCodec:n,videoCodec:i,timeOffset:l,discontinuity:h,trackSwitch:f,contiguous:g,duration:a,accurateTimeOffset:o,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var m=this.demuxer;m&&m.push(t,c,e,n,i,l,h,f,g,a,o,s)}},e.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":Ht.URL.revokeObjectURL(this.w.objectURL);break;case at.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},t}(),qt={toString:function(t){for(var e="",n=t.length,i=0;i<n;i++)e+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return e}},Wt=function(){function t(t,e,n,i){this.config=t,this.media=e,this.fragmentTracker=n,this.hls=i,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var e=t.prototype;return e.poll=function(t){var e=this.config,n=this.media,i=this.stalled,r=n.currentTime,a=n.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,r===t){if((s||o)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var u=Nt.bufferInfo(n,r,0),l=u.len>0,c=u.nextStart||0;if(l||c){if(a){var d=u.len>2,h=!c||c-r>2&&!this.fragmentTracker.getPartialFragment(r);if(d||h)return;this.moved=!1}if(!this.moved&&this.stalled){var f=Math.max(c,u.start||0)-r;if(f>0&&f<=2)return void this._trySkipBufferHole(null)}var p=self.performance.now();if(null===i)return void(this.stalled=p);var g=p-i;!a&&g>=250&&this._reportStall(u.len);var m=Nt.bufferInfo(n,r,e.maxBufferHole);this._tryFixBufferStall(m,g)}}}else if(this.moved=!0,null!==i){if(this.stallReported){var v=self.performance.now()-i;ot.logger.warn("playback not stuck anymore @"+r+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var n=this.config,i=this.fragmentTracker,r=this.media.currentTime,a=i.getPartialFragment(r);a&&this._trySkipBufferHole(a)||t.len>n.maxBufferHole&&e>1e3*n.highBufferWatchdogPeriod&&(ot.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,ot.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(at.default.ERROR,{type:it.ErrorTypes.MEDIA_ERROR,details:it.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,n=this.hls,i=this.media,r=i.currentTime,a=0,o=0;o<i.buffered.length;o++){var s=i.buffered.start(o);if(r+e.maxBufferHole>=a&&r<s){var u=Math.max(s+.05,i.currentTime+.1);return ot.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+u),this.moved=!0,this.stalled=null,i.currentTime=u,t&&n.trigger(at.default.ERROR,{type:it.ErrorTypes.MEDIA_ERROR,details:it.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+u,frag:t}),u}a=i.buffered.end(o)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,i=n.currentTime,r=(this.nudgeRetry||0)+1;if(this.nudgeRetry=r,r<t.nudgeMaxRetry){var a=i+r*t.nudgeOffset;ot.logger.warn("Nudging 'currentTime' from "+i+" to "+a),n.currentTime=a,e.trigger(at.default.ERROR,{type:it.ErrorTypes.MEDIA_ERROR,details:it.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else ot.logger.error("Playhead still not moving while enough data buffered @"+i+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(at.default.ERROR,{type:it.ErrorTypes.MEDIA_ERROR,details:it.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}(),Kt=function(t){function e(e){for(var n,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return(n=t.call.apply(t,[this,e].concat(r))||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(E(n)),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this._tickInterval},n.hasNextTick=function(){return!!this._tickTimer},n.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},n.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},n.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},n.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},n.doTick=function(){},e}(ut),Yt="STOPPED",zt="STARTING",Xt="IDLE",$t="PAUSED",Qt="KEY_LOADING",Jt="FRAG_LOADING",Zt="FRAG_LOADING_WAITING_RETRY",te="WAITING_TRACK",ee="PARSING",ne="PARSED",ie="BUFFER_FLUSHING",re="ENDED",ae="ERROR",oe="WAITING_INIT_PTS",se="WAITING_LEVEL",ue=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Yt},n._streamEnded=function(t,e){var n=this.fragCurrent,i=this.fragmentTracker;if(!e.live&&n&&!n.backtracked&&n.sn===e.endSN&&!t.nextStart){var r=i.getState(n);return r===Rt||r===It}return!1},n.onMediaSeeking=function(){var t=this.config,e=this.media,n=this.mediaBuffer,i=this.state,r=e?e.currentTime:null,a=Nt.bufferInfo(n||e,r,this.config.maxBufferHole);if(ot.logger.log("media seeking to "+(Object(rt.isFiniteNumber)(r)?r.toFixed(3):r)),i===Jt){var o=this.fragCurrent;if(0===a.len&&o){var s=t.maxFragLookUpTolerance,u=o.start-s,l=o.start+o.duration+s;r<u||r>l?(o.loader&&(ot.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=Xt):ot.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else i===re&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=Xt);e&&(this.lastCurrentTime=r),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=r),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=Yt,this.fragmentTracker=null},n.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},e}(Kt),le=function(t){function e(e,n){var i;return(i=t.call(this,e,at.default.MEDIA_ATTACHED,at.default.MEDIA_DETACHING,at.default.MANIFEST_LOADING,at.default.MANIFEST_PARSED,at.default.LEVEL_LOADED,at.default.LEVELS_UPDATED,at.default.KEY_LOADED,at.default.FRAG_LOADED,at.default.FRAG_LOAD_EMERGENCY_ABORTED,at.default.FRAG_PARSING_INIT_SEGMENT,at.default.FRAG_PARSING_DATA,at.default.FRAG_PARSED,at.default.ERROR,at.default.AUDIO_TRACK_SWITCHING,at.default.AUDIO_TRACK_SWITCHED,at.default.BUFFER_CREATED,at.default.BUFFER_APPENDED,at.default.BUFFER_FLUSHED)||this).fragmentTracker=n,i.config=e.config,i.audioCodecSwap=!1,i._state=Yt,i.stallReported=!1,i.gapController=null,i.altAudio=!1,i.audioOnly=!1,i.bitrateTest=!1,i}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(n.config.testBandwidth?(i=0,this.bitrateTest=!0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&-1===t&&(ot.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=Xt,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=Yt},n.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case ie:this.fragLoadError=0;break;case Xt:this._doTickIdle();break;case se:var t=this.levels[this.level];t&&t.details&&(this.state=Xt);break;case Zt:var e=window.performance.now(),n=this.retryDate;(!n||e>=n||this.media&&this.media.seeking)&&(ot.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=Xt)}this._checkBuffer(),this._checkFragmentChanged()},n._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch)){if(this.altAudio&&this.audioOnly)return void(this.demuxer.frag=null);var i;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=t.nextLoadLevel,a=this.levels[r];if(a){var o,s=a.bitrate;o=s?Math.max(8*e.maxBufferSize/s,e.maxBufferLength):e.maxBufferLength,o=Math.min(o,e.maxMaxBufferLength);var u=i<e.maxBufferHole?Math.max(2,e.maxBufferHole):e.maxBufferHole,l=Nt.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,u),c=l.len;if(!(c>=o)){ot.logger.trace("buffer length of "+c.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=r;var d=a.details;if(!d||d.live&&this.levelLastLoaded!==r)return void(this.state=se);if(this._streamEnded(l,d)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(at.default.BUFFER_EOS,h),void(this.state=re)}this._fetchPayloadOrEos(i,l,d)}}}},n._fetchPayloadOrEos=function(t,e,n){var i=this.fragPrevious,r=(this.level,n.fragments),a=r.length;if(0!==a){var o,s=r[0].start,u=r[a-1].start+r[a-1].duration,l=e.end;if(n.initSegment&&!n.initSegment.data)o=n.initSegment;else if(n.live){var c=this.config.initialLiveManifestSize;if(a<c)return void ot.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+c);if(null===(o=this._ensureFragmentAtLivePoint(n,l,s,u,i,r)))return}else l<s&&(o=r[0]);o||(o=this._findFragment(s,i,a,r,l,u,n)),o&&(o.encrypted?this._loadKey(o,n):this._loadFragment(o,n,t,l))}},n._ensureFragmentAtLivePoint=function(t,e,n,i,r,a){var o,s=this.hls.config,u=this.media,l=1/0;if(void 0!==s.liveMaxLatencyDuration?l=s.liveMaxLatencyDuration:Object(rt.isFiniteNumber)(s.liveMaxLatencyDurationCount)&&(l=s.liveMaxLatencyDurationCount*t.targetduration),e<Math.max(n-s.maxFragLookUpTolerance,i-l)){var c=this.liveSyncPosition=this.computeLivePosition(n,t);e=c,u&&!u.paused&&u.readyState&&u.duration>c&&c>u.currentTime&&(ot.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),u.currentTime=c),this.nextLoadPosition=c}if(t.PTSKnown&&e>i&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown&&r)if(t.hasProgramDateTime)ot.logger.log("live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),o=v(a,r.endProgramDateTime,s.maxFragLookUpTolerance);else{var d=r.sn+1;if(d>=t.startSN&&d<=t.endSN){var h=a[d-t.startSN];r.cc===h.cc&&(o=h,ot.logger.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=Ot.search(a,(function(t){return r.cc-t.cc})))&&ot.logger.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}return o},n._findFragment=function(t,e,n,i,r,a,o){var s,u=this.hls.config;if(s=r<a?y(e,i,r,r>a-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance):i[n-1]){var l=s.sn-o.startSN,c=e&&s.level===e.level,d=i[l-1],h=i[l+1];if(e&&s.sn===e.sn)if(c&&!s.backtracked)if(s.sn<o.endSN){var f=e.deltaPTS;f&&f>u.maxBufferHole&&e.dropped&&l?(s=d,ot.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=h,this.fragmentTracker.getState(s)!==It&&ot.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(h&&h.backtracked?(ot.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+h.sn),s=h):(ot.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,d?(s=d).backtracked=!0:l&&(s=null)))}return s},n._loadKey=function(t,e){ot.logger.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level),this.state=Qt,this.hls.trigger(at.default.KEY_LOADING,{frag:t})},n._loadFragment=function(t,e,n,i){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(rt.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===Dt||r===Rt?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,ot.logger.log("Loading "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(n.toFixed(3))+", bufferEnd: "+parseFloat(i.toFixed(3))),this.hls.trigger(at.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new Gt(this.hls,"main")),this.state=Jt):r===Lt&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},n.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,et.MAIN)},n.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},n._checkFragmentChanged=function(){var t,e,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((e=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),Nt.isBuffered(n,e)?t=this.getBufferedFrag(e):Nt.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var i=t;if(i!==this.fragPlaying){this.hls.trigger(at.default.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(at.default.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},n.immediateLevelSwitch=function(){if(ot.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,e=this.media;e?(t=e.paused)||e.pause():t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},n.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,t.currentTime>0&&Nt.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},n.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,n=this.getBufferedFrag(t.currentTime);if(n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var i=this.hls.nextLoadLevel,r=this.levels[i],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*a)+1:0}var o=this.getBufferedFrag(t.currentTime+e);if(o){var s=this.followingBufferedFrag(o);if(s){var u=this.fragCurrent;u&&u.loader&&u.loader.abort(),this.fragCurrent=null;var l=Math.max(o.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(l,Number.POSITIVE_INFINITY)}}}},n.flushMainBuffer=function(t,e){this.state=ie;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(at.default.BUFFER_FLUSHING,n)},n.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new Wt(n,e,this.fragmentTracker,this.hls)},n.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(ot.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach((function(t){t.details&&t.details.fragments.forEach((function(t){t.backtracked=void 0}))})),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(rt.isFiniteNumber)(e)&&ot.logger.log("media seeked to "+e.toFixed(3)),this.tick()},n.onManifestLoading=function(){ot.logger.log("trigger BUFFER_RESET"),this.hls.trigger(at.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},n.onManifestParsed=function(t){var e,n=!1,i=!1;t.levels.forEach((function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(n=!0),-1!==e.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&ot.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},n.onLevelLoaded=function(t){var e=t.details,n=t.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],a=e.totalduration,o=0;if(ot.logger.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live){var s=r.details;s&&e.fragments.length>0?(h(s,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),e.PTSKnown&&Object(rt.isFiniteNumber)(o)?ot.logger.log("live playlist sliding:"+o.toFixed(3)):(ot.logger.log("live playlist - outdated PTS, unknown sliding"),m(this.fragPrevious,i,e))):(ot.logger.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,m(this.fragPrevious,i,e))}else e.PTSKnown=!1;if(r.details=e,this.levelLastLoaded=n,this.hls.trigger(at.default.LEVEL_UPDATED,{details:e,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=e.startTimeOffset;Object(rt.isFiniteNumber)(u)?(u<0&&(ot.logger.log("negative start time offset "+u+", count from end of last fragment"),u=o+a+u),ot.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):e.live?(this.startPosition=this.computeLivePosition(o,e),ot.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===se&&(this.state=Xt),this.tick()},n.onKeyLoaded=function(){this.state===Qt&&(this.state=Xt,this.tick())},n.onFragLoaded=function(t){var e=this.fragCurrent,n=this.hls,i=this.levels,r=this.media,a=t.frag;if(this.state===Jt&&e&&"main"===a.type&&a.level===e.level&&a.sn===e.sn){var o=t.stats,s=i[e.level],u=s.details;if(this.bitrateTest=!1,this.stats=o,ot.logger.log("Loaded "+e.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+e.level),a.bitrateTest&&n.nextLoadLevel)this.state=Xt,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),n.trigger(at.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=Xt,o.tparsed=o.tbuffered=window.performance.now(),u.initSegment.data=t.payload,n.trigger(at.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else{ot.logger.log("Parsing "+e.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+e.level+", cc "+e.cc),this.state=ee,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var l=!(r&&r.seeking)&&(u.PTSKnown||!u.live),c=u.initSegment?u.initSegment.data:[],d=this._getAudioCodec(s);(this.demuxer=this.demuxer||new Gt(this.hls,"main")).push(t.payload,c,d,s.videoCodec,e,u.totalduration,l)}}this.fragLoadError=0},n.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===ee){var i,r,a=t.tracks;if(this.audioOnly=a.audio&&!a.video,this.altAudio&&!this.audioOnly&&delete a.audio,r=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(ot.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==r.container&&(o="mp4a.40.2",ot.logger.log("Android: force audio codec to "+o)),r.levelCodec=o,r.id=t.id}for(i in(r=a.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=t.id),this.hls.trigger(at.default.BUFFER_CODECS,a),a){r=a[i],ot.logger.log("main track:"+i+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var u=r.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(at.default.BUFFER_APPENDING,{type:i,data:u,parent:"main",content:"initSegment"}))}this.tick()}},n.onFragParsingData=function(t){var e=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===ee){var r=this.levels[this.level],a=n;if(Object(rt.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&a.addElementaryStream(lt.AUDIO),!0===t.hasVideo&&a.addElementaryStream(lt.VIDEO),ot.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)ot.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=r.details;if(!o||a.sn!==o.startSN)return ot.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=Xt,this.fragPrevious=a,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();ot.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=d(r.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),u=this.hls;u.trigger(at.default.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(n){n&&n.length&&e.state===ee&&(e.appended=!0,e.pendingBuffering=!0,u.trigger(at.default.BUFFER_APPENDING,{type:t.type,data:n,parent:"main",content:"data"}))})),this.tick()}},n.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===ee&&(this.stats.tparsed=window.performance.now(),this.state=ne,this._checkAppendedParsed())},n.onAudioTrackSwitching=function(t){var e=this.altAudio,n=!!t.url,i=t.id;if(!n){if(this.mediaBuffer!==this.media){ot.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(ot.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Xt}var a=this.hls;e&&a.trigger(at.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(at.default.AUDIO_TRACK_SWITCHED,{id:i})}},n.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(ot.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},n.onBufferCreated=function(t){var e,n,i=t.tracks,r=!1;for(var a in i){var o=i[a];"main"===o.id?(n=a,e=o,"video"===a&&(this.videoBuffer=i[a].buffer)):r=!0}r&&e?(ot.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},n.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==ee&&e!==ne||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},n._checkAppendedParsed=function(){if(!(this.state!==ne||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;ot.logger.log("main buffered : "+qt.toString(e.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(at.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=Xt}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},n.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&Nt.isBuffered(this.media,this.media.currentTime)&&Nt.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case it.ErrorDetails.FRAG_LOAD_ERROR:case it.ErrorDetails.FRAG_LOAD_TIMEOUT:case it.ErrorDetails.KEY_LOAD_ERROR:case it.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);ot.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=Zt}else ot.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ae;break;case it.ErrorDetails.LEVEL_LOAD_ERROR:case it.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==ae&&(t.fatal?(this.state=ae,ot.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==se||(this.state=Xt));break;case it.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==ee&&this.state!==ne||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=Xt):(ot.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},n._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,ot.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},n._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e)}},n.onFragLoadEmergencyAborted=function(){this.state=Xt,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},n.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;if(t){var e=this.audioOnly?lt.AUDIO:lt.VIDEO;this.fragmentTracker.detectEvictedFragments(e,t.buffered)}this.state=Xt,this.fragPrevious=null},n.onLevelsUpdated=function(t){this.levels=t.levels},n.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n._seekToStartPos=function(){var t=this.media,e=t.currentTime,n=this.startPosition;if(e!==n&&n>=0){if(t.seeking)return void ot.logger.log("could not seek to "+n+", already seeking at "+e);var i=(t.buffered.length?t.buffered.start(0):0)-n;i>0&&i<this.config.maxBufferHole&&(ot.logger.log("adjusting start position by "+i+" to match buffer start"),n+=i,this.startPosition=n),ot.logger.log("seek to target start position "+n+" from current time "+e+". ready state "+t.readyState),t.currentTime=n}},n._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(ot.logger.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},function(t,e,n){e&&T(t.prototype,e),n&&T(t,n)}(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,ot.logger.log("main stream-controller: "+e+"->"+t),this.hls.trigger(at.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(ue),ce=function(t){function e(e){var n;return(n=t.call(this,e,at.default.MANIFEST_LOADED,at.default.LEVEL_LOADED,at.default.AUDIO_TRACK_SWITCHED,at.default.FRAG_LOADED,at.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,ht=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},n.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},n.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach((function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)})),null!==this.timer&&this.loadLevel()},n.stopLoad=function(){this.canload=!1},n.onManifestLoaded=function(t){var e,n=[],i=[],r={},a=null,s=!1,u=!1;if(t.levels.forEach((function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,s=s||!!t.videoCodec,u=u||!!t.audioCodec,ht&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(a=r[t.bitrate])?a.url.push(t.url):(t.url=[t.url],t.urlId=0,r[t.bitrate]=t,n.push(t)),e&&(e.AUDIO&&l(a||t,"audio",e.AUDIO),e.SUBTITLES&&l(a||t,"text",e.SUBTITLES))})),s&&u&&(n=n.filter((function(t){return!!t.videoCodec}))),n=n.filter((function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||o(e,"audio"))&&(!n||o(n,"video"))})),t.audioTracks&&(i=t.audioTracks.filter((function(t){return!t.audioCodec||o(t.audioCodec,"audio")}))).forEach((function(t,e){t.id=e})),n.length>0){e=n[0].bitrate,n.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=n;for(var c=0;c<n.length;c++)if(n[c].bitrate===e){this._firstLevel=c,ot.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+e);break}var d=u&&!s;this.hls.trigger(at.default.MANIFEST_PARSED,{levels:n,audioTracks:i,firstLevel:this._firstLevel,stats:t.stats,audio:u,video:s,altAudio:!d&&i.some((function(t){return!!t.url}))})}else this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.MEDIA_ERROR,details:it.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},n.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){ot.logger.log("switching to level "+t),this.currentLevelIndex=t;var i=e[t];i.level=t,n.trigger(at.default.LEVEL_SWITCHING,i)}var r=e[t],a=r.details;if(!a||a.live){var o=r.urlId;n.trigger(at.default.LEVEL_LOADING,{url:r.url[o],level:t,id:o})}}else n.trigger(at.default.ERROR,{type:it.ErrorTypes.OTHER_ERROR,details:it.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},n.onError=function(t){if(t.fatal)t.type===it.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var e,n=!1,i=!1;switch(t.details){case it.ErrorDetails.FRAG_LOAD_ERROR:case it.ErrorDetails.FRAG_LOAD_TIMEOUT:case it.ErrorDetails.KEY_LOAD_ERROR:case it.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,i=!0;break;case it.ErrorDetails.LEVEL_LOAD_ERROR:case it.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,n=!0;break;case it.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,n=!0}void 0!==e&&this.recoverLevel(t,e,n,i)}},n.recoverLevel=function(t,e,n,i){var r,a,o,s=this,u=this.hls.config,l=t.details,c=this._levels[e];if(c.loadError++,c.fragmentError=i,n){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return ot.logger.error("level controller, cannot recover from "+l+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),t.levelRetry=!0,this.levelRetryCount++,ot.logger.warn("level controller, "+l+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(n||i)&&((r=c.url.length)>1&&c.loadError<r?(c.urlId=(c.urlId+1)%r,c.details=void 0,ot.logger.warn("level controller, "+l+" for level "+e+": switching to redundant URL-id "+c.urlId)):-1===this.manualLevelIndex?(o=0===e?this._levels.length-1:e-1,ot.logger.warn("level controller, "+l+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):i&&(ot.logger.warn("level controller, "+l+": reload a fragment"),this.currentLevelIndex=null))},n.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var n=this._levels[e.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},n.onLevelLoaded=function(t){var e=this,n=t.level,i=t.details;if(n===this.currentLevelIndex){var r=this._levels[n];if(r.fragmentError||(r.loadError=0,this.levelRetryCount=0),i.live){var a=p(r.details,i,t.stats.trequest);ot.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return e.loadLevel()}),a)}else this.clearTimer()}},n.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var i=-1,r=0;r<n.audioGroupIds.length;r++)if(n.audioGroupIds[r]===e){i=r;break}i!==n.urlId&&(n.urlId=i,this.startLoad())}},n.loadLevel=function(){if(ot.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==_typeof(t)&&t.url.length>0){var e=this.currentLevelIndex,n=t.urlId,i=t.url[n];ot.logger.log("Attempt loading level index "+e+" with URL-id "+n),this.hls.trigger(at.default.LEVEL_LOADING,{url:i,level:e,id:n})}}},n.removeLevel=function(t,e){var n=this.levels.filter((function(n,i){return i!==t||n.url.length>1&&void 0!==e&&(n.url=n.url.filter((function(t,n){return n!==e})),n.urlId=0,!0)})).map((function(t,e){var n=t.details;return n&&n.fragments&&n.fragments.forEach((function(t){t.level=e})),t}));this._levels=n,this.hls.trigger(at.default.LEVELS_UPDATED,{levels:n})},function(t,e,n){e&&A(t.prototype,e),n&&A(t,n)}(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(ut),de=n("./src/demux/id3.js"),he=function(t){function e(e){var n;return(n=t.call(this,e,at.default.MEDIA_ATTACHED,at.default.MEDIA_DETACHING,at.default.FRAG_PARSING_METADATA,at.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,n.media=void 0,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){ut.prototype.destroy.call(this)},n.onMediaAttached=function(t){this.media=t.media,this.media},n.onMediaDetaching=function(){w(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return S(n,this.media),n}return this.media.addTextTrack("metadata","id3")},n.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var a=de.default.getID3Frames(n[r].data);if(a){var o=Math.max(n[r].pts,0),s=r<n.length-1?n[r+1].pts:e.endPTS;s||(s=e.start+e.duration),s-o<=0&&(s=o+.25);for(var u=0;u<a.length;u++){var l=a[u];if(!de.default.isTimeStampFrame(l)){var c=new i(o,s,"");c.value=l,this.id3Track.addCue(c)}}}}},n.onLiveBackBufferReached=function(t){var e=t.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var i=function(t,e){if(e<t[0].endTime)return t[0];if(e>t[t.length-1].endTime)return t[t.length-1];for(var n=0,i=t.length-1;n<=i;){var r=Math.floor((i+n)/2);if(e<t[r].endTime)i=r-1;else{if(!(e>t[r].endTime))return t[r];n=r+1}}return t[n].endTime-e<e-t[i].endTime?t[n]:t[i]}(n.cues,e);if(i)for(;n.cues[0]!==i;)n.removeCue(n.cues[0])}},e}(ut),fe=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var e=t.prototype;return e.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),pe=function(){function t(t,e,n,i){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new fe(e),this.fast_=new fe(n)}var e=t.prototype;return e.sample=function(t,e){var n=(t=Math.max(t,this.minDelayMs_))/1e3,i=8*e/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}(),ge=window.performance,me=function(t){function e(e){var n;return(n=t.call(this,e,at.default.FRAG_LOADING,at.default.FRAG_LOADED,at.default.FRAG_BUFFERED,at.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){this.clearTimer(),ut.prototype.destroy.call(this)},n.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,i,r=this.hls,a=r.config,o=e.level;r.levels[o].details.live?(n=a.abrEwmaFastLive,i=a.abrEwmaSlowLive):(n=a.abrEwmaFastVoD,i=a.abrEwmaSlowVoD),this._bwEstimator=new pe(r,i,n,a.abrEwmaDefaultEstimate)}},n._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent;if(n){var i=n.loader;if(!i||i.stats&&i.stats.aborted)return ot.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var r=i.stats;if(e&&r&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var a=ge.now()-r.trequest,o=Math.abs(e.playbackRate);if(a>500*n.duration/o){var s=t.levels,u=Math.max(1,r.bw?r.bw/8:1e3*r.loaded/a),l=s[n.level];if(!l)return;var c=l.realBitrate?Math.max(l.realBitrate,l.bitrate):l.bitrate,d=r.total?r.total:Math.max(r.loaded,Math.round(n.duration*c/8)),h=e.currentTime,f=(d-r.loaded)/u,p=(Nt.bufferInfo(e,h,t.config.maxBufferHole).end-h)/o;if(p<2*n.duration/o&&f>p){var g,m,v=t.minAutoLevel;for(m=n.level-1;m>v;m--){var y=s[m].realBitrate?Math.max(s[m].realBitrate,s[m].bitrate):s[m].bitrate;if(n.duration*y/(6.4*u)<p)break}g<f&&(ot.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+g.toFixed(1)+"<"+f.toFixed(1)+":"+p.toFixed(1)),t.nextLoadLevel=m,this._bwEstimator.sample(a,r.loaded),i.abort(),this.clearTimer(),t.trigger(at.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:r}))}}}}},n.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(rt.isFiniteNumber)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,r=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},n.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(!0!==e.aborted&&"main"===n.type&&Object(rt.isFiniteNumber)(n.sn)&&(!n.bitrateTest||e.tload===e.tbuffered)){var i=e.tparsed-e.trequest;ot.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(i,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},n.onError=function(t){switch(t.details){case it.ErrorDetails.FRAG_LOAD_ERROR:case it.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.clearTimer=function(){clearInterval(this.timer),this.timer=null},n._findBestLevel=function(t,e,n,i,r,a,o,s,u){for(var l=r;l>=i;l--){var c=u[l];if(c){var d,h=c.details,f=h?h.totalduration/h.fragments.length:e,p=!!h&&h.live;d=l<=t?o*n:s*n;var g=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,m=g*f/d;if(ot.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(d)+"/"+g+"/"+f+"/"+a+"/"+m),d>g&&(!m||p&&!this.bitrateTestDelay||m<a))return l}}return-1},function(t,e,n){e&&k(t.prototype,e),n&&k(t,n)}(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this._nextABRAutoLevel;return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,i=t.config,r=t.minAutoLevel,a=t.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,d=(Nt.bufferInfo(a,u,i.maxBufferHole).end-u)/l,h=this._findBestLevel(o,s,c,r,e,d,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(h>=0)return h;ot.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;m&&(f=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-m,ot.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=g=1)}return h=this._findBestLevel(o,s,c,r,e,d+f,p,g,n),Math.max(h,0)}}]),e}(ut),ve=u(),ye=function(t){function e(e){var n;return(n=t.call(this,e,at.default.MEDIA_ATTACHING,at.default.MEDIA_DETACHING,at.default.MANIFEST_PARSED,at.default.BUFFER_RESET,at.default.BUFFER_APPENDING,at.default.BUFFER_CODECS,at.default.BUFFER_EOS,at.default.BUFFER_FLUSHING,at.default.LEVEL_PTS_UPDATED,at.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){ot.logger.log("media source opened"),n.hls.trigger(at.default.MEDIA_ATTACHED,{media:n.media});var t=n.mediaSource;t&&t.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){ot.logger.log("media source closed")},n._onMediaSourceEnded=function(){ot.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var t=n.sourceBuffer.audio;ot.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+n.audioTimestampOffset),t.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var e=n.parent,i=n.segments.reduce((function(t,n){return n.parent===e?t+1:t}),0),r={},a=n.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");r[o]=s.buffered}n.hls.trigger(at.default.BUFFER_APPENDED,{parent:e,pending:i,timeRanges:r}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===i&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(t){ot.logger.error("sourceBuffer error:",t),n.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.MEDIA_ERROR,details:it.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=e.config,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){ut.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(!i)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(i.timestampOffset-t.start)>.1){var r=i.updating;try{i.abort()}catch(t){ot.logger.warn("can not abort audio buffer: "+t)}r?this.audioTimestampOffset=t.start:(ot.logger.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},n.onManifestParsed=function(t){var e=2;(t.audio&&!t.video||!t.altAudio)&&(e=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e,ot.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(t){var e=this.media=t.media;if(e&&ve){var n=this.mediaSource=new ve;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),e.src=window.URL.createObjectURL(n),this._objectUrl=e.src}},n.onMediaDetaching=function(){ot.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){ot.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):ot.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(at.default.MEDIA_DETACHED)},n.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,n=Object.keys(e).length;(n&&!t||2===n)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(t){var e=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach((function(n){e.pendingTracks[n]=t[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var i in t)if(!e[i]){var r=t[i];if(!r)throw Error("source buffer exists for track "+i+", however track does not");var a=r.levelCodec||r.codec,o=r.container+";codecs="+a;ot.logger.log("creating sourceBuffer("+o+")");try{var s=e[i]=n.addSourceBuffer(o);s.addEventListener("updateend",this._onSBUpdateEnd),s.addEventListener("error",this._onSBUpdateError),this.tracks[i]={buffer:s,codec:a,id:r.id,container:r.container,levelCodec:r.levelCodec}}catch(t){ot.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.MEDIA_ERROR,details:it.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:o})}}this.hls.trigger(at.default.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},n.onBufferEos=function(t){for(var e in this.sourceBuffer)if(!t.type||t.type===e){var n=this.sourceBuffer[e];n&&!n.ended&&(n.ended=!0,ot.logger.log(e+" sourceBuffer now EOS"))}this.checkEos()},n.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var n in t){var i=t[n];if(i){if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}}ot.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){ot.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},n.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this._live){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0)){if(!this.media)return void ot.logger.error("flushLiveBackBuffer called without attaching media");for(var e=this.media.currentTime,n=this.sourceBuffer,i=Object.keys(n),r=e-Math.max(t,this._levelTargetDuration),a=i.length-1;a>=0;a--){var o=i[a],s=n[o];if(s){var u=s.buffered;u.length>0&&r>u.start(0)&&this.removeBufferRange(o,s,0,r)&&this.hls.trigger(at.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r})}}}}},n.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var t,e=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var i=this.sourceBuffer[n];if(i&&!0===i.updating)return}t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(ot.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(rt.isFiniteNumber)(t))&&(ot.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},n.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var i in n){var r=n[i];r&&(e+=r.buffered.length)}}catch(t){ot.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(at.default.BUFFER_FLUSHED)}},n.doAppending=function(){var t=this.config,e=this.hls,n=this.segments,i=this.sourceBuffer;if(Object.keys(i).length){if(!this.media||this.media.error)return this.segments=[],void ot.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var r=n.shift();if(r)try{var a=i[r.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void n.unshift(r);a.ended=!1,this.parent=r.parent,a.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0}catch(i){ot.logger.error("error while trying to append buffer:"+i.message),n.unshift(r);var o={type:it.ErrorTypes.MEDIA_ERROR,parent:r.parent,details:"",fatal:!1};22===i.code?(this.segments=[],o.details=it.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=it.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(ot.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),e.trigger(at.default.ERROR,o)}}}},n.flushBuffer=function(t,e,n){var i=this.sourceBuffer;if(!Object.keys(i).length)return!0;var r="null";if(this.media&&(r=this.media.currentTime.toFixed(3)),ot.logger.log("flushBuffer,pos/start/end: "+r+"/"+t+"/"+e),this.flushBufferCounter>=this.appended)return ot.logger.warn("abort flushing too many retries"),!0;var a=i[n];if(a){if(a.ended=!1,a.updating)return ot.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,a,t,e))return this.flushBufferCounter++,!1}return ot.logger.log("buffer flushed"),!0},n.removeBufferRange=function(t,e,n,i){try{for(var r=0;r<e.buffered.length;r++){var a=e.buffered.start(r),o=e.buffered.end(r),s=Math.max(a,n),u=Math.min(o,i);if(Math.min(u,o)-s>.5){var l="null";return this.media&&(l=this.media.currentTime.toString()),ot.logger.log("sb remove "+t+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+l),e.remove(s,u),!0}}}catch(t){ot.logger.warn("removeBufferRange failed",t)}return!1},e}(ut),_e=function(t){function e(e){var n;return(n=t.call(this,e,at.default.FPS_DROP_LEVEL_CAPPING,at.default.MEDIA_ATTACHING,at.default.MANIFEST_PARSED,at.default.LEVELS_UPDATED,at.default.BUFFER_CODECS,at.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n.clientRect=null,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},n.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},n.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},n.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this.startCapping()},n.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},n.onLevelsUpdated=function(t){this.levels=t.levels},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},n.getMaxLevel=function(t){var n=this;if(!this.levels)return-1;var i=this.levels.filter((function(i,r){return e.isLevelAllowed(r,n.restrictedLevels)&&r<=t}));return this.clientRect=null,e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},n.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var n=t.getBoundingClientRect();e.width=n.width,e.height=n.height,e.width||e.height||(e.width=n.right-n.left||t.width||0,e.height=n.bottom-n.top||t.height||0)}return this.clientRect=e,e},e.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var i=function(t,e){return!e||t.width!==e.width||t.height!==e.height},r=t.length-1,a=0;a<t.length;a+=1){var o=t[a];if((o.width>=e||o.height>=n)&&i(o,t[a+1])){r=a;break}}return r},function(t,e,n){e&&C(t.prototype,e),n&&C(t,n)}(e,[{key:"mediaWidth",get:function(){return this.getDimensions().width*e.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*e.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(ut),be=window.performance,Ee=function(t){function e(e){return t.call(this,e,at.default.MEDIA_ATTACHING)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},n.checkFPS=function(t,e,n){var i=be.now();if(e){if(this.lastTime){var r=i-this.lastTime,a=n-this.lastDroppedFrames,o=e-this.lastDecodedFrames,s=1e3*a/r,u=this.hls;if(u.trigger(at.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var l=u.currentLevel;ot.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=l)&&(l-=1,u.trigger(at.default.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:u.currentLevel}),u.autoLevelCapping=l,u.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},n.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(ut),Te=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var e=t.prototype;return e.destroy=function(){this.abort(),this.loader=null},e.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t,e=this.context;t=this.loader=new window.XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,e.url)}catch(n){t.open("GET",e.url,!0),i(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,i=this.stats,r=this.context,a=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(window.performance.now(),i.trequest)),4===n){var o=e.status;if(o>=200&&o<300){var s,u;i.tload=Math.max(i.tfirst,window.performance.now()),u="arraybuffer"===r.responseType?(s=e.response).byteLength:(s=e.responseText).length,i.loaded=i.total=u;var l={url:e.responseURL,data:s};this.callbacks.onSuccess(l,i,r,e)}else i.retry>=a.maxRetry||o>=400&&o<499?(ot.logger.error(o+" while loading "+r.url),this.callbacks.onError({code:o,text:e.statusText},r,e)):(ot.logger.warn(o+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.loadtimeout=function(){ot.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,e)},t}(),Ae=function(t){function e(e){var n;return(n=t.call(this,e,at.default.MANIFEST_LOADING,at.default.MANIFEST_PARSED,at.default.AUDIO_TRACK_LOADED,at.default.AUDIO_TRACK_SWITCHED,at.default.LEVEL_LOADED,at.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},n.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(at.default.AUDIO_TRACKS_UPDATED,{audioTracks:e}),this._selectAudioGroup(this.hls.nextLoadLevel)},n.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)ot.logger.warn("Invalid audio track id:",t.id);else{if(ot.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()}},n.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},n.onLevelLoaded=function(t){this._selectAudioGroup(t.level)},n.onError=function(t){t.type===it.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===it.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(ot.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},n._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)ot.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(t<0||t>=this.tracks.length)ot.logger.warn("Invalid id passed to audio-track controller");else{var e=this.tracks[t];ot.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var n=e.url,i=e.type,r=e.id;this.hls.trigger(at.default.AUDIO_TRACK_SWITCHING,{id:r,type:i,url:n}),this._loadTrackDetailsIfNeeded(e)}},n.doTick=function(){this._updateTrack(this._trackId)},n._selectAudioGroup=function(t){var e=this.hls.levels[t];if(e&&e.audioGroupIds){var n=e.audioGroupIds[e.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},n._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var n=this.tracks[this._trackId],i=null;if(n&&(i=n.name),this._selectDefaultTrack){var r=e.filter((function(t){return t.default}));r.length?e=r:ot.logger.warn("No default audio tracks defined")}var a=!1,o=function(){e.forEach((function(e){a||t.audioGroupId&&e.groupId!==t.audioGroupId||i&&i!==e.name||(t._setAudioTrack(e.id),a=!0)}))};o(),a||(i=null,o()),a||(ot.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.MEDIA_ERROR,details:it.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},n._needsTrackLoading=function(t){var e=t.details,n=t.url;return!(e&&!e.live||!n)},n._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,n=t.id;ot.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(at.default.AUDIO_TRACK_LOADING,{url:e,id:n})}},n._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,ot.logger.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},n._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],n=e.name,i=e.language,r=e.groupId;ot.logger.warn("Loading failed on audio track id: "+t+", group-id: "+r+', name/language: "'+n+'" / "'+i+'"');for(var a=t,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===n){a=o;break}return a===t?void ot.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+i+'"'):(ot.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),void this._setAudioTrack(a))},function(t,e,n){e&&x(t.prototype,e),n&&x(t,n)}(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}]),e}(Kt),Se=window.performance,we=function(t){function e(e,n){var i;return(i=t.call(this,e,at.default.MEDIA_ATTACHED,at.default.MEDIA_DETACHING,at.default.AUDIO_TRACKS_UPDATED,at.default.AUDIO_TRACK_SWITCHING,at.default.AUDIO_TRACK_LOADED,at.default.KEY_LOADED,at.default.FRAG_LOADED,at.default.FRAG_PARSING_INIT_SEGMENT,at.default.FRAG_PARSING_DATA,at.default.FRAG_PARSED,at.default.ERROR,at.default.BUFFER_RESET,at.default.BUFFER_CREATED,at.default.BUFFER_APPENDED,at.default.BUFFER_FLUSHED,at.default.INIT_PTS_FOUND)||this).fragmentTracker=n,i.config=e.config,i.audioCodecSwap=!1,i._state=Yt,i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i.waitingVideoCC=null,i}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,i=t.initPTS;"main"===e&&(this.initPTS[n]=i,this.videoTrackCC=n,ot.logger.log("InitPTS for cc: "+n+" found from main: "+i),this.state===oe&&this.tick())},n.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(ot.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=Xt):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=zt),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=Yt},n.doTick=function(){var t,e,n,i=this.hls,r=i.config;switch(this.state){case ae:case $t:case ie:break;case zt:this.state=te,this.loadedmetadata=!1;break;case Xt:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,u=t<r.maxBufferHole?Math.max(2,r.maxBufferHole):r.maxBufferHole,l=Nt.bufferInfo(o,t,u),c=Nt.bufferInfo(s,t,u),d=l.len,h=l.end,f=this.fragPrevious,p=Math.min(r.maxBufferLength,r.maxMaxBufferLength),g=Math.max(p,c.len),m=this.audioSwitch,v=this.trackId;if((d<g||m)&&v<a.length){if(void 0===(n=a[v].details)){this.state=te;break}if(!m&&this._streamEnded(l,n))return this.hls.trigger(at.default.BUFFER_EOS,{type:"audio"}),void(this.state=re);var y,b=n.fragments,E=b.length,T=b[0].start,A=b[E-1].start+b[E-1].duration;if(m)if(n.live&&!n.PTSKnown)ot.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=t,n.PTSKnown&&t<T){if(!(l.end>T||l.nextStart))return;ot.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=T+.05}if(n.initSegment&&!n.initSegment.data)y=n.initSegment;else if(h<=T){if(y=b[0],null!==this.videoTrackCC&&y.cc!==this.videoTrackCC&&(y=function(t,e){return Ot.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(b,this.videoTrackCC)),n.live&&y.loadIdx&&y.loadIdx===this.fragLoadIdx){var S=l.nextStart?l.nextStart:T;return ot.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var w,k=r.maxFragLookUpTolerance,C=f?b[f.sn-b[0].sn+1]:void 0;h<A?(h>A-k&&(k=0),w=C&&!_(h,k,C)?C:Ot.search(b,(function(t){return _(h,k,t)}))):w=b[E-1],w&&(y=w,T=w.start,f&&y.level===f.level&&y.sn===f.sn&&(y.sn<n.endSN?(y=b[y.sn+1-n.startSN],this.fragmentTracker.getState(y)!==It&&ot.logger.log("SN just loaded, load next one: "+y.sn)):y=null))}y&&(y.encrypted?(ot.logger.log("Loading key for "+y.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+v),this.state=Qt,i.trigger(at.default.KEY_LOADING,{frag:y})):(this.fragCurrent=y,(m||this.fragmentTracker.getState(y)===Dt)&&(ot.logger.log("Loading "+y.sn+", cc: "+y.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+v+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+t+", bufferEnd: "+h.toFixed(3)),"initSegment"!==y.sn&&(this.startFragRequested=!0),Object(rt.isFiniteNumber)(y.sn)&&(this.nextLoadPosition=y.start+y.duration),i.trigger(at.default.FRAG_LOADING,{frag:y}),this.state=Jt)))}break;case te:(e=this.tracks[this.trackId])&&e.details&&(this.state=Xt);break;case Zt:var x=Se.now(),D=this.retryDate,L=(o=this.media)&&o.seeking;(!D||x>=D||L)&&(ot.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Xt);break;case oe:var R=this.waitingFragment;if(R){var I=R.frag.cc;if(void 0!==this.initPTS[I])this.waitingFragment=null,this.state=Jt,this.onFragLoaded(R);else if(this.videoTrackCC!==this.waitingVideoCC)ot.logger.log("Waiting fragment cc ("+I+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var P=Nt.bufferInfo(this.mediaBuffer,this.media.currentTime,r.maxBufferHole);_(P.end,r.maxFragLookUpTolerance,R.frag)<0&&(ot.logger.log("Waiting fragment cc ("+I+") @ "+R.frag.start+" cancelled because another fragment at "+P.end+" is needed"),this.clearWaitingFragment())}}else this.state=Xt}},n.clearWaitingFragment=function(){var t=this.waitingFragment;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=Xt)},n.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},n.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(ot.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},n.onAudioTracksUpdated=function(t){ot.logger.log("audio tracks updated"),this.tracks=t.audioTracks},n.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=$t,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=Xt),this.tick()},n.onAudioTrackLoaded=function(t){var e=t.details,n=t.id,i=this.tracks[n],r=e.totalduration,a=0;if(ot.logger.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),e.live){var o=i.details;o&&e.fragments.length>0?(h(o,e),a=e.fragments[0].start,e.PTSKnown?ot.logger.log("live audio playlist sliding:"+a.toFixed(3)):ot.logger.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,ot.logger.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(i.details=e,!this.startFragRequested){if(-1===this.startPosition){var s=e.startTimeOffset;Object(rt.isFiniteNumber)(s)?(ot.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):e.live?(this.startPosition=this.computeLivePosition(a,e),ot.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===te&&(this.state=Xt),this.tick()},n.onKeyLoaded=function(){this.state===Qt&&(this.state=Xt,this.tick())},n.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===Jt&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var i=this.tracks[this.trackId],r=i.details,a=r.totalduration,o=e.level,s=e.sn,u=e.cc,l=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",c=this.stats=t.stats;if("initSegment"===s)this.state=Xt,c.tparsed=c.tbuffered=Se.now(),r.initSegment.data=t.payload,this.hls.trigger(at.default.FRAG_BUFFERED,{stats:c,frag:e,id:"audio"}),this.tick();else{this.state=ee,this.appended=!1,this.demuxer||(this.demuxer=new Gt(this.hls,"audio"));var d=this.initPTS[u],h=r.initSegment?r.initSegment.data:[];void 0!==d?(this.pendingBuffering=!0,ot.logger.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.demuxer.push(t.payload,h,l,null,e,a,!1,d)):(ot.logger.log("Unknown video PTS for cc "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.waitingFragment=t,this.waitingVideoCC=this.videoTrackCC,this.state=oe)}}this.fragLoadError=0},n.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===ee){var i,r=t.tracks;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=t.id,this.hls.trigger(at.default.BUFFER_CODECS,r),ot.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(at.default.BUFFER_APPENDING,o))}this.tick()}}},n.onFragParsingData=function(t){var e=this,n=this.fragCurrent,i=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&i.sn===n.sn&&i.level===n.level&&this.state===ee){var r=this.trackId,a=this.tracks[r],o=this.hls;Object(rt.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(lt.AUDIO),ot.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),d(a.details,n,t.startPTS,t.endPTS);var s=this.media,u=!1;if(this.audioSwitch)if(s&&s.readyState){var l=s.currentTime;ot.logger.log("switching audio track : currentTime:"+l),l>=t.startPTS&&(ot.logger.log("switching audio track : flushing all audio"),this.state=ie,o.trigger(at.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,o.trigger(at.default.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,o.trigger(at.default.AUDIO_TRACK_SWITCHED,{id:r});var c=this.pendingData;if(!c)return ot.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(at.default.ERROR,{type:it.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach((function(e){e&&e.length&&c.push({type:t.type,data:e,parent:"audio",content:"data"})})),!u&&c.length&&(c.forEach((function(t){e.state===ee&&(e.pendingBuffering=!0,e.hls.trigger(at.default.BUFFER_APPENDING,t))})),this.pendingData=[],this.appended=!0)),this.tick()}},n.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===ee&&(this.stats.tparsed=Se.now(),this.state=ne,this._checkAppendedParsed())},n.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},n.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==ee&&e!==ne||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},n._checkAppendedParsed=function(){if(!(this.state!==ne||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=Se.now(),n.trigger(at.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;i&&ot.logger.log("audio buffered : "+qt.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(at.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Xt}this.tick()}},n.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case it.ErrorDetails.FRAG_LOAD_ERROR:case it.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var i=this.fragLoadError;i?i++:i=1;var r=this.config;if(i<=r.fragLoadingMaxRetry){this.fragLoadError=i;var a=Math.min(Math.pow(2,i-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);ot.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=Se.now()+a,this.state=Zt}else ot.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ae}break;case it.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case it.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case it.ErrorDetails.KEY_LOAD_ERROR:case it.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==ae&&(this.state=t.fatal?ae:Xt,ot.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case it.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===ee||this.state===ne)){var o=this.mediaBuffer,s=this.media.currentTime;if(o&&Nt.isBuffered(o,s)&&Nt.isBuffered(o,s+.5)){var u=this.config;u.maxMaxBufferLength>=u.maxBufferLength&&(u.maxMaxBufferLength/=2,ot.logger.warn("AudioStreamController: reduce max buffer length to "+u.maxMaxBufferLength+"s")),this.state=Xt}else ot.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ie,this.hls.trigger(at.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},n.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(ot.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach((function(e){t.hls.trigger(at.default.BUFFER_APPENDING,e)})),this.appended=!0,this.pendingData=[],this.state=ne):(this.state=Xt,this.fragPrevious=null,this.tick())},function(t,e,n){e&&D(t.prototype,e),n&&D(t,n)}(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,ot.logger.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(ue),ke=function(){function t(t){return"string"==typeof t&&!!a[t.toLowerCase()]&&t.toLowerCase()}function e(t){return"string"==typeof t&&!!o[t.toLowerCase()]&&t.toLowerCase()}function n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function i(i,a,o){var s=this,u={enumerable:!0};s.hasBeenReset=!1;var l="",c=!1,d=i,h=a,f=o,p=null,g="",m=!0,v="auto",y="start",_=50,b="middle",E=50,T="middle";Object.defineProperty(s,"id",n({},u,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(s,"pauseOnExit",n({},u,{get:function(){return c},set:function(t){c=!!t}})),Object.defineProperty(s,"startTime",n({},u,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",n({},u,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",n({},u,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",n({},u,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",n({},u,{get:function(){return g},set:function(e){var n=t(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",n({},u,{get:function(){return m},set:function(t){m=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",n({},u,{get:function(){return v},set:function(t){if("number"!=typeof t&&t!==r)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",n({},u,{get:function(){return y},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");y=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",n({},u,{get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",n({},u,{get:function(){return b},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");b=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",n({},u,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",n({},u,{get:function(){return T},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");T=n,this.hasBeenReset=!0}})),s.displayState=void 0}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r="auto",a={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}(),Ce=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};R.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100))&&(this.set(t,e),!0)}};var xe=new ke(0,0,0),De="middle"===xe.align?"middle":"center";L.prototype={parse:function(t){function e(){var t=i.buffer,e=0;for(t=O(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),n}function n(t){I(t,(function(t,e){}),/:/)}var i=this;t&&(i.buffer+=i.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var a=(r=e()).match(/^(Ã¯Â»Â¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:r=e(),i.state){case"HEADER":/:/.test(r)?n(r):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new ke(0,0,""),i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{P(r,i.cue,i.regionList)}catch(t){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(o=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(t){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}};var Le,Re=L,Ie={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Pe=function(t){var e=t;return Ie.hasOwnProperty(t)&&(e=Ie[t]),String.fromCharCode(e)},Oe=100,Ne={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Me={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Fe={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ue={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Be=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(Le||(Le={}));var je,He=function(){function t(){this.time=null,this.verboseLevel=Le.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&ot.logger.log(this.time+" ["+t+"] "+e)},t}(),Ve=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},Ge=function(){function t(t,e,n,i,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var i=e[n];t.hasOwnProperty(i)&&(this[i]=t[i])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),qe=function(){function t(t,e,n,i,r,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Ge(e,n,i,r,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),We=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<Oe;e++)this.chars.push(new qe);this.logger=t,this.pos=0,this.currPenState=new Ge}var e=t.prototype;return e.equals=function(t){for(var e=!0,n=0;n<Oe;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<Oe;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<Oe;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(Le.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>Oe&&(this.logger.log(Le.DEBUG,"Too large cursor position "+this.pos),this.pos=Oe)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=Pe(t);return this.pos>=Oe?void this.logger.log(Le.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),void this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<Oe;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,n=0;n<Oe;n++){var i=this.chars[n].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Ke=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new We(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,n=0;n<15;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(Le.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(Le.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<15;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime,o=this.logger.time;if(a&&null!==o&&a<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[e-this.nrRollUpRows+s+1].copy(r.rows[i+s])}}this.currRow=e;var u=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,c=Math.max(l-1,0);u.setCursor(t.indent),t.color=u.chars[c].penState.foreground}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d)},e.setBkgData=function(t){this.logger.log(Le.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(Le.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(Le.INFO,"Rolling up")}else this.logger.log(Le.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],n="",i=-1,r=0;r<15;r++){var a=this.rows[r].getTextString();a&&(i=r+1,t?e.push("Row "+i+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.getTextAndFormat=function(){return this.rows},t}(),Ye=function(){function t(t,e,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Ke(n),this.nonDisplayedMemory=new Ke(n),this.lastOutputScreen=new Ke(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(Le.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(Le.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(Le.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(Le.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(Le.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(Le.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(Le.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(Le.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(Le.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(Le.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(Le.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(Le.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(Le.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(Le.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(Le.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Le.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(Le.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(Le.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),ze=function(){function t(t,e,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new He;this.channels=[null,new Ye(t,e,i),new Ye(t+1,n,i)],this.cmdHistory={a:null,b:null},this.logger=i}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var n,i,r,a=!1;this.logger.time=t;for(var o=0;o<e.length;o+=2)if(i=127&e[o],r=127&e[o+1],0!==i||0!==r){if(this.logger.log(Le.DATA,"["+Ve([e[o],e[o+1]])+"] -> ("+Ve([i,r])+")"),(n=this.parseCmd(i,r))||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(a=this.parseChars(i,r))){var s=this.currentChannel;s&&s>0?this.channels[s].insertChars(a):this.logger.log(Le.WARNING,"No channel found yet. TEXT-MODE?")}n||a||this.logger.log(Le.WARNING,"Couldn't parse cleaned data "+Ve([i,r])+" orig: "+Ve([e[o],e[o+1]]))}},e.parseCmd=function(t,e){var n=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(F(t,e,n))return M(null,null,n),this.logger.log(Le.DEBUG,"Repeated command ("+Ve([t,e])+") is dropped"),!0;var i=20===t||21===t||23===t?1:2,r=this.channels[i];return 20===t||21===t||28===t||29===t?32===e?r.ccRCL():33===e?r.ccBS():34===e?r.ccAOF():35===e?r.ccAON():36===e?r.ccDER():37===e?r.ccRU(2):38===e?r.ccRU(3):39===e?r.ccRU(4):40===e?r.ccFON():41===e?r.ccRDC():42===e?r.ccTR():43===e?r.ccRTD():44===e?r.ccEDM():45===e?r.ccCR():46===e?r.ccENM():47===e&&r.ccEOC():r.ccTO(e-32),M(t,e,n),this.currentChannel=i,!0},e.parseMidrow=function(t,e){var n=0;if((17===t||25===t)&&e>=32&&e<=47){if((n=17===t?1:2)!==this.currentChannel)return this.logger.log(Le.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(e),this.logger.log(Le.DEBUG,"MIDROW ("+Ve([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var n,i=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(F(t,e,i))return M(null,null,i),!0;var r=t<=23?1:2;n=e>=64&&e<=95?1===r?Ne[t]:Fe[t]:1===r?Me[t]:Ue[t];var a=this.channels[r];return!!a&&(a.setPAC(this.interpretPAC(n,e)),M(t,e,i),this.currentChannel=r,!0)},e.interpretPAC=function(t,e){var n,i={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},e.parseChars=function(t,e){var n,i,r=null,a=null;if(t>=25?(n=2,a=t-8):(n=1,a=t),a>=17&&a<=19?(i=17===a?e+80:18===a?e+112:e+144,this.logger.log(Le.INFO,"Special char '"+Pe(i)+"' in channel "+n),r=[i]):t>=32&&t<=127&&(r=0===e?[t]:[t,e]),r){var o=Ve(r);this.logger.log(Le.DEBUG,"Char codes =  "+o.join(",")),M(t,e,this.cmdHistory)}return r},e.parseBackgroundAttributes=function(t,e){if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var n,i={};16===t||24===t?(n=Math.floor((e-32)/2),i.background=Be[n],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0));var r=t<=23?1:2;return this.channels[r].setBkgData(i),M(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var n=this.channels[e];n&&n.cueSplitAtTime(t)}},t}(),Xe=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[]},t}(),$e=function(t,e,n){return t.substr(n||0,e.length)===e},Qe=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()},Je={parse:function(t,e,n,i,r,a){var o,s=Object(de.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",l=0,c=0,d=0,h=[],f=!0,p=!1,g=new Re;g.oncue=function(t){var e=n[i],r=n.ccOffset;e&&e.new&&(void 0!==c?r=n.ccOffset=e.start:function(t,e,n){var i=t[e],r=t[i.prevCC];if(!r||!r.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)t.ccOffset+=i.start-r.start,i.new=!1,r=t[(i=r).prevCC];t.presentationOffset=n}(n,i,d)),d&&(r=d-n.presentationOffset),p&&(t.startTime+=r-c,t.endTime+=r-c),t.id=Qe(t.startTime.toString())+Qe(t.endTime.toString())+Qe(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&h.push(t)},g.onparsingerror=function(t){o=t},g.onflush=function(){return o&&a?void a(o):void r(h)},s.forEach((function(t){if(f){if($e(t,"X-TIMESTAMP-MAP=")){f=!1,p=!0,t.substr(16).split(",").forEach((function(t){$e(t,"LOCAL:")?u=t.substr(6):$e(t,"MPEGTS:")&&(l=parseInt(t.substr(7)))}));try{e+(9e4*n[i].start||0)<0&&(e+=8589934592),l-=e,c=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),r=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(rt.isFiniteNumber)(e)&&Object(rt.isFiniteNumber)(n)&&Object(rt.isFiniteNumber)(i)&&Object(rt.isFiniteNumber)(r)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*n,(e+=6e4*i)+36e5*r}(u)/1e3,d=l/9e4}catch(t){p=!1,o=t}return}""===t&&(f=!1)}g.parse(t+"\n")})),g.flush()}},Ze=function(t){function e(e){var n;if((n=t.call(this,e,at.default.MEDIA_ATTACHING,at.default.MEDIA_DETACHING,at.default.FRAG_PARSING_USERDATA,at.default.FRAG_DECRYPTED,at.default.MANIFEST_LOADING,at.default.MANIFEST_LOADED,at.default.FRAG_LOADED,at.default.INIT_PTS_FOUND)||this).media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.captionsTracks={},n.nonNativeCaptionsTracks={},n.captionsProperties=void 0,n.cea608Parser1=void 0,n.cea608Parser2=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},n.hls=e,n.config=e.config,n.Cues=e.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode},textTrack3:{label:n.config.captionsTextTrack3Label,languageCode:n.config.captionsTextTrack3LanguageCode},textTrack4:{label:n.config.captionsTextTrack4Label,languageCode:n.config.captionsTextTrack4LanguageCode}},n.config.enableCEA708Captions){var i=new Xe(U(n),"textTrack1"),r=new Xe(U(n),"textTrack2"),a=new Xe(U(n),"textTrack3"),o=new Xe(U(n),"textTrack4");n.cea608Parser1=new ze(1,i,r),n.cea608Parser2=new ze(3,a,o)}return n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.addCues=function(t,e,n,i,r){for(var a=!1,o=r.length;o--;){var s=r[o],u=j(s[0],s[1],e,n);if(u>=0&&(s[0]=Math.min(s[0],e),s[1]=Math.max(s[1],n),a=!0,u/(n-e)>.5))return}if(a||r.push([e,n]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],e,n,i);else{var l=this.Cues.newCue(null,e,n,i);this.hls.trigger(at.default.CUES_PARSED,{type:"captions",cues:l,track:t})}},n.onInitPtsFound=function(t){var e=this,n=t.frag,i=t.id,r=t.initPTS,a=this.unparsedVttFrags;"main"===i&&(this.initPTS[n.cc]=r),a.length&&(this.unparsedVttFrags=[],a.forEach((function(t){e.onFragLoaded(t)})))},n.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var i=e.textTracks[n];if(i[t])return i}return null},n.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},n.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,n=this.captionsTracks,i=this.media,r=e[t],a=r.label,o=r.languageCode,s=this.getExistingTrack(t);if(s)n[t]=s,w(n[t]),S(n[t],i);else{var u=this.createTextTrack("captions",a,o);u&&(u[t]=!0,n[t]=u)}}},n.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var n={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=n,this.hls.trigger(at.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},n.createTextTrack=function(t,e,n){var i=this.media;if(i)return i.addTextTrack(t,e,n)},n.destroy=function(){t.prototype.destroy.call(this)},n.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},n.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){w(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},n.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},n._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)w(e[n])}},n.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var n=t.subtitles||[],i=this.tracks&&n&&this.tracks.length===n.length;if(this.tracks=t.subtitles||[],this.config.renderTextTracksNatively){var r=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,n){var i;if(n<r.length){for(var a=null,o=0;o<r.length;o++)if(B(r[o],t)){a=r[o];break}a&&(i=a)}i||(i=e.createTextTrack("subtitles",t.name,t.lang)),t.default?i.mode=e.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",e.textTracks.push(i)}))}else if(!i&&this.tracks&&this.tracks.length){var a=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(at.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(t){var n=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(n){var i="textTrack"+n[1],r=e.captionsProperties[i];r&&(r.label=t.name,t.lang&&(r.languageCode=t.lang),r.media=t)}}))},n.onFragLoaded=function(t){var e=t.frag,n=t.payload,i=this.cea608Parser1,r=this.cea608Parser2,a=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if("main"===e.type){var u=e.sn;e.sn!==o+1&&i&&r&&(i.reset(),r.reset()),this.lastSn=u}else if("subtitle"===e.type)if(n.byteLength){if(!Object(rt.isFiniteNumber)(a[e.cc]))return s.push(t),void(a.length&&this.hls.trigger(at.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e}));var l=e.decryptdata;null!=l&&null!=l.key&&"AES-128"===l.method||this._parseVTTs(e,n)}else this.hls.trigger(at.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},n._parseVTTs=function(t,e){var n=this,i=this.hls,r=this.prevCC,a=this.textTracks,o=this.vttCCs;o[t.cc]||(o[t.cc]={start:t.start,prevCC:r,new:!0},this.prevCC=t.cc),Je.parse(e,this.initPTS[t.cc],o,t.cc,(function(e){if(n.config.renderTextTracksNatively){var r=a[t.level];if("disabled"===r.mode)return void i.trigger(at.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t});e.forEach((function(t){if(!r.cues.getCueById(t.id))try{if(r.addCue(t),!r.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){ot.logger.debug("Failed occurred on adding cues: "+n);var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,r.addCue(e)}}))}else{var o=n.tracks[t.level].default?"default":"subtitles"+t.level;i.trigger(at.default.CUES_PARSED,{type:"subtitles",cues:e,track:o})}i.trigger(at.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){ot.logger.log("Failed to parse VTT cue: "+e),i.trigger(at.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}))},n.onFragDecrypted=function(t){var e=t.frag,n=t.payload;if("subtitle"===e.type){if(!Object(rt.isFiniteNumber)(this.initPTS[e.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(e,n)}},n.onFragParsingUserdata=function(t){var e=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&e&&n)for(var i=0;i<t.samples.length;i++){var r=t.samples[i].bytes;if(r){var a=this.extractCea608Data(r);e.addData(t.samples[i].pts,a[0]),n.addData(t.samples[i].pts,a[1])}}},n.extractCea608Data=function(t){for(var e=31&t[0],n=2,i=[[],[]],r=0;r<e;r++){var a=t[n++],o=127&t[n++],s=127&t[n++],u=3&a;0===o&&0===s||0!=(4&a)&&(0!==u&&1!==u||(i[u].push(o),i[u].push(s)))}return i},e}(ut),tn=function(t){function e(e){var n;return(n=t.call(this,e,at.default.MEDIA_ATTACHED,at.default.MEDIA_DETACHING,at.default.MANIFEST_LOADED,at.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){ut.prototype.destroy.call(this)},n.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(Object(rt.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){e.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},n.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(rt.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),V(this.media.textTracks).forEach((function(t){w(t)})),this.subtitleTrack=-1,this.media=null)},n.onManifestLoaded=function(t){var e=this,n=t.subtitles||[];this.tracks=n,this.hls.trigger(at.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)}))},n.onSubtitleTrackLoaded=function(t){var e=this,n=t.id,i=t.details,r=this.trackId,a=this.tracks,o=a[r];if(n>=a.length||n!==r||!o||this.stopped)this._clearReloadTimer();else if(ot.logger.log("subtitle track "+n+" loaded"),i.live){var s=p(o.details,i,t.stats.trequest);ot.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){e._loadCurrentTrack()}),s)}else this._clearReloadTimer()},n.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},n.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},n._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},n._loadCurrentTrack=function(){var t=this.trackId,e=this.tracks,n=this.hls,i=e[t];t<0||!i||i.details&&!i.details.live||(ot.logger.log("Loading subtitle track "+t),n.trigger(at.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:t}))},n._toggleTrackModes=function(t){var e=this.media,n=this.subtitleDisplay,i=this.trackId;if(e){var r=V(e.textTracks);if(-1===t)[].slice.call(r).forEach((function(t){t.mode="disabled"}));else{var a=r[i];a&&(a.mode="disabled")}var o=r[t];o&&(o.mode=n?"showing":"hidden")}},n._setSubtitleTrackInternal=function(t){var e=this.hls,n=this.tracks;!Object(rt.isFiniteNumber)(t)||t<-1||t>=n.length||(this.trackId=t,ot.logger.log("Switching to subtitle track "+t),e.trigger(at.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},n._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=V(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack=t}},function(t,e,n){e&&H(t.prototype,e),n&&H(t,n)}(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}]),e}(ut),en=n("./src/crypt/decrypter.js"),nn=window.performance,rn=function(t){function e(e,n){var i;return(i=t.call(this,e,at.default.MEDIA_ATTACHED,at.default.MEDIA_DETACHING,at.default.ERROR,at.default.KEY_LOADED,at.default.FRAG_LOADED,at.default.SUBTITLE_TRACKS_UPDATED,at.default.SUBTITLE_TRACK_SWITCH,at.default.SUBTITLE_TRACK_LOADED,at.default.SUBTITLE_FRAG_PROCESSED,at.default.LEVEL_UPDATED)||this).fragmentTracker=n,i.config=e.config,i.state=Yt,i.tracks=[],i.tracksBuffered=[],i.currentTrackId=-1,i.decrypter=new en.default(e,e.config),i.lastAVStart=0,i._onMediaSeeking=i.onMediaSeeking.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i)),i}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.onSubtitleFragProcessed=function(t){var e=t.frag,n=t.success;if(this.fragPrevious=e,this.state=Xt,n){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var r,a=e.start,o=0;o<i.length;o++)if(a>=i[o].start&&a<=i[o].end){r=i[o];break}var s=e.start+e.duration;r?r.end=s:(r={start:a,end:s},i.push(r))}}},n.onMediaAttached=function(t){var e=t.media;this.media=e,e.addEventListener("seeking",this._onMediaSeeking),this.state=Xt},n.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]})),this.media=null,this.state=Yt)},n.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.state=Xt)},n.onSubtitleTracksUpdated=function(t){var e=this;ot.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]}))},n.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(500)}else this.clearInterval()},n.onSubtitleTrackLoaded=function(t){var e=t.id,n=t.details,i=this.currentTrackId,r=this.tracks,a=r[i];e>=r.length||e!==i||!a||(n.live&&function(t,e,n){void 0===n&&(n=0);var i=-1;f(t,e,(function(t,e,n){e.start=t.start,i=n}));var r=e.fragments;if(i<0)r.forEach((function(t){t.start+=n}));else for(var a=i+1;a<r.length;a++)r[a].start=r[a-1].start+r[a-1].duration}(a.details,n,this.lastAVStart),a.details=n,this.setInterval(500))},n.onKeyLoaded=function(){this.state===Qt&&(this.state=Xt)},n.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag.decryptdata,i=t.frag,r=this.hls;if(this.state===Jt&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=nn.now();this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,(function(t){var e=nn.now();r.trigger(at.default.FRAG_DECRYPTED,{frag:i,payload:t,stats:{tstart:a,tdecrypt:e}})}))}},n.onLevelUpdated=function(t){var e=t.details.fragments;this.lastAVStart=e.length?e[0].start:0},n.doTick=function(){if(this.media)switch(this.state){case Xt:var t=this.config,e=this.currentTrackId,n=this.fragmentTracker,i=this.media,r=this.tracks;if(!r||!r[e]||!r[e].details)break;var a=t.maxBufferHole,o=t.maxFragLookUpTolerance,s=Math.min(t.maxBufferLength,t.maxMaxBufferLength),u=Nt.bufferedInfo(this._getBuffered(),i.currentTime,a),l=u.end,c=u.len,d=r[e].details,h=d.fragments,f=h.length,p=h[f-1].start+h[f-1].duration;if(c>s)return;var g,m=this.fragPrevious;l<p?(m&&d.hasProgramDateTime&&(g=v(h,m.endProgramDateTime,o)),g||(g=y(m,h,l,o))):g=h[f-1],g&&g.encrypted?(ot.logger.log("Loading key for "+g.sn),this.state=Qt,this.hls.trigger(at.default.KEY_LOADING,{frag:g})):g&&n.getState(g)===Dt&&(this.fragCurrent=g,this.state=Jt,this.hls.trigger(at.default.FRAG_LOADING,{frag:g}))}else this.state=Xt},n.stopLoad=function(){this.lastAVStart=0,t.prototype.stopLoad.call(this)},n._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},n.onMediaSeeking=function(){this.fragPrevious=null},e}(ue);!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(je||(je={}));var an="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null,on=function(t){function e(e){var n;return(n=t.call(this,e,at.default.MEDIA_ATTACHED,at.default.MEDIA_DETACHED,at.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._drmSystemOptions=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n.mediaKeysPromise=null,n._onMediaEncrypted=function(t){if(ot.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!n.mediaKeysPromise)return ot.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void n.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.KEY_SYSTEM_ERROR,details:it.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var e=function(e){n._media&&(n._attemptSetMediaKeys(e),n._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};n.mediaKeysPromise.then(e).catch(e)},n._config=e.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n._drmSystemOptions=e.config.drmSystemOptions,n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getLicenseServerUrl=function(t){switch(t){case je.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},n._attemptKeySystemAccess=function(t,e,n){var i=this,r=function(t,e,n,i){switch(t){case je.WIDEVINE:return function(t,e,n){var i={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){i.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:n.audioRobustness||""})})),e.forEach((function(t){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:n.videoRobustness||""})})),[i]}(e,n,i);default:throw new Error("Unknown key-system: "+t)}}(t,e,n,this._drmSystemOptions);ot.logger.log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(t,r);this.mediaKeysPromise=a.then((function(e){return i._onMediaKeySystemAccessObtained(t,e)})),a.catch((function(e){ot.logger.error('Failed to obtain key-system "'+t+'" access:',e)}))},n._onMediaKeySystemAccessObtained=function(t,e){var n=this;ot.logger.log('Access for key-system "'+t+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(i);var r=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return i.mediaKeys=e,ot.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated(),e}));return r.catch((function(t){ot.logger.error("Failed to create media-keys:",t)})),r},n._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},n._onNewMediaKeySession=function(t){var e=this;ot.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(n){e._onKeySessionMessage(t,n.message)}),!1)},n._onKeySessionMessage=function(t,e){ot.logger.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){ot.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},n._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return ot.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.KEY_SYSTEM_ERROR,details:it.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});ot.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},n._generateRequestWithPreferredKeySession=function(t,e){var n=this,i=this._mediaKeysList[0];if(!i)return ot.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.KEY_SYSTEM_ERROR,details:it.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(!i.mediaKeysSessionInitialized){var r=i.mediaKeysSession;return r?e?(ot.logger.log('Generating key-session request for "'+t+'" init data type'),i.mediaKeysSessionInitialized=!0,void r.generateRequest(t,e).then((function(){ot.logger.debug("Key-session generation succeeded")})).catch((function(t){ot.logger.error("Error generating key-session request:",t),n.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.KEY_SYSTEM_ERROR,details:it.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))):(ot.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.KEY_SYSTEM_ERROR,details:it.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(ot.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.KEY_SYSTEM_ERROR,details:it.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))}ot.logger.warn("Key-Session already initialized but requested again")},n._createLicenseXhr=function(t,e,n){var i=new XMLHttpRequest,r=this._licenseXhrSetup;try{if(r)try{r(i,t)}catch(e){i.open("POST",t,!0),r(i,t)}i.readyState||i.open("POST",t,!0)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,e,n),i},n._onLicenseRequestReadyStageChange=function(t,e,n,i){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,ot.logger.log("License request succeeded"),"arraybuffer"!==t.responseType&&ot.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),i(t.response);else{if(ot.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.KEY_SYSTEM_ERROR,details:it.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var r=3-this._requestLicenseFailureCount+1;ot.logger.warn("Retrying license request, "+r+" attempts left"),this._requestLicense(n,i)}}},n._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case je.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},n._requestLicense=function(t,e){ot.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return ot.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.KEY_SYSTEM_ERROR,details:it.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),r=this._createLicenseXhr(i,t,e);ot.logger.log("Sending license request to URL: "+i);var a=this._generateLicenseRequestChallenge(n,t);r.send(a)}catch(t){ot.logger.error("Failure requesting DRM license: "+t),this.hls.trigger(at.default.ERROR,{type:it.ErrorTypes.KEY_SYSTEM_ERROR,details:it.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},n.onMediaAttached=function(t){if(this._emeEnabled){var e=t.media;this._media=e,e.addEventListener("encrypted",this._onMediaEncrypted)}},n.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},n.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map((function(t){return t.audioCodec})),n=t.levels.map((function(t){return t.videoCodec}));this._attemptKeySystemAccess(je.WIDEVINE,e,n)}},function(t,e,n){e&&G(t.prototype,e),n&&G(t,n)}(e,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}(ut),sn=W(W({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Te,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:me,bufferController:ye,capLevelController:_e,fpsController:Ee,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:an,testBandwidth:!0},{cueHandler:Z,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:rn,subtitleTrackController:tn,timelineController:Ze,audioStreamController:we,audioTrackController:Ae,emeController:on}),un=function(t){function e(n){var i;void 0===n&&(n={}),(i=t.call(this)||this).config=void 0,i._autoLevelCapping=void 0,i.abrController=void 0,i.capLevelController=void 0,i.levelController=void 0,i.streamController=void 0,i.networkControllers=void 0,i.audioTrackController=void 0,i.subtitleTrackController=void 0,i.emeController=void 0,i.coreComponents=void 0,i.media=null,i.url=null;var r=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");i.config=z(z({},r),n);var a=$(i).config;if(void 0!==a.liveMaxLatencyDurationCount&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==a.liveMaxLatencyDuration&&(void 0===a.liveSyncDuration||a.liveMaxLatencyDuration<=a.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(ot.enableLogs)(a.debug),i._autoLevelCapping=-1;var o=i.abrController=new a.abrController($(i)),s=new a.bufferController($(i)),u=i.capLevelController=new a.capLevelController($(i)),l=new a.fpsController($(i)),c=new kt($(i)),d=new Ct($(i)),h=new xt($(i)),f=new he($(i)),p=i.levelController=new ce($(i)),g=new Pt($(i)),m=[p,i.streamController=new le($(i),g)],v=a.audioStreamController;v&&m.push(new v($(i),g)),i.networkControllers=m;var y=[c,d,h,o,s,u,l,f,g];if(v=a.audioTrackController){var _=new v($(i));i.audioTrackController=_,y.push(_)}if(v=a.subtitleTrackController){var b=new v($(i));i.subtitleTrackController=b,m.push(b)}if(v=a.emeController){var E=new v($(i));i.emeController=E,y.push(E)}return(v=a.subtitleStreamController)&&m.push(new v($(i),g)),(v=a.timelineController)&&y.push(new v($(i))),i.coreComponents=y,i}(function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e})(e,t),e.isSupported=function(){return function(){var t=u();if(!t)return!1;var e=self.SourceBuffer||self.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!i}()},J(e,null,[{key:"version",get:function(){return"0.14.13"}},{key:"Events",get:function(){return at.default}},{key:"ErrorTypes",get:function(){return it.ErrorTypes}},{key:"ErrorDetails",get:function(){return it.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:sn},set:function(t){e.defaultConfig=t}}]);var n=e.prototype;return n.destroy=function(){ot.logger.log("destroy"),this.trigger(at.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(t){t.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},n.attachMedia=function(t){ot.logger.log("attachMedia"),this.media=t,this.trigger(at.default.MEDIA_ATTACHING,{media:t})},n.detachMedia=function(){ot.logger.log("detachMedia"),this.trigger(at.default.MEDIA_DETACHING),this.media=null},n.loadSource=function(t){t=nt.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),ot.logger.log("loadSource:"+t),this.url=t,this.trigger(at.default.MANIFEST_LOADING,{url:t})},n.startLoad=function(t){void 0===t&&(t=-1),ot.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},n.stopLoad=function(){ot.logger.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},n.swapAudioCodec=function(){ot.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){ot.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},n.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},J(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){ot.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){ot.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){ot.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){ot.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){ot.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){ot.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,n=t?t.length:0,i=0;i<n;i++)if((t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate)>e)return i;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),e}(jt);un.defaultConfig=void 0},"./src/polyfills/number.js":
/*!*********************************!*\
	  !*** ./src/polyfills/number.js ***!
	  \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function(t,e,n){"use strict";n.r(e),n.d(e,"isFiniteNumber",(function(){return i})),n.d(e,"MAX_SAFE_INTEGER",(function(){return r}));var i=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},r=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":
/*!*************************************!*\
	  !*** ./src/utils/get-self-scope.js ***!
	  \*************************************/
/*! exports provided: getSelfScope */function(t,e,n){"use strict";function i(){return"undefined"==typeof window?self:window}n.r(e),n.d(e,"getSelfScope",(function(){return i}))},"./src/utils/logger.js":
/*!*****************************!*\
	  !*** ./src/utils/logger.js ***!
	  \*****************************/
/*! exports provided: enableLogs, logger */function(t,e,n){"use strict";function i(){}function r(t,e){return"["+t+"] > "+e}function a(t){var e=l.console[t];return e?function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];i[0]&&(i[0]=r(t,i[0])),e.apply(l.console,i)}:i}n.r(e),n.d(e,"enableLogs",(function(){return c})),n.d(e,"logger",(function(){return d}));var o=n(/*! ./get-self-scope */"./src/utils/get-self-scope.js"),s={trace:i,debug:i,log:i,warn:i,info:i,error:i},u=s,l=Object(o.getSelfScope)(),c=function(t){if(l.console&&!0===t||"object"==_typeof(t)){!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.forEach((function(e){u[e]=t[e]?t[e].bind(t):a(e)}))}(t,"debug","log","info","warn","error");try{u.log()}catch(t){u=s}}else u=s},d=u}}).default)},function(t,e){var n=function(){function t(){if(!j){try{var t=P.getElementsByTagName("body")[0].appendChild(g("span"));t.parentNode.removeChild(t)}catch(t){return}j=!0;for(var e=M.length,n=0;n<e;n++)M[n]()}}function e(t){j?t():M[M.length]=t}function i(t){if(_typeof(I.addEventListener)!=k)I.addEventListener("load",t,!1);else if(_typeof(P.addEventListener)!=k)P.addEventListener("load",t,!1);else if(_typeof(I.attachEvent)!=k)!function(t,e,n){t.attachEvent(e,n),B[B.length]=[t,e,n]}(I,"onload",t);else if("function"==typeof I.onload){var e=I.onload;I.onload=function(){e(),t()}}else I.onload=t}function r(){var t=F.length;if(t>0)for(var e=0;e<t;e++){var n=F[e].id,i=F[e].callbackFn,r={success:!1,id:n};if(G.pv[0]>0){var l=p(n);if(l)if(!m(F[e].swfVersion)||G.wk&&G.wk<312)if(F[e].expressInstall&&o()){var c={};c.data=F[e].expressInstall,c.width=l.getAttribute("width")||"0",c.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(c.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(c.align=l.getAttribute("align"));for(var d={},h=l.getElementsByTagName("param"),f=h.length,g=0;g<f;g++)"movie"!=h[g].getAttribute("name").toLowerCase()&&(d[h[g].getAttribute("name")]=h[g].getAttribute("value"));s(c,d,n,i)}else u(l),i&&i(r);else y(n,!0),i&&(r.success=!0,r.ref=a(n),i(r))}else if(y(n,!0),i){var v=a(n);v&&_typeof(v.SetVariable)!=k&&(r.success=!0,r.ref=v),i(r)}}}function a(t){var e=null,n=p(t);if(n&&"OBJECT"==n.nodeName)if(_typeof(n.SetVariable)!=k)e=n;else{var i=n.getElementsByTagName(C)[0];i&&(e=i)}return e}function o(){return!H&&m("6.0.65")&&(G.win||G.mac)&&!(G.wk&&G.wk<312)}function s(t,e,n,i){H=!0,T=i||null,A={success:!1,id:n};var r=p(n);if(r){"OBJECT"==r.nodeName?(b=l(r),E=null):(b=r,E=n),t.id=L,(_typeof(t.width)==k||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(_typeof(t.height)==k||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),P.title=P.title.slice(0,47)+" - Flash Player Installation";var a=G.ie&&G.win?["Active"].concat("").join("X"):"PlugIn",o="MMredirectURL="+I.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+P.title;if(_typeof(e.flashvars)!=k?e.flashvars+="&"+o:e.flashvars=o,G.ie&&G.win&&4!=r.readyState){var s=g("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}c(t,e,n)}}function u(t){if(G.ie&&G.win&&4!=t.readyState){var e=g("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(l(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(l(t),t)}function l(t){var e=g("div");if(G.win&&G.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(C)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||e.appendChild(i[a].cloneNode(!0))}}return e}function c(t,e,n){var i,r=p(n);if(G.wk&&G.wk<312)return i;if(r)if(_typeof(t.id)==k&&(t.id=n),G.ie&&G.win){var a="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?a+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+t[o]+'"'));var s="";for(var u in e)e[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+e[u]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",U[U.length]=t.id,i=p(t.id)}else{var l=g(C);for(var c in l.setAttribute("type",D),t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var h in e)e[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&d(l,h,e[h]);r.parentNode.replaceChild(l,r),i=l}return i}function d(t,e,n){var i=g("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function h(t){var e=p(t);e&&"OBJECT"==e.nodeName&&(G.ie&&G.win?(e.style.display="none",function(){4==e.readyState?f(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function f(t){var e=p(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function p(t){var e=null;try{e=P.getElementById(t)}catch(t){}return e}function g(t){return P.createElement(t)}function m(t){var e=G.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function v(t,e,n,i){if(!G.ie||!G.mac){var r=P.getElementsByTagName("head")[0];if(r){var a=n&&"string"==typeof n?n:"screen";if(i&&(S=null,w=null),!S||w!=a){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),S=r.appendChild(o),G.ie&&G.win&&_typeof(P.styleSheets)!=k&&P.styleSheets.length>0&&(S=P.styleSheets[P.styleSheets.length-1]),w=a}G.ie&&G.win?S&&_typeof(S.addRule)==C&&S.addRule(t,e):S&&_typeof(P.createTextNode)!=k&&S.appendChild(P.createTextNode(t+" {"+e+"}"))}}}function y(t,e){if(V){var n=e?"visible":"hidden";j&&p(t)?p(t).style.visibility=n:v("#"+t,"visibility:"+n)}}function _(t){return null!=/[\\\"<>\.;]/.exec(t)&&("undefined"==typeof encodeURIComponent?"undefined":_typeof(encodeURIComponent))!=k?encodeURIComponent(t):t}var b,E,T,A,S,w,k="undefined",C="object",x="Shockwave Flash",D="application/x-shockwave-flash",L="SWFObjectExprInst",R="onreadystatechange",I=window,P=document,O=navigator,N=!1,M=[function(){N?function(){var t=P.getElementsByTagName("body")[0],e=g(C);e.setAttribute("type",D);var n=t.appendChild(e);if(n){var i=0;!function(){if(_typeof(n.GetVariable)!=k){var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),G.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);t.removeChild(e),n=null,r()}()}else r()}():r()}],F=[],U=[],B=[],j=!1,H=!1,V=!0,G=function(){var t=_typeof(P.getElementById)!=k&&_typeof(P.getElementsByTagName)!=k&&_typeof(P.createElement)!=k,e=O.userAgent.toLowerCase(),n=O.platform.toLowerCase(),i=/win/.test(n||e),r=/mac/.test(n||e),a=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,s=[0,0,0],u=null;if(_typeof(O.plugins)!=k&&_typeof(O.plugins[x])==C)!(u=O.plugins[x].description)||_typeof(O.mimeTypes)!=k&&O.mimeTypes[D]&&!O.mimeTypes[D].enabledPlugin||(N=!0,o=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(_typeof(I[["Active"].concat("Object").join("X")])!=k)try{var l=new(window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash");l&&(u=l.GetVariable("$version"))&&(o=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)])}catch(t){}return{w3:t,pv:s,wk:a,ie:o,win:i,mac:r}}();return G.w3&&((_typeof(P.readyState)!=k&&"complete"==P.readyState||_typeof(P.readyState)==k&&(P.getElementsByTagName("body")[0]||P.body))&&t(),j||(_typeof(P.addEventListener)!=k&&P.addEventListener("DOMContentLoaded",t,!1),G.ie&&G.win&&(P.attachEvent(R,(function(){"complete"==P.readyState&&(P.detachEvent(R,arguments.callee),t())})),I==top&&function(){if(!j){try{P.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),G.wk&&function(){j||(/loaded|complete/.test(P.readyState)?t():setTimeout(arguments.callee,0))}(),i(t))),G.ie&&G.win&&window.attachEvent("onunload",(function(){for(var t=B.length,e=0;e<t;e++)B[e][0].detachEvent(B[e][1],B[e][2]);for(var i=U.length,r=0;r<i;r++)h(U[r]);for(var a in G)G[a]=null;for(var o in G=null,n)n[o]=null;n=null})),{registerObject:function(t,e,n,i){if(G.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,F[F.length]=r,y(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){if(G.w3)return a(t)},embedSWF:function(t,n,i,r,a,u,l,d,h,f){var p={success:!1,id:n};G.w3&&!(G.wk&&G.wk<312)&&t&&n&&i&&r&&a?(y(n,!1),e((function(){i+="",r+="";var e={};if(h&&_typeof(h)===C)for(var g in h)e[g]=h[g];e.data=t,e.width=i,e.height=r;var v={};if(d&&_typeof(d)===C)for(var _ in d)v[_]=d[_];if(l&&_typeof(l)===C)for(var b in l)_typeof(v.flashvars)!=k?v.flashvars+="&"+b+"="+l[b]:v.flashvars=b+"="+l[b];if(m(a)){var E=c(e,v,n);e.id==n&&y(n,!0),p.success=!0,p.ref=E}else{if(u&&o())return e.data=u,void s(e,v,n,f);y(n,!0)}f&&f(p)}))):f&&f(p)},switchOffAutoHideShow:function(){V=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:m,createSWF:function(t,e,n){return G.w3?c(t,e,n):void 0},showExpressInstall:function(t,e,n,i){G.w3&&o()&&s(t,e,n,i)},removeSWF:function(t){G.w3&&h(t)},createCSS:function(t,e,n,i){G.w3&&v(t,e,n,i)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=P.location.search||P.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return _(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==t)return _(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(H){var t=p(L);t&&b&&(t.parentNode.replaceChild(b,t),E&&(y(E,!0),G.ie&&G.win&&(b.style.display="block")),T&&T(A)),H=!1}}}}();t.exports=n},function(t,e,n){var i;void 0===(i=function(){return{AD_ID:"adId",AD_TYPE:"adType",CUE_TITLE:"cueTitle",CUE_TIME_DURATION:"cueTimeDuration",AD_URL:"adUrl",AD_VAST_URL:"adVastURL",AD_VAST:"adVast"}}.apply(e,[]))||(t.exports=i)},function(t,e){t.exports={ABORT:"abort",CAN_PLAY:"canPlay",CAN_PLAY_THROUGH:"canPlayThrough",DATA_LOADING:"dataLoading",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOAD_START:"loadStart",PAUSE:"pause",PLAY:"play",PROGRESS:"progress",STALLED:"stalled",STOP:"stop",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",WAITING:"waiting",PLAY_NOT_ALLOWED:"playbackNotAllowed"}},function(t,e,n){var i,r;i=[n(1),n(3),n(2),n(103),n(102)],void 0===(r=function(t,e,n,i,r){return t([r],{constructor:function(t,e){this.target=t,this.config=e,this.adQuartile=new i,this._defaultSequence=-1,this._adsTrackingProgress=[],this._destroyAdToggle=!1},init:function(){this._destroyAdlisteners(),this.onAdPlaybackStatusListener=this.target.on("ad-playback-status",n.hitch(this,this._onAdPlaybackStatus)),this.inherited(arguments)},destroyAd:function(){this.html5OnDemand&&("function"==typeof this.html5OnDemand.skip&&(this._destroyAdToggle=!0,this.html5OnDemand.skip()),this.html5OnDemand=null)},skipAd:function(){this.html5OnDemand&&("function"==typeof this.html5OnDemand.skip&&this.html5OnDemand.skip(),this.html5OnDemand=null)},initAdListeners:function(t){this.html5OnDemand=t,this.html5OnDemand.initHTMLElementsStyle(this.html5OnDemand.videoNode),this.playbackOnDemandStatushandler=this.html5OnDemand.setPlaybackStatusHandler(n.hitch(this,this._onAdPlaybackStatus)),this.clickTrackingElementClickedHandler=this.html5OnDemand.setClickTrackingElementClickedHandler(n.hitch(this,this._onClickTrackingElementClicked)),this.adPlaybackCompleteHandler=this.target.on("ad-playback-complete",n.hitch(this,this._destroyAdlisteners)),this.adPlaybackDestroyHandler=this.target.on("ad-playback-destroy",n.hitch(this,this._destroyAdlisteners)),this.adPlaybackErrorHandler=this.target.on("ad-playback-error",n.hitch(this,this._destroyAdlisteners))},getVastInlineAd:function(){return null},_onAdPlaybackStatus:function(t){if(this.html5Node=t.html5Node,"MEDIA_STARTED"==t.code)0==this.html5Node.currentTime&&this.emit(this.AD_MODULE_PLAYBACK_START,{id:this.playerNode,type:t.adServerType,error:!1});else if("MEDIA_TIME_UPDATE"==t.code){var e=Math.round(this.html5Node.currentTime),n=Math.round(this.html5Node.duration);this._checkVideoPlaybackQuartile(this._getTimePercent(e,n)),this.emit(this.AD_MODULE_COUNTDOWN,{countDown:n-e})}else"MEDIA_ENDED"!=t.code&&"MEDIA_ERROR"!=t.code||(this.html5OnDemand.stop(),this._destroyAdToggle?this.emit(this.AD_MODULE_PLAYBACK_DESTROY):this.emit(this.AD_MODULE_PLAYBACK_COMPLETE,{id:this.playerNode,type:t.adServerType,error:!1}),this._destroyAdToggle=!1,this._adsTrackingProgress=[],this.onAdPlaybackStatusListener.remove())},_onClickTrackingElementClicked:function(t){this.emit(this.AD_MODULE_CLICK_TRACKING,t)},_getTimePercent:function(t,e){return 0==e?0:(t/e).toFixed(2)},_checkVideoPlaybackQuartile:function(t){var e=Math.floor(4*t);null==this._adsTrackingProgress[e]&&(this._adsTrackingProgress[e]=!0,this.emit(this.AD_MODULE_QUARTILE,{id:this.playerNode,adQuartile:this.adQuartile.getQuartileByIndex(e),error:!1}))},_destroyAdlisteners:function(){this.playbackOnDemandStatushandler&&this.playbackOnDemandStatushandler.remove(),this.clickTrackingElementClickedHandler&&this.clickTrackingElementClickedHandler.remove(),this.adPlaybackCompleteHandler&&this.adPlaybackCompleteHandler.remove(),this.adPlaybackErrorHandler&&this.adPlaybackErrorHandler.remove(),this.onAdPlaybackStatusListener&&this.onAdPlaybackStatusListener.remove(),this.adPlaybackDestroyHandler&&this.adPlaybackDestroyHandler.remove()}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(t){this.id=t,this.inlineAd=null,this.wrapperAd=null}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.id=null,this.width=null,this.height=null,this.expandedWidth=null,this.expandedHeight=null,this.resourceType=null,this.creativeType=null,this.url=null,this.code=null,this.clickThroughURL=null,this.altText=null,this.adParameters=null,this.creativeView=null}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.vastAd=null}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{DELIVERY_STREAMING:"streaming",DELIVERY_PROGRESSIVE:"progressive",constructor:function(){this.url=null,this.id=null,this.delivery=null,this.bitrate=null,this.width=null,this.height=null,this.type=null,this.scalable=!1,this.maintainAspectRatio=!1,this.apiFramework=null,this.minBitrate=null,this.maxBitrate=null,this.codec=null}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{IFRAME:"iframe",HTML:"html",STATIC:"static",SCRIPT:"script",OTHER:"other",constructor:function(t){this.name=t}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.urls=[],this.type=null},addUrls:function(t){for(var e=t.length,n=0;n<e;n++)this.urls.push(t[n])}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.clickThrough=null,this.clickTrackings=[],this.customClicks=[]}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.vastAdTagURL=null,this.impression=null,this.impressions=[],this.error=null,this.trackingEvents=null,this.creatives=[],this.videoClicks=null},getLinearTrackingEvents:function(t){return null==(t=t)&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).trackingEvents:this.trackingEvents},_getLinearElement:function(t){null==(t=t)&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(null!=this.creatives[n].linearElement){if(-1==t)return this.creatives[n].linearElement;if(this.creatives[n].sequence==t)return this.creatives[n].linearElement}},getLinearVideoClick:function(t){return null==(t=t)&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).videoClick:this.videoClicks}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){return{ID:"id",NODEKIND_ELEMENT:"element",INLINE:"InLine",WRAPPER:"Wrapper",AD_SYSTEM:"AdSystem",AD_TITLE:"AdTitle",DESCRIPTION:"Description",ERROR:"Error",IMPRESSION:"Impression",TRACKING_EVENTS:"TrackingEvents",COMPANION_ADS:"CompanionAds",COMPANION_CLICK_THROUGH:"CompanionClickThrough",LINEAR:"Linear",NON_LINEAR_ADS:"NonLinearAds",NON_LINEAR:"NonLinear",NON_LINEAR_CLICK_THROUGH:"NonLinearClickThrough",TRACKING:"Tracking",EVENT:"event",DURATION:"Duration",AD_ID:"AdID",MEDIA_FILES:"MediaFiles",MEDIA_FILE:"MediaFile",VIDEO_CLICKS:"VideoClicks",CLICK_THROUGH:"ClickThrough",CLICK_TRACKING:"ClickTracking",CUSTOM_CLICK:"CustomClick",COMPANION:"Companion",ALT_TEXT:"AltText",AD_PARAMETERS:"AdParameters",BITRATE:"bitrate",MIN_BITRATE:"minBitrate",MAX_BITRATE:"maxBitrate",CODEC:"codec",DELIVERY:"delivery",TYPE:"type",WIDTH:"width",HEIGHT:"height",EXPANDED_WIDTH:"expandedWidth",EXPANDED_HEIGHT:"expandedHeight",CREATIVE_TYPE:"creativeType",SEQUENCE:"sequence",SCALABLE:"scalable",MAINTAIN_ASPECT_RATIO:"maintainAspectRatio",API_FRAMEWORK:"apiFramework",IFRAME_RESOURCE:"IFrameResource",HTML_RESOURCE:"HTMLResource",STATIC_RESOURCE:"StaticResource",CREATIVE_VIEW:"creativeView",MIN_SUGGESTED_DURATION:"minSuggestedDuration",EXPIRES:"Expires",CATEGORY:"Category",SURVEY:"Survey",ADVERTISER:"Advertiser",AUDIO_INTERACTIONS:"AudioInteractions",LOGO_TILE:"logoTile",LOGO_TITLE:"logoTitle",LOGO_ARTIST:"logoArtist",LOGO_URL:"logoURL"}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,r,a=n(16);i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(t){this.target=t},getTagValue:function(t,e){return 0==t.getElementsByTagName(e).length?null:a.textContent(t.getElementsByTagName(e)[0])},getDataAsArray:function(t,e,n){if(0==t.getElementsByTagName(e).length)return null;for(var i=t.getElementsByTagName(e)[0].childNodes,r=[],o=0;o<i.length;o++)i[o].nodeName==n&&r.push(a.textContent(i[o]));return r},trim:function(t){return null==t?null:t.replace(/^\s+|\s+$/g,"")}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(2)],void 0===(r=function(t){var e={};return{objectToQuery:function(n){var i=encodeURIComponent,r=[];for(var a in n){var o=n[a];if(o!=e[a]){var s=i(a)+"=";if(t.isArray(o))for(var u=0,l=o.length;u<l;++u)r.push(s+i(o[u]));else r.push(s+i(o))}}return r.join("&")},queryToObject:function(e){for(var n,i,r,a=decodeURIComponent,o=e.split("&"),s={},u=0,l=o.length;u<l;++u)if((r=o[u]).length){var c=r.indexOf("=");c<0?(n=a(r),i=""):(n=a(r.slice(0,c)),i=a(r.slice(c+1))),"string"==typeof s[n]&&(s[n]=[s[n]]),t.isArray(s[n])?s[n].push(i):s[n]=i}return s}}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(54)],void 0===(r=function(t){return t}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[e,n(34),n(24),n(32),n(51),n(6),n(2),n(25)],void 0===(r=function(t,e,n,i,r,a,o,s){function u(t){return c(t)}function l(t){return t.data||t.text}t.deepCopy=function(e,n){for(var i in n){var r=e[i],a=n[i];r!==a&&(r&&"object"==_typeof(r)&&a&&"object"==_typeof(a)?t.deepCopy(r,a):e[i]=a)}return e},t.deepCreate=function(e,n){n=n||{};var i,r,a=o.delegate(e);for(i in e)(r=e[i])&&"object"==_typeof(r)&&(a[i]=t.deepCreate(r,n[i]));return t.deepCopy(a,n)};var c=Object.freeze||function(t){return t};t.deferred=function(r,a,d,h,f,p){var g=new i((function(t){return a&&a(g,r),t&&(t instanceof e||t instanceof n)?t:new n("Request canceled",r)}));g.response=r,g.isValid=d,g.isReady=h,g.handleResponse=f;var m=g.then(u).otherwise((function(t){throw t.response=r,t}));t.notify&&m.then(o.hitch(t.notify,"emit","load"),o.hitch(t.notify,"emit","error"));var v=m.then(l),y=new s;for(var _ in v)v.hasOwnProperty(_)&&(y[_]=v[_]);return y.response=m,c(y),p&&g.then((function(t){p.call(g,t)}),(function(t){p.call(g,r,t)})),g.promise=y,g.then=y.then,g},t.addCommonMethods=function(t,e){a.forEach(e||["GET","POST","PUT","DELETE"],(function(e){t[("DELETE"===e?"DEL":e).toLowerCase()]=function(n,i){return(i=o.delegate(i||{})).method=e,t(n,i)}}))},t.parseArgs=function(t,e,n){var i=e.data,a=e.query;return i&&!n&&"object"==_typeof(i)&&(e.data=r.objectToQuery(i)),a?("object"==_typeof(a)&&(a=r.objectToQuery(a)),e.preventCache&&(a+=(a?"&":"")+"request.preventCache="+ +new Date)):e.preventCache&&(a="request.preventCache="+ +new Date),t&&a&&(t+=(~t.indexOf("?")?"&":"?")+a),{url:t,options:e,getHeader:function(t){return null}}},t.checkStatus=function(t){return(t=t||0)>=200&&t<300||304===t||1223===t||!t}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(34),n(88),n(87),n(53),n(4)],void 0===(r=function(t,e,n,i,r){function a(e,r){var a=e.xhr;if(e.status=e.xhr.status,e.text=a.responseText,"xml"===e.options.handleAs&&(e.data=a.responseXML),!r)try{n(e)}catch(t){r=t}r?this.reject(r):i.checkStatus(a.status)?this.resolve(e):(r=new t("Unable to load "+e.url+" status: "+a.status,e),this.reject(r))}function o(t){return this.xhr.getResponseHeader(t)}function s(n,p,g){var m=i.parseArgs(n,i.deepCreate(f,p),r("native-formdata")&&p&&p.data&&p.data instanceof FormData);n=m.url,p=m.options;var v,y=i.deferred(m,d,u,l,a,(function(){v&&v()})),_=m.xhr=s._create();if(!_)return y.cancel(new t("XHR was not created")),g?y:y.promise;m.getHeader=o,c&&(v=c(_,y,m));var b=p.data,E=!p.sync,T=p.method;try{_.open(T,n,E,p.user||h,p.password||h),p.withCredentials&&(_.withCredentials=p.withCredentials);var A=p.headers,S="application/x-www-form-urlencoded";if(A)for(var w in A)"content-type"===w.toLowerCase()?S=A[w]:A[w]&&_.setRequestHeader(w,A[w]);S&&!1!==S&&_.setRequestHeader("Content-Type",S),A&&"X-Requested-With"in A||_.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.notify&&i.notify.emit("send",m,y.promise.cancel),_.send(b)}catch(t){y.reject(t)}return e(y),_=null,g?y:y.promise}var u,l,c,d;r.add("native-xhr",(function(){return"undefined"!=typeof XMLHttpRequest})),r.add("dojo-force-activex-xhr",(function(){return r("activex")&&!document.addEventListener&&"file:"===window.location.protocol})),r.add("native-xhr2",(function(){if(r("native-xhr")){var t=new XMLHttpRequest;return void 0!==t.addEventListener&&("undefined"==typeof opera||void 0!==t.upload)}})),r.add("native-formdata",(function(){return"function"==typeof FormData})),r("native-xhr2")?(u=function(t){return!this.isFulfilled()},d=function(t,e){e.xhr.abort()},c=function(e,n,i){function r(t){n.handleResponse(i)}function a(e){var r=e.target,a=new t("Unable to load "+i.url+" status: "+r.status,i);n.handleResponse(i,a)}function o(t){t.lengthComputable&&(i.loaded=t.loaded,i.total=t.total,n.progress(i))}return e.addEventListener("load",r,!1),e.addEventListener("error",a,!1),e.addEventListener("progress",o,!1),function(){e.removeEventListener("load",r,!1),e.removeEventListener("error",a,!1),e.removeEventListener("progress",o,!1),e=null}}):(u=function(t){return t.xhr.readyState},l=function(t){return 4===t.xhr.readyState},d=function(t,e){var n=e.xhr,i=_typeof(n.abort);"function"!==i&&"object"!==i&&"unknown"!==i||n.abort()});var h,f={data:null,query:null,sync:!1,method:"GET"};if(s._create=function(){throw new Error("XMLHTTP not available")},r("native-xhr")&&!r("dojo-force-activex-xhr"))s._create=function(){return new XMLHttpRequest};else if(r("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),s._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(t){try{new ActiveXObject("Microsoft.XMLHTTP"),s._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(t){}}return i.addCommonMethods(s),s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(4),n(27)],void 0===(r=function(t,e){"use strict";var n=document.createElement("div");t.add("dom-qsa2.1",!!n.querySelectorAll),t.add("dom-qsa3",(function(){try{return n.innerHTML="<p class='TEST'></p>",1==n.querySelectorAll(".TEST:empty").length}catch(t){}}));var i,r="./acme",a="./lite";return{load:function(n,o,s,u){var l=e;if("?"==(n="css2"==(n="default"==n?t("config-selectorEngine")||"css3":n)||"lite"==n?a:"css2.1"==n?t("dom-qsa2.1")?a:r:"css3"==n?t("dom-qsa3")?a:r:"acme"==n?r:(l=o)&&n).charAt(n.length-1)){n=n.substring(0,n.length-1);var c=!0}return c&&(t("dom-compliant-qsa")||i)?s(i):void l([n],(function(t){"./lite"!=n&&(i=t),s(t)}))}}}.apply(e,i))||(t.exports=r)},function(t,e){t.exports=void 0},function(t,e){t.exports={gettingStationInformation:"Getting station information...",paused:"Paused",onAir:"On Air",disconnected:"Disconnected",streamUnavailable:"Stream unavailable",buffering:"Buffering",connecting:"Live stream connection in progress...",reconnecting:"Live stream connection in progress...",seekfailed:"Seek failed",seekinvalidtime:"Impossible to seek due to invalid time",ended:"Ended",pause:"Paused",play:"Playing",stop:"Stopped",error:"Error",streamGeoBlocked:"Sorry, this content is not available in your area",stationNotFound:"Station not found",flashPluginOutOfDate:"Your Flash plugin version detected is out of date. Minimum version required is: 10.2.0",browserNotSupported:"Your browser does not support HTML5 feature",embedFailed:"The embed failed!",playbackNotAllowed:"Playback of media in the current context or situation is not allowed",tritonListenLink:"The OnDemand player cannot be used with Triton listen links"}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function a(){p&&h&&(p=!1,h.length?f=h.concat(f):g=-1,f.length&&o())}function o(){if(!p){var t=r(a);p=!0;for(var e=f.length;e;){for(h=f,f=[];++g<e;)h&&h[g].run();g=-1,e=f.length}h=null,p=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function s(t,e){this.fun=t,this.array=e}function u(){}var l,c,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(t){c=i}}();var h,f=[],p=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new s(t,e)),1!==f.length||p||r(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){var i,r,a=n(21).getProtocol();i=[n(1)],void 0===(r=function(t){return t([],{ENDPOINT:a+"//runspot4.tritondigital.com/RunSpotV4.svc/GetVASTAd?&StationID={sid}&MediaFormat={mediaformat}&RecordImpressionOnCall={recordimpressiononcall}&AdMinimumDuration={adminimumduration}&AdMaximumDuration={admaximumduration}&AdLevelPlacement={adlevelplacement}&AdCategory={adcategory}",mediaAdBlankFiles:["blank.flv","9483.mp3"],getVastUri:function(t,e,n,i,r,a,o,s){n=null!=n?n:"21",i=null!=i?i:"1",r=null!=r&&r,a=null!=a?a:"0",o=null!=o?o:"900",s=null!=s?s:"1";var u=null!=t?t:this.ENDPOINT;return(u=(u=(u=(u=(u=(u=u.replace("{sid}",e)).replace("{mediaformat}",parseInt(n))).replace("{adlevelplacement}",parseInt(i))).replace("{recordimpressiononcall}",r)).replace("{adminimumduration}",parseInt(a))).replace("{admaximumduration}",parseInt(o))).replace("{adcategory}",parseInt(s))}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){return{HLS_TRACK_ID:"hlsTrackId",HLS_SEGMENT_ID:"hlsSegmentId"}}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i;void 0===(i=function(){return{CUE_TITLE:"cueTitle",ARTIST_NAME:"artistName",ALBUM_NAME:"albumName",PROGRAM_ID:"trackID",CUE_TIME_DURATION:"cueTimeDuration",CUE_TIME_START:"cueTimeStart",TRACK_ID:"trackID",NOW_PLAYING_URL:"nowplayingURL",TRACK_COVER_URL:"coverURL"}}.apply(e,[]))||(t.exports=i)},function(t,e){t.exports={AUDIO:"Audio",VIDEO:"Video"}},function(t,e){
/** @license
	 * eventsource.js
	 * Available under MIT License (MIT)
	 * https://github.com/Yaffle/EventSource/
	 */
!function(t){function e(){this.data={}}function n(){this.listeners=new e}function i(t){c((function(){throw t}),0)}function r(t){this.type=t,this.target=void 0}function a(t,e){r.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function o(t,e){var n=t;return n!=n&&(n=e),n<k?k:n>C?C:n}function s(t,e,n){try{"function"==typeof e&&e.call(t,n)}catch(t){i(t)}}function u(e,i){function u(){j=_,null!=M&&(M.abort(),M=void 0),0!==F&&(d(F),F=0),0!==U&&(d(U),U=0),P.readyState=_}function l(t){var n="";if(j===y||j===v)try{n=M.responseText}catch(t){}var i=void 0,l=!1;if(j===v){var h=0,f="",p=void 0;if("contentType"in M)""!==t&&"error"!==t&&(h=200,f="OK",p=M.contentType);else try{h=M.status,f=M.statusText,p=M.getResponseHeader("Content-Type")}catch(t){h=0,f="",p=void 0}if(null==p&&(p=""),0===h&&""===f&&"load"===t&&""!==n&&(h=200,f="OK",""===p)){var g=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(e);null!=g&&(p=g[1])}if(200===h&&w.test(p)){if(j=y,N=!0,O=L,P.readyState=y,i=new r("open"),P.dispatchEvent(i),s(P,P.onopen,i),j===_)return}else if(0!==h&&(200!==h||""!==p)){var k;k=200!==h?"EventSource's response has a status "+h+" "+f.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+p.replace(/\s+/g," ")+". Aborting the connection.",c((function(){throw new Error(k)}),0),l=!0}}if(j===y){n.length>B&&(N=!0);for(var x=B-1,D=n.length,U="\n";++x<D;)if(U=n.charAt(x),W===b&&"\n"===U)W=E;else if(W===b&&(W=E),"\r"===U||"\n"===U){if("data"===K?H.push(Y):"id"===K?V=Y:"event"===K?G=Y:"retry"===K?(L=o(Number(Y),L),O=L):"heartbeatTimeout"===K&&(R=o(Number(Y),R),0!==F&&(d(F),F=c(q,R))),Y="",K="",W===E){if(0!==H.length&&(I=V,""===G&&(G="message"),i=new a(G,{data:H.join("\n"),lastEventId:V}),P.dispatchEvent(i),"message"===G&&s(P,P.onmessage,i),j===_))return;H.length=0,G=""}W="\r"===U?b:E}else W===E&&(W=T),W===T?":"===U?W=A:K+=U:W===A?(" "!==U&&(Y+=U),W=S):W===S&&(Y+=U);B=D}j!==y&&j!==v||!("load"===t||"error"===t||l||B>1048576||0===F&&!N)?0===F&&(N=!1,F=c(q,R)):(l?u():(""!==t||0!==F||N||c((function(){throw new Error("No activity within "+R+" milliseconds. Reconnecting.")}),0),j=m,M.abort(),0!==F&&(d(F),F=0),O>16*L&&(O=16*L),O>C&&(O=C),F=c(q,O),O=2*O+1,P.readyState=v),i=new r("error"),P.dispatchEvent(i),s(P,P.onerror,i))}function h(){l("progress")}function f(){l("load")}function k(){l("error")}function x(){l(4===M.readyState?0===M.status?"error":"load":"progress")}e=e.toString();var D=p&&null!=i&&Boolean(i.withCredentials),L=o(1e3,0),R=o(6e10,0),I="",P=this,O=L,N=!1,M=new(null!=i&&null!=i.Transport?i.Transport:g),F=0,U=0,B=0,j=m,H=[],V="",G="",q=void 0,W=E,K="",Y="";"readyState"in M&&null!=t.opera&&(U=c((function t(){3===M.readyState&&l("progress"),U=c(t,500)}),0)),q=function(){if(F=0,j===m)if("ontimeout"in M&&!("sendAsBinary"in M)&&!("mozAnon"in M)||null==t.document||null==t.document.readyState||"complete"===t.document.readyState){M.onload=f,M.onerror=k,"onabort"in M&&(M.onabort=k),"onprogress"in M&&(M.onprogress=h),"onreadystatechange"in M&&(M.onreadystatechange=x),N=!1,F=c(q,R),B=0,j=v,H.length=0,G="",V=I,Y="",K="",W=E;var n=e.slice(0,5);n="data:"!==n&&"blob:"!==n?e+(-1===e.indexOf("?",0)?"?":"&")+"lastEventId="+encodeURIComponent(I)+"&r="+(Math.random()+1).toString().slice(2):e,M.open("GET",n,!0),"withCredentials"in M&&(M.withCredentials=D),"responseType"in M&&(M.responseType="text"),"setRequestHeader"in M&&M.setRequestHeader("Accept","text/event-stream"),M.send(void 0)}else F=c(q,4);else l("")},n.call(this),this.close=u,this.url=e,this.readyState=v,this.withCredentials=D,this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,q()}function l(){this.CONNECTING=v,this.OPEN=y,this.CLOSED=_}var c=t.setTimeout,d=t.clearTimeout;e.prototype.get=function(t){return this.data[t+"~"]},e.prototype.set=function(t,e){this.data[t+"~"]=e},e.prototype.delete=function(t){delete this.data[t+"~"]},n.prototype.dispatchEvent=function(t){t.target=this;var e=t.type.toString(),n=this.listeners.get(e);if(null!=n)for(var r=n.length,a=-1,o=void 0;++a<r;){o=n[a];try{o.call(this,t)}catch(t){i(t)}}},n.prototype.addEventListener=function(t,e){t=t.toString();var n=this.listeners,i=n.get(t);null==i&&(i=[],n.set(t,i));for(var r=i.length;--r>=0;)if(i[r]===e)return;i.push(e)},n.prototype.removeEventListener=function(t,e){t=t.toString();var n=this.listeners,i=n.get(t);if(null!=i){for(var r=i.length,a=[],o=-1;++o<r;)i[o]!==e&&a.push(i[o]);0===a.length?n.delete(t):n.set(t,a)}},a.prototype=r.prototype;var h=t.XMLHttpRequest,f=t.XDomainRequest,p=null!=h&&null!=(new h).withCredentials,g=p||null!=h&&null==f?h:f,m=-1,v=0,y=1,_=2,b=3,E=4,T=5,A=6,S=7,w=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,k=1e3,C=18e6;l.prototype=n.prototype,u.prototype=new l,l.call(u),p&&(u.prototype.withCredentials=void 0),null!=g&&(null==t.EventSource||p&&(null==t.EventSource||!("withCredentials"in t.EventSource.prototype)))&&(t.NativeEventSource=t.EventSource,t.EventSource=u)}("undefined"!=typeof window?window:this)},function(t,e,n){var i,r,a=n(16),o=n(15);i=[n(1),n(2),n(12),n(61),n(38),n(10),n(14)],void 0===(r=function(t,e,n,i,r,s,u){var l;return t([n],{cuePointMap:(l={timestamp:"timestamp",type:"type",cue_title:i.CUE_TITLE,track_artist_name:i.ARTIST_NAME,track_album_name:i.ALBUM_NAME,program_id:i.PROGRAM_ID,cue_time_duration:i.CUE_TIME_DURATION,cue_time_start:i.CUE_TIME_START,track_id:i.TRACK_ID,track_nowplaying_url:i.NOW_PLAYING_URL,track_cover_url:i.TRACK_COVER_URL,ad_id:r.AD_ID,ad_type:r.AD_TYPE},_defineProperty(l,"cue_title",r.CUE_TITLE),_defineProperty(l,"cue_time_duration",r.CUE_TIME_DURATION),_defineProperty(l,"ad_url",r.AD_URL),l),constructor:function(t,e){this.inherited(arguments),this.platform=new o(t.platformId)},start:function(){this.emit("module-ready",{id:"NowPlayingApi",module:this})},load:function(t){var n=new u,i=this._getRequestArgs(t.hd?t.mount+"AAC":t.mount,t.numberToFetch,t.eventType||"track",t.mode);return(new s).request(this.platform.endpoint.nowPlayingHistory,{mount:t.mount,mode:t.mode||"songHistory",deferred:n},i,e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError)),n},_onLoadError:function(t,e){return console.error("nowPlayingApi::_onLoadError - mount="+t.mount+" - error="+e),this.emit("nowplaying-api-error",{mount:t.mount,error:t.error}),t.deferred.reject({mount:t.mount,error:t.error})},_onLoadComplete:function(t,e){e=e.getElementsByTagName("nowplaying-info");for(var n,i,r,o,s,u,l=[],c=0;c<e.length;c++){s=e[c].getAttribute("type"),u=e[c].getAttribute("timestamp"),i=e[c].childNodes,(n={parameters:{}})[this.cuePointMap.type]=s,n[this.cuePointMap.timestamp]=parseInt(u);for(var d=0;d<i.length;d++)r=i[d].getAttribute("name"),o=a.textContent(i[d]),null!=this.cuePointMap[r]&&(n[this.cuePointMap[r]]=o),n.parameters[r]=o;l.push(n)}l=l.sort((function(t,e){return t.cueTimeStart-e.cueTimeStart})).reverse(),this._emitNotificationByMode(t.mount,t.mode,l),t.deferred.resolve({mount:t.mount,list:l})},_emitNotificationByMode:function(t,e,n){switch(e){case"songHistory":this._emitSongHistoryNotification(t,n);break;case"nowPlaying":this._emitNowPlayingNotification(t,n)}},_emitSongHistoryNotification:function(t,e){e.length>0?this.emit("list-loaded",{mount:t,list:e}):this.emit("list-empty",{mount:t})},_emitNowPlayingNotification:function(t,e){e.length>0?this.emit("cue-point",{mount:t,cuePoint:e[0]}):this.emit("cue-point-empty",{mount:t})},_getRequestArgs:function(t,e,n,i){return{handleAs:"xml",preventCache:!0,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"},query:{mountName:t,numberToFetch:"nowPlaying"==i?1:e,eventType:n}}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.id=null,this.adID=null,this.sequence=null,this.linearElement=null,this.companionAds=[],this.nonLinearAds=[]}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.creatives=[],this.inherited(arguments)},addWrapperLinearTrackingEvents:function(t){var e=this._getLinearElement();null!=e&&(e.trackingEvents=e.trackingEvents.concat(t))},addWrapperLinearVideoClickTracking:function(t){var e=this._getLinearElement();null!=e&&null!=e.videoClick&&(e.videoClick.clickTrackings=e.videoClick.clickTrackings.concat(t))},addImpressions:function(t){null!=t&&(this.impressions=this.impressions.concat(t))},addCustomClicks:function(t){var e=this._getLinearElement();null!=e&&null!=e.videoClick&&(e.videoClick.customClicks=e.videoClick.customClicks.concat(t))},getLinearTrackingEvents:function(t){return null==(t=t)&&(t=-1),null!=this._getLinearElement()?this._getLinearElement().trackingEvents:null},getCompanionAdUrl:function(t,e,n,i){var r=this.getCompanionAds(i);if(null==r)return null;for(var a=r.length,o=0;o<a;o++)if(1!=(r[o].width==t&&r[o].height==e)){if(null==n)return r[o];if(companionAd.resourceType==n)return r[o]}return null},getCompanionAds:function(t){null==(t=t)&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(this.creatives[n].companionAds.length>0){if(-1==t)return this.creatives[n].companionAds;if(this.creatives[n].sequence==t)return this.creatives[n].companionAds}},getLinearMediaFiles:function(t){return null==(t=t)&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).mediaFiles:null},getLinearMediaFileByIndex:function(t,e){return null==(e=e)&&(e=-1),null==(t=t)&&(t=0),null!=this._getLinearElement(e).mediaFiles[t]?this._getLinearElement(e).mediaFiles[t]:null},getLinearVideoClick:function(t){return null==(t=t)&&(t=-1),null!=this._getLinearElement(t).videoClick?this._getLinearElement(t).videoClick:null},getNonLinearAds:function(t){null==(t=t)&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(this.creatives[n].nonLinearAds.length>0){if(-1==t)return this.creatives[n].nonLinearAds;if(this.creatives[n].sequence==t)return this.creatives[n].nonLinearAds}},getLinearDuration:function(t){return null==(t=t)&&(t=-1),null!=this._getLinearElement(t).duration?this._getLinearElement(t).duration:null},_getLinearElement:function(t){null==(t=t)&&(t=-1);for(var e=this.creatives.length,n=0;n<e;n++)if(null!=this.creatives[n].linearElement){if(-1==t)return this.creatives[n].linearElement;if(this.creatives[n].sequence==t)return this.creatives[n].linearElement}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.duration=null,this.trackingEvents=[],this.videoClick=null,this.mediaFiles=[]}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.resourceType=null,this.creativeType=null,this.url=null,this.code=null,this.clickThroughURL=null,this.adParameters=null,this.scalable=!1,this.maintainAspectRatio=!1,this.apiFramework=null,this.minSuggestedDuration=null}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(18);i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){var t=a.getLocalization();this.flashModuleMap={flashPluginOutOfDate:{code:100,message:t.flashPluginOutOfDate}},this.html5ModuleMap={browserNotSupported:{code:101,message:t.browserNotSupported},tritonListenLink:{code:102,message:t.tritonListenLink}}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(2),n(4),n(3),n(7),n(12),n(26),n(51)],void 0===(r=function(t,e,n,i,r,a,o,s){return t([a],{TIME_OUT_MESSAGE_DELAY:3e4,constructor:function(t,e,n){this.type=n,this.volume=1,this.params=null,this.connection=null,this._track=null,this._currentLiveApiParams=null,this.isLiveStream=!1,this.lowActivated=!1,this.playAdCalled=!1,this.mount=null,this.station=null,this.__resetBackOff(),t&&t.playerId&&(this.playerNode=r.byId(t.playerId,document)),t&&t.mount&&(this.mount=t.mount),t&&t.station&&(this.station=t.station),this.hls=null==t.hls||t.hls,this.audioAdaptive=null!=t.audioAdaptive&&t.audioAdaptive,this.__initSbmConfig(t)},start:function(){i(this.target,"stream-start",e.hitch(this,this.__onStreamStart)),i(this.target,"stream-stop",e.hitch(this,this.__onStreamStop)),i(this.target,"stream-fail",e.hitch(this,this.__onStreamFailed)),i(this.target,"media-playback-started",e.hitch(this,this._onMediaPlaybackStarted)),i(this.target,"media-playback-error",e.hitch(this,this._onMediaPlaybackError)),i(this.target,"ad-break-cue-point",e.hitch(this,this.__onAdBreakCuePoint))},play:function(t){if(null!=t){if(this.params=t,null!=t.file&&""!=t.file)return this.isLiveStream=!1,void this.__playMedia(t);this._currentLiveApiParams=t,this.connectionIterator?(this.isLiveStream=!0,this.__connect(this.connectionIterator.current())):console.error("techModule::play - connectionIterator is not defined")}},setConnectionIterator:function(t){this.connectionIterator=t},currentConnection:function(){return this.connection},currentTrack:function(){return this._track},setCurrentTrack:function(t){this._track=t},_onMediaPlaybackStarted:function(t){},_onMediaPlaybackError:function(){},__onStreamStart:function(){this.__resetBackOff(),this._currentLiveApiParams&&this._currentLiveApiParams.connectionTimeOut>0&&(this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutAlert),6e4*this._currentLiveApiParams.connectionTimeOut))},__onStreamStop:function(){this.breakTimer&&clearInterval(this.breakTimer),this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer)},__onStreamFailed:function(){console.error("techModule::__onStreamFailed"),this.__reconnect()},__onStreamUnmute:function(){console.info("techModule::__onStreamUnmute"),this.connectionIterator&&this.__reconnect()},__reconnect:function(){if(this.connectionIterator)if(this.connectionIterator.hasLooped()){var t=Math.min(this.backOffDelay<<this.backOffRetry++,6e4);this.backOffTimer=setTimeout(e.hitch(this,this.__onBackOffTimeOut),t)}else this.__connect(this.connectionIterator.next());else console.error("techModule::__reconnect - connectionIterator is not defined")},__onBackOffTimeOut:function(){this.connectionIterator.reset(),this.__connect(this.connectionIterator.next())},__resetBackOff:function(){this.backOffRetry=0,this.backOffDelay=4e3*Math.random()+1e3,this.backOffTimer&&clearTimeout(this.backOffTimer)},__playMedia:function(t){null!=t&&(1==this.config.adStitcher&&t.trackingParameters&&(t.file+=(-1!=t.file.indexOf("?")?"&":"?")+s.objectToQuery(t.trackingParameters).replace(/\./g,"%2E")),this.playMedia({url:t.file}))},__connect:function(t){if(null!=t){if(this.connection=t,null!=this.connection&&(this.mount=this.connection.mount?this.connection.mount:null),null!=this._currentLiveApiParams&&(this.station=this._currentLiveApiParams.station?this._currentLiveApiParams.station:null),this.connection.isGeoBlocked&&this.connection.alternateContent)return void o.publish("api/request","get-alternate-content",this.connection.alternateContent);var e=this._currentLiveApiParams.trackingParameters||{};this.lowActivated&&this.connection.isAudioAdaptive&&(e.utags="low-bw");var n=this.connection.mimeType,i=this.connection.url;e&&(i=i+"?"+s.objectToQuery(e)),this.emit("stream-select"),this.playStream({url:i,mimeType:n,format:this.connection.format,timeShift:this._currentLiveApiParams.timeShift,uuidEnabled:this.connection.uuidEnabled,sendPageUrl:this.connection.sendPageUrl,hasVideo:this.connection.hasVideo,type:this.connection.type,mount:this.connection.mount,sbmConfig:this.__getSbmData(),isHLS:this.connection.isHLS,isHLSTS:this.connection.isHLSTS})}},__getSbmData:function(){return null!=this._sbmConfig&&this._sbmConfig.active&&null!=this.connection.metadata&&null!=this.connection.metadata.sseSideband?(this._sbmConfig.info=this.connection.metadata.sseSideband,this._sbmConfig):this._sbmConfig},__onAdBreakCuePoint:function(t){var e=t.data.adBreakData;this.breakTimer&&clearInterval(this.breakTimer),e.duration>0&&this.__initBreakTimer(e.duration)},__initBreakTimer:function(t){this.breakTimer=setInterval(e.hitch(this,this.__onBreakTimerComplete),t)},__onBreakTimerComplete:function(){this.breakTimer&&clearInterval(this.breakTimer),this.emit("ad-break-cue-point-complete")},__initSbmConfig:function(t){t.sbm&&!t.sbm.active?this._sbmConfig={active:!1,aSyncCuePointFallback:null==t.sbm.aSyncCuePointFallback||t.sbm.aSyncCuePointFallback}:t.sbm&&t.sbm.active?this._sbmConfig={active:!0,aSyncCuePointFallback:null==t.sbm.aSyncCuePointFallback||t.sbm.aSyncCuePointFallback}:"Html5"==this.type?this._sbmConfig={active:!0,aSyncCuePointFallback:!0}:this._sbmConfig=null},prepare:function(t){"adModule"===t&&(this.playAdCalled=!0)},playStream:function(t){},pause:function(){},stop:function(){this.isLiveStream?(this.__resetBackOff(),this.stopStream()):this.stopMedia()},resume:function(){},seek:function(t){1==this.isLiveStream?this.seekStream(t):this.seekMedia(t)},seekLive:function(){},restartConnectionTimeOut:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this._currentLiveApiParams.connectionTimeOut>0&&(this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutAlert),6e4*this._currentLiveApiParams.connectionTimeOut))},setVolume:function(t){this.volume=t},getVolume:function(){return this.volume},mute:function(){1==this.isLiveStream?this.muteStream():this.muteMedia()},unMute:function(){1==this.isLiveStream?this.unMuteStream():this.unMuteMedia()},playAd:function(t,e){this.playAdCalled=!0},skipAd:function(){},destroyAd:function(){},reloadSyncBanner:function(){},__onTimeOutAlert:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutReached),this.TIME_OUT_MESSAGE_DELAY),this.emit("timeout-alert")},__onTimeOutReached:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this.stopStream(),this.emit("timeout-reach")}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=(n(20),n(36),n(39));n(22),i=[n(1),n(3),n(13),n(6),n(2),n(19),n(86),n(4)],void 0===(r=function(t,e,n,i,r,o,s,u){return t([n],{MAX_CONNECTION_LATENCY:5e3,constructor:function(){this.inherited(arguments),this.mediaNode=null,this.audioSource=null,this.isStopped=!0,this.isPaused=!0,this.listeners=[],this.volume=1,this._onCanPlayHandler=r.hitch(this,this._onCanPlay),this._onCanPlayThroughHandler=r.hitch(this,this._onCanPlayThrough),this._onLoadDataHandler=r.hitch(this,this._onLoadData),this._onLoadStartHandler=r.hitch(this,this._onLoadStart),this._onWaitingHandler=r.hitch(this,this._onWaiting),this._onEmptiedHandler=r.hitch(this,this._onEmptied),this._onAbortHandler=r.hitch(this,this._onAbort),this._onErrorHandler=r.hitch(this,this._onError),this._onLoadedMetadataHandler=r.hitch(this,this._onLoadedmetadata),this._onTimeUpdateHandler=r.hitch(this,this._onTimeupdate),this._onEndedHandler=r.hitch(this,this._onEnded),this._onPlayHandler=r.hitch(this,this._onPlay),this._onPauseHandler=r.hitch(this,this._onPause),this._onProgressHandler=r.hitch(this,this._onProgress),this._onStalledHandler=r.hitch(this,this._onStalled),this._onSuspendHandler=r.hitch(this,this._onSuspend)},play:function(t){t&&(this.isStopped||this.isPaused)&&(this.params=t,this.mediaNode=t.mediaNode,this.isStopped=!1,this.isPaused=!1,this._loadMedia(t))},stop:function(){this.isStopped=!0,this.isPaused=!1,null!=this.mediaNode&&(this.mediaNode.pause(),this._emptyMediaNode())},skip:function(){this.isStopped=!0,this.isPaused=!1,null!=this.mediaNode&&(this.emit("html5-playback-status",{type:a.ENDED}),this.mediaNode.pause())},pause:function(){this.isPaused=!0,null!=this.mediaNode&&this.mediaNode.pause()},resume:function(){var t=this;this.isPaused=!1,null!=this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch((function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})}))},seek:function(t){null!=this.mediaNode&&(this.mediaNode.currentTime=t,this.isPaused&&this.resume())},setVolume:function(t){null!=this.mediaNode&&(this.volume=t,this.mediaNode.volume=t,this.mediaNode.muted&&t>0&&(this.mediaNode.muted=!1))},mute:function(){null!=this.mediaNode&&(this.mediaNode.muted=!0)},unMute:function(){null!=this.mediaNode&&(this.mediaNode.muted=!1)},_loadMedia:function(t){this.mediaNode.src=t.url,this._initMediaListeners(t.isLive),this.mediaNode.load()},_emptyMediaNode:function(){this.mediaNode.src="",this.mediaNode.load()},_removeMediaSource:function(){o.has(this.audioSource,"src")&&o.remove(this.audioSource,"src"),o.has(this.mediaNode,"src")&&o.remove(this.mediaNode,"src")},_onLoadData:function(){var t=this;this.isStopped||this.isPaused||(u("mozilla")&&this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch((function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})})),this.emit("html5-playback-status",{type:a.DATA_LOADING,mediaNode:this.mediaNode}))},_onCanPlay:function(){var t=this;this.isStopped||this.isPaused||(this.emit("html5-playback-status",{type:a.CAN_PLAY,mediaNode:this.mediaNode}),this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch((function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})})))},_onCanPlayThrough:function(){var t=this;this.isStopped||this.isPaused||(this.emit("html5-playback-status",{type:a.CAN_PLAY_THROUGH,mediaNode:this.mediaNode}),this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch((function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})})))},_onWaiting:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.WAITING,mediaNode:this.mediaNode})},_onEmptied:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.EMPTIED,mediaNode:this.mediaNode})},_onAbort:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.ABORT,mediaNode:this.mediaNode})},_onError:function(t){return this._removeMediaListeners(),this.isStopped||this.isPaused?void this.emit("html5-playback-status",{type:a.STOP,mediaNode:this.mediaNode}):void this.emit("html5-playback-status",{type:3==this.mediaNode.readyState?a.STOP:a.ERROR,mediaNode:this.mediaNode})},_onLoadedmetadata:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.EMPTIED,mediaNode:this.mediaNode})},_onTimeupdate:function(){this.isStopped||this.isPaused||(this.mediaNode.currentTime.toFixed(1)==this.mediaNode.duration.toFixed(1)?(this.isStopped=!0,this.emit("html5-playback-status",{type:a.ENDED,mediaNode:this.mediaNode})):this.emit("html5-playback-status",{type:a.TIME_UPDATE,mediaNode:this.mediaNode}))},_onLoadStart:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.LOAD_START,mediaNode:this.mediaNode})},_onEnded:function(){this.isStopped||(this._removeMediaListeners(),this.emit("html5-playback-status",{type:a.ENDED,mediaNode:this.mediaNode}))},_onPlay:function(){this.emit("html5-playback-status",{type:a.PLAY,mediaNode:this.mediaNode})},_onPause:function(){this.isStopped?this.emit("html5-playback-status",{type:a.STOP,mediaNode:this.mediaNode}):this.emit("html5-playback-status",{type:a.PAUSE,mediaNode:this.mediaNode})},_initMediaListeners:function(t){this._errorHandler=e(this.mediaNode,"error",this._onErrorHandler),this._loadDataHandler=e(this.mediaNode,"loadeddata",this._onLoadDataHandler),this._loadStartHandler=e(this.mediaNode,"loadstart",this._onLoadStartHandler),this._canPlayHandler=e(this.mediaNode,"canplay",this._onCanPlayHandler),this._canPlayThroughHandler=e(this.mediaNode,"canplaythrough",this._onCanPlayThroughHandler),this._waitingHandler=e(this.mediaNode,"waiting",this._onWaitingHandler),this._emptiedHandler=e(this.mediaNode,"emptied",this._onEmptiedHandler),this._abortHandler=e(this.mediaNode,"abort",this._onAbortHandler),this._endedHandler=e(this.mediaNode,"ended",this._onEndedHandler),this._playHandler=e(this.mediaNode,"play",this._onPlayHandler),this._pauseHandler=e(this.mediaNode,"pause",this._onPauseHandler),this._loadedMetadataHandler=e(this.mediaNode,"loadedmetadata",this._onLoadedMetadataHandler),this._timeUpdateHandler=t?null:e(this.mediaNode,"timeupdate",this._onTimeUpdateHandler)},_removeMediaListeners:function(){this.params.mediaNode.src="",this._errorHandler.remove(),this._loadDataHandler.remove(),this._loadStartHandler.remove(),this._canPlayHandler.remove(),this._canPlayThroughHandler.remove(),this._waitingHandler.remove(),this._emptiedHandler.remove(),this._abortHandler.remove(),this._endedHandler.remove(),this._playHandler.remove(),this._pauseHandler.remove(),this._loadedMetadataHandler.remove(),this._timeUpdateHandler&&this._timeUpdateHandler.remove()}})}.apply(e,i))||(t.exports=r)},function(t,e,n){function i(t,e,n){return"string"==typeof e&&(e=[e]),h.isUndefined(n)&&(n=!1),t.filter((function(t){return!(h.isEmpty(t.tags)&&n)||h.some(e,(function(e){return-1!==t.tags.indexOf(e)}))}))}function r(t){return h.sortBy(t,(function(t){return t.mediaFormat.isAudioAdaptive?0:1}),(function(t){return t.mediaFormat.audioTracks[0].isAAC?0:1}))}function a(t){var e=h.groupBy(t,(function(t){return t.mediaFormat.isAudioAdaptive?"audioAdaptive":t.mediaFormat.audioTracks[0].isAAC?"aac":"mp3"})),n=h.keys(e);return h.flatMap(n,(function(t){var n=e[t];return h.orderBy(n,"bitRate","desc")}))}function o(t,e){return h.isArray(e)||(e=[e]),h.forEach(t,(function(t){var n=t.transports.filter((function(n){return!h.some(e,(function(e){return e.transport===n.transport&&t.mediaFormat.audioTracks[0].codec.indexOf(e.codec)>-1}))}));t.transports=n})),t.filter((function(t){return!h.isEmpty(t.transports)}))}function s(t){return h.filter(t,(function(t){return!t.mediaFormat.isAudioAdaptive}))}function u(t){return o(t,[{transport:"hls",codec:"aac"},{transport:"hlsts",codec:"aac"}])}function l(t,e){return o(t,[{transport:e?"hls":"hlsts",codec:"aac"},{transport:"http",codec:"aac"},{transport:"http",codec:"mp3"}])}function c(t,e){var n=h.map(e,(function(t){return function(e){return e.transport===t?0:1}}));return h.forEach(t,(function(t){var e=t.transports,i=h.sortBy(e,n);t.transports=i})),t}function d(t,e,n){if("flash"==n.toLowerCase())t=o(t=s(t),[{transport:"hlsts",codec:"aac"},{transport:"hls",codec:"aac"}]);else switch(e.os.family){case"iOS":t=o(t,{transport:"hlsts",codec:"aac"}),"Chrome Mobile"===e.name&&(t=o(t,[{transport:"hls",codec:"aac"}])),t=c(t,["hls","http"]);break;case"Android":t=c(t,["hlsts","http"]);break;default:switch(e.name){case"Safari":t=c(t=o(t,{transport:"hlsts",codec:"aac"}),["hls","http"]);break;case"IE":t=c(t="11.0"===e.version&&parseInt(e.os.version)>7?o(t,[{transport:"http",codec:"aac"},{transport:"hlsts",codec:"aac"}]):o(t,[{transport:"hls",codec:"aac"},{transport:"http",codec:"aac"},{transport:"hlsts",codec:"aac"}]),["hls","http"]);break;case"Microsoft Edge":t=c(t=o(t,[{transport:"hlsts",codec:"aac"}]),["hls","http"]);break;default:t=c(t=o(t,[{transport:"hlsts",codec:"aac"},{transport:"hls",codec:"aac"}]),["hls","http"])}}return t}var h=n(8);t.exports={filterMountPoints:function(t,e,n,o,c,h,f,p,g){return!h||p||g||(t=u(t)),f&&(t=s(t)),t=i(t,o,c),r(t=a(t=p?l(t):g?l(t,!0):d(t,e,n)))},filterByTag:i,sortMountpoints:r}},function(t,e,n){var i,r;i=[n(1),n(6),n(2),n(10),n(31),n(75),n(74),n(3)],void 0===(r=function(t,e,n,i,r,a,o,s){return t([r],{constructor:function(t,e){this.albumData=null,this.inherited(arguments)},getArtists:function(){return this.albumData.artists},getArtistId:function(){return this.getArtists()[0].id},getDuration:function(){return this.albumData.duration},getGenres:function(){for(var t=[],e=0;e<this.albumData.genres.length;e++)t.push(this.albumData.genres[e].name);return t},getTitle:function(){return null!=this.albumData?this.albumData.title:this.data.title},getLabel:function(){return this.data.label},getReleaseDate:function(){return null!=this.albumData?this.albumData.release:this.data.release},getReview:function(){return this.albumData.review},getReviewAuthor:function(){return this.albumData.reviewAuthor},getBuyUrl:function(){return null!=this.albumData?this.albumData.buyURL:this.data.buyURL},getRating:function(){return null!=this.albumData?this.albumData.rating:this.data.rating},getCoverArtOriginal:function(){var t=null!=this.albumData?this.albumData.cover:this.data.cover;return null!=t||null!=t?{url:t.originalSourceUrl,width:t.width,height:t.height,id:t.id}:null},getCoverArtPicture:function(){return this.coverArtPicture},fetchCoverArtPicture:function(){if(!this.coverArtPicture){var t=null!=this.albumData?this.albumData.cover:this.data.cover;return null==t?void this.notify("cover-complete"):(t.albumId=this.id,this.coverArtPicture=new o(t,this.platformId),this.coverArtPicture.successCallback&&this.coverArtPicture.successCallback.remove(),this.coverArtPicture.errorCallback&&this.coverArtPicture.errorCallback.remove(),this.coverArtPicture.successCallback=s(this.coverArtPicture,"picture-complete",n.hitch(this,this._onCoverArtPictureComplete)),this.coverArtPicture.errorCallback=s(this.coverArtPicture,"picture-error",n.hitch(this,this._onCoverArtPictureComplete)),void this.coverArtPicture.fetchData())}this.notify("cover-complete",this.coverArtPicture)},_onCoverArtPictureComplete:function(t,e){this.notify("cover-complete",this.coverArtPicture)},getTracks:function(){var t;return null==this.tracks&&(this.tracks=[],e.forEach(this.albumData.tracks,(function(e,n){t=new a(e,this.platformId),this.tracks.push(t)}),this)),this.tracks},getTrackById:function(t){var n=-1;return e.forEach(this.getTracks(),(function(e,i){e.id==t&&(n=i)}),this),n>-1?this.getTracks()[n]:null},fetchData:function(t){if((t=null!=t&&t)&&(this.url=this.getDynamicAlbumUrl(this.id)),null==this.url)return console.error("album::fetchData - The album url is undefined for album title="+this.getTitle()),void this.notify("album-error",{albumId:this.id});0==this.alreadyFetched?(new i).request(this.url,{albumId:this.id,isDynamicCall:t},this.getRequestArgs(),n.hitch(this,this._onLoadComplete),n.hitch(this,this._onLoadError)):this.notify("album-complete",{albumId:this.id})},fetchTrackByIds:function(t){"string"==typeof t&&(t=[t]),this.tracksQueue=n.clone(t);for(var e,i=0;i<t.length;i++)(e=this.getTrackById(t[i])).successCallback&&e.successCallback.remove(),e.errorCallback&&e.errorCallback.remove(),e.successCallback=s(e,"track-complete",n.hitch(this,this._onTrackComplete)),e.errorCallback=s(e,"track-error",n.hitch(this,this._onTrackComplete)),e.fetchData()},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("album-error",{albumId:t.albumId})},_onLoadComplete:function(t,e){this.albumData=e.album,this.alreadyFetched=!0,this.notify("album-complete",{albumId:t.albumId})},_onTrackComplete:function(t,e){this._removeTrackFromQueue(t.trackId),0==this.tracksQueue.length&&this.notify("track-complete",this.tracks)},_removeTrackFromQueue:function(t){var n=-1;e.forEach(this.tracksQueue,(function(e,i){e==t&&(n=i)}),this),n>-1&&this.tracksQueue.splice(n,1)}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(2),n(10),n(31)],void 0===(r=function(t,e,n,i){return t([i],{constructor:function(t,e){this.pictureData=null,this.albumId=t.albumId?t.albumId:null,this.artistId=t.artistId?t.artistId:null,this.inherited(arguments)},getOriginalSourceUrl:function(){return this.data.originalSourceUrl},getOriginalWidth:function(){return this.data.width},getOriginalHeight:function(){return this.data.height},getFiles:function(){return null!=this.pictureData&&null!=this.pictureData.files&&this.pictureData.files.length>0?this.pictureData.files:null},fetchData:function(t){(t=null!=t&&t)?null!=this.albumId?this.url=this.getDynamicAlbumPictureUrl(this.albumId,this.id):this.url=this.getDynamicArtistPictureUrl(this.artistId,this.id):null!=this.albumId?this.url+=-1!=this.url.indexOf("?")?"&":"?rewrite_id="+this.albumId:this.url+=-1!=this.url.indexOf("?")?"&":"?rewrite_id="+this.artistId,0==this.alreadyFetched?(new n).request(this.url,{pictureId:this.id,isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError)):this.notify("picture-complete",{pictureId:this.id})},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("picture-error",{pictureId:t.pictureId})},_onLoadComplete:function(t,e){this.pictureData=e.picture,this.alreadyFetched=!0,this.notify("picture-complete",{pictureId:t.pictureId})}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(2),n(10),n(31)],void 0===(r=function(t,e,n,i){return t([i],{constructor:function(t,e){this.trackData=null,this.inherited(arguments)},getBuyUrl:function(){return null!=this.trackData?this.trackData.buyURL:this.data.buyURL},getDuration:function(){return this.data.duration},getSampleUrl:function(){return null!=this.trackData?this.trackData.sampleURL:this.data.sampleURL},getTitle:function(){return null!=this.trackData?this.trackData.title:this.data.title},getArtists:function(){return this.trackData.artists},getReview:function(){return this.trackData.review},getReviewAuthor:function(){return this.trackData.reviewAuthor},getDisc:function(){return this.data.disc},fetchData:function(t){(t=null!=t&&t)&&(this.url=this.getDynamicTrackUrl(this.id)),0==this.alreadyFetched?(new n).request(this.url,{trackId:this.id,isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError)):this.notify("track-complete",{trackId:this.id})},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("track-error",{trackId:t.trackId})},_onLoadComplete:function(t,e){this.trackData=e.track,this.alreadyFetched=!0,this.notify("track-complete",{trackId:t.trackId})}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(4),n(27)],void 0===(r=function(t,e){var n={};if(t("dojo-config-api")){var i,r=e.rawConfig;for(i in r)n[i]=r[i]}else{var a=function(e,n,r){for(i in e)"has"!=i&&t.add(n+i,e[i],0,r)};a(n=t("dojo-loader")?e.rawConfig:this.dojoConfig||this.djConfig||{},"config",1),a(n.has,"",1)}return n.locale||(n.locale=(navigator.language||navigator.userLanguage).toLowerCase()),n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(5),n(3),n(26),n(33),n(78),n(85),n(79),n(2),n(84)],void 0===(r=function(t,e,n,i,r,a,o,s){function u(n,r,o,u,l){if(u=s.hitch(o,u),!n||!n.addEventListener&&!n.attachEvent)return i.after(n||t.global,r,u,!0);if("string"==typeof r&&"on"==r.substring(0,2)&&(r=r.substring(2)),n||(n=t.global),!l)switch(r){case"keypress":r=c;break;case"mouseenter":r=a.enter;break;case"mouseleave":r=a.leave}return e(n,r,u,l)}function l(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode}o.add("events-keypress-typed",(function(){var t={charCode:0};try{((t=document.createEvent("KeyboardEvent")).initKeyboardEvent||t.initKeyEvent).call(t,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return 0==t.charCode&&!o("opera")}));var c,d={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},h=o("mac")?"metaKey":"ctrlKey",f=function(t,e){var n=s.mixin({},t,e);return l(n),n.preventDefault=function(){t.preventDefault()},n.stopPropagation=function(){t.stopPropagation()},n},p={_keypress:c=o("events-keypress-typed")?function(t,n){var i=e(t,"keydown",(function(t){var e=t.keyCode,i=13!=e&&32!=e&&(27!=e||!o("ie"))&&(e<48||e>90)&&(e<96||e>111)&&(e<186||e>192)&&(e<219||e>222)&&229!=e;if(i||t.ctrlKey){var r=i?0:e;if(t.ctrlKey){if(3==e||13==e)return n.call(t.currentTarget,t);r>95&&r<106?r-=48:!t.shiftKey&&r>=65&&r<=90?r+=32:r=d[r]||r}var a=f(t,{type:"keypress",faux:!0,charCode:r});n.call(t.currentTarget,a),o("ie")&&function(t,e){try{t.keyCode=e}catch(t){return 0}}(t,a.keyCode)}})),r=e(t,"keypress",(function(t){var e=t.charCode;return t=f(t,{charCode:e=e>=32?e:0,faux:!0}),n.call(this,t)}));return{remove:function(){i.remove(),r.remove()}}}:o("opera")?function(t,n){return e(t,"keypress",(function(t){var e=t.which;return 3==e&&(e=99),e=e<32&&!t.shiftKey?0:e,t.ctrlKey&&!t.shiftKey&&e>=65&&e<=90&&(e+=32),n.call(this,f(t,{charCode:e}))}))}:function(t,n){return e(t,"keypress",(function(t){return l(t),n.call(this,t)}))},connect:function(t,e,n,i,r){var a=arguments,o=[],s=0;o.push("string"==typeof a[0]?null:a[s++],a[s++]);var l=a[s+1];o.push("string"==typeof l||"function"==typeof l?a[s++]:null,a[s++]);for(var c=a.length;s<c;s++)o.push(a[s]);return u.apply(this,o)},disconnect:function(t){t&&t.remove()},subscribe:function(t,e,i){return n.subscribe(t,s.hitch(e,i))},publish:function(t,e){return n.publish.apply(n,[t].concat(e))},connectPublisher:function(t,e,n){var i=function(){p.publish(t,arguments)};return n?p.connect(e,n,i):p.connect(e,i)},isCopyKey:function(t){return t[h]}};return p.unsubscribe=p.disconnect,o("extend-dojo")&&s.mixin(t,p),p}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(5),n(3),n(4),n(80)],void 0===(r=function(t,e,n,i){if(e._fixEvent){var r=e._fixEvent;e._fixEvent=function(t,e){return(t=r(t,e))&&i.normalizeEvent(t),t}}var a={fix:function(t,n){return e._fixEvent?e._fixEvent(t,n):t},stop:function(t){n("dom-addeventlistener")||t&&t.preventDefault?(t.preventDefault(),t.stopPropagation()):((t=t||window.event).cancelBubble=!0,e._preventDefault.call(t))}};return n("extend-dojo")&&(t.fixEvent=a.fix,t.stopEvent=a.stop),a}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(5),n(2),n(9)],void 0===(r=function(t,e,n){return n("host-browser")?(t._name="browser",e.mixin(t,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:n("khtml"),isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:n("android"),isWii:n("wii"),isQuirks:n("quirks"),isAir:n("air")}),n):n}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(9),n(17),n(7),n(23)],void 0===(r=function(t,e,n,i){function r(t,e,n,i,r,a){a=a||"px";var o=t.style;isNaN(e)||(o.left=e+a),isNaN(n)||(o.top=n+a),i>=0&&(o.width=i+a),r>=0&&(o.height=r+a)}function a(t){return"button"==t.tagName.toLowerCase()||"input"==t.tagName.toLowerCase()&&"button"==(t.getAttribute("type")||"").toLowerCase()}function o(t){return"border-box"==s.boxModel||"table"==t.tagName.toLowerCase()||a(t)}var s={boxModel:"content-box"};t("ie")&&(s.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),s.getPadExtents=function(t,e){t=n.byId(t);var r=e||i.getComputedStyle(t),a=i.toPixelValue,o=a(t,r.paddingLeft),s=a(t,r.paddingTop),u=a(t,r.paddingRight),l=a(t,r.paddingBottom);return{l:o,t:s,r:u,b:l,w:o+u,h:s+l}};var u="none";s.getBorderExtents=function(t,e){t=n.byId(t);var r=i.toPixelValue,a=e||i.getComputedStyle(t),o=a.borderLeftStyle!=u?r(t,a.borderLeftWidth):0,s=a.borderTopStyle!=u?r(t,a.borderTopWidth):0,l=a.borderRightStyle!=u?r(t,a.borderRightWidth):0,c=a.borderBottomStyle!=u?r(t,a.borderBottomWidth):0;return{l:o,t:s,r:l,b:c,w:o+l,h:s+c}},s.getPadBorderExtents=function(t,e){t=n.byId(t);var r=e||i.getComputedStyle(t),a=s.getPadExtents(t,r),o=s.getBorderExtents(t,r);return{l:a.l+o.l,t:a.t+o.t,r:a.r+o.r,b:a.b+o.b,w:a.w+o.w,h:a.h+o.h}},s.getMarginExtents=function(t,e){t=n.byId(t);var r=e||i.getComputedStyle(t),a=i.toPixelValue,o=a(t,r.marginLeft),s=a(t,r.marginTop),u=a(t,r.marginRight),l=a(t,r.marginBottom);return{l:o,t:s,r:u,b:l,w:o+u,h:s+l}},s.getMarginBox=function(e,r){e=n.byId(e);var a,o=r||i.getComputedStyle(e),l=s.getMarginExtents(e,o),c=e.offsetLeft-l.l,d=e.offsetTop-l.t,h=e.parentNode,f=i.toPixelValue;if(t("mozilla")){var p=parseFloat(o.left),g=parseFloat(o.top);isNaN(p)||isNaN(g)?h&&h.style&&"visible"!=(a=i.getComputedStyle(h)).overflow&&(c+=a.borderLeftStyle!=u?f(e,a.borderLeftWidth):0,d+=a.borderTopStyle!=u?f(e,a.borderTopWidth):0):(c=p,d=g)}else(t("opera")||8==t("ie")&&!t("quirks"))&&h&&(c-=(a=i.getComputedStyle(h)).borderLeftStyle!=u?f(e,a.borderLeftWidth):0,d-=a.borderTopStyle!=u?f(e,a.borderTopWidth):0);return{l:c,t:d,w:e.offsetWidth+l.w,h:e.offsetHeight+l.h}},s.getContentBox=function(e,r){e=n.byId(e);var a,o=r||i.getComputedStyle(e),u=e.clientWidth,l=s.getPadExtents(e,o),c=s.getBorderExtents(e,o);return u?(a=e.clientHeight,c.w=c.h=0):(u=e.offsetWidth,a=e.offsetHeight),t("opera")&&(l.l+=c.l,l.t+=c.t),{l:l.l,t:l.t,w:u-l.w-c.w,h:a-l.h-c.h}},s.setContentSize=function(t,e,i){t=n.byId(t);var a=e.w,u=e.h;if(o(t)){var l=s.getPadBorderExtents(t,i);a>=0&&(a+=l.w),u>=0&&(u+=l.h)}r(t,NaN,NaN,a,u)};var l={l:0,t:0,w:0,h:0};return s.setMarginBox=function(e,u,c){e=n.byId(e);var d=c||i.getComputedStyle(e),h=u.w,f=u.h,p=o(e)?l:s.getPadBorderExtents(e,d),g=s.getMarginExtents(e,d);if(t("webkit")&&a(e)){var m=e.style;h>=0&&!m.width&&(m.width="4px"),f>=0&&!m.height&&(m.height="4px")}h>=0&&(h=Math.max(h-p.w-g.w,0)),f>=0&&(f=Math.max(f-p.h-g.h,0)),r(e,u.l,u.t,h,f)},s.isBodyLtr=function(t){return t=t||e.doc,"ltr"==(e.body(t).dir||t.documentElement.dir||"ltr").toLowerCase()},s.docScroll=function(n){n=n||e.doc;var i=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in i?{x:i.pageXOffset,y:i.pageYOffset}:(i=t("quirks")?e.body(n):n.documentElement)&&{x:s.fixIeBiDiScrollLeft(i.scrollLeft||0,n),y:i.scrollTop||0}},t("ie")&&(s.getIeDocumentElementOffset=function(n){var i=(n=n||e.doc).documentElement;if(t("ie")<8){var r=i.getBoundingClientRect(),a=r.left,o=r.top;return t("ie")<7&&(a+=i.clientLeft,o+=i.clientTop),{x:a<0?0:a,y:o<0?0:o}}return{x:0,y:0}}),s.fixIeBiDiScrollLeft=function(n,i){i=i||e.doc;var r=t("ie");if(r&&!s.isBodyLtr(i)){var a=t("quirks"),o=a?e.body(i):i.documentElement,u=e.global;return 6==r&&!a&&u.frameElement&&o.scrollHeight>o.clientHeight&&(n+=o.clientLeft),r<8||a?n+o.clientWidth-o.scrollWidth:-n}return n},s.position=function(i,r){i=n.byId(i);var a=e.body(i.ownerDocument),o=i.getBoundingClientRect();if(o={x:o.left,y:o.top,w:o.right-o.left,h:o.bottom-o.top},t("ie")<9){var u=s.getIeDocumentElementOffset(i.ownerDocument);o.x-=u.x+(t("quirks")?a.clientLeft+a.offsetLeft:0),o.y-=u.y+(t("quirks")?a.clientTop+a.offsetTop:0)}if(r){var l=s.docScroll(i.ownerDocument);o.x+=l.x,o.y+=l.y}return o},s.getMarginSize=function(t,e){t=n.byId(t);var r=s.getMarginExtents(t,e||i.getComputedStyle(t)),a=t.getBoundingClientRect();return{w:a.right-a.left+r.w,h:a.bottom-a.top+r.h}},s.normalizeEvent=function(e){if("layerX"in e||(e.layerX=e.offsetX,e.layerY=e.offsetY),!t("dom-addeventlistener")){var n=e.target,i=n&&n.ownerDocument||document,r=t("quirks")?i.body:i.documentElement,a=s.getIeDocumentElementOffset(i);e.pageX=e.clientX+s.fixIeBiDiScrollLeft(r.scrollLeft||0,i)-a.x,e.pageY=e.clientY+(r.scrollTop||0)-a.y}},s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[e,n(5),n(9),n(2),n(7),n(23),n(11),n(77)],void 0===(r=function(t,e,n,i,r,a,o,s){var u={},l=0,c=e._scopeName+"attrid";t.names={class:"className",for:"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},t.get=function(e,n){e=r.byId(e);var i=n.toLowerCase();return e[t.names[i]||n]},t.set=function(e,d,h){e=r.byId(e);var f=arguments.length;if(2==f&&"string"!=typeof d){for(var p in d)t.set(e,p,d[p]);return e}var g=d.toLowerCase(),m=t.names[g]||d;if("style"==m&&"string"!=typeof h)return a.set(e,h),e;if("innerHTML"==m)return n("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(o.empty(e),e.appendChild(o.toDom(h,e.ownerDocument))):e[m]=h,e;if(i.isFunction(h)){var v=e[c];v||(v=l++,e[c]=v),u[v]||(u[v]={});var y=u[v][m];if(y)s.disconnect(y);else try{delete e[m]}catch(t){}return h?u[v][m]=s.connect(e,m,h):e[m]=null,e}return e[m]=h,e}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(35),n(34)],void 0===(r=function(t,e){return t("RequestTimeoutError",null,e,{dojoType:"timeout"})}.apply(e,i))||(t.exports=r)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4)],__WEBPACK_AMD_DEFINE_RESULT__=function(has){"use strict";var hasJSON="undefined"!=typeof JSON;if(has.add("json-parse",hasJSON),has.add("json-stringify",hasJSON&&'{"a":1}'==JSON.stringify({a:0},(function(t,e){return e||1}))),has("json-stringify"))return JSON;var escapeString=function(t){return('"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(t,e,n){return"string"==typeof e&&(n=e,e=null),function t(i,r,a){e&&(i=e(a,i));var o,s=_typeof(i);if("number"==s)return isFinite(i)?i+"":"null";if("boolean"==s)return i+"";if(null===i)return"null";if("string"==typeof i)return escapeString(i);if("function"!=s&&"undefined"!=s){if("function"==typeof i.toJSON)return t(i.toJSON(a),r,a);if(i instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,(function(t,e,n){var r=i["getUTC"+e]()+(n?1:0);return r<10?"0"+r:r}));if(i.valueOf()!==i)return t(i.valueOf(),r,a);var u=n?r+n:"",l=n?" ":"",c=n?"\n":"";if(i instanceof Array){var d=i.length,h=[];for(a=0;a<d;a++)"string"!=typeof(o=t(i[a],u,a))&&(o="null"),h.push(c+u+o);return"["+h.join(",")+c+r+"]"}var f=[];for(a in i){var p;if(i.hasOwnProperty(a)){if("number"==typeof a)p='"'+a+'"';else{if("string"!=typeof a)continue;p=escapeString(a)}if("string"!=typeof(o=t(i[a],u,a)))continue;f.push(c+u+p+":"+l+o)}}return"{"+f.join(",")+c+r+"}"}}(t,"","")}}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(t,e,n){var i,r;i=[n(5),n(9)],void 0===(r=function(t,e){return t.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")&&!e("air")?e("safari")?91:224:17}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(5),n(3),n(4),n(7),n(17)],void 0===(r=function(t,e,n,i,r){function a(t,n){var r=function(r,a){return e(r,t,(function(t){return n?n(t,a):i.isDescendant(t.relatedTarget,r)?void 0:a.call(this,t)}))};return r.bubble=function(e){return a(t,(function(t,n){var i=e(t.target),r=t.relatedTarget;if(i&&i!=(r&&1==r.nodeType&&e(r)))return n.call(i,t)}))},r}var o,s;return n.add("dom-quirks",r.doc&&"BackCompat"==r.doc.compatMode),n.add("events-mouseenter",r.doc&&"onmouseenter"in r.doc.createElement("div")),n.add("events-mousewheel",r.doc&&"onmousewheel"in r.doc),o=n("dom-quirks")&&n("ie")||!n("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(t,e){return t.button&e},isLeft:function(t){return 1&t.button},isMiddle:function(t){return 4&t.button},isRight:function(t){return 2&t.button}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(t,e){return t.button==e},isLeft:function(t){return 0==t.button},isMiddle:function(t){return 1==t.button},isRight:function(t){return 2==t.button}},t.mouseButtons=o,s=n("events-mousewheel")?"mousewheel":function(t,n){return e(t,"DOMMouseScroll",(function(t){t.wheelDelta=-t.detail,n.call(this,t)}))},{_eventHandler:a,enter:a("mouseover"),leave:a("mouseout"),wheel:s,isLeft:o.isLeft,isMiddle:o.isMiddle,isRight:o.isRight}}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(5),n(4),n(7),n(3),n(6),n(2),n(55),n(89)],void 0===(r=function(t,e,n,i,r,a,o,s){"use strict";function u(t,e){var i=function(i,r){if("string"==typeof r&&!(r=n.byId(r)))return new e([]);var a="string"==typeof i?t(i,r):i?i.end&&i.on?i:[i]:[];return a.end&&a.on?a:new e(a)};if(i.matches=t.match||function(t,e,n){return i.filter([t],e,n).length>0},i.filter=t.filter||function(t,e,n){return i(e,n).filter((function(e){return r.indexOf(t,e)>-1}))},"function"!=typeof t){var a=t.search;t=function(t,e){return a(e||document,t)}}return i}e.add("array-extensible",(function(){return 1==a.delegate([],{length:1}).length&&!e("bug-for-in-skips-shadowed")}));var l=Array.prototype,c=l.slice,d=l.concat,h=r.forEach,f=function(e,n,i){return n=[0].concat(c.call(n,0)),i=i||t.global,function(t){return n[0]=t,e.apply(i,n)}},p=function(t){var n=this instanceof g&&e("array-extensible");"number"==typeof t&&(t=Array(t));var i=t&&"length"in t?t:arguments;if(n||!i.sort){for(var r=n?this:[],o=r.length=i.length,s=0;s<o;s++)r[s]=i[s];if(n)return r;i=r}return a._mixin(i,m),i._NodeListCtor=function(t){return g(t)},i},g=p,m=g.prototype=e("array-extensible")?[]:{};g._wrap=m._wrap=function(t,e,n){var i=new(n||this._NodeListCtor||g)(t);return e?i._stash(e):i},g._adaptAsMap=function(t,e){return function(){return this.map(f(t,arguments,e))}},g._adaptAsForEach=function(t,e){return function(){return this.forEach(f(t,arguments,e)),this}},g._adaptAsFilter=function(t,e){return function(){return this.filter(f(t,arguments,e))}},g._adaptWithCondition=function(e,n,i){return function(){var r=arguments,a=f(e,r,i);return n.call(i||t.global,r)?this.map(a):(this.forEach(a),this)}},h(["slice","splice"],(function(t){var e=l[t];m[t]=function(){return this._wrap(e.apply(this,arguments),"slice"==t?this:null)}})),h(["indexOf","lastIndexOf","every","some"],(function(e){var n=r[e];m[e]=function(){return n.apply(t,[this].concat(c.call(arguments,0)))}})),a.extend(p,{constructor:g,_NodeListCtor:g,toString:function(){return this.join(",")},_stash:function(t){return this._parent=t,this},on:function(t,e){var n=this.map((function(n){return i(n,t,e)}));return n.remove=function(){for(var t=0;t<n.length;t++)n[t].remove()},n},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(t){var e=c.call(this,0),n=r.map(arguments,(function(t){return c.call(t,0)}));return this._wrap(d.apply(e,n),this)},map:function(t,e){return this._wrap(r.map(this,t,e),this)},forEach:function(t,e){return h(this,t,e),this},filter:function(t){var e=arguments,n=this,i=0;if("string"==typeof t){if(n=v._filterResult(this,e[0]),1==e.length)return n._stash(this);i=1}return this._wrap(r.filter(n,e[i],e[i+1]),this)},instantiate:function(t,e){var n=a.isFunction(t)?t:a.getObject(t);return e=e||{},this.forEach((function(t){new n(e,t)}))},at:function(){var t=new this._NodeListCtor(0);return h(arguments,(function(e){e<0&&(e=this.length+e),this[e]&&t.push(this[e])}),this),t._stash(this)}});var v=u(s,p);return t.query=u(s,(function(t){return p(t)})),v.load=function(t,e,n){o.load(t,e,(function(t){n(u(t,p))}))},t._filterQueryResult=v._filterResult=function(t,e,n){return new p(v.filter(t,e,n))},t.NodeList=v.NodeList=p,v}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(83),n(5),n(6),n(4),n(55)],void 0===(r=function(t,e,n,i){function r(t){var e=s[t.options.handleAs];return t.data=e?e(t):t.data||t.text,t}var a;if(i.add("activex","undefined"!=typeof ActiveXObject),i.add("dom-parser",(function(t){return"DOMParser"in t})),i("activex")){var o=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];a=function(t){var e=t.data;if(e&&i("dom-qsa2.1")&&!e.querySelectorAll&&i("dom-parser")&&(e=(new DOMParser).parseFromString(t.text,"application/xml")),!e||!e.documentElement){var r=t.text;n.some(o,(function(t){try{var n=new ActiveXObject(t);n.async=!1,n.loadXML(r),e=n}catch(t){return!1}return!0}))}return e}}var s={javascript:function(t){return e.eval(t.text||"")},json:function(e){return t.parse(e.text||null)},xml:a};return r.register=function(t,e){s[t]=e},r}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(53),n(82),n(24),n(6),n(17),n(56)],void 0===(r=function(t,e,n,i,r,a){function o(){for(var t,n=+new Date,i=0;i<l.length&&(t=l[i]);i++){var r=t.response,a=r.options;t.isCanceled&&t.isCanceled()||t.isValid&&!t.isValid(r)?(l.splice(i--,1),s._onAction&&s._onAction()):t.isReady&&t.isReady(r)?(l.splice(i--,1),t.handleResponse(r),s._onAction&&s._onAction()):t.startTime&&t.startTime+(a.timeout||0)<n&&(l.splice(i--,1),t.cancel(new e("Timeout exceeded",r)),s._onAction&&s._onAction())}s._onInFlight&&s._onInFlight(t),l.length||(clearInterval(u),u=null)}function s(t){t.response.options.timeout&&(t.startTime=+new Date),t.isFulfilled()||(l.push(t),u||(u=setInterval(o,50)),t.response.options.sync&&o())}var u=null,l=[];return s.cancelAll=function(){try{i.forEach(l,(function(t){try{t.cancel(new n("All requests canceled."))}catch(t){}}))}catch(t){}},r&&a&&r.doc.attachEvent&&a(r.global,"unload",(function(){s.cancelAll()})),s}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(4),n(5)],void 0===(r=function(t,e){"use strict";var n=document.createElement("div"),i=n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector,r=n.querySelectorAll,a=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;t.add("dom-matches-selector",!!i),t.add("dom-qsa",!!r);var o=function t(n,i){if(l&&n.indexOf(",")>-1)return l(n,i);var a=i?i.ownerDocument||i:e.doc||document,o=(r?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(n);if(i=i||a,o){if(o[2]){if(!(d=e.byId?e.byId(o[2],a):a.getElementById(o[2]))||o[1]&&o[1]!=d.tagName.toLowerCase())return[];if(i!=a)for(var c=d;c!=i;)if(!(c=c.parentNode))return[];return o[3]?t(o[3],d):[d]}if(o[3]&&i.getElementsByClassName)return i.getElementsByClassName(o[4]);var d;if(o[5]){if(d=i.getElementsByTagName(o[5]),!o[4]&&!o[6])return d;n=(o[4]||"")+o[6]}}if(r)return 1===i.nodeType&&"object"!==i.nodeName.toLowerCase()?s(i,n,i.querySelectorAll):i.querySelectorAll(n);d||(d=i.getElementsByTagName("*"));for(var h=[],f=0,p=d.length;f<p;f++){var g=d[f];1==g.nodeType&&u(g,n,i)&&h.push(g)}return h},s=function(t,e,n){var i=t,r=t.getAttribute("id"),o=r||"__dojo__",s=t.parentNode,u=/^\s*[+~]/.test(e);if(u&&!s)return[];r?o=o.replace(/'/g,"\\$&"):t.setAttribute("id",o),u&&s&&(t=t.parentNode);for(var l=e.match(a),c=0;c<l.length;c++)l[c]="[id='"+o+"'] "+l[c];e=l.join(",");try{return n.call(t,e)}finally{r||i.removeAttribute("id")}};if(!t("dom-matches-selector"))var u=function(){function t(t,e,n){var i=e.charAt(0);'"'!=i&&"'"!=i||(e=e.slice(1,-1)),e=e.replace(/\\/g,"");var r=s[n||""];return function(n){var i=n.getAttribute(t);return i&&r(i,e)}}function e(t){return function(e,n){for(;(e=e.parentNode)!=n;)if(t(e,n))return!0}}function i(t){return function(e,n){return e=e.parentNode,t?e!=n&&t(e,n):e==n}}function r(t,e){return t?function(n,i){return e(n)&&t(n,i)}:e}var a="div"==n.tagName?"toLowerCase":"toUpperCase",o={"":function(t){return t=t[a](),function(e){return e.tagName==t}},".":function(t){var e=" "+t+" ";return function(n){return n.className.indexOf(t)>-1&&(" "+n.className+" ").indexOf(e)>-1}},"#":function(t){return function(e){return e.id==t}}},s={"^=":function(t,e){return 0==t.indexOf(e)},"*=":function(t,e){return t.indexOf(e)>-1},"$=":function(t,e){return t.substring(t.length-e.length,t.length)==e},"~=":function(t,e){return(" "+t+" ").indexOf(" "+e+" ")>-1},"|=":function(t,e){return 0==(t+"-").indexOf(e+"-")},"=":function(t,e){return t==e},"":function(t,e){return!0}},u={};return function(n,a,s){var l=u[a];if(!l){if(a.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,(function(n,a,s,u,c,d,h){return u?l=r(l,o[s||""](u.replace(/\\/g,""))):a?l=(" "==a?e:i)(l):c&&(l=r(l,t(c,h,d))),""})))throw new Error("Syntax error in query");if(!l)return!0;u[a]=l}return l(n,s)}}();if(!t("dom-qsa"))var l=function(t,e){for(var n=t.match(a),i=[],r=0;r<n.length;r++){(t=new String(n[r].replace(/\s*$/,""))).indexOf=escape;for(var s=o(t,e),u=0,l=s.length;u<l;u++){var c=s[u];i[c.sourceIndex]=c}}var d=[];for(r in i)d.push(i[r]);return d};return o.match=i?function(t,e,n){return n&&9!=n.nodeType?s(n,e,(function(e){return i.call(t,e)})):i.call(t,e)}:u,o}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(32),n(25)],void 0===(r=function(t,e){"use strict";return function(n,i,r,a){var o=n&&"function"==typeof n.then,s=o&&n instanceof e;if(!o)return arguments.length>1?i?i(n):n:(new t).resolve(n);if(!s){var u=new t(n.cancel);n.then(u.resolve,u.reject,u.progress),n=u.promise}return i||r||a?n.then(i,r,a):n}}.apply(e,i))||(t.exports=r)},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"object"==_typeof(t)&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(a(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(r(n))for(s=Array.prototype.slice.call(arguments,1),o=(l=n.slice()).length,u=0;u<o;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var o;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,a,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(n=this._events[t]).length,a=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){!function(){var n={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var i="string"==typeof t.initial?{state:t.initial}:t.initial,r=t.terminal||t.final,a=e||t.target||{},o=t.events||[],s=t.callbacks||{},u={},l={},c=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[n.WILDCARD];u[t.name]=u[t.name]||{};for(var i=0;i<e.length;i++)l[e[i]]=l[e[i]]||[],l[e[i]].push(t.name),u[t.name][e[i]]=t.to||e[i];t.to&&(l[t.to]=l[t.to]||[])};i&&(i.event=i.event||"startup",c({name:i.event,from:"none",to:i.state}));for(var d=0;d<o.length;d++)c(o[d]);for(var h in u)u.hasOwnProperty(h)&&(a[h]=n.buildEvent(h,u[h]));for(var h in s)s.hasOwnProperty(h)&&(a[h]=s[h]);return a.current="none",a.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},a.can=function(t){return!this.transition&&void 0!==u[t]&&(u[t].hasOwnProperty(this.current)||u[t].hasOwnProperty(n.WILDCARD))},a.cannot=function(t){return!this.can(t)},a.transitions=function(){return(l[this.current]||[]).concat(l[n.WILDCARD]||[])},a.isFinished=function(){return this.is(r)},a.error=t.error||function(t,e,n,i,r,a,o){throw o||a},a.states=function(){return Object.keys(l).sort()},i&&!i.defer&&a[i.event](),a},doCallback:function(t,e,i,r,a,o){if(e)try{return e.apply(t,[i,r,a].concat(o))}catch(e){return t.error(i,r,a,o,n.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,i,r,a){return n.doCallback(t,t.onbeforeevent,e,i,r,a)},afterAnyEvent:function(t,e,i,r,a){return n.doCallback(t,t.onafterevent||t.onevent,e,i,r,a)},leaveAnyState:function(t,e,i,r,a){return n.doCallback(t,t.onleavestate,e,i,r,a)},enterAnyState:function(t,e,i,r,a){return n.doCallback(t,t.onenterstate||t.onstate,e,i,r,a)},changeState:function(t,e,i,r,a){return n.doCallback(t,t.onchangestate,e,i,r,a)},beforeThisEvent:function(t,e,i,r,a){return n.doCallback(t,t["onbefore"+e],e,i,r,a)},afterThisEvent:function(t,e,i,r,a){return n.doCallback(t,t["onafter"+e]||t["on"+e],e,i,r,a)},leaveThisState:function(t,e,i,r,a){return n.doCallback(t,t["onleave"+i],e,i,r,a)},enterThisState:function(t,e,i,r,a){return n.doCallback(t,t["onenter"+r]||t["on"+r],e,i,r,a)},beforeEvent:function(t,e,i,r,a){if(!1===n.beforeThisEvent(t,e,i,r,a)||!1===n.beforeAnyEvent(t,e,i,r,a))return!1},afterEvent:function(t,e,i,r,a){n.afterThisEvent(t,e,i,r,a),n.afterAnyEvent(t,e,i,r,a)},leaveState:function(t,e,i,r,a){var o=n.leaveThisState(t,e,i,r,a),s=n.leaveAnyState(t,e,i,r,a);return!1!==o&&!1!==s&&(n.ASYNC===o||n.ASYNC===s?n.ASYNC:void 0)},enterState:function(t,e,i,r,a){n.enterThisState(t,e,i,r,a),n.enterAnyState(t,e,i,r,a)},buildEvent:function(t,e){return function(){var i=this.current,r=e[i]||(e[n.WILDCARD]!=n.WILDCARD?e[n.WILDCARD]:i)||i,a=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,i,r,a,n.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,i,r,a,n.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===n.beforeEvent(this,t,i,r,a))return n.Result.CANCELLED;if(i===r)return n.afterEvent(this,t,i,r,a),n.Result.NOTRANSITION;var o=this;this.transition=function(){return o.transition=null,o.current=r,n.enterState(o,t,i,r,a),n.changeState(o,t,i,r,a),n.afterEvent(o,t,i,r,a),n.Result.SUCCEEDED},this.transition.cancel=function(){o.transition=null,n.afterEvent(o,t,i,r,a)};var s=n.leaveState(this,t,i,r,a);return!1===s?(this.transition=null,n.Result.CANCELLED):n.ASYNC===s?n.Result.PENDING:this.transition?this.transition():void 0}}};void 0!==t&&t.exports&&(e=t.exports=n),e.StateMachine=n}()},function(t,e){t.exports={gettingStationInformation:"Obteniendo informaciÃ³n de la estaciÃ³n...",paused:"Pausado",onAir:"En el aire",disconnected:"Desconectado",streamUnavailable:"TransmisiÃ³n no disponible",buffering:"Buffering",connecting:"ConexiÃ³n de transmisiÃ³n en vivo en progreso...",reconnecting:"ConexiÃ³n de transmisiÃ³n en vivo en progreso...",seekfailed:"OperaciÃ³n imposible",seekinvalidtime:"OperaciÃ³n imposible: tiempo no vÃ¡lido",ended:"Terminado",pause:"Pausado",play:"En vivo",stop:"Desconectado",error:"Erro",streamGeoBlocked:"Lo sentimos, este contenido no estÃ¡ disponible en su Ã¡rea",stationNotFound:"No se encontrÃ³ la estaciÃ³n",flashPluginOutOfDate:"Su versiÃ³n Flash plugin detectada es obsoleta. La versiÃ³n mÃ­nima requerida es: 10.2.0",browserNotSupported:"Su navegador no es compatible con la funciÃ³n HTML5",playbackNotAllowed:"No se permite la reproducciÃ³n de medios en el contexto o situaciÃ³n actual",tritonListenLink:"El reproductor OnDemand no se puede usar con enlaces de escucha Triton"}},function(t,e){t.exports={gettingStationInformation:"Chargement des informations de la station...",paused:"En pause",onAir:"En ondes",disconnected:"DÃ©connectÃ©",streamUnavailable:"Flux indisponible",buffering:"Mise en mÃ©moire tampon",connecting:"Connexion en cours...",reconnecting:"Connexion en cours...",seekfailed:"OpÃ©ration impossible",seekinvalidtime:"OpÃ©ration impossible : temps invalide",ended:"TerminÃ©",pause:"En pause",play:"En lecture",stop:"DÃ©connectÃ©",error:"Erreur",streamGeoBlocked:"DÃ©solÃ©, ce flux n'est pas disponible dans votre rÃ©gion",stationNotFound:"Station inexistante",flashPluginOutOfDate:"La version de votre plugin Flash est obsolÃ¨te. La version minimale requise est: 10.2.0",browserNotSupported:"Votre navigateur ne supporte pas HTML5",playbackNotAllowed:"La lecture de contenu multimÃ©dia dans le contexte ou la situation actuels n'est pas autorisÃ©e",tritonListenLink:"Le lecteur OnDemand ne peut pas Ãªtre utilisÃ© avec les liens d'Ã©coute Triton"}},function(t,e){t.exports={gettingStationInformation:"Obtendo informaÃ§Ãµes da estaÃ§Ã£o...",paused:"Em Pausa",onAir:"No Ar",disconnected:"Desconectado",streamUnavailable:"Streaming nÃ£o disponÃ­vel",buffering:"Em Buffer",connecting:"ConexÃ£o com stream ao vivo em andamento...",reconnecting:"ConexÃ£o com stream ao vivo em andamento...",seekfailed:"OperaÃ§Ã£o impossÃ­vel",seekinvalidtime:"OperaÃ§Ã£o impossÃ­vel: hora invÃ¡lida",ended:"Terminou",pause:"Pausa",play:"Tocando",stop:"Interrompido",error:"Erro",streamGeoBlocked:"Infelizmente, este conteÃºdo nÃ£o estÃ¡ disponÃ­vel na sua Ã¡rea",stationNotFound:"EstaÃ§Ã£o nÃ£o encontrada",flashPluginOutOfDate:"A versÃ£o detectada do seu plug-in Flash estÃ¡ desatualizada. A versÃ£o mÃ­nima necessÃ¡ria Ã©: 10.2.0",browserNotSupported:"Seu navegador nÃ£o oferece suporte para o recurso HTML5",playbackNotAllowed:"A reproduÃ§Ã£o de mÃ­dia no contexto ou situaÃ§Ã£o atual nÃ£o Ã© permitida",tritonListenLink:"O OnDemand player nÃ£o pode ser usado com links de escuta do Triton"}},function(t,e,n){(function(e,n){
/*!
	 *
	 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
	 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(e){"use strict";"function"==typeof bootstrap?bootstrap("promise",e):t.exports=e()}((function(){"use strict";function t(t){return function(){return O.apply(t,arguments)}}function i(t){return"[object StopIteration]"===G(t)||t instanceof L}function r(t,e){if(x&&e.stack&&"object"==_typeof(t)&&null!==t&&t.stack){for(var n=[],i=e;i;i=i.source)i.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>i.stackCounter)&&(j(t,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),n.unshift(i.stack));n.unshift(t.stack);var r=function(t){for(var e=t.split("\n"),n=[],i=0;i<e.length;++i){var r=e[i];s(r)||a(r)||!r||n.push(r)}return n.join("\n")}(n.join("\n"+q+"\n"));j(t,"stack",{value:r,configurable:!0})}}function a(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function o(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(t);return i?[i[1],Number(i[2])]:void 0}function s(t){var e=o(t);if(!e)return!1;var n=e[0],i=e[1];return n===D&&i>=R&&i<=$}function u(){if(x)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=o(t[0].indexOf("@")>0?t[1]:t[2]);if(!e)return;return D=e[0],e[1]}}function l(t){return t instanceof f?t:v(t)?function(t){var e=c();return l.nextTick((function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}})),e.promise}(t):T(t)}function c(){function t(t){e=t,l.longStackSupport&&x&&(a.source=t),M(n,(function(e,n){l.nextTick((function(){t.promiseDispatch.apply(t,n)}))}),void 0),n=void 0,i=void 0}var e,n=[],i=[],r=B(c.prototype),a=B(f.prototype);if(a.promiseDispatch=function(t,r,a){var o=N(arguments);n?(n.push(o),"when"===r&&a[1]&&i.push(a[1])):l.nextTick((function(){e.promiseDispatch.apply(e,o)}))},a.valueOf=function(){if(n)return a;var t=g(e);return m(t)&&(e=t),t},a.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&x)try{throw new Error}catch(t){a.stack=t.stack.substring(t.stack.indexOf("\n")+1),a.stackCounter=W++}return r.promise=a,r.resolve=function(n){e||t(l(n))},r.fulfill=function(n){e||t(T(n))},r.reject=function(n){e||t(E(n))},r.notify=function(t){e||M(i,(function(e,n){l.nextTick((function(){n(t)}))}),void 0)},r}function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=c();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function h(t){return d((function(e,n){for(var i=0,r=t.length;i<r;i++)l(t[i]).then(e,n)}))}function f(t,e,n){void 0===e&&(e=function(t){return E(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=B(f.prototype);if(i.promiseDispatch=function(n,r,a){var o;try{o=t[r]?t[r].apply(i,a):e.call(i,r,a)}catch(t){o=E(t)}n&&n(o)},i.inspect=n,n){var r=n();"rejected"===r.state&&(i.exception=r.reason),i.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?i:t.value}}return i}function p(t,e,n,i){return l(t).then(e,n,i)}function g(t){if(m(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function m(t){return t instanceof f}function v(t){return function(t){return t===Object(t)}(t)&&"function"==typeof t.then}function y(){K.length=0,Y.length=0,X||(X=!0)}function _(t,n){X&&("object"==_typeof(e)&&"function"==typeof e.emit&&l.nextTick.runAfter((function(){-1!==F(Y,t)&&(e.emit("unhandledRejection",n,t),z.push(t))})),Y.push(t),n&&void 0!==n.stack?K.push(n.stack):K.push("(no stack) "+n))}function b(t){if(X){var n=F(Y,t);-1!==n&&("object"==_typeof(e)&&"function"==typeof e.emit&&l.nextTick.runAfter((function(){var i=F(z,t);-1!==i&&(e.emit("rejectionHandled",K[n],t),z.splice(i,1))})),Y.splice(n,1),K.splice(n,1))}}function E(t){var e=f({when:function(e){return e&&b(this),e?e(t):this}},(function(){return this}),(function(){return{state:"rejected",reason:t}}));return _(e,t),e}function T(t){return f({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null==e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return V(t)}},void 0,(function(){return{state:"fulfilled",value:t}}))}function A(t,e,n){return l(t).spread(e,n)}function S(t,e,n){return l(t).dispatch(e,n)}function w(t){return p(t,(function(t){var e=0,n=c();return M(t,(function(i,r,a){var o;m(r)&&"fulfilled"===(o=r.inspect()).state?t[a]=o.value:(++e,p(r,(function(i){t[a]=i,0==--e&&n.resolve(t)}),n.reject,(function(t){n.notify({index:a,value:t})})))}),void 0),0===e&&n.resolve(t),n.promise}))}function k(t){if(0===t.length)return l.resolve();var e=l.defer(),n=0;return M(t,(function(i,r,a){var o=t[a];n++,p(o,(function(t){e.resolve(t)}),(function(t){if(0==--n){var i=t||new Error(""+t);i.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+i.message,e.reject(i)}}),(function(t){e.notify({index:a,value:t})}))}),void 0),e.promise}function C(t){return p(t,(function(t){return t=U(t,l),p(w(U(t,(function(t){return p(t,I,I)}))),(function(){return t}))}))}var x=!1;try{throw new Error}catch(t){x=!!t.stack}var D,L,R=u(),I=function(){},P=function(){function t(){for(var t,e;r.next;)t=(r=r.next).task,r.task=void 0,(e=r.domain)&&(r.domain=void 0,e.enter()),i(t,e);for(;l.length;)i(t=l.pop());o=!1}function i(e,n){try{e()}catch(e){if(u)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),e;setTimeout((function(){throw e}),0)}n&&n.exit()}var r={task:void 0,next:null},a=r,o=!1,s=void 0,u=!1,l=[];if(P=function(t){a=a.next={task:t,domain:u&&e.domain,next:null},o||(o=!0,s())},"object"==_typeof(e)&&"[object process]"===e.toString()&&e.nextTick)u=!0,s=function(){e.nextTick(t)};else if("function"==typeof n)s="undefined"!=typeof window?n.bind(window,t):function(){n(t)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){s=d,c.port1.onmessage=t,t()};var d=function(){c.port2.postMessage(0)};s=function(){setTimeout(t,0),d()}}else s=function(){setTimeout(t,0)};return P.runAfter=function(t){l.push(t),o||(o=!0,s())},P}(),O=Function.call,N=t(Array.prototype.slice),M=t(Array.prototype.reduce||function(t,e){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t(e,this[n],n));return e}),F=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),U=t(Array.prototype.map||function(t,e){var n=this,i=[];return M(n,(function(r,a,o){i.push(t.call(e,a,o,n))}),void 0),i}),B=Object.create||function(t){function e(){}return e.prototype=t,new e},j=Object.defineProperty||function(t,e,n){return t[e]=n.value,t},H=t(Object.prototype.hasOwnProperty),V=Object.keys||function(t){var e=[];for(var n in t)H(t,n)&&e.push(n);return e},G=t(Object.prototype.toString);L="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var q="From previous event:";l.resolve=l,l.nextTick=P,l.longStackSupport=!1;var W=1;"object"==_typeof(e)&&e&&e.env&&e.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=c,c.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(N(arguments,1)):t.resolve(n)}},l.Promise=d,l.promise=d,d.race=h,d.all=w,d.reject=E,d.resolve=l,l.passByCopy=function(t){return t},f.prototype.passByCopy=function(){return this},l.join=function(t,e){return l(t).join(e)},f.prototype.join=function(t){return l([this,t]).spread((function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)}))},l.race=h,f.prototype.race=function(){return this.then(l.race)},l.makePromise=f,f.prototype.toString=function(){return"[object Promise]"},f.prototype.then=function(t,e,n){function i(e){try{return"function"==typeof t?t(e):e}catch(t){return E(t)}}function a(t){return"function"==typeof n?n(t):t}var o=this,s=c(),u=!1;return l.nextTick((function(){o.promiseDispatch((function(t){u||(u=!0,s.resolve(i(t)))}),"when",[function(t){u||(u=!0,s.resolve(function(t){if("function"==typeof e){r(t,o);try{return e(t)}catch(t){return E(t)}}return E(t)}(t)))}])})),o.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=a(t)}catch(t){if(n=!0,!l.onerror)throw t;l.onerror(t)}n||s.notify(e)}]),s.promise},l.tap=function(t,e){return l(t).tap(e)},f.prototype.tap=function(t){return t=l(t),this.then((function(e){return t.fcall(e).thenResolve(e)}))},l.when=p,f.prototype.thenResolve=function(t){return this.then((function(){return t}))},l.thenResolve=function(t,e){return l(t).thenResolve(e)},f.prototype.thenReject=function(t){return this.then((function(){throw t}))},l.thenReject=function(t,e){return l(t).thenReject(e)},l.nearer=g,l.isPromise=m,l.isPromiseAlike=v,l.isPending=function(t){return m(t)&&"pending"===t.inspect().state},f.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=function(t){return!m(t)||"fulfilled"===t.inspect().state},f.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=function(t){return m(t)&&"rejected"===t.inspect().state},f.prototype.isRejected=function(){return"rejected"===this.inspect().state};var K=[],Y=[],z=[],X=!0;l.resetUnhandledRejections=y,l.getUnhandledReasons=function(){return K.slice()},l.stopUnhandledRejectionTracking=function(){y(),X=!1},y(),l.reject=E,l.fulfill=T,l.master=function(t){return f({isDef:function(){}},(function(e,n){return S(t,e,n)}),(function(){return l(t).inspect()}))},l.spread=A,f.prototype.spread=function(t,e){return this.all().then((function(e){return t.apply(void 0,e)}),e)},l.async=function(t){return function(){function e(t,e){var o;if("undefined"==typeof StopIteration){try{o=n[t](e)}catch(t){return E(t)}return o.done?l(o.value):p(o.value,r,a)}try{o=n[t](e)}catch(t){return i(t)?l(t.value):E(t)}return p(o,r,a)}var n=t.apply(this,arguments),r=e.bind(e,"next"),a=e.bind(e,"throw");return r()}},l.spawn=function(t){l.done(l.async(t)())},l.return=function(t){throw new L(t)},l.promised=function(t){return function(){return A([this,w(arguments)],(function(e,n){return t.apply(e,n)}))}},l.dispatch=S,f.prototype.dispatch=function(t,e){var n=this,i=c();return l.nextTick((function(){n.promiseDispatch(i.resolve,t,e)})),i.promise},l.get=function(t,e){return l(t).dispatch("get",[e])},f.prototype.get=function(t){return this.dispatch("get",[t])},l.set=function(t,e,n){return l(t).dispatch("set",[e,n])},f.prototype.set=function(t,e){return this.dispatch("set",[t,e])},l.del=l.delete=function(t,e){return l(t).dispatch("delete",[e])},f.prototype.del=f.prototype.delete=function(t){return this.dispatch("delete",[t])},l.mapply=l.post=function(t,e,n){return l(t).dispatch("post",[e,n])},f.prototype.mapply=f.prototype.post=function(t,e){return this.dispatch("post",[t,e])},l.send=l.mcall=l.invoke=function(t,e){return l(t).dispatch("post",[e,N(arguments,2)])},f.prototype.send=f.prototype.mcall=f.prototype.invoke=function(t){return this.dispatch("post",[t,N(arguments,1)])},l.fapply=function(t,e){return l(t).dispatch("apply",[void 0,e])},f.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},l.try=l.fcall=function(t){return l(t).dispatch("apply",[void 0,N(arguments,1)])},f.prototype.fcall=function(){return this.dispatch("apply",[void 0,N(arguments)])},l.fbind=function(t){var e=l(t),n=N(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(N(arguments))])}},f.prototype.fbind=function(){var t=this,e=N(arguments);return function(){return t.dispatch("apply",[this,e.concat(N(arguments))])}},l.keys=function(t){return l(t).dispatch("keys",[])},f.prototype.keys=function(){return this.dispatch("keys",[])},l.all=w,f.prototype.all=function(){return w(this)},l.any=k,f.prototype.any=function(){return k(this)},l.allResolved=function(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}(C,"allResolved","allSettled"),f.prototype.allResolved=function(){return C(this)},l.allSettled=function(t){return l(t).allSettled()},f.prototype.allSettled=function(){return this.then((function(t){return w(U(t,(function(t){function e(){return t.inspect()}return(t=l(t)).then(e,e)})))}))},l.fail=l.catch=function(t,e){return l(t).then(void 0,e)},f.prototype.fail=f.prototype.catch=function(t){return this.then(void 0,t)},l.progress=function(t,e){return l(t).then(void 0,void 0,e)},f.prototype.progress=function(t){return this.then(void 0,void 0,t)},l.fin=l.finally=function(t,e){return l(t).finally(e)},f.prototype.fin=f.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=l(t),this.then((function(e){return t.fcall().then((function(){return e}))}),(function(e){return t.fcall().then((function(){throw e}))}))},l.done=function(t,e,n,i){return l(t).done(e,n,i)},f.prototype.done=function(t,n,i){var a=function(t){l.nextTick((function(){if(r(t,o),!l.onerror)throw t;l.onerror(t)}))},o=t||n||i?this.then(t,n,i):this;"object"==_typeof(e)&&e&&e.domain&&(a=e.domain.bind(a)),o.then(void 0,a)},l.timeout=function(t,e,n){return l(t).timeout(e,n)},f.prototype.timeout=function(t,e){var n=c(),i=setTimeout((function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),n.reject(e)}),t);return this.then((function(t){clearTimeout(i),n.resolve(t)}),(function(t){clearTimeout(i),n.reject(t)}),n.notify),n.promise},l.delay=function(t,e){return void 0===e&&(e=t,t=void 0),l(t).delay(e)},f.prototype.delay=function(t){return this.then((function(e){var n=c();return setTimeout((function(){n.resolve(e)}),t),n.promise}))},l.nfapply=function(t,e){return l(t).nfapply(e)},f.prototype.nfapply=function(t){var e=c(),n=N(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfcall=function(t){var e=N(arguments,1);return l(t).nfapply(e)},f.prototype.nfcall=function(){var t=N(arguments),e=c();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=N(arguments,1);return function(){var n=e.concat(N(arguments)),i=c();return n.push(i.makeNodeResolver()),l(t).fapply(n).fail(i.reject),i.promise}},f.prototype.nfbind=f.prototype.denodeify=function(){var t=N(arguments);return t.unshift(this),l.denodeify.apply(void 0,t)},l.nbind=function(t,e){var n=N(arguments,2);return function(){function i(){return t.apply(e,arguments)}var r=n.concat(N(arguments)),a=c();return r.push(a.makeNodeResolver()),l(i).fapply(r).fail(a.reject),a.promise}},f.prototype.nbind=function(){var t=N(arguments,0);return t.unshift(this),l.nbind.apply(void 0,t)},l.nmapply=l.npost=function(t,e,n){return l(t).npost(e,n)},f.prototype.nmapply=f.prototype.npost=function(t,e){var n=N(e||[]),i=c();return n.push(i.makeNodeResolver()),this.dispatch("post",[t,n]).fail(i.reject),i.promise},l.nsend=l.nmcall=l.ninvoke=function(t,e){var n=N(arguments,2),i=c();return n.push(i.makeNodeResolver()),l(t).dispatch("post",[e,n]).fail(i.reject),i.promise},f.prototype.nsend=f.prototype.nmcall=f.prototype.ninvoke=function(t){var e=N(arguments,1),n=c();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},l.nodeify=function(t,e){return l(t).nodeify(e)},f.prototype.nodeify=function(t){return t?void this.then((function(e){l.nextTick((function(){t(null,e)}))}),(function(e){l.nextTick((function(){t(e)}))})):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var $=u();return l}))}).call(e,n(58),n(99).setImmediate)},function(t,e,n){var i,r;
/*!
	  * $script.js JS loader & dependency manager
	  * https://github.com/ded/script.js
	  * (c) Dustin Diaz 2014 | License MIT
	  */!function(a,o){void 0!==t&&t.exports?t.exports=o():void 0===(r="function"==typeof(i=o)?i.call(e,n,e,t):i)||(t.exports=r)}(0,(function(){function t(t,e){for(var n=0,i=t.length;n<i;++n)if(!e(t[n]))return u;return 1}function e(e,n){t(e,(function(t){return!n(t)}))}function n(a,o,s){function u(t){return t.call?t():h[t]}function c(){if(!--y)for(var n in h[v]=1,m&&m(),p)t(n.split("|"),u)&&!e(p[n],u)&&(p[n]=[])}a=a[l]?a:[a];var d=o&&o.call,m=d?o:s,v=d?a.join(""):o,y=a.length;return setTimeout((function(){e(a,(function t(e,n){return null===e?c():(n||/^https?:\/\//.test(e)||!r||(e=-1===e.indexOf(".js")?r+e+".js":r+e),g[e]?(v&&(f[v]=1),2==g[e]?c():setTimeout((function(){t(e,!0)}),0)):(g[e]=1,v&&(f[v]=1),void i(e,c)))}))}),0),n}function i(t,e){var n,i=o.createElement("script");i.onload=i.onerror=i[d]=function(){i[c]&&!/^c|loade/.test(i[c])||n||(i.onload=i[d]=null,n=1,g[t]=2,e())},i.async=1,i.src=a?t+(-1===t.indexOf("?")?"?":"&")+a:t,s.insertBefore(i,s.lastChild)}var r,a,o=document,s=o.getElementsByTagName("head")[0],u=!1,l="push",c="readyState",d="onreadystatechange",h={},f={},p={},g={};return n.get=i,n.order=function(t,e,i){!function r(a){a=t.shift(),t.length?n(a,r):n(a,e,i)}()},n.path=function(t){r=t},n.urlArgs=function(t){a=t},n.ready=function(i,r,a){i=i[l]?i:[i];var o=[];return!e(i,(function(t){h[t]||o[l](t)}))&&t(i,(function(t){return h[t]}))?r():function(t){p[t]=p[t]||[],p[t][l](r),a&&a(o)}(i.join("|")),n},n.done=function(t){n([null],t)},n}))},function(t,e,n){(function(t,e){!function(t,n){"use strict";function i(t){delete s[t]}function r(t){if(u)setTimeout(r,0,t);else{var e=s[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{i(t),u=!1}}}}if(!t.setImmediate){var a,o=1,s={},u=!1,l=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?a=function(t){e.nextTick((function(){r(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&r(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){r(t.data)},a=function(e){t.port2.postMessage(e)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var t=l.documentElement;a=function(e){var n=l.createElement("script");n.onreadystatechange=function(){r(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():a=function(t){setTimeout(r,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return s[o]=i,a(o),o++},c.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,function(){return this}(),n(58))},function(t,e,n){(function(t){function i(t,e){this._id=t,this._clearFn=e}var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;e.setTimeout=function(){return new i(a.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(98),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},function(t,e,n){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return g.iterable&&(e[Symbol.iterator]=function(){return e}),e}function r(t){this.map={},t instanceof r?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function a(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function s(t){var e=new FileReader,n=o(e);return e.readAsArrayBuffer(t),n}function u(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:g.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:g.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():g.arrayBuffer&&g.blob&&function(t){return t&&DataView.prototype.isPrototypeOf(t)}(t)?(this._bodyArrayBuffer=u(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||v(t))?this._bodyArrayBuffer=u(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=a(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=o(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new r(e.headers)),this.method=function(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}})),e}function h(t){var e=new r;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();e.append(i,r)}})),e}function f(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new r(e.headers),this.url=e.url||"",this._initBody(t)}function p(e,n){return new Promise((function(i,r){function a(){s.abort()}var o=new c(e,n);if(o.signal&&o.signal.aborted)return r(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:h(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;i(new f(e,t))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.onabort=function(){r(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&g.blob&&(s.responseType="blob"),o.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),o.signal&&(o.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",a)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}var g={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(g.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(t){return t&&m.indexOf(Object.prototype.toString.call(t))>-1};r.prototype.append=function(t,i){t=e(t),i=n(i);var r=this.map[t];this.map[t]=r?r+", "+i:i},r.prototype.delete=function(t){delete this.map[e(t)]},r.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,i){this.map[e(t)]=n(i)},r.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},r.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),i(t)},r.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),i(t)},r.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),i(t)},g.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},l.call(c.prototype),l.call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},f.error=function(){var t=new f(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];f.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new f(null,{status:e,headers:{location:t}})},t.DOMException=self.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}p.polyfill=!0,self.fetch||(self.fetch=p,self.Headers=r,self.Request=c,self.Response=f),t.Headers=r,t.Request=c,t.Response=f,t.fetch=p,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){var i,r;i=[n(12),n(6),n(1),n(14),n(2),n(3),n(130),n(108),n(117),n(114),n(64),n(115),n(116),n(118),n(119)],void 0===(r=function(t,e,n,i,r,a,o,s,u,l,c,d,h,f,p){return n([t],{constructor:function(t,e){this.coreModules=[],this.modulesQueue=this.config&&this.config.coreModules?r.clone(this.config.coreModules):[],this.moduleReadyHandler=a(this.target,"module-ready",r.hitch(this,this._onModuleComplete)),this.moduleErrorHandler=a(this.target,"module-error",r.hitch(this,this._onModuleComplete)),this.inherited(arguments)},loadModules:function(){if(0!=this.modulesQueue.length)for(var t=0;t<this.config.coreModules.length;t++)this.loadModule(this.config.coreModules[t].id,this._getModuleConfigById(this.config.coreModules[t].id))},loadModule:function(t,e){var n=null;switch(t){case"SyncBanners":n=u;break;case"MediaPlayer":n=l;break;case"Npe":n=d;break;case"NowPlayingApi":n=c;break;case"PlayerWebAdmin":n=h;break;case"TargetSpot":n=f;break;case"UserRegistration":n=p}n&&this._instanciateCurrentModule(n,t,e)},getModuleById:function(t){var n=null;return e.forEach(this.coreModules,(function(e,i){e.id==t&&(n=e.module)}),this),n},_instanciateCurrentModule:function(t,e,n){var i=new t(n,this.target);this.coreModules.push({id:e,module:i}),i.start()},_removeCurrentModuleFromQueue:function(t){var n=-1;e.forEach(this.modulesQueue,(function(e,i){e.id==t&&(n=i)}),this),n>-1&&this.modulesQueue.splice(n,1)},_onModuleComplete:function(t){this._removeCurrentModuleFromQueue(t.data.id);var e=this;if(0==this.modulesQueue.length){this.moduleReadyHandler.remove(),this.moduleErrorHandler.remove(),this.getModuleById("UserRegistration")&&this.getModuleById("MediaPlayer")&&new o(r.hitch(this,this.getModuleById),this.target);var n=this.getModuleById("MediaPlayer");null==n||"Html5"!=n.tech.type||this.config.adBlockerDetected?this.emit("player-ready"):(new s).init().then((function(){e.emit("player-ready")}),(function(t){e.emit("player-ready")})),this.config.adBlockerDetected&&this.emit("ad-blocker-detected",{message:"Ad Blocker is activated"})}},_getModuleConfigById:function(t){var n={};return this.config&&this.config.coreModules&&e.forEach(this.config.coreModules,(function(e){e.id==t&&(n=e)}),this),n}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(3)],void 0===(r=function(t,e){return t([],{AD_MODULE_PLAYBACK_START:"ad-module-playback-start",AD_MODULE_PLAYBACK_COMPLETE:"ad-module-playback-complete",AD_MODULE_PLAYBACK_DESTROY:"ad-module-playback-destroy",AD_MODULE_PLAYBACK_ERROR:"ad-module-playback-error",AD_MODULE_COUNTDOWN:"ad-module-countdown",AD_MODULE_MEDIA_READY:"ad-module-media-ready",AD_MODULE_MEDIA_EMPTY:"ad-module-media-empty",AD_MODULE_QUARTILE:"ad-module-quartile",AD_MODULE_COMPANIONS:"ad-module-companions",AD_MODULE_CLICK_TRACKING:"ad-module-click-tracking",AD_MODULE_VAST_ERROR:"ad-module-vast-error",AD_MODULE_VAST_EMPTY:"ad-module-vast-empty",AD_MODULE_VAST_PROCESS_COMPLETE:"ad-module-vast-process-complete",emit:function(t,n,i){i&&this.config.playerId!=i.id||e.emit(this.target,t,{data:n,bubbles:!0,cancelable:!0})}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{quartileMap:["start","firstQuartile","midpoint","thirdQuartile","complete"],constructor:function(){},getQuartileByIndex:function(t){return this.quartileMap[t]},isValidType:function(t){for(var e=0;e<this.length();e++)if(this.quartileMap[e]==t)return!0;return!1},length:function(){return this.quartileMap.length}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i;void 0===(i=function(){return["970x250","120x60","300x600","728x90","970x100","300x250","88x31","300x1050","970x90","180x150","320x480","300x50","320x50","300x300","970x66","160x600"]}.apply(e,[]))||(t.exports=i)},function(t,e,n){var i,r,a=n(21).getProtocol();i=[n(1)],void 0===(r=function(t){return t([],{ENDPOINT:a+"//{host}/ondemand/ars?type={type}",getVastUri:function(t){if(null==t.host||null==t.type||null==t.stationName&&null==t.stationId)return null;var e=this.ENDPOINT;return e=(e=e.replace("{host}",t.host)).replace("{type}",t.type),null!=t.format&&(e=e+"&fmt="+t.format),null!=t.stationName?e=e+"&stn="+t.stationName:null!=t.stationId&&(e=e+"&stid="+parseInt(t.stationId)),null!=t.maxAds&&(e=e+"&Max_ads="+parseInt(t.maxAds)),null!=t.assetType&&(e=e+"&at="+t.assetType),null!=t.minFileSize&&(e=e+"&minsz="+parseInt(t.minFileSize)),null!=t.maxFileSize&&(e=e+"&maxsz="+parseInt(t.maxFileSize)),null!=t.fileFormat&&(e=e+"&cntnr="+t.fileFormat),null!=t.minDuration&&(e=e+"&mindur="+parseInt(t.minDuration)),null!=t.maxDuration&&(e=e+"&maxdur="+parseInt(t.maxDuration)),null!=t.minBitrate&&(e=e+"&minbr="+parseInt(t.minBitrate)),null!=t.maxBitrate&&(e=e+"&maxbr="+parseInt(t.maxBitrate)),null!=t.minWidth&&(e=e+"&minw="+parseInt(t.minWidth)),null!=t.maxWidth&&(e=e+"&maxw="+parseInt(t.maxWidth)),null!=t.minHeight&&(e=e+"&minh="+parseInt(t.minHeight)),null!=t.maxHeight&&(e=e+"&maxh="+parseInt(t.maxHeight)),null!=t.audioCodec&&(e=e+"&acodec="+t.audioCodec),null!=t.audioMinChannels&&(e=e+"&minach="+parseInt(t.audioMinChannels)),null!=t.audioMaxChannels&&(e=e+"&maxach="+parseInt(t.audioMaxChannels)),null!=t.audioSampleRates&&(e=e+"&asr="+t.audioSampleRates),null!=t.videoCodec&&(e=e+"&vcodec="+t.videoCodec),null!=t.videoAspectRatio&&(e=e+"&vaspect="+t.videoAspectRatio),null!=t.minFrameRate&&(e=e+"&minfps="+parseFloat(t.minFrameRate)),null!=t.maxFrameRate&&(e=e+"&maxfps="+parseFloat(t.maxFrameRate)),null!=t.excludedCategories&&(e=e+"&iab-categories-to-exclude="+t.excludedCategories),e}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(20);i=[n(1)],void 0===(r=function(t){var e=!0,n=function(){var t=this,n={};this.errors={throwError:function(t,e,n){throw'Argument "'+t+'" of method "'+e+'" is not an "'+n+'"'},isObject:function(t,e,n){"object"==_typeof(t)&&!0!==Array.isArray(t)&&null!==t||this.throwError(e,n,"object")},isArray:function(t,e,n){!1===Array.isArray(t)&&this.throwError(e,n,"array")},isFunction:function(t,e,n){"function"!=typeof t&&this.throwError(e,n,"function")},isString:function(t,e,n){"string"!=typeof t&&this.throwError(e,n,"string")},isBoolean:function(t,e,n){"boolean"!=typeof t&&this.throwError(e,n,"boolean")}},this.options={set:function(e){for(var i in t.errors.isObject(e,"optionsList","options.set"),e)n[i]=e[i],t.debug.log("options.set",'Set "'+i+'" to "'+e[i]+'"');return t},get:function(t){return n[t]}},this.debug={set:function(n){return e=n,t.debug.log("debug.set",'Set debug to "'+e+'"'),t},isEnable:function(){return e},log:function(n,i){!0===e&&(t.errors.isString(n,"method","debug.log"),t.errors.isString(i,"message","debug.log"))}},this.versionToInt=function(t){for(var e="",n=0;n<3;n++){var i=t[n]||0;1===(""+i).length&&(i="0"+i),e+=i}return parseInt(e)}},i=function(){n.apply(this);var t=null,e=null;this.setDetected=function(e){return t=e,this},this.callDetected=function(){return null!==t&&(t(),t=null,!0)},this.setUndetected=function(t){return e=t,this},this.callUndetected=function(){return null!==e&&(e(),e=null,!0)}},r=function(){n.apply(this),this.options.set({timeout:200});var t=this,e=[4,0,0,"beta",3],i={},r={};this.getVersion=function(t){return!0!==t?e:void this.versionToInt(e)},this.addEvent=function(t,e){return this.errors.isString(t,"name","addEvent"),this.errors.isFunction(e,"callback","addEvent"),void 0===i[t]&&(i[t]=[]),i[t].push(e),this.debug.log("set",'Event "'+t+'" added'),this},this.on=function(t,e){return this.errors.isBoolean(t,"detected","on"),this.errors.isFunction(e,"callback","on"),this.addEvent(!0===t?"detected":"undetected",e)},this.onDetected=function(t){return this.errors.isFunction(t,"callback","onDetected"),this.addEvent("detected",t)},this.onNotDetected=function(t){return this.errors.isFunction(t,"callback","onNotDetected"),this.addEvent("undetected",t)};var u=function(e){var n=i[e];if(!0===t.debug.isEnable()){var r=void 0!==n?n.length:0;t.debug.log("dispatchEvent",'Starts dispatch of events "'+e+'" (0/'+r+")")}if(void 0!==n)for(var a in n)!0===t.debug.isEnable()&&t.debug.log("dispatchEvent",'Dispatch event "'+e+'" ('+(parseInt(a)+1)+"/"+r+")"),n[a]();return this};this.check=function(e,n){e instanceof Array==0&&void 0===n&&(n=e,e=void 0),void 0===e&&(e=Object.keys(r)),void 0===n&&(n={}),this.errors.isArray(e,"pluginsList","check"),this.errors.isObject(n,"optionsList","check"),this.debug.log("check","Starting check");var i={},a=e.length,o=0,s=function(e,n,r){if(o++,t.debug.log("check",(!0===n?"Positive":"Negative")+'" check of plugin "'+e+'"'),!0===r||!0===n||o===a){for(var s in clearTimeout(h),i)i[s].instance.stop();u(!0===n?"detected":"undetected")}};if(this.debug.log("check","Starting loading plugins (0/"+a+") ("+e.join()+")"),0===a)return s("#NoPlugin",!1,!0),this;for(var l in e){var c=e[l];this.debug.log("check",'Load plugin "'+c+'" ('+(parseInt(l)+1)+"/"+a+")");var d=i[c]={name:c,instance:new r[c],detected:null};void 0!==n[c]&&d.instance.options.set(n[c]),function(t,e){e.instance.setDetected((function(){e.detected=!0,t(e.name,!0)})).setUndetected((function(){e.detected=!1,t(e.name,!1)}))}(s,d)}for(var c in i)i[c].instance.start();var h=setTimeout((function(){s("#Timeout",!1,!0)}),this.options.get("timeout"));return this},this.registerPlugin=function(t){if(this.errors.isFunction(t,"pluginClass","registerPlugin"),this.errors.isString(t.pluginName,"pluginClass.pluginName","registerPlugin"),this.errors.isArray(t.versionMin,"pluginClass.versionMin","registerPlugin"),3!==t.versionMin.length&&this.errors.throwError("pluginClass.versionMin","registerPlugin","array with 3 values"),void 0===r[t.pluginName]){if(this.versionToInt(e)>=this.versionToInt(t.versionMin))return r[t.pluginName]=t,this.debug.log("registerPlugin",'Plugin "'+t.pluginName+'" registered'),!0;throw'The plugin "'+t.pluginName+'" ('+t.versionMin.join(".")+") is too recent for this version of BlockAdBlock ("+e.join(".")+")"}throw'The plugin "'+t.pluginName+'" is already registered'},"iOS"===a.os.family?this.registerPlugin(s):this.registerPlugin(o)};r.getPluginClass=function(){return i};var o=function(){r.getPluginClass().apply(this,arguments),this.options.set({loopTime:50,baitElement:null,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links adBanner",baitStyle:"width:1px!important;height:1px!important;position:absolute!important;left:-10000px!important;top:-1000px!important;",baitParent:null});var t={};this.start=function(){var e=this;if(null===this.options.get("baitElement")){t.bait=this.createBait({class:this.options.get("baitClass"),style:this.options.get("baitStyle")});var n=this.options.get("baitParent");null===n?window.document.body.appendChild(t.bait):n.appendChild(t.bait)}else t.bait=this.options.get("baitElement");var i=function(){!0===e.checkBait(t.bait,!0)&&e.callDetected()};return t.loopTimeout=setTimeout(i,1),t.loopInterval=setInterval(i,this.options.get("loopTime")),this},this.stop=function(){clearInterval(t.loopTimeout),clearInterval(t.loopInterval);var e=this.options.get("baitParent");return null===e?window.document.body.removeChild(t.bait):e.removeChild(t.bait),this},this.createBait=function(t){var e=window.document.createElement("div");return e.setAttribute("class",t.class),e.setAttribute("style",t.style),e.offsetParent,e.offsetHeight,e.offsetLeft,e.offsetTop,e.offsetWidth,e.clientHeight,e.clientWidth,e},this.checkBait=function(t,e){var n=!1;if(!0===e&&null!==window.document.body.getAttribute("abp")||null===t.offsetParent||0==t.offsetHeight||0==t.offsetLeft||0==t.offsetTop||0==t.offsetWidth||0==t.clientHeight||0==t.clientWidth)n=!0;else{var i=window.getComputedStyle(t);"none"!=i.getPropertyValue("display")&&"hidden"!=i.getPropertyValue("visibility")||(n=!0)}return n}};o.pluginName="html",o.version=[1,0,0],o.versionMin=[4,0,0];var s=function(){r.getPluginClass().apply(this,arguments),this.options.set({baitMode:"ajax",baitUrl:"https://sdk.listenlive.co/ad/banner/_adsense_/_adserver/_adview_.ad.json?adzone=top&adsize=300x250&advid={RANDOM}"});var t={};this.start=function(){var e=this;t.end=!1;var n=this.options.get("baitUrl").replace(/\{RANDOM\}/g,(function(){return parseInt(1e8*Math.random())}));return this._urlCheck(n,this.options.get("baitMode"),(function(){!1===t.end&&(t.end=!0,e.callDetected())}),(function(){!1===t.end&&(t.end=!0,e.callUndetected())})),this},this.stop=function(){return t.end=!0,this},this._urlCheck=function(t,e,n,i){var r=!1,a=function(t){!1===r&&(r=!0,!0===t?n():i())};if("ajax"===e){var o=[!1,!1,!1,!1],s=null,u=function(t){if(void 0!==t)a(t);else{if(0===s)return void a(!0);for(var e=0;e<4;e++)if(!1===o[e]&&404!=s)return void a(!0);a(!1)}},l=new XMLHttpRequest;l.onreadystatechange=function(){o[l.readyState-1]=!0;try{s=l.status}catch(t){}4===l.readyState&&u()};try{l.open("GET",t,!0),l.send()}catch(t){"2153644038"==t.result&&u(!0)}}else if("import"===e){var c=document.createElement("script");c.src=t,c.onerror=function(){a(!0),window.document.body.removeChild(c)},c.onload=function(){a(!1),window.document.body.removeChild(c)},window.document.body.appendChild(c)}else a(!1)}};return s.pluginName="http",o.version=[1,0,0],s.versionMin=[4,0,0],t([],{constructor:function(){this.fab=new r}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;(function(a){i=[n(1),n(2),n(3),n(13),n(6),n(7),n(11),n(52),n(10)],void 0===(r=function(t,e,i,r,o,s,u,l,c){return n(100),window.TdCompanions=t([r],{JS_BANNER_URL:"https://player.tritondigital.com/tpl/default/jsbanner.php",constructor:function(){this.listeners=[]},loadCompanionIframe:function(t,e,n,i){var r=s.byId(t,document);u.empty(r),u.create("iframe",{src:e,width:n,height:i,scrolling:"no",frameborder:0,marginheight:0,marginwidth:0,allowtransparency:!0,style:{margin:0,padding:0}},r)},loadCompanionStatic:function(t,e,n,i,r,o,l){o=o||"",l=l||"";var c=s.byId(t,document);u.empty(c);var d=e.substring(e.lastIndexOf(".")+1).toLowerCase();if("application/x-shockwave-flash"==l||"swf"==d){if(!a.getFlashPlayerVersion().major>0)return console.error("companions::loadCompanionStatic - SWF file embed error: Flash is not available. containerId="+t+", adSpotUrl="+e),void this.emit("companion-load-error",{containerId:t,adSpotUrl:e});e=e+(e.indexOf("?")>-1?"&":"?")+"cb_"+(new Date).getTime();var h=(encodeURIComponent(r),"td_flash_companions");u.create("div",{id:h},c),a.embedSWF(e,h,n,i,"10.2.0",!1,{clickTAG:encodeURIComponent(r)},{scale:"showall",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"},!1,!1)}else{var f="";null!=r&&(f='<a href="'+r+'" target="_blank">'),f+='<img src="'+e+'" width="'+n+'" height="'+i+'" title="'+o+'" border="0"/>',null!=r&&(f+="</a>"),c.innerHTML=f}},loadVASTCompanionAd:function(t,e){if(e.content)s.byId(t,document).innerHTML=e.content;else{switch(e.resourceType.name){case"html":e.code.indexOf("<script>")>-1&&e.code.indexOf("document.write")>-1?s.byId(t,document).innerHTML=e.code:e.code.indexOf("document.write")>-1?(e.resourceType.name="iframe",e.url=this.JS_BANNER_URL+"?code="+encodeURIComponent(e.code),this.loadVASTCompanionAd(t,e)):s.byId(t,document).innerHTML=e.code;break;case"iframe":this.loadCompanionIframe(t,e.url,e.width,e.height);break;case"static":"text/javascript"==e.creativeType?(e.resourceType.name="iframe",e.url=this.JS_BANNER_URL+"?url="+encodeURIComponent(e.url),this.loadVASTCompanionAd(t,e)):this.loadCompanionStatic(t,e.url,e.width,e.height,e.clickThroughURL,e.altText,e.creativeType)}e.creativeView&&e.creativeView.length&&e.creativeView.forEach((function(t){window.fetch(t,{mode:"no-cors"})}))}},addEventListener:function(t,n){var r=-1;o.forEach(this.listeners,(function(e,i){e.eventName==t&&e.callback==n&&(r=i)}),this),-1==r&&this.listeners.push({eventName:t,callback:n,listener:i(this,t,e.hitch(this,n))})},removeEventListener:function(t,e){var n=-1;o.forEach(this.listeners,(function(i,r){i.eventName==t&&i.callback==e&&(n=r)}),this),n>-1&&(this.listeners[n].listener.remove(),this.listeners.splice(n,1))}})}.apply(e,i))||(t.exports=r)}).call(e,n(37))},function(t,e,n){var i,r,a=n(97);i=[n(1),n,n(14)],void 0===(r=function(t,e,n){return t([],{constructor:function(){},init:function(){var t=new n;return a("//imasdk.googleapis.com/js/sdkloader/ima3.js",(function(){t.resolve()})),t}})}.apply(e,i))||(t.exports=r)},function(t,e){t.exports=new function(t){function e(e,n){var i,r=t.createElement(e);for(i in n)n.hasOwnProperty(i)&&r.setAttribute(i,n[i]);return r}function n(t){var e,n,r=u[t];r&&(e=r.callback,(n=r.urls).shift(),l=0,n.length||(e&&e.call(r.context,r.obj),u[t]=null,c[t].length&&i(t)))}function i(i,l,d,h,f){var p,g,m,v,y,_,b=function(){n(i)},E="css"===i,T=[];if(o||function(){var e=navigator.userAgent;((o={async:!0===t.createElement("script").async}).webkit=/AppleWebKit\//.test(e))||(o.ie=/MSIE|Trident/.test(e))||(o.opera=/Opera/.test(e))||(o.gecko=/Gecko\//.test(e))||(o.unknown=!0)}(),l)if(l="string"==typeof l?[l]:l.concat(),E||o.async||o.gecko||o.opera)c[i].push({urls:l,callback:d,obj:h,context:f});else for(p=0,g=l.length;p<g;++p)c[i].push({urls:[l[p]],callback:p===g-1?d:null,obj:h,context:f});if(!u[i]&&(v=u[i]=c[i].shift())){for(s||(s=t.head||t.getElementsByTagName("head")[0]),p=0,g=(y=v.urls.concat()).length;p<g;++p)_=y[p],E?m=o.gecko?e("style"):e("link",{href:_,rel:"stylesheet"}):(m=e("script",{src:_})).async=!1,m.className="lazyload",m.setAttribute("charset","utf-8"),o.ie&&!E&&"onreadystatechange"in m&&!("draggable"in m)?m.onreadystatechange=function(){/loaded|complete/.test(m.readyState)&&(m.onreadystatechange=null,b())}:E&&(o.gecko||o.webkit)?o.webkit?(v.urls[p]=m.href,a()):(m.innerHTML='@import "'+_+'";',r(m)):m.onload=m.onerror=b,T.push(m);for(p=0,g=T.length;p<g;++p)s.appendChild(T[p])}}function r(t){var e;try{e=!!t.sheet.cssRules}catch(i){return void((l+=1)<200?setTimeout((function(){r(t)}),50):e&&n("css"))}n("css")}function a(){var t,e=u.css;if(e){for(t=d.length;--t>=0;)if(d[t].href===e.urls[0]){n("css");break}l+=1,e&&(l<200?setTimeout(a,50):n("css"))}}var o,s,u={},l=0,c={css:[],js:[]},d=t.styleSheets;return{css:function(t,e,n,r){i("css",t,e,n,r)},js:function(t,e,n,r){i("js",t,e,n,r)}}}(window.document)},function(t,e,n){var i;(function(t){var r=function(){this.version="1.3";var t={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},e=new RegExp(/(?!xmlns)^.*:/),n=new RegExp(/^\s+|\s+$/g);return this.grokType=function(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):t},this.parseString=function(t,e){return this.parseXML(this.stringToXML(t),e)},this.parseXML=function(i,a){for(var o in a)t[o]=a[o];var s={},u=0,l="";if(t.xmlns&&i.namespaceURI&&(s[t.namespaceKey]=i.namespaceURI),i.attributes&&i.attributes.length>0){for(var c={};u<i.attributes.length;u++){var d,h=i.attributes.item(u);g={},d=t.stripAttrPrefix?h.name.replace(e,""):h.name,t.grokAttr?g[t.valueKey]=this.grokType(h.value.replace(n,"")):g[t.valueKey]=h.value.replace(n,""),t.xmlns&&h.namespaceURI&&(g[t.namespaceKey]=h.namespaceURI),t.attrsAsObject?c[d]=g:s[t.attrKey+d]=g}t.attrsAsObject&&(s[t.attrKey]=c)}if(i.hasChildNodes())for(var f,p,g,m=0;m<i.childNodes.length;m++)4===(f=i.childNodes.item(m)).nodeType?t.mergeCDATA?l+=f.nodeValue:s.hasOwnProperty(t.cdataKey)?(s[t.cdataKey].constructor!==Array&&(s[t.cdataKey]=[s[t.cdataKey]]),s[t.cdataKey].push(f.nodeValue)):t.childrenAsArray?(s[t.cdataKey]=[],s[t.cdataKey].push(f.nodeValue)):s[t.cdataKey]=f.nodeValue:3===f.nodeType?l+=f.nodeValue:1===f.nodeType&&(0===u&&(s={}),p=t.stripElemPrefix?f.nodeName.replace(e,""):f.nodeName,g=r.parseXML(f),s.hasOwnProperty(p)?(s[p].constructor!==Array&&(s[p]=[s[p]]),s[p].push(g)):(t.childrenAsArray?(s[p]=[],s[p].push(g)):s[p]=g,u++));else l||(t.childrenAsArray?(s[t.textKey]=[],s[t.textKey].push(null)):s[t.textKey]=null);if(l)if(t.grokText){var v=this.grokType(l.replace(n,""));null!=v&&(s[t.textKey]=v)}else t.normalize?s[t.textKey]=l.replace(n,"").replace(/\s+/g," "):s[t.textKey]=l.replace(n,"");return s},this.xmlToString=function(t){try{return t.xml?t.xml:(new XMLSerializer).serializeToString(t)}catch(t){return null}},this.stringToXML=function(t){try{var e=null;return window.DOMParser?(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t),e)}catch(t){return null}},this}.call({});null!=t&&t.exports?t.exports=r:void 0===(i=function(){return r}.call(e,n,e,t))||(t.exports=i)}).call(e,n(28)(t))},function(t,e,n){function i(t){return n(r(t))}function r(t){return a[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var a={"./en.json":57,"./es.json":93,"./fr.json":94,"./pt.json":95};i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id=111},function(t,e){var n=function(){function t(){if(!j){try{var t=P.getElementsByTagName("body")[0].appendChild(g("span"));t.parentNode.removeChild(t)}catch(t){return}j=!0;for(var e=M.length,n=0;n<e;n++)M[n]()}}function e(t){j?t():M[M.length]=t}function i(t){if(_typeof(I.addEventListener)!=k)I.addEventListener("load",t,!1);else if(_typeof(P.addEventListener)!=k)P.addEventListener("load",t,!1);else if(_typeof(I.attachEvent)!=k)!function(t,e,n){t.attachEvent(e,n),B[B.length]=[t,e,n]}(I,"onload",t);else if("function"==typeof I.onload){var e=I.onload;I.onload=function(){e(),t()}}else I.onload=t}function r(){var t=F.length;if(t>0)for(var e=0;e<t;e++){var n=F[e].id,i=F[e].callbackFn,r={success:!1,id:n};if(G.pv[0]>0){var l=p(n);if(l)if(!m(F[e].swfVersion)||G.wk&&G.wk<312)if(F[e].expressInstall&&o()){var c={};c.data=F[e].expressInstall,c.width=l.getAttribute("width")||"0",c.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(c.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(c.align=l.getAttribute("align"));for(var d={},h=l.getElementsByTagName("param"),f=h.length,g=0;g<f;g++)"movie"!=h[g].getAttribute("name").toLowerCase()&&(d[h[g].getAttribute("name")]=h[g].getAttribute("value"));s(c,d,n,i)}else u(l),i&&i(r);else y(n,!0),i&&(r.success=!0,r.ref=a(n),i(r))}else if(y(n,!0),i){var v=a(n);v&&_typeof(v.SetVariable)!=k&&(r.success=!0,r.ref=v),i(r)}}}function a(t){var e=null,n=p(t);if(n&&"OBJECT"==n.nodeName)if(_typeof(n.SetVariable)!=k)e=n;else{var i=n.getElementsByTagName(C)[0];i&&(e=i)}return e}function o(){return!H&&m("6.0.65")&&(G.win||G.mac)&&!(G.wk&&G.wk<312)}function s(t,e,n,i){H=!0,T=i||null,A={success:!1,id:n};var r=p(n);if(r){"OBJECT"==r.nodeName?(b=l(r),E=null):(b=r,E=n),t.id=L,(_typeof(t.width)==k||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(_typeof(t.height)==k||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),P.title=P.title.slice(0,47)+" - Flash Player Installation";var a=G.ie&&G.win?"ActiveX":"PlugIn",o="MMredirectURL="+I.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+P.title;if(_typeof(e.flashvars)!=k?e.flashvars+="&"+o:e.flashvars=o,G.ie&&G.win&&4!=r.readyState){var s=g("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}c(t,e,n)}}function u(t){if(G.ie&&G.win&&4!=t.readyState){var e=g("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(l(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(l(t),t)}function l(t){var e=g("div");if(G.win&&G.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(C)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||e.appendChild(i[a].cloneNode(!0))}}return e}function c(t,e,n){var i,r=p(n);if(G.wk&&G.wk<312)return i;if(r)if(_typeof(t.id)==k&&(t.id=n),G.ie&&G.win){var a="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?a+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+t[o]+'"'));var s="";for(var u in e)e[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+e[u]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",U[U.length]=t.id,i=p(t.id)}else{var l=g(C);for(var c in l.setAttribute("type",D),t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var h in e)e[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&d(l,h,e[h]);r.parentNode.replaceChild(l,r),i=l}return i}function d(t,e,n){var i=g("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function h(t){var e=p(t);e&&"OBJECT"==e.nodeName&&(G.ie&&G.win?(e.style.display="none",function(){4==e.readyState?f(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function f(t){var e=p(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function p(t){var e=null;try{e=P.getElementById(t)}catch(t){}return e}function g(t){return P.createElement(t)}function m(t){var e=G.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]}function v(t,e,n,i){if(!G.ie||!G.mac){var r=P.getElementsByTagName("head")[0];if(r){var a=n&&"string"==typeof n?n:"screen";if(i&&(S=null,w=null),!S||w!=a){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),S=r.appendChild(o),G.ie&&G.win&&_typeof(P.styleSheets)!=k&&P.styleSheets.length>0&&(S=P.styleSheets[P.styleSheets.length-1]),w=a}G.ie&&G.win?S&&_typeof(S.addRule)==C&&S.addRule(t,e):S&&_typeof(P.createTextNode)!=k&&S.appendChild(P.createTextNode(t+" {"+e+"}"))}}}function y(t,e){if(V){var n=e?"visible":"hidden";j&&p(t)?p(t).style.visibility=n:v("#"+t,"visibility:"+n)}}function _(t){return null!=/[\\\"<>\.;]/.exec(t)&&("undefined"==typeof encodeURIComponent?"undefined":_typeof(encodeURIComponent))!=k?encodeURIComponent(t):t}var b,E,T,A,S,w,k="undefined",C="object",x="Shockwave Flash",D="application/x-shockwave-flash",L="SWFObjectExprInst",R="onreadystatechange",I=window,P=document,O=navigator,N=!1,M=[function(){N?function(){var t=P.getElementsByTagName("body")[0],e=g(C);e.setAttribute("type",D);var n=t.appendChild(e);if(n){var i=0;!function(){if(_typeof(n.GetVariable)!=k){var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),G.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);t.removeChild(e),n=null,r()}()}else r()}():r()}],F=[],U=[],B=[],j=!1,H=!1,V=!0,G=function(){var t=_typeof(P.getElementById)!=k&&_typeof(P.getElementsByTagName)!=k&&_typeof(P.createElement)!=k,e=O.userAgent.toLowerCase(),n=O.platform.toLowerCase(),i=/win/.test(n||e),r=/mac/.test(n||e),a=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,s=[0,0,0],u=null;if(_typeof(O.plugins)!=k&&_typeof(O.plugins[x])==C)!(u=O.plugins[x].description)||_typeof(O.mimeTypes)!=k&&O.mimeTypes[D]&&!O.mimeTypes[D].enabledPlugin||(N=!0,o=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(_typeof(I.ActiveXObject)!=k)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l&&(u=l.GetVariable("$version"))&&(o=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)])}catch(t){}return{w3:t,pv:s,wk:a,ie:o,win:i,mac:r}}();return G.w3&&((_typeof(P.readyState)!=k&&"complete"==P.readyState||_typeof(P.readyState)==k&&(P.getElementsByTagName("body")[0]||P.body))&&t(),j||(_typeof(P.addEventListener)!=k&&P.addEventListener("DOMContentLoaded",t,!1),G.ie&&G.win&&(P.attachEvent(R,(function(){"complete"==P.readyState&&(P.detachEvent(R,arguments.callee),t())})),I==top&&function(){if(!j){try{P.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),G.wk&&function(){j||(/loaded|complete/.test(P.readyState)?t():setTimeout(arguments.callee,0))}(),i(t))),G.ie&&G.win&&window.attachEvent("onunload",(function(){for(var t=B.length,e=0;e<t;e++)B[e][0].detachEvent(B[e][1],B[e][2]);for(var i=U.length,r=0;r<i;r++)h(U[r]);for(var a in G)G[a]=null;for(var o in G=null,n)n[o]=null;n=null})),{registerObject:function(t,e,n,i){if(G.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,F[F.length]=r,y(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){if(G.w3)return a(t)},embedSWF:function(t,n,i,r,a,u,l,d,h,f){var p={success:!1,id:n};G.w3&&!(G.wk&&G.wk<312)&&t&&n&&i&&r&&a?(y(n,!1),e((function(){i+="",r+="";var e={};if(h&&_typeof(h)===C)for(var g in h)e[g]=h[g];e.data=t,e.width=i,e.height=r;var v={};if(d&&_typeof(d)===C)for(var _ in d)v[_]=d[_];if(l&&_typeof(l)===C)for(var b in l)_typeof(v.flashvars)!=k?v.flashvars+="&"+b+"="+l[b]:v.flashvars=b+"="+l[b];if(m(a)){var E=c(e,v,n);e.id==n&&y(n,!0),p.success=!0,p.ref=E}else{if(u&&o())return e.data=u,void s(e,v,n,f);y(n,!0)}f&&f(p)}))):f&&f(p)},switchOffAutoHideShow:function(){V=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:m,createSWF:function(t,e,n){return G.w3?c(t,e,n):void 0},showExpressInstall:function(t,e,n,i){G.w3&&o()&&s(t,e,n,i)},removeSWF:function(t){G.w3&&h(t)},createCSS:function(t,e,n,i){G.w3&&v(t,e,n,i)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=P.location.search||P.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return _(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==t)return _(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(H){var t=p(L);t&&b&&(t.parentNode.replaceChild(b,t),E&&(y(E,!0),G.ie&&G.win&&(b.style.display="block")),T&&T(A)),H=!1}}}}()},function(t,e,n){(function(t){var e=n(1),i=n(2),r=n(3),a=n(13),o=n(6),s=n(101),u=n(104),l=n(106),c=n(18),d=n(22),h=!1,f=function(){h=!0};document.addEventListener("touchend",(function t(){h||(document.removeEventListener("touchend",t,!1),document.removeEventListener("touchmove",f,!1),d.init()),h=!1}),!1),document.addEventListener("touchmove",f,!1),window.TDSdk=e([],{NAME:"TDSdk",constructor:function(t){this.listeners=[],this.target=new a,this.abBlockProcessFinish=!1,this.MediaElement=d,r(this.target,"module-ready",i.hitch(this,this._onModuleReady));var e=new l;void 0===e.fab?this._onAdBlock(t,!0):(e.fab.onDetected(i.hitch(this,this._onAdBlock,t,!0)),e.fab.onNotDetected(i.hitch(this,this._onAdBlock,t,!1)),e.fab.check()),t.playerReady&&this.addEventListener("player-ready",t.playerReady),t.configurationError&&this.addEventListener("configuration-error",t.configurationError),t.moduleError&&this.addEventListener("module-error",t.moduleError),t.adBlockerDetected&&this.addEventListener("ad-blocker-detected",t.adBlockerDetected),this.loadModules()},_parseConfig:function(t,e){if(!t||!t.coreModules)return{coreModules:[]};var n=[],i={},r=o.filter(t.coreModules,(function(t){return"SyncBanners"==t.id}));if(r.length&&!e){var a=r[0];i=a,o.forEach(a.elements,(function(t){if(null!=t.width&&null!=t.height){var e=t.width+"x"+t.height;-1!=o.indexOf(u,e)&&n.push(e)}}),this)}if((r=o.filter(t.coreModules,(function(t){return"MediaPlayer"==t.id}))).length){var s=r[0];s.adBlockerDetected=e,s.adBlockerDetected&&null!=s.plugins&&(this._removeMediaplayerPlugins("vastAd",s.plugins),this._removeMediaplayerPlugins("mediaAd",s.plugins)),s.companionAdSelectionSettings=i,null==s.defaultTrackingParameters&&(s.defaultTrackingParameters={}),s.defaultTrackingParameters.banners=null!=s.defaultTrackingParameters.banners?this._unique(s.defaultTrackingParameters.banners.concat(n)):n,s.defaultTrackingParameters.log={},s.defaultTrackingParameters.log.tdsdk="js-"+this.version.value.substring(0,3),s.defaultTrackingParameters.log.pname=this.NAME,s.defaultTrackingParameters.log.pversion=this.version.value.substring(0,3)}return"string"==typeof t.locale&&c.setLocalization(t.locale),t},_removeMediaplayerPlugins:function(t,e){o.forEach(e,(function(n,i){n&&n.id==t&&e.splice(i,1)}))},_onModuleReady:function(t){t.data.module.api&&e.safeMixin(this,t.data.module.api),this[t.data.id]=t.data.module},_onAdBlock:function(t,e){t&&(this.abBlockProcessFinish=!0,t.adBlockerDetected=e,this.moduleManager=new s(this._parseConfig(t,e),this.target),this.loadModulesCalled&&this.moduleManager.loadModules())},loadModules:function(){this.abBlockProcessFinished?this.moduleManager.loadModules():this.loadModulesCalled=!0},loadModule:function(t,e){this.moduleManager.loadModule(t,e)},getModuleById:function(t){return this.moduleManager.getModuleById(t)},addEventListener:function(t,e){var n=-1;o.forEach(this.listeners,(function(i,r){i.eventName==t&&i.callback==e&&(n=r)}),this),-1==n&&this.listeners.push({eventName:t,callback:e,listener:r(this.target,t,i.hitch(this,e))})},removeEventListener:function(t,e){var n=-1;o.forEach(this.listeners,(function(i,r){i.eventName==t&&i.callback==e&&(n=r)}),this),n>-1&&(this.listeners[n].listener.remove(),this.listeners.splice(n,1))},_unique:function(t){var e={};return o.filter(t,(function(t){return!e[t]&&(e[t]=!0)}))},version:{value:"@tdversion@",build:"@tdbuild@",codename:"bitter lime"},flash:{available:t.getFlashPlayerVersion().major>0,version:t.getFlashPlayerVersion()}})}).call(e,n(37))},function(t,e,n){var i,r,a=(n(72),n(20)),o=n(18),s=n(138),u=n(139),l=n(21),c=n(22),d=n(8);i=[n(6),n(1),n(14),n(2),n(4),n(3),n(26),n(17),n(7),n(11),n(19),n(120),n(12),n(132),n(131)],void 0===(r=function(t,e,n,i,r,h,f,p,g,m,v,y,_,b,E){return e([_],{LIVE_PLAYING:"livePlaying",LIVE_STOPPED:"liveStopped",statusMap:{GETTING_STATION_INFORMATION:{status:"gettingStationInformation",code:"GETTING_STATION_INFORMATION"},STREAM_GEO_BLOCKED:{status:"streamGeoBlocked",code:"STREAM_GEO_BLOCKED"},STATION_NOT_FOUND:{status:"stationNotFound",code:"STATION_NOT_FOUND"},PLAY_NOT_ALLOWED:{status:"playbackNotAllowed",code:"PLAY_NOT_ALLOWED"}},constructor:function(t,e){this.inherited(arguments);var n=this;"function"==typeof __cmp?__cmp("getConsentData",null,(function(t){n.consentData=t,null!=n.config.idSync&&n._loadIdSync(n.config.idSync)})):null!=this.config.idSync&&this._loadIdSync(this.config.idSync),this.liveStreamConfig=null,this.streamingConnections=null,this.liveStreamConfiguration=null,this.tech=null,this.techErrors=[],this.techPriority=this.config.techPriority&&this.config.techPriority.length>0?this.config.techPriority:["Html5","Flash"],(r("ios")||r("android")||r("bb")||r("safari")>7||l.currentProtocolIsHttps())&&(this.techPriority=["Html5"]),this.geoTargeting=null!=this.config.geoTargeting?this.config.geoTargeting:{desktop:{isActive:!0},iOS:{isActive:!1},android:{isActive:!1}},this.isGeoTargetingActive=!1,this.position=null,this.geoTargeting&&this._initGeoTargeting(),this.hls=null==t.hls||t.hls,this.audioAdaptive=null!=t.audioAdaptive&&t.audioAdaptive,this.adManager=null,this._lowActivated=!1,this._isPlaying=!1,this.fallbackTried=!1,this.api={play:i.hitch(this,this._play),pause:i.hitch(this,this._pause),stop:i.hitch(this,this._stop),resume:i.hitch(this,this._resume),seek:i.hitch(this,this._seek),seekLive:i.hitch(this,this.seekLive),restartConnectionTimeOut:i.hitch(this,this.restartConnectionTimeOut),setVolume:i.hitch(this,this.setVolume),getVolume:i.hitch(this,this.getVolume),mute:i.hitch(this,this.mute),unMute:i.hitch(this,this.unMute),playAd:i.hitch(this,this.playAd),skipAd:i.hitch(this,this.skipAd),destroyAd:i.hitch(this,this.destroyAd),initMediaElement:i.hitch(this,this._initMediaElement),destroy:i.hitch(this,this._destroy),reloadSyncBanner:i.hitch(this,this.reloadSyncBanner)},f.subscribe("api/request",i.hitch(this,this._onApiInternalRequest))},start:function(){h(this.target,"tech-ready",i.hitch(this,this._onTechReady)),h(this.target,"tech-error",i.hitch(this,this._onTechError)),this._loadTech(this.techPriority[0])},_onApiInternalRequest:function(){var t=arguments[0],e=i.hitch(this,this.INTERNAL_REQUEST_API_FUNCTIONS[t]);"function"==typeof e&&e(arguments[1])},_onApiRequestGetAlternateContent:function(t){if(t){var e=this._getCurrentLiveApiParams();t.mount?(e.station=null,e.mount=t.mount,this._play(e)):t.url&&(e.station=null,e.mount=null,e.url=t.url,this.tech.isLiveStream=!0,this.tech.play({file:e.url}))}},_onApiRequestGetVastInstream:function(t){null!=t.vastUrl?this._getAdManager().playAd("vastAd",{url:t.vastUrl,skipMediaAdPlayback:!0,adBreak:!0}):null!=t.adVast&&this._getAdManager().playAd("vastAd",{rawXML:t.adVast,skipMediaAdPlayback:!0,adBreak:!0})},_hqTags:[],addHqTag:function(e){-1==t.indexOf(this._hqTags,e)&&this._hqTags.push(e)},removeHqTag:function(e){var n=t.indexOf(this._hqTags,e);-1!=n&&this._hqTags.splice(n,1)},_lowTags:["low-bw"],addLowTag:function(e){-1==t.indexOf(this._lowTags,e)&&this._lowTags.push(e)},removeLowTag:function(e){var n=t.indexOf(this._lowTags,e);-1!=n&&this._lowTags.splice(n,1)},_hqEnabled:!1,enableHQ:function(){this._hqEnabled=!0,!this.isHQ()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},disableHQ:function(){this._hqEnabled=!1,this.isHQ()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},_lowEnabled:!0,enableLow:function(){this._lowEnabled=!0,this._refreshConnectionIterator()},disableLow:function(){this._lowEnabled=!1,this.isLow()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},activateLow:function(){this._lowEnabled&&(this._lowActivated=!0,!this.isLow()&&this.isPlaying()?(this._stop(),this._play(this._getCurrentLiveApiParams())):this._refreshConnectionIterator())},deactivateLow:function(){this._lowActivated=!1,this.isLow()&&this.isPlaying()?(this._stop(),this._play(this._getCurrentLiveApiParams())):this._refreshConnectionIterator()},_refreshConnectionIterator:function(t){if(t){if(t.length>0)return this.emit("stream-config-ready"),this.tech.setConnectionIterator(new s(t)),!0;this.emit("stream-config-error",{errors:this.liveStreamConfig.mountPointsError}),this.tech.setConnectionIterator(null);var e=!1,n=!1;return d.forEach(this.liveStreamConfig.mountPointsError,(function(t){t.status.isGeoBlocked&&(e=!0),t.alternateContent&&(n=t.alternateContent)})),e?(this._emitStreamStatusByCode(this.statusMap.STREAM_GEO_BLOCKED),n&&f.publish("api/request","get-alternate-content",n)):this._emitStreamStatusByCode(this.statusMap.STATION_NOT_FOUND),!1}},_loadTech:function(t){switch(i.hitch(this,this._techLoaded),i.hitch(this,this._techLoadingError),t){case"Html5":this._techLoaded(b,t);break;case"Flash":this._techLoaded(E,t)}},_techLoaded:function(t,e){this.tech=new t(this.config,this.target,e),this.tech.start()},_techLoadingError:function(t){console.error("mediaPlayer::_techError - "+t),this.emit("module-error",{id:"MediaPlayer",error:t})},_onTechReady:function(t){this.liveStreamConfig=new u(this.config.platformId,a,this.tech.type,this.config.hls,this.config.audioAdaptive,this.config.forceHls,this.config.forceHslts,this.config.playerServicesRegion),h(this.target,"stream-start",i.hitch(this,this._onStreamStart)),h(this.target,"stream-stop",i.hitch(this,this._onStreamStop)),this.emit("module-ready",{id:"MediaPlayer",module:this})},_onStreamStart:function(){this._isPlaying=!0},_onStreamStop:function(){this._isPlaying=!1},_onTechError:function(t){console.error("mediaPlayer::_onTechError"),this.techPriority.length>1&&0==this.fallbackTried?(this.techErrors.push(t),this.fallbackTried=!0,this._loadTech(this.techPriority[1])):(this.techErrors.push(t),this.emit("module-error",{id:"MediaPlayer",errors:this.techErrors}))},_initGeoTargeting:function(){(null!=r("ios")&&null!=this.geoTargeting.iOS&&null!=this.geoTargeting.iOS.isActive&&1==this.geoTargeting.iOS.isActive||null!=r("android")&&null!=this.geoTargeting.android&&null!=this.geoTargeting.android.isActive&&1==this.geoTargeting.android.isActive||null==r("ios")&&null==r("android")&&null!=this.geoTargeting.desktop&&null!=this.geoTargeting.desktop.isActive&&1==this.geoTargeting.desktop.isActive)&&(this.isGeoTargetingActive=!0),1==this.isGeoTargetingActive&&this._getLocation()},_play:function(t){if(null!=t){this.tech.prepare(),this._initMediaElement();var e=this;if(t.trackingParameters=this._getFinalTrackingParameters(t.trackingParameters),null!=t.file&&""!=t.file)e.tech.play(t);else{this._emitStreamStatusByCode(this.statusMap.GETTING_STATION_INFORMATION),this._liveApiParams=t;var n=("Flash"==this.tech.type?this.liveStreamConfig.RTMP_TRANSPORTS:[]).concat(this.liveStreamConfig.DEFAULT_TRANSPORTS),i={station:t.station,mount:t.mount,transports:n},r=[];this._hqEnabled&&(r=r.concat(this._hqTags)),this._lowEnabled&&(r=r.concat(this._lowTags)),this.liveStreamConfig.getStreamingConnections(i,r).then((function(n){this.streamingConnections=n,e._refreshConnectionIterator(n)&&e.tech.play(t)})).catch((function(t){e.emit("stream-config-load-error",{error:t})}))}}},isPlaying:function(){return this._isPlaying},hasHQ:function(){var t=this;return d.some(this._hqTags,(function(e){t.tagsToLookup(e,t.streamingConnections)}))},tagsToLookup:function(t,e){return d.some(e,(function(e){return d.some(e.tags,(function(e){return e.name===t}))}))},isHQ:function(){var t=this;return!!this.tech.currentConnection()&&null!=this.tech.currentConnection()&&d.some(this._hqTags,(function(e){t.tagsToLookup(e,[t.tech.currentConnection()])}))},hasLow:function(){var t=this;return d.some(this._lowTags,(function(e){t.tagsToLookup(e,t.streamingConnections)}))},isLow:function(){var t=this;return!!this.tech.currentConnection()&&null!=this.tech.currentConnection()&&d.some(this._lowTags,(function(e){t.tagsToLookup(e,[t.tech.currentConnection()])}))},_pause:function(){this.tech.pause()},_stop:function(){this.tech.stop()},_resume:function(){this.tech.resume()},_seek:function(t){this.tech.seek(t)},seekLive:function(){this.tech.seekLive()},restartConnectionTimeOut:function(){this.tech.restartConnectionTimeOut()},setVolume:function(t){this.tech.setVolume(t)},getVolume:function(){return this.tech.getVolume()},mute:function(){this.tech.mute()},unMute:function(){this.tech.unMute()},playAd:function(t,e){e.trackingParameters=this._getFinalTrackingParameters(e.trackingParameters),this._getAdManager().playAd(t,e),this.tech.playAdCalled=!0},skipAd:function(){this._getAdManager().skipAd()},reloadSyncBanner:function(){this._getAdManager().reloadSyncBanner()},destroyAd:function(){this._getAdManager().destroyAd(!0)},_initMediaElement:function(){c.init()},_destroy:function(){this._stop(),setTimeout((function(){var t=document.getElementById("tdplayer_ondemand");t&&(c.destroyAudioElement(),c.resetAudioNode(),m.destroy(t))}),500)},_getAdManager:function(){return null==this.adManager&&(this.adManager=new y(this.tech,this.tech.type,this.target,this.config)),this.adManager},_emitStreamStatusByCode:function(t){var e=o.getLocalization();null!=e&&e[t.status]&&this.emit("stream-status",{code:t.code,status:e[t.status]})},_getLocation:function(){window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(i.hitch(this,this._setPosition),i.hitch(this,this._getPositionErrorHandler),{enableHighAccuracy:!0,timeout:2e3})},_setPosition:function(t){this.position=null!=t&&null!=t.coords.latitude&&null!=t.coords.longitude?t:null},_getPositionErrorHandler:function(t){console.info("mediaPlayer::_getPositionErrorHandler, code : "+t.code+", message : "+t.message),this.position=null},_getGeoTargetingPos:function(t){return null!=this.position&&null!=this.position&&null!=this.position.coords.latitude&&null!=this.position.coords.longitude?null!=t?(t.lat=parseFloat(this.position.coords.latitude.toFixed(1)),t.long=parseFloat(this.position.coords.longitude.toFixed(1)),t):{lat:parseFloat(this.position.coords.latitude.toFixed(1)),long:parseFloat(this.position.coords.longitude.toFixed(1))}:t},_getFinalTrackingParameters:function(e){for(var n in null==e&&(e={}),e.tdsdk=this.config.defaultTrackingParameters.log.tdsdk,this.isGeoTargetingActive&&(e=this._getGeoTargetingPos(e)),d.isEmpty(this.config.defaultTrackingParameters.banners)&&(this.config.defaultTrackingParameters.banners=[],this.config.defaultTrackingParameters.banners.push("none")),"Flash"!=this.tech.type||this.config.adBlockerDetected||-1!==this.config.defaultTrackingParameters.banners.indexOf("none")||(-1==t.indexOf(this.config.defaultTrackingParameters.banners,"swf")&&this.config.defaultTrackingParameters.banners.push("swf"),-1==t.indexOf(this.config.defaultTrackingParameters.banners,"vpaid")&&this.config.defaultTrackingParameters.banners.push("vpaid")),e.pname||(e.pname=this.config.defaultTrackingParameters.log.pname,e.pversion=this.config.defaultTrackingParameters.log.pversion),null!=this.config.defaultTrackingParameters.banners&&this.config.defaultTrackingParameters.banners.length&&(null!=e.banners&&e.banners.length&&-1==e.banners.indexOf(this.config.defaultTrackingParameters.banners.join())?e.banners+=","+this.config.defaultTrackingParameters.banners.join():e.banners=this.config.defaultTrackingParameters.banners.join()),this.config.defaultTrackingParameters.user)e[n]=this.config.defaultTrackingParameters.user[n];return this.consentData&&(e.gdpr=this.consentData.gdprApplies?1:0,e.gdpr_consent=this.consentData.consentData),e},_getCurrentLiveApiParams:function(){return this._liveApiParams},_loadIdSync:function(t){var e=this._getIdSyncQueryParam(t);g.byId("idSyncScript",document)&&m.destroy(g.byId("idSyncScript",document)),scriptTag=m.create("script",{id:"idSyncScript"},g.byId(this.config.playerId,document)),v.set(scriptTag,"type","text/javascript"),v.set(scriptTag,"src","//playerservices.live.streamtheworld.com/api/idsync.js?"+e),document.getElementsByTagName("body")[0].appendChild(scriptTag)},_getIdSyncQueryParam:function(t){var e;if(t.station?e="station="+t.station:t.stationId?e="stationId="+t.stationId:t.mount&&(e="mount="+t.mount),null!=e){this.consentData&&(t.gdpr=this.consentData.gdprApplies?1:0,t.gdpr_consent=this.consentData.consentData),e=t.gdpr&&t.gdpr.toString().match(/^[0,1]$/g)?e+"&gdpr="+t.gdpr:e,e=t.gdpr_consent?e+"&gdpr_consent="+t.gdpr_consent:e;var n=t.dob&&!isNaN(Date.parse(t.dob))?new Date(t.dob.replace(/-/g,"/")):null;if(n){var i=n.getFullYear(),r=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,a=n.getDate()<10?"0"+n.getDate():n.getDate();e=n?e+"&dob="+i+"-"+r+"-"+a:e}return e=t.yob&&!isNaN(t.yob)&&-1===e.indexOf("dob")?e+"&yob="+t.yob:e,e=t.age&&!isNaN(t.age)&&t.age>0&&t.age<=125&&-1===e.indexOf("dob")&&-1===e.indexOf("yob")?e+"&age="+t.age:e,e=t.gender&&t.gender.match(/[m,f]/g)&&1===t.gender.length?e+"&gender="+t.gender:e,t.ip&&t.ip.match(/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/g)?e+"&ip="+t.ip:e}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(15);i=[n(1),n(14),n(2),n(10),n(12),n(153)],void 0===(r=function(t,e,n,i,r,o){return t([r],{constructor:function(t,e){this.platform=new a(t.platformId),this.library=[],this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"Npe",module:this})},loadNpeMetadata:function(t,n,i){var r=this._urlToNPEId(t),a=this.getSongByNpeId(r);if(null!=a){this.emit("npe-song",{song:a});var o=new e;return o.resolve({song:a}),o}return this._fetchData(!1,r,t,n,i,new e)},getSongByNpeId:function(t){for(var e=this.library.length,n=0;n<e;n++)if(this.library[n].npeId==t)return this.library[n];return null},getDynamicUrl:function(){return this.platform.endpoint.npe},_getDynamicSongUrl:function(t,e){return this.getDynamicUrl()+"song?artist="+encodeURIComponent(t)+"&title="+encodeURIComponent(e)},_fetchData:function(t,e,r,a,o,s){return t&&(r=this._getDynamicSongUrl(a,o)),(new i).request(r,{npeId:e,npUrl:r,isDynamicCall:t,artist:a,title:o,deferred:s},this._getRequestArgs(),n.hitch(this,this._onLoadComplete),n.hitch(this,this._onLoadError)),s},_onLoadError:function(t,e){return console.error("npe::_onLoadError - npUrl="+t.npUrl+" - error="+e),0!=t.isDynamicCall?(this.emit("npe-song-error",{npeId:this._urlToNPEId(t.npUrl)}),t.deferred.reject({npeId:this._urlToNPEId(t.npUrl)})):void this._fetchData(!0,t.npeId,null,t.artist,t.title,t.deferred)},_onLoadComplete:function(t,e){var n=new o(e.song,this._urlToNPEId(t.npUrl),this.config.platformId);return this.library.push(n),this.emit("npe-song",{song:n}),t.deferred.resolve({song:n})},_getRequestArgs:function(){return{handleAs:"json",preventCache:!1,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}},_urlToNPEId:function(t){if(null==t||null==t||""==t)return null;var e=t.lastIndexOf("/");return t.substr(e-2,2)+t.substring(e+1,t.lastIndexOf("."))}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(15);i=[n(1),n(2),n(12),n(10)],void 0===(r=function(t,e,n,i){return t([n],{constructor:function(t,e){this.platform=new a(t.platformId),this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"PlayerWebAdmin",module:this})},load:function(t,n){var r=e.hitch(this,this._onLoadComplete),a=e.hitch(this,this._onLoadError),o=new i,s=this._getRequestArgs(t,n);o.request(this.platform.endpoint.playerWebAdmin,s.query,{handleAs:"xml",preventCache:!0,query:s.query,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}},(function(e,n){r(t,JSON.parse(n))}),(function(e,n){a(t,"An unexpected error occurred: "+n)}))},_onLoadError:function(t,e){console.error("playerWebAdmin::_onLoadError - mount="+t+" - error="+e),this.emit("pwa-data-error",{mount:t,error:e})},_onLoadComplete:function(t,e){this.emit("pwa-data-loaded",{mount:t,config:e})},_getRequestArgs:function(t,e){return{jsonp:"callback",preventCache:!0,query:{callsign:t,streamid:e}}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(2),n(6),n(7),n(3),n(11),n(12),n(107)],void 0===(r=function(t,e,n,i,r,a,o,s){return t([o],{LEGACY:"legacy",VAST:"vast",constructor:function(t,e){this.inherited(arguments),this._vastCompanionPriority=t.vastCompanionPriority||["static","iframe","html"],this.companions=new s},start:function(){this.config.elements&&(r(this.target,"vast-process-complete",e.hitch(this,this._onVastProcessComplete)),r(this.target,"vast-companions-ready",e.hitch(this,this._onVastCompanionsReady)),r(this.target,"ad-break-cue-point",e.hitch(this,this._onAdBreakCuePoint)),r(this.target,"ad-break-cue-point-complete",e.hitch(this,this._onAdBreakCuePointComplete)),r(this.target,"stream-stop",e.hitch(this,this._onStreamStop))),this.emit("module-ready",{id:"SyncBanners",module:this})},getSyncedElementBySize:function(t,e){var i=null;return n.forEach(this.config.elements,(function(n){n.width==t&&n.height==e&&(i=n)}),this),i},_onAdBreakCuePoint:function(t){var n=t.data.adBreakData,i=n.url;if(n.isVastInStream)this._cleanAdVastListeners(),this.vastProcessCompleteListener=r(this.target,"vast-process-complete",e.hitch(this,this._onVastProcessComplete)),this.vastErrorListener=r(this.target,"ad-playback-error",e.hitch(this,this._onVastAdPlaybackError));else if(i&&i.length>1&&-1!=i.indexOf("|")){var a=i.split("|")[1],o=i.split("|")[0];a&&a.length>1&&null!=this.getSyncedElementBySize(300,250)&&(this.emit("ad-break-synced-element",{type:this.LEGACY,id:this.getSyncedElementBySize(300,250).id,url:a}),this._loadElementIframe(this.getSyncedElementBySize(300,250).id,a,300,250)),o&&o.length>1&&null!=this.getSyncedElementBySize(728,90)&&(this.emit("ad-break-synced-element",{type:this.LEGACY,id:this.getSyncedElementBySize(728,90).id,url:o}),this._loadElementIframe(this.getSyncedElementBySize(728,90).id,o,728,90))}},_onAdBreakCuePointComplete:function(t){this.config.keepElementsVisible||this._hideElements()},_onStreamStop:function(){this._hideElements()},_hideElements:function(){var t=this.getSyncedElementBySize(300,250);null!=t&&null!=i.byId(t.id,document)&&a.empty(i.byId(t.id,document));var e=this.getSyncedElementBySize(728,90);null!=e&&null!=i.byId(e.id,document)&&a.empty(i.byId(e.id,document))},_loadElementIframe:function(t,e,n,r){var o=i.byId(t,document);null!=o&&(a.empty(o),a.create("iframe",{src:e,width:n,height:r,scrolling:"no",frameborder:0,marginheight:0,marginwidth:0,allowtransparency:!0,style:{margin:0,padding:0}},o))},_showVastCompanions:function(t){this._cleanAdVastListeners();var e=this._filterCompanionAds(t.data.companions);e&&e.length&&n.forEach(e,(function(t,n){var r=this.getSyncedElementBySize(t.width,t.height);null!=r&&null!=i.byId(r.id,document)&&(this.emit("ad-break-synced-element",{type:this.VAST,id:r.id,data:e[n]}),this.companions.loadVASTCompanionAd(r.id,e[n]))}),this)},_onVastProcessComplete:function(t){this._showVastCompanions(t)},_onVastCompanionsReady:function(t){this._showVastCompanions(t)},_onVastAdPlaybackError:function(t){console.error("syncBanners::_onVastAdPlaybackError"),console.error(t),this._cleanAdVastListeners()},_cleanAdVastListeners:function(){this.vastProcessCompleteListener&&this.vastProcessCompleteListener.remove(),this.vastErrorListener&&this.vastErrorListener.remove()},_filterCompanionAds:function(t){if(!t||!t.length)return t;var e=[],i=[];return n.forEach(this._vastCompanionPriority,(function(r){n.forEach(t,(function(t){var a=t.width+t.height;t.resourceType.name==r&&n.indexOf(i,a)<0&&(e.push(t),i.push(a))}),this)}),this),e}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(2),n(12),n(7),n(11)],void 0===(r=function(t,e,n,i,r){return t([n],{constructor:function(t,e){this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"TargetSpot",module:this})},embed:function(t,n,a,o){var s=r.create("div",{id:"tsWrapper"},i.byId(t,document));window.ts_ready=e.hitch(this,this._tsReady);try{window.ts_swf_embed(s.id,this._getComponentSettings(n,a,o))}catch(t){this.emit("module-error",{id:"TargetSpot",error:"Error in targetSpot::embed: "+t.message})}},_getComponentSettings:function(t,e,n){return{w:300,h:250,prl:n,pageDomain:"player.tritondigital.com",htmlBanner:0,s:t,v:e}},playAd:function(t){window.ts_streamEvent({eventType:"playAd",eventDuration:t})},playPreroll:function(){window.ts_streamEvent({eventType:"tsPlayPreroll"})},interruptAd:function(){window.ts_streamEvent({eventType:"interruptAd"})},setStationId:function(t){window.ts_setStation({stationId:t})},setVolume:function(t){window.ts_setVolume({volume:t})},ts_setTargeting:function(t,e){window.ts_setTargeting({eventType:t,eventData:e})},_tsReady:function(){window.ts_mutePlayer=e.hitch(this,this._ts_mutePlayer),window.ts_unmutePlayer=e.hitch(this,this._ts_unmutePlayer),window.ts_noAds=e.hitch(this,this._ts_noAds),window.ts_noPreRoll=e.hitch(this,this._ts_noPreRoll),window.ts_adStarted=e.hitch(this,this._ts_adStarted),window.ts_adFinished=e.hitch(this,this._ts_adFinished),this.emit("targetspot-ready")},_ts_mutePlayer:function(t){this.emit("targetspot-mute")},_ts_unmutePlayer:function(){this.emit("targetspot-unmute")},_ts_noAds:function(){this.emit("targetspot-no-ads")},_ts_noPreRoll:function(){this.emit("targetspot-no-preroll")},_ts_adStarted:function(t){this.emit("targetspot-ad-started")},_ts_adFinished:function(t){this.emit("targetspot-ad-finished")}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(109),o=n(15);i=[n(1),n(2),n(14),n(12)],void 0===(r=function(t,e,n,i){return t([i],{constructor:function(t,e){this.inherited(arguments),this.see=null,this.seeRegApi=null,this.seeMetaApi=null,this.tenantId=t.tenantId,this.seeApiUrl=t.seeApiUrl,this.platform=new o(t.platformId)},start:function(){this.emit("module-ready",{id:"UserRegistration",module:this})},init:function(){var t=(null!=this.seeApiUrl?this.seeApiUrl:this.platform.endpoint.see).replace("{tenantId}",this.tenantId),i=new n;a.js(t,(function(){i.resolve()}));var r=e.hitch(this,this._seeApiLoaded),o=e.hitch(this,this._seeApiError);i.then((function(){window._See.bindEvent("RegApiReady",r)}),(function(t){o()}),(function(t){}))},_seeApiLoaded:function(){this.see=window._See,this.seeRegApi=window._See?window._See.regApi:void 0,this.seeMetaApi=window._See?window._See.metaApi:void 0,this.see.source="StreamingPlayer",null!=this.see?this.see.bindOrFireEvent("metaApiReady",e.hitch(this,(function(){this.emit("see-api-loaded"),this.isLoggedIn()&&this.emit("user-logged-in")}))):this._seeApiError()},_seeApiError:function(){this.emit("see-api-error")},login:function(t){if(null!=this.seeRegApi)switch(t.method){case"Userpwd":this.seeRegApi.login(t.username,t.password,t.persist,e.hitch(this,this._onLoginHandler));break;case"Facebook":this.seeRegApi.loginFacebook(e.hitch(this,this._onLoginHandler));break;case"Google":this.seeRegApi.loginGoogle(e.hitch(this,this._onLoginHandler))}else this.emit("see-regapi-not-ready")},connectSocial:function(t){if(null!=this.seeRegApi)switch(t){case"Facebook":this.seeRegApi.loginFacebook(e.hitch(this,this._onConnectSocialHandler));break;case"Google":this.seeRegApi.loginGoogle(e.hitch(this,this._onConnectSocialHandler))}else this.emit("see-regapi-not-ready")},removeSocial:function(t){if(null!=this.seeRegApi)switch(t){case"Facebook":this.seeRegApi.removeSocial("facebook",e.hitch(this,this._onRemoveSocialHandler));break;case"Google":this.seeRegApi.removeSocial("google",e.hitch(this,this._onRemoveSocialHandler))}else this.emit("see-regapi-not-ready")},isLoggedIn:function(){return this.see.config.user.is_loggedin},logout:function(){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.logout(e.hitch(this,this._onLogoutHandler))},forgotPassword:function(t,n){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.forgotPassword(t,e.hitch(this,this._onForgotPasswordHandler),n)},resetPassword:function(t,n){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.resetPassword(t,n,e.hitch(this,this._onResetPasswordHandler))},getUserDetails:function(t){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getUserDetails(e.hitch(this,this._onGetUserDetailsHandler),t)},registerFields:function(){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.registerFields(e.hitch(this,this._onRegisterFieldsHandler))},registerUser:function(t,n){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.registerUser(t,n,e.hitch(this,this._onRegisterUserHandler))},updateUser:function(t){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.updateUser(t,e.hitch(this,this._onUpdateUserHandler))},completeRegisterUser:function(t){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.completeRegister(t,e.hitch(this,this._onLoginHandler))},setLanguage:function(t){this.see.setLanguage(t,e.hitch(this,this._onSetLanguageHandler))},getStatusLevel:function(t,n){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getStatusLevel(t,n,e.hitch(this,this._onGetStatusLevel))},getLadderStatusLevels:function(t){return null==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getLadderStatusLevels(t,e.hitch(this,this._onGetLadderStatusLevels))},metaSet:function(t,n,i){return this.seeMetaApi?((i="object"==_typeof(i)?i:{}).callback=e.hitch(this,this._onMetaSetHandler),void this.seeMetaApi.set(t,n,i)):void this.emit("see-metaapi-not-ready")},metaGet:function(t,n){return this.seeMetaApi?((n="object"==_typeof(n)?n:{}).callback=e.hitch(this,this._onMetaGetHandler),void this.seeMetaApi.get(t,n)):void this.emit("see-metaapi-not-ready")},metaUpdate:function(t,n){if(this.seeMetaApi){var i={callback:e.hitch(this,this._onMetaUpdateHandler)};this.seeMetaApi.update(t,n,i)}else this.emit("see-metaapi-not-ready")},metaDelete:function(t){if(this.seeMetaApi){var n={callback:e.hitch(this,this._onMetaDeleteHandler)};this.seeMetaApi.del(t,n)}else this.emit("see-metaapi-not-ready")},metaClear:function(t){if(this.seeMetaApi){var n={callback:e.hitch(this,this._onMetaClearHandler)};this.seeMetaApi.clear(t,n)}else this.emit("see-metaapi-not-ready")},metaList:function(t,n){return this.seeMetaApi?((n="object"==_typeof(n)?n:{}).callback=e.hitch(this,this._onMetaListHandler),void this.seeMetaApi.list(t,n)):void this.emit("see-metaapi-not-ready")},triggerEvent:function(t){return this.see?void this.see.triggerEvent(t):void this.emit("see-not-ready")},bindEvent:function(t,e,n){return this.see?void this.see.bindEvent(t,e,n):void this.emit("see-not-ready")},bindOrFireEvent:function(t,e,n){return this.see?void this.see.bindOrFireEvent(t,e,n):void this.emit("see-not-ready")},cookieTest:function(){return this.see?(callback=e.hitch(this,this._onCookieTest),void this.see.cookieTest(callback)):void this.emit("see-not-ready")},isGamesEnabled:function(){return this.see?this.see.config.tenant.playerShowGames:(this.emit("see-not-ready"),!1)},getUserConfig:function(){return this.see?this.see.config.user:(this.emit("see-not-ready"),!1)},getConfig:function(){return this.see?this.see.config:(this.emit("see-not-ready"),!1)},initWidgets:function(t){return this.see?void this.see.initWidgets(t):(this.emit("see-not-ready"),!1)},_onLoginHandler:function(t){switch(t.status){case"PASS":this.emit("user-logged-in",t.context);break;case"FAIL":this.emit("user-login-error",t.context)}},_onConnectSocialHandler:function(t){switch(t.status){case"PASS":this.emit("social-connect",t.context);break;case"FAIL":this.emit("social-connect-error",t.context)}},_onRemoveSocialHandler:function(t){switch(t.status){case"PASS":this.emit("social-remove",t.context);break;case"FAIL":this.emit("social-remove-error",t.context)}},_onLogoutHandler:function(t){switch(t.status){case"PASS":this.emit("user-logged-out",t.context);break;case"FAIL":this.emit("user-logout-error",t.context)}},_onForgotPasswordHandler:function(t){switch(t.status){case"PASS":this.emit("forgot-password",t.context);break;case"FAIL":this.emit("forgot-password-error",t.context)}},_onResetPasswordHandler:function(t){switch(t.status){case"PASS":this.emit("reset-password",t.context);break;case"FAIL":this.emit("reset-password-error",t.context)}},_onGetUserDetailsHandler:function(t){switch(t.status){case"PASS":this.emit("user-details",t.context);break;case"FAIL":this.emit("user-details-error",t.context)}},_onRegisterFieldsHandler:function(t){switch(t.status){case"PASS":this.emit("register-fields",t.context);break;case"FAIL":this.emit("register-fields-error",t.context)}},_onRegisterUserHandler:function(t){switch(t.status){case"PASS":this.emit("register-user",t.context);break;case"FAIL":this.emit("register-user-error",t.context)}},_onUpdateUserHandler:function(t){switch(t.status){case"PASS":this.emit("user-update",t.context);break;case"FAIL":this.emit("user-update-error",t.context)}},_onSetLanguageHandler:function(t){switch(t.status){case"PASS":this.emit("language-change-success",t.context);break;case"FAIL":this.emit("language-change-error",t.context)}},_onGetStatusLevel:function(t){switch(t.status){case"PASS":this.emit("user-status",t.context);break;case"FAIL":this.emit("user-status-error",t.context)}},_onGetLadderStatusLevels:function(t){switch(t.status){case"PASS":this.emit("status-levels",t.context);break;case"FAIL":this.emit("status-levels-error",t.context)}},_onMetaSetHandler:function(t){switch(t.status){case"PASS":this.emit("meta-set",t.context);break;case"FAIL":this.emit("meta-set-error",t.context)}},_onMetaGetHandler:function(t){switch(t.status){case"PASS":this.emit("meta-get",t.context);break;case"FAIL":this.emit("meta-get-error",t.context)}},_onMetaUpdateHandler:function(t){switch(t.status){case"PASS":this.emit("meta-update",t.context);break;case"FAIL":this.emit("meta-update-error",t.context)}},_onMetaDeleteHandler:function(t){switch(t.status){case"PASS":this.emit("meta-delete",t.context);break;case"FAIL":this.emit("meta-delete-error",t.context)}},_onMetaClearHandler:function(t){switch(t.status){case"PASS":this.emit("meta-clear",t.context);break;case"FAIL":this.emit("meta-clear-error",t.context)}},_onMetaListHandler:function(t){switch(t.status){case"PASS":this.emit("meta-list",t.context);break;case"FAIL":this.emit("meta-list-error",t.context)}},_onCookieTest:function(t){switch(t.status){case"PASS":this.emit("cookie-test-pass");break;case"FAIL":this.emit("cookie-test-fail")}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(22);i=[n(1),n(2),n,n(14),n(3),n(11),n(7),n(29),n(105),n(10),n(121),n(123),n(122)],void 0===(r=function(t,e,n,i,r,o,s,u,l,c,d,h,f){return t([],{AD_PLAYBACK_START:"ad-playback-start",AD_PLAYBACK_COMPLETE:"ad-playback-complete",AD_PLAYBACK_DESTROY:"ad-playback-destroy",AD_PLAYBACK_ERROR:"ad-playback-error",AD_COUNTDOWN:"ad-countdown",AD_QUARTILE:"ad-quartile",VAST_COMPANIONS_READY:"vast-companions-ready",VAST_COMPANIONS_VPAID:"vast-companions-vpaid",AD_BLOCKER_DETECTED:"ad-blocker-detected",STREAMING_GUIDE_VERSION:"1.5.1",constructor:function(t,n,i,a){this.target=i,this.config=a,this.playerNode=s.byId(this.config.playerId,document),this.tech=t,this.techType=n,this.adModules=[],this.currentAdModule=null,this.xhrProv=new c,a.adBlockerDetected||(this.imaSdkModule=new d(i,a),this.VASTAdModule=new h(i,a),this.mediaAdModule=new f(i,a)),this.inherited(arguments),this._adParser=null,this._adSource=null,this._adFormat=null,r(this.target,"ad-playback-start",e.hitch(this,this._onAdPlaybackStart)),r(this.target,"ad-playback-error",e.hitch(this,this._onAdPlaybackError))},playAd:function(t,e){if(!0!==e.adBreak&&a.init(),this.config.adBlockerDetected)1!=e.adBreak&&this.target.emit(this.AD_BLOCKER_DETECTED,{data:{message:"playAd function has been disabled because Ad Blocker is activated"}});else if(this.destroyAd(!1),t==u.TRITON_AD_PLATFORM&&(t=u.VAST_AD,e=this._convertTAPConfigToVast(e)),e.url&&(e.url=this._generateUrl(e)),null!=e.url||null!=e.mediaUrl||null!=e.rawXML||null!=e.sid)if(e.url?(e.fallbackToVastPlugin=e.url.toLowerCase().indexOf("daast")>-1||e.url.toLowerCase().indexOf("/ondemand/ars")>-1,this._adFormat=e.url.toLowerCase().indexOf("daast")>-1?"DAAST":"VAST",this._adSource=e.url.toLowerCase().indexOf("daast")>-1?"TAP":e.sid?"CM3":"Others"):e.rawXML&&(e.fallbackToVastPlugin=e.rawXML.toLowerCase().indexOf("daast")>-1,this._adFormat=e.rawXML.toLowerCase().indexOf("daast")>-1?"DAAST":"VAST",this._adSource=e.rawXML.toLowerCase().indexOf("daast")>-1?"TAP":e.sid?"CM3":"Others"),"Flash"!=this.techType)switch(this.tech.prepare("adModule"),t){case u.VAST_AD:e.adBreak||e.fallbackToVastPlugin?(this._initAdModule(this.VASTAdModule,e),this._adParser="VASTModule"):(this._initAdModule(this.imaSdkModule,e),this._adParser="IMA");break;case u.MEDIA_AD:this._initAdModule(this.mediaAdModule,e),this._adParser="Direct";break;default:this.target.emit(this.AD_PLAYBACK_COMPLETE,{data:{type:null,error:!1}})}else this.tech.playAd(t,e);else this.target.emit(this.AD_PLAYBACK_ERROR,{data:{type:null,error:!0}})},skipAd:function(){return"Flash"==this.techType?void this.tech.skipAd():void(this.currentAdModule&&this.currentAdModule.skipAd())},destroyAd:function(t){return"Flash"==this.techType?void this.tech.destroyAd(t):void(this.currentAdModule&&this.currentAdModule.destroyAd(t))},reloadSyncBanner:function(){return"Flash"==this.techType?void this.tech.reloadSyncBanner():void(this.currentAdModule&&(this.adServerType!=u.VAST_AD&&this.adServerType!=u.TRITON_AD_PLATFORM||this.currentAdModule.reloadSyncBanner()))},_initAdModule:function(t,n){this._removeListeners(),this.currentAdModule=t,this._mediaAdReadyHandler=r(this.target,this.currentAdModule.AD_MODULE_MEDIA_READY,e.hitch(this,this._onMediaAdReady)),this._mediaAdEmptyHandler=r(this.target,this.currentAdModule.AD_MODULE_MEDIA_EMPTY,e.hitch(this,this._onMediaAdEmpty)),this._adCountdownHandler=r(this.target,this.currentAdModule.AD_MODULE_COUNTDOWN,e.hitch(this,this._onAdModuleCountdown)),this._adModulePlaybackStartHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_START,e.hitch(this,this._onAdModulePlaybackStart)),this._adModulePlaybackCompleteHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_COMPLETE,e.hitch(this,this._onAdModulePlaybackComplete)),this._adModulePlaybackDestroyHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_DESTROY,e.hitch(this,this._onAdModulePlaybackDestroy)),this._adModulePlaybackErrorHandler=r(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_ERROR,e.hitch(this,this._onAdModulePlaybackError)),this._adModuleQuartileHandler=r(this.target,this.currentAdModule.AD_MODULE_QUARTILE,e.hitch(this,this._onAdModuleQuartile)),this._adModuleCompanionsHandler=r(this.target,this.currentAdModule.AD_MODULE_COMPANIONS,e.hitch(this,this._onAdModuleCompanions)),this._adModuleClickTrackingHandler=r(this.target,this.currentAdModule.AD_MODULE_CLICK_TRACKING,e.hitch(this,this._onAdModuleClickTracking)),this._adModuleVastEmptyHandler=r(this.target,this.currentAdModule.AD_MODULE_VAST_EMPTY,e.hitch(this,this._onAdError)),this._adModuleVastErrorHandler=r(this.target,this.currentAdModule.AD_MODULE_VAST_ERROR,e.hitch(this,this._onAdError)),this.currentAdModule.init(n),this.currentAdModule.initAdListeners(this.tech.html5OnDemand)},_onAdPlaybackStart:function(t){},_onAdPlaybackError:function(t){},_onAdModuleCompanions:function(t){this.currentAdModule.emit(this.VAST_COMPANIONS_READY,t.data)},_onAdModulePlaybackStart:function(t){this._callImpressions(),this.currentAdModule.emit(this.AD_PLAYBACK_START,{type:t.data.type})},_onAdModulePlaybackComplete:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_COMPLETE,{type:t.data.type})},_onAdModulePlaybackDestroy:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_DESTROY)},_onAdModulePlaybackError:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_ERROR,{type:t.data.type})},_onAdModuleCountdown:function(t){this.currentAdModule.emit(this.AD_COUNTDOWN,{countDown:t.data.countDown})},_onAdModuleClickTracking:function(t){if(null!=t&&null!=t.data){var e=null!=t.data.clickThrough?t.data.clickThrough:null,n=null!=t.data.clickTrackings?t.data.clickTrackings:null,i=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e);if(null!=e&&1==i&&window.open(e),n)for(var r=n.length,a=0;a<r;a++)this.xhrProv.request(n[a],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})}},_onAdModuleQuartile:function(t){if(this.currentAdModule.getVastInlineAd())for(var e=this.currentAdModule.getVastInlineAd().getLinearTrackingEvents(this.currentAdModule._defaultSequence),n=e.length,i=0;i<n;i++)if(e[i].type==t.adQuartile)for(var r=e[i].urls,a=r.length,o=0;o<a;o++)this.xhrProv.request(r[o],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})},_onMediaAdReady:function(t){var e=t.data,n=this._getSupportedMediaFile(e);null!=n?this.tech.html5OnDemand.playAd({adServerType:e.adServerType,mediaUrl:n.url,mediaFormat:n.format,clickThrough:e.clickThrough,clickTrackings:e.clickTrackings}):this.target.emit(this.AD_PLAYBACK_ERROR,{data:{type:e.adServerType,error:!1}})},_onMediaAdEmpty:function(t){var e=t.data;this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_COMPLETE,{type:e.adServerType,error:!1})},_onAdError:function(t){var e=t.data;this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_ERROR,{type:e.adServerType,error:!1})},_removeListeners:function(){this._mediaAdReadyHandler&&this._mediaAdReadyHandler.remove(),this._mediaAdEmptyHandler&&this._mediaAdEmptyHandler.remove(),this._adCountdownHandler&&this._adCountdownHandler.remove(),this._adModulePlaybackStartHandler&&this._adModulePlaybackStartHandler.remove(),this._adModulePlaybackCompleteHandler&&this._adModulePlaybackCompleteHandler.remove(),this._adModulePlaybackErrorHandler&&this._adModulePlaybackErrorHandler.remove(),this._adModuleQuartileHandler&&this._adModuleQuartileHandler.remove(),this._adModuleClickTrackingHandler&&this._adModuleClickTrackingHandler.remove(),this._adModuleVastEmptyHandler&&this._adModuleVastEmptyHandler.remove(),this._adModuleVastErrorHandler&&this._adModuleVastErrorHandler.remove(),this._adModuleVastProcessCompleteHandler&&this._adModuleVastProcessCompleteHandler.remove(),this._adModuleCompanionsHandler&&this._adModuleCompanionsHandler.remove(),this._adModulePlaybackDestroyHandler&&this._adModulePlaybackDestroyHandler.remove()},_callImpressions:function(){if(this.currentAdModule.getVastInlineAd()){var t=this.currentAdModule.getVastInlineAd().impressions;if(t){var e=t.length;if(0==e)return;for(var n=0;n<e;n++)this.xhrProv.request(t[n],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})}}},_getAdModuleById:function(t,e){var n=this.adModules.length;if(0==n){var i=new t(this.target,this.config);return this.adModules.push({moduleId:e,module:i}),i}for(var r=0;r<n;r++)if(this.adModules[r].moduleId==e)return this.adModules[r].module;return i=new t(this.target,this.config),this.adModules.push({moduleId:e,module:i}),i},_getSupportedMediaFile:function(t){if(null==t)return null;switch(t.adServerType){case u.VAST_AD:case u.MEDIA_AD:if(null==t.mediaFiles||0==t.mediaFiles.length)return null;for(var e=t.mediaFiles,n=e.length,i=0;i<n;i++){if(this._isTypeSupported("video","video/mp4;"),("audio/aac"==e[i].type||"aac"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/aac;"))return{url:e[i].url,format:"audio"};if(("audio/mp4"==e[i].type||"m4a"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/mp4;"))return{url:e[i].url,format:"audio"};if(("audio/mpeg"==e[i].type||"mp3"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/mpeg;"))return{url:e[i].url,format:"audio"};if(("audio/wav"==e[i].type||"wav"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/wav;"))return{url:e[i].url,format:"audio"};if(("audio/ogg"==e[i].type||"oga"==e[i].url.split(".").pop()||"ogg"==e[i].url.split(".").pop())&&this._isTypeSupported("audio","audio/ogg;"))return{url:e[i].url,format:"audio"};if("audio/webm"==e[i].type&&this._isTypeSupported("audio","audio/webm;"))return{url:e[i].url,format:"audio"};if(("video/mp4"==e[i].type||"mp4"==e[i].url.split(".").pop()||"m4v"==e[i].url.split(".").pop())&&this._isTypeSupported("video","video/mp4;"))return{url:e[i].url,format:"video"};if(("video/ogg"==e[i].type||"ogv"==e[i].url.split(".").pop())&&this._isTypeSupported("video","video/ogg;"))return{url:e[i].url,format:"video"};if(("video/webm"==e[i].type||"webm"==e[i].url.split(".").pop())&&this._isTypeSupported("video","video/webm;"))return{url:e[i].url,format:"video"}}return null;default:return null}},_isTypeSupported:function(t,e){var n=s.byId("tdplayer_od_videonode",document);return!!n.canPlayType&&n.canPlayType(e)},_convertTAPConfigToVast:function(t){var e=new l;return t.url=e.getVastUri(t),t},_generateUrl:function(t){if(null!=t&&null!=t.url){if(t.url.indexOf("/ondemand/ars")>-1&&null!=t.trackingParameters){var n;null!=t.trackingParameters.tdsdk&&(n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+"tdsdk="+t.trackingParameters.tdsdk),null!=t.trackingParameters.position&&null!=t.trackingParameters.position.coords.latitude&&null!=t.trackingParameters.position.coords&&null!=t.trackingParameters.position.coords.longitude&&(n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+"lat="+parseFloat(t.trackingParameters.position.coords.latitude.toFixed(1))+"&long="+parseFloat(t.trackingParameters.position.coords.longitude.toFixed(1))),null!=t.trackingParameters.banners&&(n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+"banners="+t.trackingParameters.banners);var i=e.clone(t.trackingParameters);for(var r in delete i.tdsdk,delete i.position,delete i.banners,delete i.pname,delete i.pversion,i)n=t.url.indexOf("?")>-1?"&":"?",t.url+=n+r+"="+encodeURIComponent(i[r]);return t.url+=n+"version="+this.STREAMING_GUIDE_VERSION,t.url}return t.url}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(2),n(40),n(59),n(29),n(4)],void 0===(r=function(t,e,n,i,r,a){return t([n],{VAST_COMPANIONS_PRIORITY:["static","iframe","html"],IMA_LIBRARY_URL:"//imasdk.googleapis.com/js/sdkloader/ima3.js",_videoContent:null,_countdownTimer:null,_adDisplayContainer:null,_currentAd:null,_adsLoader:null,_adsRequest:null,_adsManager:null,_currentAdConfig:null,constructor:function(t,e){this.config=e,this._imaSdkLoaded=!1},init:function(t){this._destroy(),this._currentAdConfig=t,this.createAdDisplayContainer()},reloadSyncBanner:function(){this._destroy(),this.createAdDisplayContainer()},destroyAd:function(t){this._destroy(t),0!=t&&this.emit(this.AD_MODULE_PLAYBACK_DESTROY)},skipAd:function(){this._adsManager&&this._adsManager.getAdSkippableState()?this._adsManager.skip():this.emit(this.AD_MODULE_SKIPPABLE_STATE,{state:this._adsManager.getAdSkippableState()})},createAdDisplayContainer:function(){this._videoContent=document.getElementById("tdplayer_od_videonode"),this._adDisplayContainer||(this._adDisplayContainer=new google.ima.AdDisplayContainer(document.getElementById(this.config.playerId),this._videoContent),this._adDisplayContainer.initialize()),this.requestAds()},requestAds:function(){if(this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e.hitch(this,this._onAdsManagerLoaded),!1),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e.hitch(this,this._onAdError),!1),this._adsRequest=new google.ima.AdsRequest,void 0!==this._currentAdConfig.url)this._adsRequest.adTagUrl=this._currentAdConfig.url+(null==this.config.allowPersonalisedAds||this.config.allowPersonalisedAds?"":"&npa=1");else if(void 0!==this._currentAdConfig.sid){var t=new i,n=t.getVastUri(t.ENDPOINT,this._currentAdConfig.sid,this._currentAdConfig.mediaformat);this._adsRequest.adTagUrl=n}else void 0!==this._currentAdConfig.rawXML&&(this._adsRequest.adsResponse=this._currentAdConfig.rawXML);this._adsLoader.requestAds(this._adsRequest)},_onAdsManagerLoaded:function(t){var n=this,i=new google.ima.AdsRenderingSettings;if(this._adsManager=t.getAdsManager(this._videoContent,i),void 0!==this._adsManager){this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onCompanionsReady)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onStarted)),this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,e.hitch(this,this._onAllAdsCompleted)),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,e.hitch(this,this._onContentResumeRequested)),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,e.hitch(this,this._onResumed)),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,e.hitch(this,this._onAdPaused)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETED,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e.hitch(this,this._onAdError));var r=document.getElementById(this.config.playerId).offsetWidth,a=document.getElementById(n.config.playerId).offsetHeight;this.resizeHandler=setInterval((function(){r!=document.getElementById(n.config.playerId).offsetWidth&&(r=document.getElementById(n.config.playerId).offsetWidth,a=document.getElementById(n.config.playerId).offsetHeight,n._adsManager.resize(r,a,google.ima.ViewMode.NORMAL),n._resizeVideoTag(r,a))}),250),this._resizeVideoTag(r,a);try{var o=document.getElementById(this.config.playerId).offsetWidth,s=document.getElementById(this.config.playerId).offsetHeight;this._adsManager.init(o,s,google.ima.ViewMode.NORMAL),this._adsManager.start()}catch(t){}}},_resizeVideoTag:function(t,e){var n=document.getElementById("tdplayer_od_videonode");null!=a("ios")&&n?(n.width=t,n.height=e):n&&(n.style.width="0px",n.style.height="0px")},_onAdPaused:function(){this._removeCountdownTimer(),this._adsManager.resume()},_onResumed:function(t){var e=this;this._adsManager&&(this._countdownTimer=setInterval((function(){var t=parseInt(e._adsManager.getRemainingTime());e._onRemainingTimeChanged(t)}),250))},_onStarted:function(t){var e=this;this._removeCountdownTimer(),this._currentAd=t.getAd(),this._countdownTimer=setInterval((function(){var t=parseInt(e._adsManager.getRemainingTime());e._onRemainingTimeChanged(t)}),250),this.emit(this.AD_MODULE_PLAYBACK_START,{type:r.VAST_AD})},_onAllAdsCompleted:function(t){this._destroy(),this.emit(this.AD_MODULE_PLAYBACK_COMPLETE,{type:r.VAST_AD})},_onRemainingTimeChanged:function(t){this.emit(this.AD_MODULE_COUNTDOWN,{countDown:t})},_onContentResumeRequested:function(t){this._removeCountdownTimer()},_removeCountdownTimer:function(){this._countdownTimer&&clearInterval(this._countdownTimer)},_onAdError:function(t){this.emit(this.AD_MODULE_PLAYBACK_ERROR,{error:{message:t.getError().getMessage(),code:t.getError().getErrorCode()}}),this._destroy()},_onCompanionsReady:function(t){if(null!=this.config.companionAdSelectionSettings&&null!=this.config.companionAdSelectionSettings.elements){for(var e=new google.ima.CompanionAdSelectionSettings,n=void 0!==this.config.companionAdSelectionSettings.vastCompanionPriority?this.config.companionAdSelectionSettings.vastCompanionPriority:this.VAST_COMPANIONS_PRIORITY,i=[],r=0;r<this.config.companionAdSelectionSettings.elements.length;r++)for(var a=this.config.companionAdSelectionSettings.elements[r],o=0;o<n.length;o++){var s=n[o];switch(e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.SELECT_EXACT_MATCH,s){case"static":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC;break;case"html":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.HTML;break;case"iframe":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.IFRAME}var u=t.getAd().getCompanionAds(a.width,a.height,e);if(u.length>0){var l=new Object;l.width=a.width,l.height=a.height,l.content=u[0].getContent(),l.resourceType=new Object,l.resourceType.name=s,i.push(l);break}}i.length>0&&this.emit(this.AD_MODULE_COMPANIONS,{companions:i})}},_onQuartileEvent:function(t){switch(t.type){case google.ima.AdEvent.Type.STARTED:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(0),error:!1});break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(1),error:!1});break;case google.ima.AdEvent.Type.MIDPOINT:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(2),error:!1});break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(3),error:!1});break;case google.ima.AdEvent.Type.COMPLETED:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(4),error:!1})}},_destroy:function(t){t&&(this._adDisplayContainer&&this._adDisplayContainer.destroy(),this._adsLoader&&this._adsLoader.destroy(),this._adsManager&&this._adsManager.destroy()),this.resizeHandler&&clearInterval(this.resizeHandler),this._resizeVideoTag(0,0),this._videoContent&&("function"==typeof this._videoContent.exitFullscreen?this._videoContent.exitFullscreen():"function"==typeof this._videoContent.webkitExitFullscreen?this._videoContent.webkitExitFullscreen():"function"==typeof this._videoContent.mozCancelFullScreen?this._videoContent.mozCancelFullScreen():"function"==typeof this._videoContent.msExitFullscreen&&this._videoContent.msExitFullscreen()),this._removeCountdownTimer()}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(2),n(40),n(29)],void 0===(r=function(t,e,n,i){return t([n],{constructor:function(t,e){this.target=t,this.config=e},init:function(t){this.inherited(arguments),null!=t.mediaUrl?this.playAdUrl(t):this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:i.MEDIA_AD})},playAdUrl:function(t){if(1==/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t.mediaUrl)){var e=null!=t.linkUrl?t.linkUrl:null;this.emit(this.AD_MODULE_MEDIA_READY,{adServerType:i.MEDIA_AD,mediaFiles:[{url:t.mediaUrl}],clickThrough:e,clickTrackings:null})}else this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:i.MEDIA_AD})}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(16);i=[n(1),n(2),n(6),n(52),n(10),n(40),n(128),n(129),n(127),n(29),n(59)],void 0===(r=function(t,e,n,i,r,o,s,u,l,c,d){return t([o],{VAST_1_ROOT:"VideoAdServingTemplate",VAST_2_ROOT:"VAST",DAAST_ROOT:"DAAST",VERSION_1_0:"1.0",VERSION_2_0:"2.0",DAAST_VERSION_1_0:"DAAST_1.0",constructor:function(t){this.target=t,this._adConfig=null,this._mediaAdBlankFiles=null,this._skipMediaAdPlayback=!1,this._adBreak=!1,this._defaultSequence=-1,this._vastWrapperAd=null,this._wrapperCachedData=null,this.vastParser=null,this.vastDocument=null,this.onPlaybackStartHandler=null,this.onQuartileReachedHandler=null,this.onClickTrackingElementClickedHandler=null,this.xhrProv=new r,this._loadTimes=0,this._maxLoadTimes=5},init:function(t){this._adConfig=t,this.inherited(arguments),this._adBreak=!!t.adBreak,this._skipMediaAdPlayback=null!=t.skipMediaAdPlayback&&t.skipMediaAdPlayback,this._defaultSequence=null!=t.sequence?t.sequence:-1,this.loadVast(t)},loadVast:function(t){if(null!=t.rawXML)this._parseVast(a.parse(t.rawXML).documentElement);else if(null!=t.url)this.setMediaAdBlankFiles(null),this.xhrProv.request(t.url,t.url,this._getRequestArgs(),e.hitch(this,this._onVastLoadComplete),e.hitch(this,this._onVastLoadError));else if(null!=t.sid){var n=new d,i=n.getVastUri(n.ENDPOINT,this.config.sid,t.mediaformat);this.setMediaAdBlankFiles(n.mediaAdBlankFiles),this.xhrProv.request(i,i,this._getRequestArgs(),e.hitch(this,this._onVastLoadComplete),e.hitch(this,this._onVastLoadError))}},setMediaAdBlankFiles:function(t){this._mediaAdBlankFiles=t},getVastInlineAd:function(){return this.vastDocument.vastAd.inlineAd},reloadSyncBanner:function(){null!=this._adConfig&&this.loadVast(this._adConfig)},_onVastLoadComplete:function(t,e){this._parseVast(e)},_onVastLoadError:function(t,e){console.error("vastAdModule::_onVastLoadError - url ="+t+" - error="+e),null!=this._vastWrapperAd&&(null!=this._vastWrapperAd.error&&""!=this._vastWrapperAd.error&&this.xhrProv.request(this._vastWrapperAd.error,this._vastWrapperAd.error,this._getRequestArgs(),null,null),this._vastWrapperAd=null),0==this._adBreak&&this.emit(this.AD_MODULE_VAST_ERROR,{error:e})},_parseVast:function(t){if(this.vastDocument=null,this.vastParser=null,null!=t&&null!=t.nodeName){var e=this._getVersion(t.nodeName);if(this.vastParser=this._getVastParser(e),null!=this.vastParser&&(this.vastDocument=this.vastParser.parse(t)),null!=this.vastDocument)if(this._shouldLoadVASTWrapper(this.vastDocument.vastAd))this._loadTimes++,this._vastWrapperAd=this.vastDocument.vastAd.wrapperAd,this._cacheWrapperData(this._vastWrapperAd),this.loadVast({url:this.vastDocument.vastAd.wrapperAd.vastAdTagURL,skipMediaAdPlayback:this._skipMediaAdPlayback,sequence:this._defaultSequence});else{this._loadTimes=0,null!=this._vastWrapperAd&&(this.vastDocument.vastAd.inlineAd.addWrapperLinearTrackingEvents(this._wrapperCachedData.wrapperTrackingEvents),this.vastDocument.vastAd.inlineAd.addImpressions(this._wrapperCachedData.wrapperImpressions),this.vastDocument.vastAd.inlineAd.addWrapperLinearVideoClickTracking(this._wrapperCachedData.wrapperVideoClickTracking),this._vastWrapperAd=null,this._wrapperCachedData=null),this._vastWrapperAd=null;var n=!0;if(null!=this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence)&&this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence).length>0&&(n=!1,this.emit(this.AD_MODULE_COMPANIONS,{companions:this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence)})),1==this._skipMediaAdPlayback)return;var i=this._checkMediaAdBlankFiles(this.vastDocument.vastAd.inlineAd.getLinearMediaFiles(this._defaultSequence));if(null!=i){n=!1;var r=this.vastDocument.vastAd.inlineAd.getLinearVideoClick(this._defaultSequence),a=null!=r?r.clickThrough:null,o=null!=r?r.clickTrackings:null;this.emit(this.AD_MODULE_MEDIA_READY,{adServerType:c.VAST_AD,mediaFiles:i,clickThrough:a,clickTrackings:o})}else n&&this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:c.VAST_AD})}else this._loadTimes=0,this.emit(this.AD_MODULE_VAST_EMPTY,{adServerType:c.VAST_AD})}else this.emit(this.AD_MODULE_VAST_EMPTY,{adServerType:c.VAST_AD})},_getVersion:function(t){switch(t){case this.VAST_1_ROOT:return this.VERSION_1_0;case this.VAST_2_ROOT:return this.VERSION_2_0;case this.DAAST_ROOT:return this.DAAST_VERSION_1_0}return null},_cacheWrapperData:function(){null==this._wrapperCachedData&&(this._wrapperCachedData={wrapperImpressions:[],wrapperTrackingEvents:[],wrapperVideoClickTracking:[]});var t=this._vastWrapperAd.getLinearTrackingEvents(this._defaultSequence);null!=t&&t.length>0&&(this._wrapperCachedData.wrapperTrackingEvents=this._wrapperCachedData.wrapperTrackingEvents.concat(t));var e=this._vastWrapperAd.impressions;null!=e&&e.length>0&&(this._wrapperCachedData.wrapperImpressions=this._wrapperCachedData.wrapperImpressions.concat(e));var n=this._vastWrapperAd.getLinearVideoClick(this._defaultSequence);null!=n&&n.clickTrackings.length>0&&(this._wrapperCachedData.wrapperVideoClickTracking=this._wrapperCachedData.wrapperVideoClickTracking.concat(n.clickTrackings))},_shouldLoadVASTWrapper:function(t){return null!=t.wrapperAd&&null!=t.wrapperAd.vastAdTagURL&&this._loadTimes<=this._maxLoadTimes},_getVastParser:function(t){switch(t){case this.VERSION_1_0:return null==this.vastParser&&(this.vastParser=new s(this.target)),this.vastParser;case this.VERSION_2_0:return null==this.vastParser&&(this.vastParser=new u(this.target)),this.vastParser;case this.DAAST_VERSION_1_0:return null==this.vastParser&&(this.vastParser=new l(this.target)),this.vastParser}return null},_checkMediaAdBlankFiles:function(t){if(null==t)return null;for(var e=[],n=t.length,i=0;i<n;i++)this._isMediaAdBlankFile(t[i].url)||e.push(t[i]);return e},_isMediaAdBlankFile:function(t){if(null==this._mediaAdBlankFiles||0==this._mediaAdBlankFiles.length)return!1;for(var e=t.substr(t.lastIndexOf("/")+1),n=this._mediaAdBlankFiles.length,i=0;i<n;i++)if(this._mediaAdBlankFiles[i]==e)return!0;return!1},_getRequestArgs:function(){return{handleAs:"xml",preventCache:!1,withCredentials:!0,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(42)],void 0===(r=function(t,e){return t(e,{constructor:function(){this.logoTile=null,this.logoTitle=null,this.logoArtist=null,this.logoURL=null}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.trackingEvents=[],this.companionAds=[],this.nonLinearAds=[],this.video=null,this.inherited(arguments)},addWrapperLinearTrackingEvents:function(t){this.trackingEvents=this.trackingEvents.concat(t)},addWrapperLinearVideoClickTracking:function(t){null!=this.video&&(this.video.videoClick.clickTrackings=this.video.videoClick.clickTrackings.concat(t))},addImpression:function(t){this.impressions.push(t)},addImpressions:function(t){null!=t&&(this.impressions=this.impressions.concat(t))},getLinearTrackingEvents:function(t){return null==(t=t)&&(t=-1),this.trackingEvents},getCompanionAdUrl:function(t,e,n,i){var r=this.getCompanionAds(i);if(null==r)return null;for(var a=r.length,o=0;o<a;o++)if(1!=(r[o].width==t&&r[o].height==e)){if(null==n)return r[o];if(r[o].resourceType==n)return r[o]}return null},getCompanionAds:function(t){return null==(t=t)&&(t=-1),this.companionAds},getLinearMediaFiles:function(t){return null==(t=t)&&(t=-1),this.video.mediaFiles},getLinearMediaFileByIndex:function(t,e){return null==(e=e)&&(e=-1),null==(t=t)&&(t=0),null!=this.video&&null!=this.video.mediaFiles[t]?this.video.mediaFiles[t]:null},getLinearVideoClick:function(t){return null==(t=t)&&(t=-1),this.video.videoClick},getNonLinearAds:function(t){return null==(t=t)&&(t=-1),this.nonLinearAds},getLinearDuration:function(t){return null==(t=t)&&(t=-1),this.video.duration},addCompanionAd:function(t){this.companionAds.push(t)},addNonLinearAd:function(t){this.nonLinearAds.push(t)}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1)],void 0===(r=function(t){return t([],{constructor:function(){this.duration=null,this.adID=null,this.videoClick=null,this.mediaFiles=[]}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(16);i=[n(1),n(50),n(49),n(43),n(41),n(66),n(48),n(65),n(67),n(68),n(124),n(46),n(47),n(44),n(45)],void 0===(r=function(t,e,n,i,r,o,s,u,l,c,d,h,f,p,g){return t([e],{AD:"Ad",IMPRESSION:"Impression",DAAST_AD_TAG_URI:"DAASTAdTagURI",CREATIVES:"Creatives",CREATIVE:"Creative",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new i;var e=t.getElementsByTagName(this.AD);if(null==e[0])return null;var a=e[0].getAttribute(n.ID),o=new r(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,i=0;i<e;i++)t[i].getElementsByTagName(n.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[i].getElementsByTagName(n.INLINE)):t[i].getElementsByTagName(n.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[i].getElementsByTagName(n.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,i=t[0].childNodes,r=i.length,s=0;s<r;s++)i[s].nodeName==n.AD_SYSTEM?e.adSystem=a.textContent(i[s]):i[s].nodeName==n.AD_TITLE?e.adTitle=a.textContent(i[s]):i[s].nodeName==n.ERROR?e.errorURL=this.trim(a.textContent(i[s])):i[s].nodeName==n.DESCRIPTION?e.description=a.textContent(i[s]):i[s].nodeName==n.EXPIRES?e.expires=a.textContent(i[s]):i[s].nodeName==n.CATEGORY?e.category=a.textContent(i[s]):i[s].nodeName==n.SURVEY?e.survey=a.textContent(i[s]):i[s].nodeName==n.ADVERTISER&&(e.advertiser=a.textContent(i[s]));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseWrapperTag:function(t){for(var e=new s,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==this.DAAST_AD_TAG_URI?e.vastAdTagURL=this.trim(a.textContent(i[o])):i[o].nodeName==n.ERROR&&(e.error=this.trim(a.textContent(i[o])));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseImpressionTag:function(t){var e=[];if(null==t)return e;for(var n=t.length,i=0;i<n;i++)e.push(this.trim(a.textContent(t[i])));return e},_parseCreatives:function(t){var e=[];if(null==t[0]||null==t[0].getElementsByTagName(this.CREATIVE))return e;for(var n=t[0].getElementsByTagName(this.CREATIVE).length,i=t[0].getElementsByTagName(this.CREATIVE),r=0;r<n;r++){var a=this._parseCreative(i[r]);e.push(a)}return e},_parseCreative:function(t){var e=new u;return e.adID=t.getAttribute(n.AD_ID),e.id=t.getAttribute(n.ID),e.sequence=t.getAttribute(n.SEQUENCE),0!=t.getElementsByTagName(n.LINEAR).length?e.linearElement=this._parseCreativeLinear(t.getElementsByTagName(n.LINEAR)):0!=t.getElementsByTagName(n.NON_LINEAR_ADS).length?e.nonLinearAds=this._parseCreativeNonLinearAds(t.getElementsByTagName(n.NON_LINEAR_ADS)):0!=t.getElementsByTagName(n.COMPANION_ADS).length&&(e.companionAds=this._parseCreativeCompanionAds(t.getElementsByTagName(n.COMPANION_ADS))),e},_parseCreativeLinear:function(t){for(var e=new l,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.DURATION?e.duration=a.textContent(i[o]):i[o].nodeName==n.TRACKING_EVENTS?e.trackingEvents=this._parseTrackingEvents(i[o]):i[o].nodeName==n.AUDIO_INTERACTIONS?e.videoClick=this._parseVideoClick(i[o]):i[o].nodeName==n.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(i[o]));return e},_parseCreativeNonLinearAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.NON_LINEAR),r=i.length,o=0;o<r;o++){var s=new c;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.minSuggestedDuration=i[o].getAttribute(n.MIN_SUGGESTED_DURATION);for(var u=i[o].childNodes,l=u.length,d=0;d<l;d++)if(u[d].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[d]);else if(u[d].nodeName==n.NON_LINEAR_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[d]));else if(u[d].nodeName==n.IFRAME_RESOURCE)(h=new g).name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[d]));else if(u[d].nodeName==n.HTML_RESOURCE)(h=new g).name=h.HTML,s.resourceType=h,s.code=a.textContent(u[d]);else if(u[d].nodeName==n.STATIC_RESOURCE){var h;(h=new g).name=h.STATIC,s.resourceType=h,s.creativeType=u[d].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[d]))}e.push(s)}return s},_parseCreativeCompanionAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.COMPANION),r=i.length,o=0;o<r;o++){var s=new d;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT),s.logoTile=i[o].getAttribute(n.LOGO_TILE),s.logoTitle=i[o].getAttribute(n.LOGO_TITLE),s.logoArtist=i[o].getAttribute(n.LOGO_ARTIST),s.logoTile=i[o].getAttribute(n.LOGO_TILE);for(var u=i[o].childNodes,l=u.length,c=0;c<l;c++)if(u[c].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[c]);else if(u[c].nodeName==n.ALT_TEXT)s.altText=a.textContent(u[c]);else if(u[c].nodeName==n.COMPANION_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[c]));else if(u[c].nodeName==n.IFRAME_RESOURCE)(h=new g).name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[c]));else if(u[c].nodeName==n.HTML_RESOURCE)(h=new g).name=h.HTML,s.resourceType=h,s.code=a.textContent(u[c]);else if(u[c].nodeName==n.STATIC_RESOURCE){var h;(h=new g).name=h.STATIC,s.resourceType=h,s.creativeType=u[c].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.TRACKING_EVENTS){var f=u[c].getElementsByTagName(n.TRACKING);f.length>0&&f[0].getAttribute(n.EVENT)==n.CREATIVE_VIEW&&(s.creativeView=this.trim(a.textContent(u[c])))}e.push(s)}return e},_parseTrackingEvents:function(t){for(var e=[],i=t.getElementsByTagName(n.TRACKING),r=i.length,o=0;o<r;o++){var s=new h;s.urls.push(a.textContent(i[o])),s.type=i[o].getAttribute(n.EVENT),e.push(s)}return e},_parseVideoClick:function(t){for(var e=new f,i=t.childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.CLICK_THROUGH?e.clickThrough=this.trim(a.textContent(i[o])):i[o].nodeName==n.CLICK_TRACKING?e.clickTrackings.push(this.trim(a.textContent(i[o]))):i[o].nodeName==n.CUSTOM_CLICK&&e.customClicks.push(this.trim(a.textContent(i[o])));return e},_parseMediaFiles:function(t){for(var e=[],i=t.getElementsByTagName(n.MEDIA_FILE),r=i.length,o=0;o<r;o++){var s=new p;s.id=i[o].getAttribute(n.ID),s.bitrate=i[o].getAttribute(n.BITRATE),s.minbitrate=i[o].getAttribute(n.MIN_BITRATE),s.maxbitrate=i[o].getAttribute(n.MAX_BITRATE),s.codec=i[o].getAttribute(n.CODEC),s.height=i[o].getAttribute(n.HEIGHT),s.width=i[o].getAttribute(n.WIDTH),s.delivery=i[o].getAttribute(n.DELIVERY),s.type=i[o].getAttribute(n.TYPE),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.url=this.trim(a.textContent(i[o])),e.push(s)}return e}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(16);i=[n(1),n(50),n(49),n(43),n(41),n(125),n(48),n(126),n(47),n(46),n(42),n(44),n(45)],void 0===(r=function(t,e,n,i,r,o,s,u,l,c,d,h,f){return t([e],{AD:"Ad",VAST_AD_TAG_URL:"VASTAdTagURL",VIDEO:"Video",URL:"URL",CODE:"Code",RESOURCE_TYPE:"resourceType",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new i;var e=t.getElementsByTagName(this.AD);if(null==e[0])return null;var a=e[0].getAttribute(n.ID),o=new r(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,i=0;i<e;i++)t[i].getElementsByTagName(n.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[i].getElementsByTagName(n.INLINE)):t[i].getElementsByTagName(n.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[i].getElementsByTagName(n.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,i=t[0].childNodes,r=i.length,s=0;s<r;s++)i[s].nodeName==n.AD_SYSTEM?e.adSystem=a.textContent(i[s]):i[s].nodeName==n.AD_TITLE?e.adTitle=a.textContent(i[s]):i[s].nodeName==n.ERROR&&(e.errorURL=this.trim(a.textContent(i[s])));e.video=this._parseVideo(t[0].getElementsByTagName(this.VIDEO)),e.impressions=this._parseImpressions(t[0].getElementsByTagName(n.IMPRESSION));var u=t[0].getElementsByTagName(n.TRACKING_EVENTS);return null!=u&&u.length>0&&(e.trackingEvents=this._parseTrackingEvents(u[0])),e.companionAds=this._parseCompanionsAds(t[0].getElementsByTagName(n.COMPANION_ADS)),e.nonLinearAds=this._parseNonLinearAds(t[0].getElementsByTagName(n.NON_LINEAR_ADS)),e},_parseImpressions:function(t){var e=[];if(null==t||0==t.length)return e;for(var n=t[0].getElementsByTagName(this.URL).length,i=t[0].getElementsByTagName(this.URL),r=0;r<n;r++)e.push(a.textContent(i[r]));return e},_parseVideo:function(t){for(var e=new u,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.DURATION?e.duration=a.textContent(i[o]):i[o].nodeName==n.AD_ID?e.adID=a.textContent(i[o]):i[o].nodeName==n.VIDEO_CLICKS?e.videoClick=this._parseVideoClick(i[o]):i[o].nodeName==n.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(i[o]));return e},_parseVideoClick:function(t){for(var e=new l,i=t.childNodes,r=i.length,a=null,o=0;o<r;o++)i[o].nodeName==n.CLICK_THROUGH?(a=this._parseURLTags(i[o])).length>0&&(e.clickThrough=a[0]):i[o].nodeName==n.CLICK_TRACKING?e.clickTrackings=this._parseURLTags(i[o]):i[o].nodeName==n.CUSTOM_CLICK&&(e.customClicks=this._parseURLTags(i[o]));return e},_parseMediaFiles:function(t){for(var e,i=[],r=t.getElementsByTagName(n.MEDIA_FILE),a=r.length,o=0;o<a;o++)(e=new h).id=r[o].getAttribute(n.ID),e.bitrate=r[o].getAttribute(n.BITRATE),e.height=r[o].getAttribute(n.HEIGHT),e.width=r[o].getAttribute(n.WIDTH),e.delivery=r[o].getAttribute(n.DELIVERY),e.type=r[o].getAttribute(n.TYPE),e.url=this.trim(this.getTagValue(r[o],"URL")),i.push(e);return i},_parseTrackingEvents:function(t){for(var e,i,r,o=[],s=t.getElementsByTagName(n.TRACKING),u=s.length,l=0;l<u;l++){e=new c,r=(i=s[l].getElementsByTagName(this.URL)).length;for(var d=0;d<r;d++)e.urls.push(this.trim(a.textContent(i[d])));e.type=s[l].getAttribute(n.EVENT),o.push(e)}return o},_parseCompanionsAds:function(t){for(var e,i,r=[],o=t[0].getElementsByTagName(n.COMPANION),s=o.length,u=null,l=0;l<s;l++){(i=new d).id=o[l].getAttribute(n.ID),i.width=o[l].getAttribute(n.WIDTH),i.height=o[l].getAttribute(n.HEIGHT),i.expandedWidth=o[l].getAttribute(n.EXPANDED_WIDTH),i.expandedHeight=o[l].getAttribute(n.EXPANDED_HEIGHT);var c=new f;c.name=o[l].getAttribute(this.RESOURCE_TYPE).toLowerCase(),i.resourceType=c,i.creativeType=o[l].getAttribute(n.CREATIVE_TYPE),e=(u=o[l].childNodes).length;for(var h=0;h<e;h++)u[h].nodeName==n.AD_PARAMETERS?i.adParameters=a.textContent(u[h]):u[h].nodeName==n.ALT_TEXT?i.altText=a.textContent(u[h]):u[h].nodeName==n.COMPANION_CLICK_THROUGH?i.clickThroughURL=this.trim(a.textContent(u[h])):u[h].nodeName==this.URL?i.url=this.trim(a.textContent(u[h])):u[h].nodeName==this.CODE&&(i.code=this.trim(a.textContent(u[h])));r.push(i)}return r},_parseNonLinearAds:function(t){return null},_parseWrapperTag:function(t){for(var e=new s,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==this.VAST_AD_TAG_URL?e.vastAdTagURL=this.trim(a.textContent(i[o])):i[o].nodeName==n.VIDEO_CLICKS?e.videoClicks=this._parseVideoClick(i[o]):i[o].nodeName==n.ERROR?e.error=this.trim(a.textContent(i[o])):i[o].nodeName==n.TRACKING_EVENTS&&(e.trackingEvents=this._parseTrackingEvents(i[o]));return e.impressions=this._parseImpressions(t[0].getElementsByTagName(n.IMPRESSION)),e},_parseURLTags:function(t){for(var e=[],n=t.childNodes,i=n.length,r=0;r<i;r++)n[r].nodeName==this.URL&&e.push(this.trim(a.textContent(n[r])));return e}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(16);i=[n(1),n(50),n(49),n(43),n(41),n(66),n(48),n(65),n(67),n(68),n(42),n(46),n(47),n(44),n(45)],void 0===(r=function(t,e,n,i,r,o,s,u,l,c,d,h,f,p,g){return t([e],{AD:"Ad",IMPRESSION:"Impression",VAST_AD_TAG_URI:"VASTAdTagURI",CREATIVES:"Creatives",CREATIVE:"Creative",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new i;var e=t.getElementsByTagName(this.AD);if(null==e[0])return null;var a=e[0].getAttribute(n.ID),o=new r(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,i=0;i<e;i++)t[i].getElementsByTagName(n.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[i].getElementsByTagName(n.INLINE)):t[i].getElementsByTagName(n.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[i].getElementsByTagName(n.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,i=t[0].childNodes,r=i.length,s=0;s<r;s++)i[s].nodeName==n.AD_SYSTEM?e.adSystem=a.textContent(i[s]):i[s].nodeName==n.AD_TITLE?e.adTitle=a.textContent(i[s]):i[s].nodeName==n.ERROR?e.errorURL=this.trim(a.textContent(i[s])):i[s].nodeName==n.DESCRIPTION&&(e.description=a.textContent(i[s]));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseWrapperTag:function(t){for(var e=new s,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==this.VAST_AD_TAG_URI?e.vastAdTagURL=this.trim(a.textContent(i[o])):i[o].nodeName==n.ERROR&&(e.error=this.trim(a.textContent(i[o])));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseImpressionTag:function(t){var e=[];if(null==t)return e;for(var n=t.length,i=0;i<n;i++)e.push(this.trim(a.textContent(t[i])));return e},_parseCreatives:function(t){var e=[];if(null==t[0]||null==t[0].getElementsByTagName(this.CREATIVE))return e;for(var n=t[0].getElementsByTagName(this.CREATIVE).length,i=t[0].getElementsByTagName(this.CREATIVE),r=0;r<n;r++){var a=this._parseCreative(i[r]);e.push(a)}return e},_parseCreative:function(t){var e=new u;return e.adID=t.getAttribute(n.AD_ID),e.id=t.getAttribute(n.ID),e.sequence=t.getAttribute(n.SEQUENCE),0!=t.getElementsByTagName(n.LINEAR).length?e.linearElement=this._parseCreativeLinear(t.getElementsByTagName(n.LINEAR)):0!=t.getElementsByTagName(n.NON_LINEAR_ADS).length?e.nonLinearAds=this._parseCreativeNonLinearAds(t.getElementsByTagName(n.NON_LINEAR_ADS)):0!=t.getElementsByTagName(n.COMPANION_ADS).length&&(e.companionAds=this._parseCreativeCompanionAds(t.getElementsByTagName(n.COMPANION_ADS))),e},_parseCreativeLinear:function(t){for(var e=new l,i=t[0].childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.DURATION?e.duration=a.textContent(i[o]):i[o].nodeName==n.TRACKING_EVENTS?e.trackingEvents=this._parseTrackingEvents(i[o]):i[o].nodeName==n.VIDEO_CLICKS?e.videoClick=this._parseVideoClick(i[o]):i[o].nodeName==n.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(i[o]));return e},_parseCreativeNonLinearAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.NON_LINEAR),r=i.length,o=0;o<r;o++){var s=new c;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.minSuggestedDuration=i[o].getAttribute(n.MIN_SUGGESTED_DURATION);for(var u=i[o].childNodes,l=u.length,d=0;d<l;d++)if(u[d].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[d]);else if(u[d].nodeName==n.NON_LINEAR_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[d]));else if(u[d].nodeName==n.IFRAME_RESOURCE)(h=new g).name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[d]));else if(u[d].nodeName==n.HTML_RESOURCE)(h=new g).name=h.HTML,s.resourceType=h,s.code=a.textContent(u[d]);else if(u[d].nodeName==n.STATIC_RESOURCE){var h;(h=new g).name=h.STATIC,s.resourceType=h,s.creativeType=u[d].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[d]))}e.push(s)}return s},_parseCreativeCompanionAds:function(t){for(var e=[],i=t[0].getElementsByTagName(n.COMPANION),r=i.length,o=0;o<r;o++){var s=new d;s.id=i[o].getAttribute(n.ID),s.width=i[o].getAttribute(n.WIDTH),s.height=i[o].getAttribute(n.HEIGHT),s.expandedWidth=i[o].getAttribute(n.EXPANDED_WIDTH),s.expandedHeight=i[o].getAttribute(n.EXPANDED_HEIGHT);for(var u=i[o].childNodes,l=u.length,c=0;c<l;c++)if(u[c].nodeName==n.AD_PARAMETERS)s.adParameters=a.textContent(u[c]);else if(u[c].nodeName==n.ALT_TEXT)s.altText=a.textContent(u[c]);else if(u[c].nodeName==n.COMPANION_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[c]));else if(u[c].nodeName==n.IFRAME_RESOURCE)(h=new g).name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[c]));else if(u[c].nodeName==n.HTML_RESOURCE)(h=new g).name=h.HTML,s.resourceType=h,s.code=a.textContent(u[c]);else if(u[c].nodeName==n.STATIC_RESOURCE){var h;(h=new g).name=h.STATIC,s.resourceType=h,s.creativeType=u[c].getAttribute(n.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==n.TRACKING_EVENTS){var f=u[c].getElementsByTagName(n.TRACKING),p=f.length;if(p>0){s.creativeView=[];for(var m=0;m<p;m++)f[m].getAttribute(n.EVENT)==n.CREATIVE_VIEW&&s.creativeView.push(this.trim(a.textContent(f[m])))}}e.push(s)}return e},_parseTrackingEvents:function(t){for(var e=[],i=t.getElementsByTagName(n.TRACKING),r=i.length,o=0;o<r;o++){var s=new h;s.urls.push(a.textContent(i[o])),s.type=i[o].getAttribute(n.EVENT),e.push(s)}return e},_parseVideoClick:function(t){for(var e=new f,i=t.childNodes,r=i.length,o=0;o<r;o++)i[o].nodeName==n.CLICK_THROUGH?e.clickThrough=this.trim(a.textContent(i[o])):i[o].nodeName==n.CLICK_TRACKING?e.clickTrackings.push(this.trim(a.textContent(i[o]))):i[o].nodeName==n.CUSTOM_CLICK&&e.customClicks.push(this.trim(a.textContent(i[o])));return e},_parseMediaFiles:function(t){for(var e=[],i=t.getElementsByTagName(n.MEDIA_FILE),r=i.length,o=0;o<r;o++){var s=new p;s.id=i[o].getAttribute(n.ID),s.bitrate=i[o].getAttribute(n.BITRATE),s.height=i[o].getAttribute(n.HEIGHT),s.width=i[o].getAttribute(n.WIDTH),s.delivery=i[o].getAttribute(n.DELIVERY),s.type=i[o].getAttribute(n.TYPE),s.scalable="true"==i[o].getAttribute(n.SCALABLE),s.maintainAspectRatio="true"==i[o].getAttribute(n.MAINTAIN_ASPECT_RATIO),s.apiFramework=i[o].getAttribute(n.API_FRAMEWORK),s.url=this.trim(a.textContent(i[o])),e.push(s)}return e}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(2),n(3)],void 0===(r=function(t,e,n){return t([],{TDAS_REG_ONLY:"tdas-reg-only",constructor:function(t,i){this.mediaPlayer=t("MediaPlayer"),this.userRegistration=t("UserRegistration"),this.mediaPlayer.addHqTag(this.TDAS_REG_ONLY),n(i,"stream-start",e.hitch(this,this._onStreamStarted)),n(i,"stream-stop",e.hitch(this,this._onStreamStopped)),n(i,"user-logged-out",e.hitch(this,this._onUserLoggedOut)),n(i,"user-details",e.hitch(this,this._onUserDetails)),this.inherited(arguments)},_onStreamStarted:function(){this.userRegistration.triggerEvent("playerStart")},_onStreamStopped:function(){this.userRegistration.triggerEvent("playerStop")},_onUserLoggedOut:function(t){this._removeUserParameters(),this.mediaPlayer.disableHQ()},_onUserDetails:function(t){if(t.data||t.data){var e={};if(t.data.dob){var n=t.data.dob.split("/");e.dob=n[2]+"-"+n[0]+"-"+n[1]}t.data.gender&&(e.gender=t.data.gender.substr(0,1).toLowerCase()),t.data.zip&&(e.postalcode=t.data.zip),t.data.country&&(e.country=t.data.country),t.data.vid&&(e["tdas-vid"]=this.userRegistration.tenantId.toString()+"."+t.data.vid.toString()),t.data.tdas&&(e["tdas-utags"]=t.data.tdas["user-tags"],e["tdas-utcheck"]=t.data.tdas["user-tags-hash"]),null==this.mediaPlayer.config.defaultTrackingParameters&&(this.mediaPlayer.config.defaultTrackingParameters={}),this.mediaPlayer.config.defaultTrackingParameters.user=e,this.mediaPlayer.enableHQ()}},_removeUserParameters:function(){this.mediaPlayer.config.defaultTrackingParameters.user={}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;(function(a){var o=n(18),s=n(15);i=[n(1),n(2),n(7),n(69),n(70),n(11)],void 0===(r=function(t,e,n,i,r,u){return t([r],{eventMap:{onPlayerReady:"tech-ready",onStreamStarted:"stream-start",onStreamStopped:"stream-stop",onStreamFailed:"stream-fail",onStreamStatus:"_onStreamStatus",onTrackCuePoint:"_onTrackCuePoint",onSpeechCuePoint:"_onSpeechCuePoint",onCustomCuePoint:"_onCustomCuePoint",onTargetSpot:"targetspot-cue-point",onAdBreak:"_onAdBreakCuePoint",onSeekFailed:"seek-fail",onSeekInvalidTime:"seek-invalid-time",onTimeShiftPlaybackModeChanged:"time-shift-playback-mode-change",onTimeShiftStreamStart:"time-shift-stream-start",onTimeShiftPlayheadUpdate:"time-shift-playhead-update",onAdPlaybackStart:"ad-playback-start",onAdPlaybackComplete:"ad-playback-complete",onAdPlaybackError:"_onAdPlaybackError",onAdPlaybackSkippableState:"ad-playback-skippable-state",onAdCountdown:"ad-countdown",onAdQuartile:"ad-quartile",onVastProcessComplete:"vast-process-complete",onVastCompanionsReady:"vast-companions-ready",onConfigurationError:"configuration-error",onVideoMidRollPlaybackStart:"video-mid-roll-playback-start",onVideoMidRollPlaybackComplete:"video-mid-roll-playback-complete",onVpaidAdCompanions:"vpaid-ad-companions",onMediaLoadingStatus:"media-loading-status",onMediaPlaybackStatus:"_onMediaPlaybackStatus",onMediaPlaybackTimeUpdate:"media-playback-timeupdate",onMediaPlaybackMetadata:"media-playback-metadata",onMediaError:"_onMediaError"},statusMap:{LIVE_PAUSE:"paused",LIVE_PLAYING:"onAir",LIVE_STOP:"disconnected",LIVE_FAILED:"streamUnavailable",LIVE_BUFFERING:"buffering",LIVE_CONNECTING:"connecting",LIVE_RECONNECTING:"reconnecting",MEDIA_TIME_UPDATE:"timeupdate",MEDIA_SEEK_FAILED:"seekfailed",MEDIA_SEEK_INVALID_TIME:"seekinvalidtime",MEDIA_ENDED:"ended",MEDIA_PAUSED:"pause",MEDIA_STARTED:"play",MEDIA_STOPPED:"stop",MEDIA_RESUMED:"play",MEDIA_SEEKED:"play",MEDIA_BUFFERING:"buffering"},minimumVersionRequired:{major:10,minor:2,rev:0},CDN_URL:"sdk.listenlive.co",constructor:function(t,e,n){this.errorCode=new i,this.config.platformId=null!=this.config.platformId&&""!=this.config.platformId?this.config.platformId:"prod01";var r=new s(this.config.platformId);this.config.moduleDir=r.endpoint.coreModuleDir,this._isAdBreak=!1,this.inherited(arguments)},start:function(){return this.isMinimalRequiredVersion(this.minimumVersionRequired.major,this.minimumVersionRequired.minor,this.minimumVersionRequired.rev)?(this.inherited(arguments),this.swfPath=this.config.tdPlayerPath||this._getApiSwfUrl(),void this._embedFlash()):void this._onError(this.errorCode.flashModuleMap.flashPluginOutOfDate)},_getApiSwfUrl:function(){return"//"+this.CDN_URL+"/tdplayerapi/swf/tdplayer-api-6.0.swf"},_onReady:function(){},_onError:function(t){console.error("flash::_onError - code : "+t.code+", message : "+t.message),this.emit("tech-error",{error:t})},prepare:function(t){this.inherited(arguments)},playStream:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_playStream&&this.flashMovie.tdPlayer_playStream(t)},pauseStream:function(){this.inherited(arguments),this.flashMovie.tdPlayer_pauseStream()},stopStream:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_stopStream&&this.flashMovie.tdPlayer_stopStream()},resumeStream:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_resumeStream&&this.flashMovie.tdPlayer_resumeStream()},seekStream:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_seekStream&&this.flashMovie.tdPlayer_seekStream(t)},seekLive:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_seekLive&&this.flashMovie.tdPlayer_seekLive()},setVolume:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_setVolume&&this.flashMovie.tdPlayer_setVolume(t)},mute:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_mute&&this.flashMovie.tdPlayer_mute()},unMute:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_unMute&&this.flashMovie.tdPlayer_unMute()},playAd:function(t,e){this.inherited(arguments),e.companionAdSelectionSettings=this.config.companionAdSelectionSettings,"function"==typeof this.flashMovie.tdPlayer_playAd&&this.flashMovie.tdPlayer_playAd(t,e)},skipAd:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_skipAd&&this.flashMovie.tdPlayer_skipAd()},destroyAd:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_destroyAd&&this.flashMovie.tdPlayer_destroyAd(),0!=t&&this.emit("ad-playback-destroy")},playMedia:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_playMedia&&this.flashMovie.tdPlayer_playMedia({url:t.url,autoStart:!0})},pauseMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_pauseMedia&&this.flashMovie.tdPlayer_pauseMedia()},resumeMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_resumeMedia&&this.flashMovie.tdPlayer_resumeMedia()},stopMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_stopMedia&&this.flashMovie.tdPlayer_stopMedia()},seekMedia:function(t){this.inherited(arguments),0==t&&(t=.001),"function"==typeof this.flashMovie.tdPlayer_seekMedia&&this.flashMovie.tdPlayer_seekMedia(t)},_onStreamStatus:function(t){var e=n.byId(t.id,document);if(e){var i=o.getLocalization(),r=this.statusMap[t.code];r&&i[r]&&(t.status=i[r]),this.emit("stream-status",t,e)}},_onMediaPlaybackStatus:function(t){var e=n.byId(t.id,document);if(e){var i=o.getLocalization(),r=this.statusMap[t.code];r&&i[r]&&(t.status=i[r]),"MEDIA_STARTED"===t.code&&this.emit("media-playback-started"),this.emit("media-playback-status",t,e)}},_onMediaError:function(t){var e=n.byId(t.id,document);if(e){var i=o.getLocalization();i.error&&(t.error=i.error),this.emit("media-playback-error",t,e)}},_onTrackCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("track-cue-point",t)},_onSpeechCuePoint:function(t){t.cuePoint&&(t.cuePoint.mount=this.connection.mount),this.emit("speech-cue-point",t)},_onCustomCuePoint:function(t){t.cuePoint&&(t.cuePoint.mount=this.connection.mount),this.emit("custom-cue-point",t)},_onAdBreakCuePoint:function(t){this._adBreak=!!t.adBreakData.isVastInStream,this.emit("ad-break-cue-point",t)},_onAdPlaybackError:function(t){this._adBreak||this.emit("ad-playback-error",t)},_tdPlayerEvents:function(t,i){var r=n.byId(i.id,document);"_"==this.eventMap[t].substr(0,1)?e.hitch(this,this.eventMap[t])(i,t):r&&this.eventMap[t]&&this.emit(this.eventMap[t],i,r)},_embedFlash:function(){window.tdPlayerEvents=e.hitch(this,this._tdPlayerEvents);var t=o.getLocalization(),n=[{id:"directLiveStream"}];n[0].timeshift=this.config.timeShift?{active:this.config.timeShift.active||0,max_listening_time:this.config.timeShift.max_listening_time||30}:{active:0},null!=this.config.plugins&&this.config.plugins.length>0&&(n=n.concat(this.config.plugins));var i={playercore:{platform_id:this.config.platformId,plugins:n}};null!=this.config.moduleDir&&(i.playercore.module_dir=this.config.moduleDir),document.getElementById(this.config.playerId).innerHTML="";var r="flash_content";u.create("div",{id:r},document.getElementById(this.config.playerId)),a.embedSWF(this.swfPath,r,"100%","100%",this.minimumVersionRequired.major+"."+this.minimumVersionRequired.minor+"."+this.minimumVersionRequired.rev,!1,{isDebug:this.config.isDebug,config:encodeURIComponent(JSON.stringify(i)),id:this.playerNode.id},{scale:"showall",wmode:"transparent",allowScriptAccess:"always",allowNetworking:"all",hasPriority:"true"},!1,e.hitch(this,(function(e){e.success?(this.flashMovie=e.ref,this._onReady()):this._onError({message:t.embedFailed})})))},isMinimalRequiredVersion:function(t,e,n){var i=a.getFlashPlayerVersion();return t<i.major||!(t>i.major)&&(0==e||e<i.minor||!(e>i.minor)&&(0==n||n<i.rev||!(n>i.rev)))}})}.apply(e,i))||(t.exports=r)}).call(e,n(37))},function(t,e,n){var i,r;i=[n(1),n(2),n(26),n(11),n(69),n(70),n(60),n(38),n(134),n(135)],void 0===(r=function(t,e,n,i,r,a,o,s,u,l){return t([a],{constructor:function(t,e,n){this.errorCode=new r,this.playbackStatus=null,this.html5CheckerNode=null,this.target=e,this.inherited(arguments)},start:function(){return this._isHTML5Supported()?(this.inherited(arguments),this.html5Live=new u(this.playerNode,this.config),this.html5Live.setPlaybackStatusHandler(e.hitch(this,this._onPlaybackStatus)),this.html5Live.setCuePointHandler(e.hitch(this,this._onTrackCuePoint)),this.html5Live.setAdBreakHandler(e.hitch(this,this._onAdBreak)),this.html5Live.setHlsCuePointHandler(e.hitch(this,this._onHlsCuePoint)),this.html5Live.setSpeechCuePointHandler(e.hitch(this,this._onSpeechCuePoint)),this.html5Live.setCustomCuePointHandler(e.hitch(this,this._onCustomCuePoint)),this.html5Live.setStreamStartHandler(e.hitch(this,this._onStreamStart)),this.html5Live.setStreamStopHandler(e.hitch(this,this._onStreamStop)),this.html5Live.setStreamFailedHandler(e.hitch(this,this._onStreamFailed)),this.html5OnDemand=new l(this.playerNode),this._isMediaTagInitialized=!1,void this.emit("tech-ready",{id:this.playerNode})):void this.emit("tech-error",{error:this.errorCode.html5ModuleMap.browserNotSupported})},prepare:function(t){this.inherited(arguments),this._initMediaTag()},playStream:function(t){this.inherited(arguments),this.params=t,this._isMediaTagInitialized||this._initMediaTag(),this.html5OnDemand.clean(),this.html5Live.play(t)},pauseStream:function(){this.inherited(arguments),this.html5Live.pause()},stopStream:function(){this.inherited(arguments),this.html5Live.stop()},resumeStream:function(){this.inherited(arguments),this.html5Live.resume()},seekStream:function(t){this.inherited(arguments)},seekLive:function(){this.inherited(arguments)},setVolume:function(t){this.inherited(arguments),this.html5Live.setVolume(t),this.html5OnDemand.setVolume(t)},muteStream:function(){this.inherited(arguments),this.html5Live.mute()},muteMedia:function(){this.inherited(arguments),this.html5OnDemand.mute()},unMuteStream:function(){this.inherited(arguments),this.html5Live.unMute(this.params)},unMuteMedia:function(){this.inherited(arguments),this.html5OnDemand.unMute(this.params)},playMedia:function(t){this.inherited(arguments),null!=this.html5OnDemand&&(t.url.indexOf("live.streamtheworld.com")>=0?this.emit("tech-error",{error:this.errorCode.html5ModuleMap.tritonListenLink}):(this.playbackOnDemandStatushandler=this.html5OnDemand.setPlaybackStatusHandler(e.hitch(this,this._onMediaPlaybackStatus)),this.html5OnDemand.play({mediaUrl:t.url,mediaFormat:"audio"})))},pauseMedia:function(t){null!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.pause())},resumeMedia:function(t){null!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.resume())},stopMedia:function(t){null!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.stop())},seekMedia:function(t){this.inherited(arguments),this.html5OnDemand.seek(t)},_initMediaTag:function(){this.html5OnDemand.initMediaTag(),this._isMediaTagInitialized=!0},_onTrackCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("track-cue-point",t)},_onSpeechCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("speech-cue-point",t)},_onCustomCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("custom-cue-point",t)},_onHlsCuePoint:function(t){if(this.emit("hls-cue-point",t),t.cuePoint&&t.cuePoint.hlsTrackId){var e=this.connection.mountpoint.mediaFormat.audioTracks;e&&e.length&&e.length>=t.cuePoint.hlsTrackId&&this._currentBitrate!=e[t.cuePoint.hlsTrackId].bitRate&&(this._currentBitrate=e[t.cuePoint.hlsTrackId].bitRate,this.setCurrentTrack(e[t.cuePoint.hlsTrackId]),t.cuePoint.audioTrack=e[t.cuePoint.hlsTrackId],this.emit("stream-track-change",t))}},_onAdBreak:function(t){null!=t.cuePoint&&(t.adBreakData={},t.adBreakData.adVast=null!=t.cuePoint[s.AD_VAST]&&""!=t.cuePoint[s.AD_VAST]?t.cuePoint[s.AD_VAST]:null,t.adBreakData.cueID=null!=t.cuePoint[s.AD_ID]&&""!=t.cuePoint[s.AD_ID]?t.cuePoint[s.AD_ID]:null,t.adBreakData.cueTitle=null!=t.cuePoint[s.CUE_TITLE]&&""!=t.cuePoint[s.CUE_TITLE]?t.cuePoint[s.CUE_TITLE]:null,t.adBreakData.duration=null!=t.cuePoint[s.CUE_TIME_DURATION]&&""!=t.cuePoint[s.CUE_TIME_DURATION]?t.cuePoint[s.CUE_TIME_DURATION]:null,t.adBreakData.isVastInStream=!!(null!=t.cuePoint[s.AD_VAST_URL]&&""!=t.cuePoint[s.AD_VAST_URL]||t.cuePoint[s.AD_VAST]&&""!=t.cuePoint[s.AD_VAST]),t.adBreakData.url=null!=t.cuePoint[s.AD_URL]&&""!=t.cuePoint[s.AD_URL]?t.cuePoint[s.AD_URL]:null,t.adBreakData.vastUrl=null!=t.cuePoint[s.AD_VAST_URL]&&""!=t.cuePoint[s.AD_VAST_URL]?t.cuePoint[s.AD_VAST_URL]:null),1==t.adBreakData.isVastInStream&&(t.adBreakData.adVast||t.adBreakData.vastUrl)&&n.publish("api/request","get-vast-instream",t.adBreakData),this.emit("ad-break-cue-point",t)},_onPlaybackStatus:function(t){this.playbackStatus!=t.code&&(this.playbackStatus=t.code,this.emit("stream-status",t))},_onMediaPlaybackStatus:function(t){return"Error"==t.type?void this.emit("media-playback-error",{error:t.type,mediaElement:t.html5Node}):"timeupdate"==t.type?void this.emit("media-playback-timeupdate",{status:t.type,code:t.code,duration:parseInt(t.html5Node.duration),playedTime:parseInt(t.html5Node.currentTime),remainingTime:parseInt(t.html5Node.duration-t.html5Node.currentTime),percent:(t.html5Node.currentTime/t.html5Node.duration).toFixed(2)}):(this.emit("media-playback-status",{status:t.type,mediaElement:t.html5Node}),"play"==t.type&&this.emit("media-playback-started"),void("Ended"==t.type&&this.html5OnDemand.stop()))},_onMediaLoadingStatus:function(t){this.emit("media-loading-status",{percent:t.percent,mediaElement:t.html5Node})},_onStreamStart:function(){this._currentBitrate=null,this.setCurrentTrack(null),this.emit("stream-start")},_onStreamStop:function(){this.setCurrentTrack(null),this.emit("stream-stop")},_onStreamFailed:function(){this.setCurrentTrack(null),this.emit("stream-fail")},_isHTML5Supported:function(){this.html5CheckerNode=i.create("audio",{id:"testHtml5Node"},this.playerNode,"first");var t=!!this.html5CheckerNode.canPlayType;return null!=this.html5CheckerNode&&i.destroy(this.html5CheckerNode),t}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(3),n(13),n(2),n(64)],void 0===(r=function(t,e,n,i,r){return t([],{POLLING_DELAY:5e3,constructor:function(t){this.mount=null,this._cuePoint=[],this._adBreaks=[],this._npChecker=0,this._npTimerId=null,this._init(t)},_init:function(t){var a;this.nowPlayingApi=new r(t,new n),a=this.nowPlayingApi.target,this._onCuePointHandler=i.hitch(this,this._onCuePoint),this._onEmptyCuePointHandler=i.hitch(this,this._onEmptyCuePoint),null!=a&&(e(a,"cue-point",this._onCuePointHandler),e(a,"cue-point-empty",this._onEmptyCuePointHandler))},startCuePointsListener:function(t){this.mount=t,this._getNowPlaying(this.mount),this._npTimerId=setInterval(i.hitch(this,(function(){i.hitch(this,this._getNowPlaying(this.mount))})),this.POLLING_DELAY)},stopCuePointsListener:function(){clearInterval(this._npTimerId),this._cuePoint.length>0&&this._cuePoint.pop()},setTrackCuePointCallback:function(t){this._trackCuePointCallback=t},setAdBreakCuePointCallback:function(t){this._adBreakCuePointCallback=t},_getNowPlaying:function(t){this.nowPlayingApi.load({mount:t,hd:!1,numberToFetch:1,eventType:"track",mode:"nowPlaying"})},_onCuePoint:function(t){this.currentCuePoint=t.data.cuePoint,this.currentCuePoint.adUrl=null,this.currentCuePoint.cueTimeDuration=parseInt(this.currentCuePoint.cueTimeDuration)>0?parseInt(this.currentCuePoint.cueTimeDuration):15e3,this.currentMount=t.data.mount;var e=this.currentCuePoint.type,n=this.currentCuePoint.timestamp;if("ad"==e){if("endbreak"==this.currentCuePoint.adType)return;this._onAdBreak(n)}else{var i=this.currentCuePoint.artistName,r=this.currentCuePoint.cueTitle;if(this._cuePoint.length>0)for(var a=0;a<this._cuePoint.length;a++)if(this._cuePoint[a].artist==i&&this._cuePoint[a].title==r)return;null!=i&&null!=r&&this._onTrack(i,r)}},_onTrack:function(t,e){this._cuePoint.length>1&&this._cuePoint.shift(),this._cuePoint.push({artist:t,title:e}),this._trackCuePointCallback({mount:this.currentMount,cuePoint:this.currentCuePoint})},_onEmptyCuePoint:function(){this._npChecker+=1,3==this._npChecker&&(clearInterval(this._npTimerId),this._npChecker=0)},_onAdBreak:function(t){0==this._adBreakChecker(t)&&this._adBreakCuePointCallback({mount:this.currentMount,cuePoint:this.currentCuePoint})},_adBreakChecker:function(t){if(0==this._adBreaks.length)return this._adBreaks.push({timestamp:t}),0==this._cuePoint.length;for(var e=0;e<this._adBreaks.length;e++)if(this._adBreaks[e].timestamp==t)return!0;return this._adBreaks.length>2&&this._adBreaks.shift(),this._adBreaks.push({timestamp:t}),!1}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(18),o=(n(20),n(36)),s=(n(62),n(22));i=[n(1),n(13),n(2),n(11),n(19),n(7),n(39),n(71),n(150),n(133)],void 0===(r=function(t,e,n,i,r,u,l,c,d,h){return t([e],{statusMap:{abort:{status:"connecting",code:"LIVE_CONNECTING"},canPlay:{status:"buffering",code:"LIVE_BUFFERING"},canPlayThrough:{status:"onAir",code:"LIVE_PLAYING"},dataLoading:{status:"buffering",code:"LIVE_BUFFERING"},emptied:{status:"connecting",code:"LIVE_CONNECTING"},ended:{status:"disconnected",code:"LIVE_STOP"},error:{status:"streamUnavailable",code:"LIVE_FAILED"},loadStart:{status:"connecting",code:"LIVE_CONNECTING"},pause:{status:"paused",code:"LIVE_PAUSE"},play:{status:"onAir",code:"LIVE_PLAYING"},progress:{status:"onAir",code:"LIVE_PLAYING"},reconnecting:{status:"reconnecting",code:"LIVE_RECONNECTING"},stalled:{status:"disconnected",code:"LIVE_STOP"},stop:{status:"disconnected",code:"LIVE_STOP"},suspend:{status:"connecting",code:"LIVE_CONNECTING"},waiting:{status:"buffering",code:"LIVE_BUFFERING"},playbackNotAllowed:{status:"playbackNotAllowed",code:"PLAY_NOT_ALLOWED"}},constructor:function(t,e){this.playerNode=t,this.cfg=e,this.html5Node=null,this.audioNode=null,this.connections=null,this._playbackStatusCallback=null,this._cuePointCallback=null,this._adBreakCallback=null,this._hlsCuePointCallback=null,this._speechCuePointCallback=null,this._customCuePointCallback=null,this._streamStartCallback=null,this._streamStopCallback=null,this._streamFailedCallback=null,this.isPaused=!1,this.audioEventListenersAttached=!1},setPlaybackStatusHandler:function(t){this._playbackStatusCallback=t},setCuePointHandler:function(t){this._cuePointCallback=t},setAdBreakHandler:function(t){this._adBreakCallback=t},setHlsCuePointHandler:function(t){this._hlsCuePointCallback=t},setSpeechCuePointHandler:function(t){this._speechCuePointCallback=t},setCustomCuePointHandler:function(t){this._customCuePointCallback=t},setStreamStartHandler:function(t){this._streamStartCallback=t},setStreamStopHandler:function(t){this._streamStopCallback=t},setStreamFailedHandler:function(t){this._streamFailedCallback=t},play:function(t){s.isStopped()&&t&&(this._liveApiParams=t,this.mount=this._liveApiParams.mount,this.__isSidebandMetadataActivated()?(this.sidebandMetadata&&this.sidebandMetadata.destroy(),this.__activateSidebandMetadata()):this.__isASyncCuePointDispatcherActivated()&&this.__activateAsyncCuePointDispatcher(),this.__initAudioElement(),o.isSupported()&&this._liveApiParams.isHLS?s.playAudio(this._liveApiParams.url,!0,!0):s.playAudio(this._liveApiParams.url,!1,!0))},pause:function(){this.isPaused=!1,s.stop()},stop:function(){s.stop()},resume:function(){s.resume()},seekStream:function(t){},seekLive:function(){},setVolume:function(t){s.setVolume(t)},mute:function(){!s.audioNode||s.audioNode.paused||s.isStopped()||s.mute()},unMute:function(t){s.isStopped()&&(s.unMute(),this.play(t))},__initAudioElement:function(){0==this.audioEventListenersAttached&&(s.on("destroyAudioElement",this.__destroyAudioElement),s.on("html5-playback-status",n.hitch(this,this.__onHTML5PlayerStatus)),this.audioEventListenersAttached=!0)},__destroyAudioElement:function(){s.removeAllListeners("html5-playback-status"),s.removeAllListeners("destroyAudioElement"),this.sidebandMetadata&&this.sidebandMetadata.destroy()},__onHTML5PlayerStatus:function(t){this.__emitPlaybackStatus(t),t.type==l.PLAY?(!this.isPaused&&this.__isSidebandMetadataActivated()&&this.sidebandMetadata?this.sidebandMetadata.init(this._liveApiParams):this.aSyncCuePointDispatcher&&this.aSyncCuePointDispatcher.startCuePointsListener(this.mount),this.isPaused=!1,this._streamStartCallback()):t.type!=l.STOP&&t.type!=l.PAUSE&&t.type!=l.ERROR&&t.type!=l.ABORT&&t.type!=l.ENDED&&t.type!=l.PLAY_NOT_ALLOWED||(this.aSyncCuePointDispatcher&&this.aSyncCuePointDispatcher.stopCuePointsListener(),t.type!=l.STOP&&t.type!=l.ERROR&&t.type!=l.ABORT&&t.type!=l.PLAY_NOT_ALLOWED||(this.__isSidebandMetadataActivated()&&this.sidebandMetadata&&this.sidebandMetadata.destroy(),this._streamStopCallback()),t.type!=l.ERROR&&t.type!=l.ENDED||this._streamFailedCallback(),t.type==l.PAUSE&&s.stop())},__isSidebandMetadataActivated:function(){return null!=this._liveApiParams&&null!=this._liveApiParams.sbmConfig&&null!==this._liveApiParams.sbmConfig&&this._liveApiParams.sbmConfig.active&&this._liveApiParams.sbmConfig.info.active},__isASyncCuePointDispatcherActivated:function(){return null!=this._liveApiParams&&this._liveApiParams.sbmConfig&&this._liveApiParams.sbmConfig.aSyncCuePointFallback},__onCuePoint:function(t){this._cuePointCallback(t)},__onHlsCuePoint:function(t){this._hlsCuePointCallback(t)},__onSpeechCuePoint:function(t){this._speechCuePointCallback(t)},__onCustomCuePoint:function(t){this._customCuePointCallback(t)},__onAdBreak:function(t){this._adBreakCallback(t)},__activateSidebandMetadata:function(){this.sidebandMetadata||(this.sidebandMetadata=new d(this.audioNode)),this._liveApiParams.url=this.sidebandMetadata.getStreamConnectionUrl(this._liveApiParams.url),this.sidebandMetadata.setTrackCuePointCallback(n.hitch(this,this.__onCuePoint)),this.sidebandMetadata.setAdBreakCuePointCallback(n.hitch(this,this.__onAdBreak)),this.sidebandMetadata.setHlsCuePointCallback(n.hitch(this,this.__onHlsCuePoint)),this.sidebandMetadata.setSpeechCuePointCallback(n.hitch(this,this.__onSpeechCuePoint)),this.sidebandMetadata.setCustomCuePointCallback(n.hitch(this,this.__onCustomCuePoint)),this._liveApiParams.sbmConfig.aSyncCuePointFallback&&this.sidebandMetadata.setErrorCallback(n.hitch(this,this.__onSidebandMetadataError))},__activateAsyncCuePointDispatcher:function(){null==this.aSyncCuePointDispatcher&&(this.aSyncCuePointDispatcher=new h(this.cfg),this.aSyncCuePointDispatcher.setTrackCuePointCallback(n.hitch(this,this.__onCuePoint)),this.aSyncCuePointDispatcher.setAdBreakCuePointCallback(n.hitch(this,this.__onAdBreak)))},__onSidebandMetadataError:function(){s.isStopped()||(this.aSyncCuePointDispatcher||this.__activateAsyncCuePointDispatcher(),this.aSyncCuePointDispatcher.startCuePointsListener(this.mount))},__emitPlaybackStatus:function(t){if(null!=this._playbackStatusCallback){var e=a.getLocalization();if(null==e)return;var n=this.statusMap[t.type];n&&e[n.status]&&this._playbackStatusCallback({status:e[n.status],code:n.code})}}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r,a=n(18);i=[n(1),n(2),n(3),n(13),n(11),n(19),n(23),n(4),n(71)],void 0===(r=function(t,e,n,i,r,o,s,u,l){return t([i],{constructor:function(t){this.playerNode=t,this.html5Player=new l,this.html5Player.on("html5-playback-status",e.hitch(this,this.__onHTML5PlayerStatus)),this.html5OnDemandNode=this.__createHTML5Elements(),this._playbackStatusCallback=null,this._clickTrackingElementClickedCallback=null,this._adServerType=null,this._clickThrough=null,this._clickTrackings=null,this.onVideoNodeClickHandler=n(this.html5OnDemandNode,"click",e.hitch(this,this.__onVideoNodeClick)),this.onVideoNodeTouchHandler=n(this.html5OnDemandNode,"touchstart",e.hitch(this,this.__onVideoNodeClick))},play:function(t){this._adServerType=null,this.html5Player.play({url:t.mediaUrl,type:t.mediaFormat,mediaNode:this.audioNode,isLive:!1})},playAd:function(t){this.__initHtml5AdPlayer(this.videoNode),this._clickThrough=t.clickThrough,this._clickTrackings=t.clickTrackings,this._adServerType=t.adServerType,this.html5Player.play({url:t.mediaUrl,type:t.mediaFormat,mediaNode:this.videoNode,isLive:!1})},skip:function(){null!=this.html5Player&&(this.html5Player.skip(),this.__resetHTML5ElementsStyle(this.mediaNode))},stop:function(){null!=this.html5Player&&this.html5Player.stop()},pause:function(){null!=this.html5Player&&this.html5Player.pause()},resume:function(){null!=this.html5Player&&this.html5Player.resume()},seek:function(t){null!=this.html5Player&&this.html5Player.seek(t)},setVolume:function(t){null!=this.html5Player&&this.html5Player.setVolume(t)},mute:function(){null!=this.html5Player&&this.html5Player.mute()},unMute:function(){null!=this.html5Player&&this.html5Player.unMute()},initMediaTag:function(){this.audioNode||(this.audioNode=this.__createMediaTag("audio")),this.videoNode||(this.videoNode=this.__createMediaTag("video"))},setPlaybackStatusHandler:function(t){this._playbackStatusCallback=t},setClickTrackingElementClickedHandler:function(t){this._clickTrackingElementClickedCallback=t},clean:function(){null!=this.audioNode&&(u("ie11")?(r.destroy(this.audioNode),this.audioNode=null):(o.has(this.audioNode,"src")&&o.remove(this.audioNode,"src"),"function"==typeof this.audioNode.webkitExitFullScreen&&this.audioNode.webkitExitFullScreen())),null!=this.videoNode&&(u("ie11")?(r.destroy(this.videoNode),this.videoNode=null):(o.has(this.videoNode,"src")&&o.remove(this.videoNode,"src"),"function"==typeof window.document.exitFullscreen&&window.document.fullscreen&&window.document.exitFullscreen(),this.__resetHTML5ElementsStyle(this.videoNode))),this.__createHTML5Elements()},__onHTML5PlayerStatus:function(t){t.adServerType=this._adServerType,this.__emitPlaybackStatus(t)},__emitPlaybackStatus:function(t){if(null!=this._playbackStatusCallback){var e=a.getLocalization();if(null==e)return;this._adServerType||"canPlayThrough"!=t.type||(t.type="play");var n=this.statusMap[t.type];n&&(statusMsg=e[n.status]?e[n.status]:n.status,codeMsg=e[n.code]?e[n.code]:n.code,this._playbackStatusCallback({type:statusMsg,code:codeMsg,html5Node:t.mediaNode,adServerType:t.adServerType}))}},__createHTML5Elements:function(){if(null==this.html5OnDemandNode)return r.create("div",{id:"tdplayer_ondemand"},this.playerNode,"first")},__createMediaTag:function(t){if(t){var e=r.create(t,{id:"tdplayer_od_"+t+"node",type:t},this.html5OnDemandNode,"first");o.set(e,"height","0%"),o.set(e,"width","0%"),o.set(e,"x-webkit-airplay","allow");var n=r.create("source",{id:"tdplayer_od"+t+"source"},e,"first");o.set(n,"src",""),o.set(e,"playsinline","");try{e.play().catch((function(t){})),e.pause()}catch(t){}return e}},__initHtml5AdPlayer:function(t){this.initHTMLElementsStyle(t),this.isVideoClicked=!1},__resetHTML5ElementsStyle:function(t){t&&(s.set(t,"width","0px"),s.set(t,"height","0px"),s.set(t,"display","none"))},initHTMLElementsStyle:function(t){t&&(s.set(t,"width","100%"),s.set(t,"height","100%"),s.set(t,"display","block"),s.set(this.html5OnDemandNode,"width","100%"),s.set(this.html5OnDemandNode,"height","100%"),s.set(this.html5OnDemandNode,"background-color","#000000"),s.set(this.html5OnDemandNode,"display","block"))},__onVideoNodeClick:function(t){null!=this._clickThrough&&("touchstart"==t.type&&this.onVideoNodeClickHandler.remove(),this._clickTrackingElementClickedCallback({clickThrough:this._clickThrough,clickTrackings:this._clickTrackings}))},statusMap:{canPlay:{status:"buffering",code:"MEDIA_BUFFERING"},canPlayThrough:{status:"buffering",code:"MEDIA_BUFFERING"},dataLoading:{status:"buffering",code:"MEDIA_BUFFERING"},emptied:{status:"buffering",code:"MEDIA_BUFFERING"},ended:{status:"ended",code:"MEDIA_ENDED"},error:{status:"error",code:"MEDIA_ERROR"},loadStart:{status:"buffering",code:"MEDIA_BUFFERING"},pause:{status:"pause",code:"MEDIA_PAUSED"},play:{status:"play",code:"MEDIA_STARTED"},stalled:{status:"stop",code:"MEDIA_STOPPED"},stop:{status:"stop",code:"MEDIA_STOPPED"},suspend:{status:"buffering",code:"MEDIA_BUFFERING"},waiting:{status:"buffering",code:"MEDIA_BUFFERING"},timeupdate:{status:"timeupdate",code:"MEDIA_TIME_UPDATE"},playbackNotAllowed:{status:"playbackNotAllowed",code:"PLAY_NOT_ALLOWED"}}})}.apply(e,i))||(t.exports=r)},function(t,e){t.exports=function(t){this.url=null,this.mount=null,function(t,e){t.url=e.url?e.url._text:null,t.mount=e.mount?e.mount._text:null}(this,t)}},function(t,e){t.exports=function(t){this.index=null,this.codec=null,this.bitRate=null,this.sampleRate=null,this.codec=null,this.channels=null,function(t,e){t.index=parseInt(e._attr.index._value),t.codec=e._attr.codec._value,t.bitRate=parseInt(e._attr.bitrate._value),t.sampleRate=parseInt(e._attr.samplerate._value),t.codec=e._attr.codec._value,t.channels=parseInt(e._attr.channels._value),t.isMP3=-1!==t.codec.indexOf("mp3"),t.isAAC=-1!==t.codec.indexOf("aac")}(this,t)}},function(t,e,n){var i=n(8);t.exports=function(t){if(this.streamingConnections=t,this.totalIteration=1,this.first=!1,this.last=!1,this.streamingConnectionIndex=0,i.isEmpty(this.streamingConnections))throw new Error("ConnectionIterator::constructor At least one connection is needed.");this.reset=function(){this.streamingConnectionIndex=0},this.current=function(){return this.streamingConnections[this.streamingConnectionIndex]},this.next=function(){return this.first=!1,this.streamingConnectionIndex++,this.last=i.last(this.streamingConnections)===this.streamingConnections[this.streamingConnectionIndex],this.current()},this.hasLooped=function(){return this.last},this.isLastConnectionByMount=function(){var t=i.groupBy(this.streamingConnections,"mount")[this.current().mount].length;return this.totalIteration===t?(this.totalIteration=1,!0):(this.totalIteration++,!1)},this.reset()}},function(t,e,n){var i=n(8),r=n(15),a=n(140),o=n(143),s=n(72),u=n(30),l=n(21).getProtocol();t.exports=function(t,e,n,c,d,h,f,p){function g(t,e){return i.flatMap(t,(function(t){return i.flatMap(t.servers,(function(n){return t.transports.map((function(r){var a=function(t){return t.mediaFormat.audioTracks[0].isMP3?".mp3":function(t){return!t.mediaFormat.audioTracks[0].isAAC||t.isAudioAdaptive||t.hasHLS()||t.hasHLSTS()?"":".aac"}(t)}(t),o=function(t){var e=null;return t.hasHLS()||t.mediaFormat.isAudioAdaptive?e="application/x-mpegURL":t.mediaFormat.audioTracks[0].isAAC?e="audio/mp4":t.mediaFormat.audioTracks[0].isMP3&&(e="audio/mpeg;codecs=mp3"),e}(t);return{url:n+"/"+t.mount+(r.mountSuffix?r.mountSuffix:"")+("html5"===e.toLowerCase()?a:""),mount:t.mount,isGeoBlocked:t.status.isGeoBlocked,isAudioAdaptive:t.mediaFormat.isAudioAdaptive,alternateContent:t.alternateContent,mimeType:o,format:t.format,uuidEnabled:i.some(t.metrics,(function(t){return"uuid"===t.name})),sendPageUrl:t.sendPageURL,hasVideo:t.mediaFormat.hasVideo,type:t.mediaFormat.type,metadata:t.metadata,tags:t.tags,mountpoint:t,isHLS:!!r.transport&&"hls"===r.transport.toLowerCase(),isHLSTS:!!r.transport&&"hlsts"===r.transport.toLowerCase()}}))}))}))}this.DEFAULT_TRANSPORTS=["http","hls","hlsts"],this.RTMP_TRANSPORTS=["rtmpe","rtmpte","rtmp","rtmpt"],this.mountPointsError=[];var m=new r(t),v=p?l+"//"+p+"-"+m.endpoint.liveStream:l+"//"+m.endpoint.liveStream,y=this;this.getStreamingConnections=function(t,i,r){return new a(v).getLiveStreamConfig(t).then((function(t){var a=u.toSafeArray(t.mountpoints.mountpoint).filter((function(t){return t.status["status-code"]._text>=300&&y.mountPointsError.push(new o(t)),t.status["status-code"]._text<300})).map((function(t){return new o(t)}));return g(a=s.filterMountPoints(a,e,n,i,r,!c,!d,h,f),n)}))}}},function(t,e,n){function i(t,e){return a.Promise((function(n,i,r){(new u).request(t,e,{handleAs:"xml",preventCache:!0,query:e,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}},(function(t,e){t.station||t.mount,n(e)}),(function(t,e){t.station?console.error("liveStreamAPI::_onLoadError - station:"+t.station):t.mount&&console.error("liveStreamAPI::_onLoadError - mount:"+t.mount),i(e)}))}))}function r(t){var e=o.assign({},t);if(null==e||null==e)throw new Error("liveStreamAPI::getLiveStreamConfig() A query must be provided.");if("string"==typeof e&&(e={station:e}),"object"!=_typeof(e))throw new Error("liveStreamAPI::getLiveStreamConfig() A query object must be provided.");if(!e.station&&!e.mount)throw new Error("liveStreamAPI::getLiveStreamConfig(): A query must contain at least a station or mount parameter.");return e.transports&&0!=e.transports.length||(e.transports=l),e.transports&&(e.transports=e.transports.join(",")),e}var a=n(96),o=n(8),s=n(16),u=n(10),l=["http","hls","hlsts"],c=6e4,d=1.9;t.exports=function(t){var e=this;this.configs=[],this._requestProvisioningData=i,this.getConfig=function(t){var e;return t.station?e=this.configs[t.station]:delete t.station,t.mount?e=this.configs[t.mount+"_MOUNT"]:delete t.mount,e},this.getLiveStreamConfig=function(n){return a.Promise((function(i,a){try{var o=r(n)}catch(t){a(t)}var u=e.getConfig(o);u&&u.lastRefreshTime+c>=(new Date).getTime()?i(u):(o.version=d,e._requestProvisioningData(t,o).then((function(t){var n=s.xmlToJson(t);o.station?(e.configs[o.station]=n,e.configs[o.station].lastRefreshTime=(new Date).getTime()):o.mount&&(e.configs[o.mount+"_MOUNT"]=n,e.configs[o.mount+"_MOUNT"].lastRefreshTime=(new Date).getTime()),i(n)})))}))}}},function(t,e,n){var i=n(8),r=n(30),a=n(137),o=n(149),s=n(62),u="audio-adaptive";t.exports=function(t){this.container=null,this.cuePoints=null,this.trackScheme=null,this.audioTracks=null,this.videoTracks=null,this.hasAudio=null,this.hasVideo=null,this.type=null,this.isAudioAdaptive=null,function(t,e){t.container=e._attr.container._value,t.cuePoints=e._attr.cuepoints._value,t.trackScheme=e._attr.trackScheme._value;var n=r.toSafeArray(e.audio);t.audioTracks=n.map((function(t){return new a(t)}));var l=r.toSafeArray(e.video);t.videoTracks=l.map((function(t){return new o(t)})),t.isAudioAdaptive=t.trackScheme===u,t.hasAudio=!i.isEmpty(t.audioTracks),t.hasVideo=!i.isEmpty(t.videoTracks),t.type=t.hasVideo?s.VIDEO:s.AUDIO}(this,t)}},function(t,e){t.exports=function(t){this.shoutcastV1=null,this.shoutcastV2=null,this.sseSideband=null,function(t,e){t.shoutcastV1=e["shoutcast-v1"]?{active:e["shoutcast-v1"]._attr.enabled._value,mountSuffix:e["shoutcast-v1"]._attr.mountSuffix._value}:null,t.shoutcastV2=e["shoutcast-v2"]?{active:e["shoutcast-v2"]._attr.enabled._value,mountSuffix:e["shoutcast-v2"]._attr.mountSuffix._value}:null,t.sseSideband=e["sse-sideband"]?{active:e["sse-sideband"]._attr.enabled._value,streamSuffix:e["sse-sideband"]._attr.streamSuffix._value,metadataSuffix:e["sse-sideband"]._attr.metadataSuffix._value}:null}(this,t)}},function(t,e,n){var i=n(8),r=n(30),a=n(136),o=n(146),s=n(147),u=n(148),l=n(142),c=n(145),d=n(141),h=n(144);t.exports=function(t){h.call(this),function(t,e){t.alternateContent=e["alternate-content"]?new a(e["alternate-content"]):null,t.mount=e.mount._text||null,t.status=new o(e.status),e.status["status-code"]._text<300&&(t.tags=!e._attr||e._attr.tags||""===e._attr.tags._value?[]:e._attr.tags._value.split(",").map((function(t){return new s(t)})),t.transports=r.toSafeArray(e.transports.transport).map((function(t){return new u(t)})),t.metadata=new l(e.metadata),t.servers=new c(e.servers).servers,t.mediaFormat=new d(e["media-format"]),t.metrics=!e.metrics||i.isEmpty(e.metrics.tag)?[]:r.toSafeArray(e.metrics.tag).map((function(t){return new s(t)})),t.format=e.format._text||null,t.bitRate=i.toSafeInteger(e.bitrate._text),t.authentication=!!e.authentication&&!!parseInt(e.authentication._text),t.timeout=e.timeout?i.toSafeInteger(e.timeout._text):0,t.sendPageURL=!!e["send-page-url"]&&!!parseInt(e["send-page-url"]._text),t.isAvailable=!t.status.isError&&!t.status.isGeoBlocked&&!i.isEmpty(t.servers))}(this,t),this.hasTag=function(t){return i.some(this.tags,(function(e){return e.name==t}))},this.hasMetric=function(t){return i.some(this.metrics,(function(e){return e.name===t}))}}},function(t,e,n){var i=n(8);t.exports=function(){this.hasHLS=function(t){return t||(t=this),i.some(t.transports,(function(t){return"hls"===t.transport}))},this.hasHLSTS=function(t){return t||(t=this),i.some(t.transports,(function(t){return"hlsts"===t.transport}))}}},function(t,e,n){var i=n(8),r=n(30);t.exports=function(t){this.servers=null,function(t,e){t.servers=i.flatMap(r.toSafeArray(e.server),(function(t){var e=t.ip._text;return r.toSafeArray(t.ports.port).map((function(t){var n=t._attr.type._value,i=t._text;return n+"://"+e+":"+i}))}))}(this,t)}},function(t,e){t.exports=function(t){this.statusCode=null,this.message=null,this.isError=!1,this.isGeoBlocked=!1,function(t,e){t.statusCode=e["status-code"]?e["status-code"]._text:-1,t.message=e["status-message"]?e["status-message"]._text:null,t.isError=t.statusCode>=300||-1===t.statusCode,t.isGeoBlocked=453===t.statusCode}(this,t)}},function(t,e){t.exports=function(t){this.name=null,function(t,e){t.name=e||null}(this,t)}},function(t,e){t.exports=function(t){this.mountSuffix=null,this.transport=null,function(t,e){t.mountSuffix=e._attr?e._attr.mountSuffix._value:null,t.transport=e._text||null}(this,t)}},function(t,e){t.exports=function(t){this.index=null,this.codec=null,this.bitRate=null,this.frameRate=null,this.width=null,this.height=null,this.aspect=null,this.keyframeInterval=null,function(t,e){t.index=parseInt(e._attr.index._value),t.codec=e._attr.codec._value,t.bitRate=parseInt(e._attr.bitrate._value),t.frameRate=parseFloat(e._attr.framerate._value),t.width=parseInt(e._attr.width._value),t.height=parseInt(e._attr.height._value),t.aspect=parseFloat(e._attr.aspect._value),t.keyframeInterval=parseInt(e._attr["keyframe-interval"]._value)}(this,t)}},function(t,e,n){var i,r;i=[n(1),n(3),n(2),n(151)],void 0===(r=function(t,e,n,i){return t([],{constructor:function(t){this._sessionId=null,this._mediaNode=t,this._streamTimer=null,this._timer=0,this._connectionTime=0,this._onPlayHandler=n.hitch(this,this.__onTimeUpdate)},init:function(t){this._connectionTime=(new Date).getTime(),this._streamTimer=setInterval(this._onPlayHandler,250),this.sidebandMetadataConnector=new i,this.sidebandMetadataConnector.setSidebandMetadataFallbackCallback(n.hitch(this,this.__onSidebandMetadataFallback)),this.sidebandMetadataConnector.connect(this.__getMetadataConnectionUrl(t.url,t.mount,t.sbmConfig))},destroy:function(){this.onTimeUpdateListener&&this.onTimeUpdateListener.remove(),clearInterval(this._streamTimer),this._timer=0,this._connectionTime=0,this.sidebandMetadataConnector&&this.sidebandMetadataConnector.destroy(),delete this.sidebandMetadataConnector},getStreamConnectionUrl:function(t){return t+(-1!=t.indexOf("?")?"&":"?")+"sbmid="+this.__generateSessionId()},setTrackCuePointCallback:function(t){this._trackCuePointCallback=t},setAdBreakCuePointCallback:function(t){this._adBreakCuePointCallback=t},setHlsCuePointCallback:function(t){this._hlsCuePointCallback=t},setSpeechCuePointCallback:function(t){this._speechCuePointCallback=t},setCustomCuePointCallback:function(t){this._customCuePointCallback=t},setErrorCallback:function(t){this._errorCallback=t},__getMetadataConnectionUrl:function(t,e,n){return t&&e&&null!==n&&null!==n.info?t.split("/")[0]+"//"+t.split("/")[2]+"/"+e+n.info.metadataSuffix+"?sbmid="+this._sessionId:null},__generateSessionId:function(){var t=(new Date).getTime();return this._sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)})),this._sessionId},__onSidebandMetadataFallback:function(){this.destroy(),this._errorCallback({})},__onTimeUpdate:function(){this._timer=(new Date).getTime()-this._connectionTime,this.isStopped||this.isPaused||this.sidebandMetadataConnector&&this.sidebandMetadataConnector.getCurrentCuePoint()&&this._timer>=this.sidebandMetadataConnector.getCurrentCuePoint().timestamp&&("track"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._trackCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"ad"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._adBreakCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"hls"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._hlsCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"speech"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._speechCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"custom"===this.sidebandMetadataConnector.getCurrentCuePoint().type&&this._customCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}),this.sidebandMetadataConnector.shiftCuePointQueue())}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(3),n(6),n(2),n(63),n(61),n(38),n(60)],void 0===(r=function(t,e,n,i,r,a,o,s){var u;return t([],{SUPPORTED_EVENTS:["onMetaData","onCuePoint","onCuePointPreview","onCuePointPreviewExpired"],MAX_BACKOFF_RETRY:3,cuePointMap:(u={timestamp:"timestamp",type:"name",cue_title:a.CUE_TITLE,track_artist_name:a.ARTIST_NAME,track_album_name:a.ALBUM_NAME,program_id:a.PROGRAM_ID,cue_time_duration:a.CUE_TIME_DURATION,cue_time_start:a.CUE_TIME_START,track_id:a.TRACK_ID,track_nowplaying_url:a.NOW_PLAYING_URL,track_cover_url:a.TRACK_COVER_URL,ad_id:o.AD_ID,ad_type:o.AD_TYPE},_defineProperty(u,"cue_title",o.CUE_TITLE),_defineProperty(u,"cue_time_duration",o.CUE_TIME_DURATION),_defineProperty(u,"ad_url",o.AD_URL),_defineProperty(u,"ad_vast_url",o.AD_VAST_URL),_defineProperty(u,"ad_vast",o.AD_VAST),_defineProperty(u,"hls_track_id",s.HLS_TRACK_ID),_defineProperty(u,"hls_segment_id",s.HLS_SEGMENT_ID),u),constructor:function(){this._eventSource=null,this._eventQueue=[],this._currentSbmUrl=null,this._backOffRetry=0,this.__onMessageHandler=i.hitch(this,this.__onMessage),this.__onOpenHandler=i.hitch(this,this.__onOpen),this.__onErrorHandler=i.hitch(this,this.__onError)},connect:function(t){this._currentSbmUrl=t,this.__subscribe(t),this.__resetBackOff()},destroy:function(){this.__unlisten(),this.__close()},getCurrentCuePoint:function(){return this._eventQueue.length>0?this._eventQueue[0]:null},shiftCuePointQueue:function(){this._eventQueue.length&&this._eventQueue.shift()},setSidebandMetadataFallbackCallback:function(t){this._sidebandMetadataFallbackCallback=t},__subscribe:function(t){null!=this._eventSource&&(this._eventSource.close(),this._eventSource=null),"undefined"!=typeof EventSource&&(this._eventSource=new EventSource(t),this.__listen())},__listen:function(){this._messageListener=e(this._eventSource,"message",this.__onMessageHandler),this._openListener=e(this._eventSource,"open",this.__onOpenHandler),this._errorListener=e(this._eventSource,"error",this.__onErrorHandler)},__unlisten:function(){this._messageListener&&this._messageListener.remove(),this._openListener&&this._openListener.remove(),this._errorListener&&this._errorListener.remove()},__close:function(){this._currentSbmUrl=null,null!=this._eventSource&&(this._eventSource.close(),this._eventSource=null)},__onMessage:function(t){var e=JSON.parse(t.data);if(null==e.type||this.__isSupportedEvent(e)){var n={};switch(e.type){case"onMetaData":this.__onMetadata(e);break;case"onCuePoint":n=this.__onCuePoint(e);break;case"onCuePointPreview":n=this.__onCuePointPreview(e);break;case"onCuePointPreviewExpired":n=this.__onCuePointPreviewExpired(e)}this._eventQueue.push(n)}},__onCuePoint:function(t){var e={};for(var n in e.parameters=t.parameters,e.timestamp=t.timestamp,e.type=t.name,t.parameters)this.cuePointMap[n]&&(e[this.cuePointMap[n]]=t.parameters[n]);return"ad"==e.type&&(e.isVastInStream=!!(null!=e[o.AD_VAST_URL]&&""!=e[o.AD_VAST_URL]||e[o.AD_VAST]&&""!=e[o.AD_VAST])),e},__onMetadata:function(t){},__onCuePointPreview:function(t){},__onCuePointPreviewExpired:function(t){},__onOpen:function(t){this.__resetBackOff()},__onError:function(t){console.error("sidebandMetadataConnector:error"),this._backOffRetry==this.MAX_BACKOFF_RETRY?this._sidebandMetadataFallbackCallback():this.__reconnect()},__isSupportedEvent:function(t){return-1!=n.indexOf(this.SUPPORTED_EVENTS,t.type)},__reconnect:function(){this._backOffRetry++,null!=this._currentSbmUrl&&this.__subscribe(this._currentSbmUrl)},__resetBackOff:function(){this._backOffRetry=0}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(2),n(10),n(31),n(6),n(73),n(74),n(3)],void 0===(r=function(t,e,n,i,r,a,o,s){return t([i],{constructor:function(t,e){this.artistData=null,this.inherited(arguments)},getName:function(){return null!=this.artistData?this.artistData.name:this.data.name},getBiography:function(){return this.artistData.biography},getBirthDate:function(){return this.artistData.beginDate},getEndDate:function(){return this.artistData.endDate},getBeginPlace:function(){return this.artistData.beginPlace},getEndPlace:function(){return this.artistData.endPlace},getIsGroup:function(){return this.artistData.isGroup},getCountry:function(){return this.artistData.country},getGenres:function(){for(var t=[],e=0;e<this.artistData.genres.length;e++)t.push(this.artistData.genres[e].name);return t},getSimilar:function(){return this.artistData.similars},getMembers:function(){return this.artistData.members},getWebsite:function(){return this.artistData.website},getTwitterUsername:function(){return this.artistData.twitter},getFacebookUrl:function(){return this.artistData.facebook},getAlbums:function(){var t;return null==this.albums&&(this.albums=[],r.forEach(this.artistData.albums,(function(e,n){t=new a(e,this.platformId),this.albums.push(t)}),this)),this.albums},getAlbumById:function(t){var e=-1;return r.forEach(this.getAlbums(),(function(n,i){n.id==t&&(e=i)}),this),e>-1?this.getAlbums()[e]:null},getPictures:function(){var t;return null==this.pictures&&(this.pictures=[],r.forEach(this.artistData.pictures,(function(e,n){e.artistId=this.id,t=new o(e,this.platformId),this.pictures.push(t)}),this)),this.pictures},getPictureById:function(t){var e=-1;return r.forEach(this.getPictures(),(function(n,i){n.id==t&&(e=i)}),this),e>-1?this.getPictures()[e]:null},fetchData:function(t){(t=null!=t&&t)&&(this.url=this.getDynamicArtistUrl(this.id)),0==this.alreadyFetched?(new n).request(this.url,{isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError)):this.notify("artist-complete",{artistId:this.id})},fetchAlbumByIds:function(t){"string"==typeof t&&(t=[t]),this.albumsQueue=e.clone(t);for(var n,i=0;i<t.length;i++)(n=this.getAlbumById(t[i])).successCallback&&n.successCallback.remove(),n.errorCallback&&n.errorCallback.remove(),n.successCallback=s(n,"album-complete",e.hitch(this,this._onAlbumComplete)),n.errorCallback=s(n,"album-error",e.hitch(this,this._onAlbumComplete)),n.fetchData()},fetchPictureByIds:function(t){"string"==typeof t&&(t=[t]),this.picturesQueue=e.clone(t);for(var n,i=0;i<t.length;i++)(n=this.getPictureById(t[i])).successCallback&&n.successCallback.remove(),n.errorCallback&&n.errorCallback.remove(),n.successCallback=s(n,"picture-complete",e.hitch(this,this._onPictureComplete)),n.errorCallback=s(n,"picture-error",e.hitch(this,this._onPictureComplete)),n.fetchData()},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("artist-error",{artistId:this.id})},_onLoadComplete:function(t,e){this.artistData=e.artist,this.alreadyFetched=!0,this.notify("artist-complete",{artistId:this.id})},_onAlbumComplete:function(t,e){this._removeAlbumFromQueue(t.albumId),0==this.albumsQueue.length&&this.notify("album-complete",this.albums)},_removeAlbumFromQueue:function(t){var e=-1;r.forEach(this.albumsQueue,(function(n,i){n==t&&(e=i)}),this),e>-1&&this.albumsQueue.splice(e,1)},_onPictureComplete:function(t,e){this._removePictureFromQueue(t.pictureId),0==this.picturesQueue.length&&this.notify("picture-complete",this.pictures)},_removePictureFromQueue:function(t){var e=-1;r.forEach(this.picturesQueue,(function(n,i){n==t&&(e=i)}),this),e>-1&&this.picturesQueue.splice(e,1)}})}.apply(e,i))||(t.exports=r)},function(t,e,n){var i,r;i=[n(1),n(75),n(152),n(73)],void 0===(r=function(t,e,n,i){return t([],{constructor:function(t,e,n){this.songData=t,this.npeId=e,this.platformId=n,this.trackInstance=null,this.albumInstance=null,this.artistInstance=null,this.inherited(arguments)},track:function(){return null==this.songData.track?null:(null==this.trackInstance&&(this.trackInstance=new e(this.songData.track,this.platformId)),this.trackInstance)},artist:function(){return null==this.songData.artists?null:(null==this.artistInstance&&(this.artistInstance=new n(this.songData.artists[0],this.platformId)),this.artistInstance)},album:function(){return null==this.songData.album?null:(null==this.albumInstance&&(this.albumInstance=new i(this.songData.album,this.platformId)),this.albumInstance)}})}.apply(e,i))||(t.exports=r)}])},"object"==_typeof(exports)&&"object"==_typeof(module)?module.exports=e():(__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=e)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}).call(this,__webpack_require__(6)(module))},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Slider 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(0),n(16),n(18),n(1),n(7)],void 0===(a="function"==typeof(i=function(t){return t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,r=this.element.find(".ui-slider-handle"),a=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),e=r.length;e<n;e++)a.push("<span tabindex='0'></span>");this.handles=r.add(t(a.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var n,i,r,a,o,s,u,l=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var n=Math.abs(i-l.values(e));(r>n||r===n&&(e===l._lastChangedValue||l.values(e)===c.min))&&(r=n,a=t(this),o=e)})),!1!==this._start(e,o)&&(this._mouseSliding=!0,this._handleIndex=o,this._addClass(a,null,"ui-state-active"),a.trigger("focus"),s=a.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-s.left-a.width()/2,top:e.pageY-s.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r,a;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(i=n/e)>1&&(i=1),i<0&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),a=this._valueMin()+i*r,this._trimAlignValue(a)},_uiHash:function(t,e,n){var i={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(i.value=void 0!==e?e:this.values(t),i.values=n||this.values()),i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,n){var i,r=this.value(),a=this.values();this._hasMultipleValues()&&(i=this.values(e?0:1),r=this.values(e),2===this.options.values.length&&!0===this.options.range&&(n=0===e?Math.min(i,n):Math.max(i,n)),a[e]=n),n!==r&&!1!==this._trigger("slide",t,this._uiHash(e,n,a))&&(this._hasMultipleValues()?this.values(e,n):this.value(n))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var i,r,a;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this._hasMultipleValues()?this._values(e):this.value();for(i=this.options.values,r=arguments[0],a=0;a<i.length;a+=1)i[a]=this._trimAlignValue(r[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,n){var i,r=0;switch("range"===e&&!0===this.options.range&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(r=this.options.values.length),this._super(e,n),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(n),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=r-1;i>=0;i--)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this._hasMultipleValues()){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step;(t=Math.round((t-e)/n)*n+e)>this.options.max&&(t-=n),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,n,i,r,a,o=this.options.range,s=this.options,u=this,l=!this._animateOff&&s.animate,c={};this._hasMultipleValues()?this.handles.each((function(i){n=(u.values(i)-u._valueMin())/(u._valueMax()-u._valueMin())*100,c["horizontal"===u.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[l?"animate":"css"](c,s.animate),!0===u.options.range&&("horizontal"===u.orientation?(0===i&&u.range.stop(1,1)[l?"animate":"css"]({left:n+"%"},s.animate),1===i&&u.range[l?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===i&&u.range.stop(1,1)[l?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&u.range[l?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n})):(i=this.value(),r=this._valueMin(),a=this._valueMax(),n=a!==r?(i-r)/(a-r)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[l?"animate":"css"](c,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:n+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:100-n+"%"},s.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:n+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:100-n+"%"},s.animate))},_handleEvents:{keydown:function(e){var n,i,r,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,a)))return}switch(r=this.options.step,n=i=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:i=this._valueMin();break;case t.ui.keyCode.END:i=this._valueMax();break;case t.ui.keyCode.PAGE_UP:i=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;i=this._trimAlignValue(n+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;i=this._trimAlignValue(n-r)}this._slide(e,a,i)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),this._removeClass(t(e.target),null,"ui-state-active"))}}})})?i.apply(e,r):i)||(t.exports=a)},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(0),n(17),n(1),n(7)],void 0===(a="function"==typeof(i=function(t){var e=!1;return t(document).on("mouseup",(function(){e=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,a=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&t(n.target).closest(this.options.cancel).length;return!(r&&!a&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&t.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,n.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?i.apply(e,r):i)||(t.exports=a)},function(t,e,n){var i,r,a;r=[n(0),n(1)],void 0===(a="function"==typeof(i=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?i.apply(e,r):i)||(t.exports=a)},function(t,e,n){var i,r,a;
/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */r=[n(0),n(1)],void 0===(a="function"==typeof(i=function(t){return t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?i.apply(e,r):i)||(t.exports=a)},function(t,e,n){var i=n(3),r=n(20);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var a={insert:"head",singleton:!1};i(r,a);t.exports=r.locals||{}},function(t,e,n){(e=n(4)(!1)).push([t.i,".td_player_container{display:flex;flex-flow:row wrap;justify-content:flex-start}.td_player_container .td_container{display:none}.td_player_container .player_contents{flex-basis:40%;flex-grow:4;position:relative}.td_player_container:after{content:' ';clear:both;display:block}.td_player_container .volume-slider-container{flex-basis:25%;min-width:100px;flex-grow:1;max-width:300px;display:grid;min-height:35px}.td_player_container .transport-button{flex-shrink:0;flex-grow:0;padding:10px 0;margin:0 10px 0 0;border:none;color:#FFF;outline:none;width:70px}.td_player_container .transport-button.playing,.td_player_container .transport-button.stopped{cursor:pointer}.td_player_container .transport-button .status{font-size:12pt;font-weight:normal;line-height:1}.td_player_container .transport-button .transport-icon{width:35px;height:35px;display:block;margin:0px auto 4px auto;position:relative}.td_player_container #tdplayer_ondemand{display:none}.td_player_container .transport-icon .shape{stroke-width:0}\n",""]),t.exports=e},function(t,e,n){var i=n(3),r=n(22);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var a={insert:"head",singleton:!1};i(r,a);t.exports=r.locals||{}},function(t,e,n){(e=n(4)(!1)).push([t.i,".spinner{animation:rotator 1.4s linear infinite;width:40px;height:auto}@keyframes rotator{0%{transform:rotate(0deg)}100%{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:dash 1.4s ease-in-out infinite}@keyframes dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}100%{stroke-dashoffset:187;transform:rotate(450deg)}}\n",""]),t.exports=e},function(t,e,n){var i=n(3),r=n(24);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var a={insert:"head",singleton:!1};i(r,a);t.exports=r.locals||{}},function(t,e,n){(e=n(4)(!1)).push([t.i,"/*!\r\n * Modified from the original JQuery UI slider styles by David Purdy\r\n *\r\n * Copyright KTOO Public Media\r\n *\r\n * -----------\r\n *\r\n * jQuery UI Slider 1.12.1\r\n * http://jqueryui.com\r\n *\r\n * Copyright jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n *\r\n * http://api.jqueryui.com/slider/#theming\r\n */.td_player_container .ui-slider{position:relative;text-align:left;border:none;background-color:gray}.td_player_container .ui-slider .ui-slider-handle{position:absolute;z-index:2;width:20px;height:20px;cursor:default;-ms-touch-action:none;touch-action:none;outline:none;border-radius:20px;background-color:#fff}.td_player_container .ui-slider .ui-slider-range{position:absolute;z-index:1;font-size:.7em;display:block;border:0;background-position:0 0}.td_player_container .ui-slider.ui-state-disabled .ui-slider-handle,.td_player_container .ui-slider.ui-state-disabled .ui-slider-range{filter:inherit}.td_player_container .ui-slider-horizontal{height:6px;top:50%;margin-top:-3px;min-width:75px}.td_player_container .ui-slider-horizontal .ui-slider-handle{top:-7px;margin-left:-12px;margin-top:-2px;box-sizing:content-box}.td_player_container .ui-slider-horizontal .ui-slider-range{top:0;height:100%}.td_player_container .ui-slider-horizontal .ui-slider-range-min{left:0}.td_player_container .ui-slider-horizontal .ui-slider-range-max{right:0}.td_player_container .ui-slider-vertical{width:6px;height:100px}.td_player_container .ui-slider-vertical .ui-slider-handle{left:-13px;margin-left:0;margin-bottom:-10px}.td_player_container .ui-slider-vertical .ui-slider-range{left:0;width:100%}.td_player_container .ui-slider-vertical .ui-slider-range-min{bottom:0}.td_player_container .ui-slider-vertical .ui-slider-range-max{top:0}\n",""]),t.exports=e},function(t,e,n){"use strict";var i=n(26);t.exports=function(t){var e,n,a=[],o=1;if("string"==typeof t)if(i[t])a=i[t].slice(),n="rgb";else if("transparent"===t)o=0,n="rgb",a=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var s=(c=t.slice(1)).length;o=1,s<=4?(a=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],4===s&&(o=parseInt(c[3]+c[3],16)/255)):(a=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],8===s&&(o=parseInt(c[6]+c[7],16)/255)),a[0]||(a[0]=0),a[1]||(a[1]=0),a[2]||(a[2]=0),n="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var u=e[1],l="rgb"===u,c=u.replace(/a$/,"");n=c;s="cmyk"===c?4:"gray"===c?1:3;a=e[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(t,e){if(/%$/.test(t))return e===s?parseFloat(t)/100:"rgb"===c?255*parseFloat(t)/100:parseFloat(t);if("h"===c[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==r[t])return r[t]}return parseFloat(t)})),u===c&&a.push(1),o=l||void 0===a[s]?1:a[s],a=a.slice(0,s)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(a=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),n=t.match(/([a-z])/gi).join("").toLowerCase());else isNaN(t)?Array.isArray(t)||t.length?(a=[t[0],t[1],t[2]],n="rgb",o=4===t.length?t[3]:1):t instanceof Object&&(null!=t.r||null!=t.red||null!=t.R?(n="rgb",a=[t.r||t.red||t.R||0,t.g||t.green||t.G||0,t.b||t.blue||t.B||0]):(n="hsl",a=[t.h||t.hue||t.H||0,t.s||t.saturation||t.S||0,t.l||t.lightness||t.L||t.b||t.brightness]),o=t.a||t.alpha||t.opacity||1,null!=t.opacity&&(o/=100)):(n="rgb",a=[t>>>16,(65280&t)>>>8,255&t]);return{space:n,values:a,alpha:o}};var r={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},function(t,e,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,n){"use strict";n.r(e);n(14);var i=n(0),r=n.n(i),a=(n(15),n(19),n(21),n(23),n(2)),o=n.n(a),s=n(8),u=n.n(s);function l(t){var e=r()("#"+t),n=e.data("background")?e.data("background"):"#333333",i=e.data("foreground")?e.data("foreground"):"#FFFFFF",a=e.data("background-hover")?e.data("background-hover"):n,o=e.data("foreground-hover")?e.data("foreground-hover"):i;function s(){r()("#"+t+" .transport-button").css({background:n,color:i,stroke:i,fill:i}),r()("#"+t+" .ui-slider").css("background",u()(i,.5)),r()("#"+t+" .ui-slider .ui-slider-handle").css({boxShadow:"none",border:"2px solid "+n,background:i})}s(),r()("#"+t+" .transport-button").hover((function(){r()(this).css({background:a,color:o,stroke:o,fill:o})}),s),r()("#"+t+" .ui-slider .ui-slider-handle").focus((function(){r()(this).css({boxShadow:o+" 0px 0px 0px 2px",background:o})})),r()("#"+t+" .ui-slider .ui-slider-handle").blur((function(){s()}))}var c=n(9),d=n.n(c);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){if(r()("#"+void 0).data("debug-log")){var e=r()("#"+void 0).data("log-element");if(e&&0!=r()(e).length){var n=r()(e);n.css("white-space","pre");var i="tdsdk_player_log_copy_button";0==r()("#"+i).length&&(n.append('<button id="'+i+'">Copy log</button>'),r()("#"+i).click((function(){d()(r()(e).text())}))),"object"==h(t)&&(t=JSON.stringify(t));var a=new Date;t="["+(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds())+"] "+t,n.append(t+"\n")}else console.log(t)}}var p=n(10),g=n.n(p),m=n(5),v=n.n(m),y=n(11),_=n.n(y),b=n(12),E=n.n(b);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}new(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player_id=e,this.station=r()("#"+e).data("station"),this.autoplay=r()("#"+e).data("autoplay"),this.init_properties(),this.init_volume(),this.init_elements(),this.init_player()}var e,n,i;return e=t,(n=[{key:"init_properties",value:function(){this.STATUS=Object.freeze({INIT:"initializing",LOADING:"loading",PLAYING:"playing",STOPPED:"stopped"}),this.button_states={},this.button_states[this.STATUS.INIT]={class:"initializing",content:v.a+'<div class="status">Loading</div>'},this.button_states[this.STATUS.LOADING]={class:"loading",content:v.a+'<div class="status">Starting</div>'},this.button_states[this.STATUS.PLAYING]={class:"playing",content:E.a+'<div class="status">Stop</div>'},this.button_states[this.STATUS.STOPPED]={class:"stopped",content:_.a+'<div class="status">Play</div>'},this.cookie_expiration=new Date("December 31, 9999 01:01:00")}},{key:"init_volume",value:function(){var t=this;this.volume_settings=o.a.getJSON()["ktoo-stream-volumes"]?o.a.getJSON()["ktoo-stream-volumes"]:{};var e=75;this.volume_settings&&(this.volume_settings[this.station]>=0&&this.volume_settings[this.station]<=100?e=Math.max(15,this.volume_settings[this.station]):this.volume_settings.default&&(e=Math.max(15,this.volume_settings.default))),this.update_volume(e),this.conditional_volume((function(){r()("#"+t.player_id+" .volume-slider").slider({value:t.volume,slide:function(e,n){t.update_volume(n.value)}})}))}},{key:"init_elements",value:function(){var t=this;r()("#"+this.player_id).wrapInner("<div class='player_contents'></div>"),r()("#"+this.player_id).prepend(g.a),l(this.player_id),this.conditional_volume((function(){r()("#"+t.player_id+" .volume-slider-container").show()})),r()("#"+this.player_id).addClass("td_player_container"),this.td_container_id="td_container_"+Math.floor(1e4*Math.random()),r()("#"+this.player_id+" .td_container").attr("id",this.td_container_id),this.set_player_state("initializing")}},{key:"conditional_volume",value:function(t){var e=new Audio;e.addEventListener("volumechange",(function(e){t&&t()})),e.volume=.76543}},{key:"update_volume",value:function(t){this.volume=t,this.player&&"function"==typeof this.player.setVolume&&this.player.setVolume(t/100),this.volume_settings&&"object"==T(this.volume_settings)||(this.volume_settings={}),this.volume_settings[this.station]=t,this.volume_settings.default=t,o.a.set("ktoo-stream-volumes",this.volume_settings)}},{key:"get_volume",value:function(){return this.volume}},{key:"init_player",value:function(){var t=this,e={coreModules:[{id:"MediaPlayer",playerId:this.td_container_id,geoTargeting:!1,techPriority:["Html5","Flash"],audioAdaptive:!0}],playerReady:function(){t.on_player_ready()},configurationError:function(){t.on_player_error()},moduleError:function(){t.on_player_error()}};this.player=new TDSdk(e),f("Player initialized; TDSdk: "),f(this.player)}},{key:"set_player_state",value:function(t){f("set_player_state: "+t),r()("#"+this.player_id+" .transport-button").html(this.button_states[t].content),r()("#"+this.player_id+" .transport-button").attr("class",this.button_states[t].class+" transport-button"),this.player_state=t}},{key:"on_player_ready",value:function(){var t=this;f("on_player_ready"),this.set_player_state(this.STATUS.STOPPED),["player-ready","stream-start","stream-stop","stream-select","stream-config-ready","stream-config-error","stream-config-load-error","stream-fail","stream-error","track-cue-point","timeout-alert","timeout-reach","configuration-error"].forEach((function(e){t.player.addEventListener(e,(function(t){f("EVENT: "+e),f(t)}))})),this.player.addEventListener("stream-status",(function(e){t.on_status_change(e)})),f(this.autoplay),!0===this.autoplay||function(t,e){var n=window.location.href,i=new RegExp("([?&])"+t+"(=([^&#]*))?(&|#|$)");if(!i.exec(n))return!1;if(e){var r=n.replace(i,"$1"),a=new RegExp("[&?]s*$");r=r.replace(a,""),history.replaceState(null,"",r)}return!0}(this.autoplay,!0)?(f("attempting to autoplay: "+this.station),this.player.setVolume(this.get_volume()/100),this.player.play({station:this.station})):f("autoplay disabled"),r()("#"+this.player_id+" .transport-button").click((function(){switch(f("Transport clicked; state: "+t.player_state),t.player_state){case t.STATUS.STOPPED:f("player.setVolume"),t.player.setVolume(t.get_volume()/100),f("player.play; station: "+t.station),t.player.play({station:t.station}),f("done");break;case t.STATUS.LOADING:case t.STATUS.PLAYING:f("player.stop"),t.player.stop();default:f("Other state: "+t.player_state)}})),this.conditional_volume((function(){l(t.player_id),r()("#"+t.player_id+" .volume-slider").show(),t.player.setVolume(t.volume/100),r()("#"+t.player_id+" .volume-slider").slider({value:100*t.player.getVolume()})}))}},{key:"on_status_change",value:function(t){switch(f("EVENT: on_status_change"),f(t),t.data.code){case"LIVE_PAUSE":case"LIVE_STOP":this.set_player_state("stopped");break;case"LIVE_BUFFERING":case"LIVE_CONNECTING":case"LIVE_RECONNECTING":case"GETTING_STATION_INFORMATION":this.set_player_state("loading");break;case"LIVE_PLAYING":this.set_player_state("playing");break;case"LIVE_FAILED":case"STREAM_GEO_BLOCKED":case"STATION_NOT_FOUND":case"PLAY_NOT_ALLOWED":this.set_player_state("stopped")}}},{key:"on_player_error",value:function(t){f(object),f(object.data.errors)}}])&&A(e.prototype,n),i&&A(e,i),t}())("livestream_player")}]);
//# sourceMappingURL=player.js.map