!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="./",e(0)}([function(t,e,r){r(63),r(112),t.exports=r(113)},function(t,e,r){var n,i;n=[r(5),r(4),r(2)],i=function(t,e,r){function n(t,e){throw new Error("declare"+(e?" "+e:"")+": "+t)}function i(t,e){for(var r,i,a,o,s,u,l,c,d=[],h=[{cls:0,refs:[]}],f={},p=1,m=t.length,g=0;g<m;++g){for(a=t[g],a?"[object Function]"!=A.call(a)&&n("mixin #"+g+" is not a callable constructor.",e):n("mixin #"+g+" is unknown. Did you use dojo.require to pull it in?",e),i=a._meta?a._meta.bases:[a],o=0,r=i.length-1;r>=0;--r)s=i[r].prototype,s.hasOwnProperty("declaredClass")||(s.declaredClass="uniqName_"+S++),l=s.declaredClass,f.hasOwnProperty(l)||(f[l]={count:0,refs:[],cls:i[r]},++p),u=f[l],o&&o!==u&&(u.refs.push(o),++o.count),o=u;++o.count,h[0].refs.push(o)}for(;h.length;){for(o=h.pop(),d.push(o.cls),--p;c=o.refs,1==c.length;){if(o=c[0],!o||--o.count){o=0;break}d.push(o.cls),--p}if(o)for(g=0,m=c.length;g<m;++g)o=c[g],--o.count||h.push(o)}return p&&n("can't build consistent linearization",e),a=t[0],d[0]=a?a._meta&&a===d[d.length-a._meta.bases.length]?a._meta.bases.length:1:0,d}function a(t,e,r){var i,a,o,s,u,l,c,d,h,f=this._inherited=this._inherited||{};if("string"==typeof t&&(i=t,t=e,e=r),r=0,s=t.callee,i=i||s.nom,i||n("can't deduce a name to call inherited()",this.declaredClass),u=this.constructor._meta,o=u.bases,h=f.p,i!=w){if(f.c!==s&&(h=0,l=o[0],u=l._meta,u.hidden[i]!==s)){a=u.chains,a&&"string"==typeof a[i]&&n("calling chained method with inherited: "+i,this.declaredClass);do if(u=l._meta,c=l.prototype,u&&(c[i]===s&&c.hasOwnProperty(i)||u.hidden[i]===s))break;while(l=o[++h]);h=l?h:-1}if(l=o[++h])if(c=l.prototype,l._meta&&c.hasOwnProperty(i))r=c[i];else{d=E[i];do if(c=l.prototype,r=c[i],r&&(l._meta?c.hasOwnProperty(i):r!==d))break;while(l=o[++h])}r=l&&r||E[i]}else{if(f.c!==s&&(h=0,u=o[0]._meta,u&&u.ctor!==s)){for(a=u.chains,a&&"manual"===a.constructor||n("calling chained constructor with inherited",this.declaredClass);(l=o[++h])&&(u=l._meta,!u||u.ctor!==s););h=l?h:-1}for(;(l=o[++h])&&(u=l._meta,!(r=u?u.ctor:l)););r=l&&r}if(f.c=r,f.p=h,r)return e===!0?r:r.apply(this,e||t)}function o(t,e){return"string"==typeof t?this.__inherited(t,e,!0):this.__inherited(t,!0)}function s(t,e,r){var n=this.getInherited(t,e);if(n)return n.apply(this,r||e||t)}function u(t){for(var e=this.constructor._meta.bases,r=0,n=e.length;r<n;++r)if(e[r]===t)return!0;return this instanceof t}function l(t,n){for(var i in n)i!=w&&n.hasOwnProperty(i)&&(t[i]=n[i]);if(e("bug-for-in-skips-shadowed"))for(var a=r._extraNames,o=a.length;o;)i=a[--o],i!=w&&n.hasOwnProperty(i)&&(t[i]=n[i])}function c(t,n){var i,a;for(i in n)a=n[i],a===E[i]&&i in E||i==w||("[object Function]"==A.call(a)&&(a.nom=i),t[i]=a);if(e("bug-for-in-skips-shadowed"))for(var o=r._extraNames,s=o.length;s;)i=o[--s],a=n[i],a===E[i]&&i in E||i==w||("[object Function]"==A.call(a)&&(a.nom=i),t[i]=a);return t}function d(t){return _.safeMixin(this.prototype,t),this}function h(t,e){return _([this].concat(t),e||{})}function f(t,e){return function(){var r,n,i,a,o=arguments,s=o,u=o[0],l=t.length;if(!(this instanceof o.callee))return y(o);if(e&&(u&&u.preamble||this.preamble))for(a=new Array(t.length),a[0]=o,n=0;u=o[0],u&&(r=u.preamble,r&&(o=r.apply(this,o)||o)),r=t[n].prototype,r=r.hasOwnProperty("preamble")&&r.preamble,r&&(o=r.apply(this,o)||o),++n!=l;)a[n]=o;for(n=l-1;n>=0;--n)r=t[n],i=r._meta,r=i?i.ctor:r,r&&r.apply(this,a?a[n]:o);r=this.postscript,r&&r.apply(this,s)}}function p(t,e){return function(){var r,n=arguments,i=n,a=n[0];return this instanceof n.callee?(e&&(a&&(r=a.preamble,r&&(i=r.apply(this,i)||i)),r=this.preamble,r&&r.apply(this,i)),t&&t.apply(this,n),r=this.postscript,void(r&&r.apply(this,n))):y(n)}}function m(t){return function(){var e,r,n=arguments,i=0;if(!(this instanceof n.callee))return y(n);for(;e=t[i];++i)if(r=e._meta,e=r?r.ctor:e){e.apply(this,n);break}e=this.postscript,e&&e.apply(this,n)}}function g(t,e,r){return function(){var n,i,a,o=0,s=1;for(r&&(o=e.length-1,s=-1);n=e[o];o+=s)i=n._meta,a=(i?i.hidden:n.prototype)[t],a&&a.apply(this,arguments)}}function v(t){T.prototype=t.prototype;var e=new T;return T.prototype=null,e}function y(t){var e=t.callee,r=v(e);return e.apply(r,t),r}function _(t,e,s){"string"!=typeof t&&(s=e,e=t,t=""),s=s||{};var c,y,T,S,k,L,D,P=1,I=e;if("[object Array]"==A.call(e)?(L=i(e,t),T=L[0],P=L.length-T,e=L[P]):(L=[0],e?"[object Function]"==A.call(e)?(T=e._meta,L=L.concat(T?T.bases:e)):n("base class is not a callable constructor.",t):null!==e&&n("unknown base class. Did you use dojo.require to pull it in?",t)),e)for(y=P-1;c=v(e),y;--y)T=L[y],(T._meta?l:b)(c,T.prototype),S=new Function,S.superclass=e,S.prototype=c,e=c.constructor=S;else c={};for(_.safeMixin(c,s),T=s.constructor,T!==E.constructor&&(T.nom=w,c.constructor=T),y=P-1;y;--y)T=L[y]._meta,T&&T.chains&&(D=b(D||{},T.chains));if(c["-chains-"]&&(D=b(D||{},c["-chains-"])),T=!D||!D.hasOwnProperty(w),L[0]=S=D&&"manual"===D.constructor?m(L):1==L.length?p(s.constructor,T):f(L,T),S._meta={bases:L,hidden:s,chains:D,parents:I,ctor:s.constructor},S.superclass=e&&e.prototype,S.extend=d,S.createSubclass=h,S.prototype=c,c.constructor=S,c.getInherited=o,c.isInstanceOf=u,c.inherited=C,c.__inherited=a,t&&(c.declaredClass=t,r.setObject(t,S)),D)for(k in D)c[k]&&"string"==typeof D[k]&&k!=w&&(T=c[k]=g(k,L,"after"===D[k]),T.nom=k);return S}var b=r.mixin,E=Object.prototype,A=E.toString,T=new Function,S=0,w="constructor",C=t.config.isDebug?s:a;return t.safeMixin=_.safeMixin=c,t.declare=_,_}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5),r(4),r(9)],i=function(t,e){e.add("bug-for-in-skips-shadowed",function(){for(var t in{toString:1})return 0;return 1});var r=e("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],n=r.length,i=function(e,r,n){var i,a=0,o=t.global;if(!n){if(!e.length)return o;i=e[a++];try{n=t.scopeMap[i]&&t.scopeMap[i][1]}catch(t){}n=n||(i in o?o[i]:r?o[i]={}:void 0)}for(;n&&(i=e[a++]);)n=i in n?n[i]:r?n[i]={}:void 0;return n},a=Object.prototype.toString,o=function(t,e,r){return(r||[]).concat(Array.prototype.slice.call(t,e||0))},s=/\{([^\}]+)\}/g,u={_extraNames:r,_mixin:function(t,i,a){var o,s,u,l={};for(o in i)s=i[o],o in t&&(t[o]===s||o in l&&l[o]===s)||(t[o]=a?a(s):s);if(e("bug-for-in-skips-shadowed")&&i)for(u=0;u<n;++u)o=r[u],s=i[o],o in t&&(t[o]===s||o in l&&l[o]===s)||(t[o]=a?a(s):s);return t},mixin:function(t,e){t||(t={});for(var r=1,n=arguments.length;r<n;r++)u._mixin(t,arguments[r]);return t},setObject:function(t,e,r){var n=t.split("."),a=n.pop(),o=i(n,!0,r);return o&&a?o[a]=e:void 0},getObject:function(t,e,r){return i(t.split("."),e,r)},exists:function(t,e){return void 0!==u.getObject(t,!1,e)},isString:function(t){return"string"==typeof t||t instanceof String},isArray:function(t){return t&&(t instanceof Array||"array"==typeof t)},isFunction:function(t){return"[object Function]"===a.call(t)},isObject:function(t){return void 0!==t&&(null===t||"object"==typeof t||u.isArray(t)||u.isFunction(t))},isArrayLike:function(t){return t&&void 0!==t&&!u.isString(t)&&!u.isFunction(t)&&!(t.tagName&&"form"==t.tagName.toLowerCase())&&(u.isArray(t)||isFinite(t.length))},isAlien:function(t){return t&&!u.isFunction(t)&&/\{\s*\[native code\]\s*\}/.test(String(t))},extend:function(t,e){for(var r=1,n=arguments.length;r<n;r++)u._mixin(t.prototype,arguments[r]);return t},_hitchArgs:function(e,r){var n=u._toArray(arguments,2),i=u.isString(r);return function(){var a=u._toArray(arguments),o=i?(e||t.global)[r]:r;return o&&o.apply(e||this,n.concat(a))}},hitch:function(e,r){if(arguments.length>2)return u._hitchArgs.apply(t,arguments);if(r||(r=e,e=null),u.isString(r)){if(e=e||t.global,!e[r])throw['lang.hitch: scope["',r,'"] is null (scope="',e,'")'].join("");return function(){return e[r].apply(e,arguments||[])}}return e?function(){return r.apply(e,arguments||[])}:r},delegate:function(){function t(){}return function(e,r){t.prototype=e;var n=new t;return t.prototype=null,r&&u._mixin(n,r),n}}(),_toArray:e("ie")?function(){function t(t,e,r){for(var n=r||[],i=e||0;i<t.length;i++)n.push(t[i]);return n}return function(e){return(e.item?t:o).apply(this,arguments)}}():o,partial:function(e){var r=[null];return u.hitch.apply(t,r.concat(u._toArray(arguments)))},clone:function(t){if(!t||"object"!=typeof t||u.isFunction(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var e,r,n;if(u.isArray(t))for(e=[],r=0,n=t.length;r<n;++r)r in t&&e.push(u.clone(t[r]));else e=t.constructor?new t.constructor:{};return u._mixin(e,t,u.clone)},trim:String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(t,e,r){return t.replace(r||s,u.isFunction(e)?e:function(t,r){return u.getObject(r,!1,e)})}};return e("extend-dojo")&&u.mixin(t,u),u}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(33),r(5),r(9)],i=function(t,e,r){"use strict";function n(t,e,n,i,a){var o=e.match(/(.*):(.*)/);if(o)return e=o[2],o=o[1],s.selector(o,e).call(a,t,n);if(r("touch")&&(u.test(e)&&(n=T(n)),r("event-orientationchange")||"orientationchange"!=e||(e="resize",t=window,n=T(n))),f&&(n=f(n)),t.addEventListener){var l=e in d,c=l?d[e]:e;return t.addEventListener(c,n,l),{remove:function(){t.removeEventListener(c,n,l)}}}if(e="on"+e,v&&t.attachEvent)return v(t,e,n);throw new Error("Target must be an event emitter")}function i(){this.cancelable=!1,this.defaultPrevented=!0}function a(){this.bubbles=!1}if(r("dom")){var o=window.ScriptEngineMajorVersion;r.add("jscript",o&&o()+ScriptEngineMinorVersion()/10),r.add("event-orientationchange",r("touch")&&!r("android")),r.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),r.add("event-focusin",function(t,e,r){return!!r.attachEvent})}var s=function(t,e,r,i){return"function"!=typeof t.on||"function"==typeof e||t.nodeType?s.parse(t,e,r,n,i,this):t.on(e,r)};s.pausable=function(t,e,r,n){var i,a=s(t,e,function(){if(!i)return r.apply(this,arguments)},n);return a.pause=function(){i=!0},a.resume=function(){i=!1},a},s.once=function(t,e,r,n){var i=s(t,e,function(){return i.remove(),r.apply(this,arguments)});return i},s.parse=function(t,e,r,n,i,a){if(e.call)return e.call(a,t,r);if(e.indexOf(",")>-1){for(var o,s=e.split(/\s*,\s*/),u=[],l=0;o=s[l++];)u.push(n(t,o,r,i,a));return u.remove=function(){for(var t=0;t<u.length;t++)u[t].remove()},u}return n(t,e,r,i,a)};var u=/^touch/;s.selector=function(t,r,n){return function(i,a){function o(r){for(u=u&&u.matches?u:e.query;!u.matches(r,t,i);)if(r==i||n===!1||!(r=r.parentNode)||1!=r.nodeType)return;return r}var u="function"==typeof t?{matches:t}:this,l=r.bubble;return l?s(i,l(o),a):s(i,r,function(t){var e=o(t.target);return e&&a.call(e,t)})}};var l=[].slice,c=s.emit=function(t,e,r){var n=l.call(arguments,2),o="on"+e;if("parentNode"in t){var s=n[0]={};for(var u in r)s[u]=r[u];s.preventDefault=i,s.stopPropagation=a,s.target=t,s.type=e,r=s}do t[o]&&t[o].apply(t,n);while(r&&r.bubbles&&(t=t.parentNode));return r&&r.cancelable&&r},d=r("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!r("event-stopimmediatepropagation"))var h=function(){this.immediatelyStopped=!0,this.modified=!0},f=function(t){return function(e){if(!e.immediatelyStopped)return e.stopImmediatePropagation=h,t.apply(this,arguments)}};if(r("dom-addeventlistener"))s.emit=function(t,e,r){if(t.dispatchEvent&&document.createEvent){var n=t.ownerDocument.createEvent("HTMLEvents");n.initEvent(e,!!r.bubbles,!!r.cancelable);for(var i in r)i in n||(n[i]=r[i]);return t.dispatchEvent(n)&&n}return c.apply(s,arguments)};else{s._fixEvent=function(t,e){if(!t){var r=e&&(e.ownerDocument||e.document||e).parentWindow||window;t=r.event}if(!t)return t;try{p&&t.type==p.type&&t.srcElement==p.target&&(t=p)}catch(t){}if(!t.target)switch(t.target=t.srcElement,t.currentTarget=e||t.srcElement,"mouseover"==t.type&&(t.relatedTarget=t.fromElement),"mouseout"==t.type&&(t.relatedTarget=t.toElement),t.stopPropagation||(t.stopPropagation=_,t.preventDefault=b),t.type){case"keypress":var n="charCode"in t?t.charCode:t.keyCode;10==n?(n=0,t.keyCode=13):13==n||27==n?n=0:3==n&&(n=99),t.charCode=n,y(t)}return t};var p,m=function(t){this.handle=t};m.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var g=function(t){return function(e){e=s._fixEvent(e,this);var r=t.call(this,e);return e.modified&&(p||setTimeout(function(){p=null}),p=e),r}},v=function(e,n,i){if(i=g(i),((e.ownerDocument?e.ownerDocument.parentWindow:e.parentWindow||e.window||window)!=top||r("jscript")<5.8)&&!r("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var a=e[n];if(!a||!a.listeners){var o=a;a=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}"),a.listeners=[],e[n]=a,a.global=this,o&&a.listeners.push(_dojoIEListeners_.push(o)-1)}var s;return a.listeners.push(s=a.global._dojoIEListeners_.push(i)-1),new m(s)}return t.after(e,n,i,!0)},y=function(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode},_=function(){this.cancelBubble=!0},b=s._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(t){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(r("touch"))var E=function(){},A=window.orientation,T=function(t){return function(e){var n=e.corrected;if(!n){var i=e.type;try{delete e.type}catch(t){}if(e.type){if(r("mozilla")){var n={};for(var a in e)n[a]=e[a]}else{E.prototype=e;var n=new E}n.preventDefault=function(){e.preventDefault()},n.stopPropagation=function(){e.stopPropagation()}}else n=e,n.type=i;if(e.corrected=n,"resize"==i)return A==window.orientation?null:(A=window.orientation,n.type="orientationchange",t.call(this,n));"rotation"in n||(n.rotation=0,n.scale=1);var o=n.changedTouches[0];for(var s in o)delete n[s],n[s]=o[s]}return t.call(this,n)}};return s}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(27)],i=function(t){var e={config:function(){return{"config-deferredInstrumentation":0,"config-dojo-loader-catches":0,"config-tlmSiblingOfDojo":0,"dojo-amd-factory-scan":0,"dojo-combo-api":0,"dojo-config-api":1,"dojo-config-require":0,"dojo-debug-messages":0,"dojo-dom-ready-api":1,"dojo-firebug":0,"dojo-guarantee-console":1,"dojo-has-api":1,"dojo-inject-api":1,"dojo-loader":1,"dojo-log-api":0,"dojo-modulePaths":0,"dojo-moduleUrl":0,"dojo-publish-privates":0,"dojo-requirejs-api":0,"dojo-sniff":1,"dojo-sync-loader":0,"dojo-test-sniff":0,"dojo-timeout-api":0,"dojo-trace-api":0,"dojo-undef-api":0,"dojo-v1x-i18n-Api":1,dom:1,"host-browser":1,"extend-dojo":1,touch:0}}},r=t.has||function(){};if(!r("dojo-has-api")){var n="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,i=this,a=n&&document,o=a&&a.createElement("DiV"),s=e.config&&e.config()||{};r=function(t){return"function"==typeof s[t]?s[t]=s[t](i,a,o):s[t]},r.cache=s,r.add=function(t,e,n,i){return("undefined"==typeof s[t]||i)&&(s[t]=e),n&&r(t)},r.add("host-browser",n),r.add("dom",n),r.add("dojo-dom-ready-api",1),r.add("dojo-sniff",1)}if(r("host-browser")){r.add("dom-addeventlistener",!!document.addEventListener),r.add("touch","ontouchstart"in document||window.navigator.msMaxTouchPoints>0),r.add("device-width",screen.availWidth||innerWidth);var u=document.createElement("form");r.add("dom-attributes-explicit",0==u.attributes.length),r.add("dom-attributes-specified-flag",u.attributes.length>0&&u.attributes.length<40)}return r.clearElement=function(t){return t.innerHTML="",t},r.normalize=function(t,e){var n=t.match(/[\?:]|[^:\?]*/g),i=0,a=function(t){var e=n[i++];return":"==e?0:"?"==n[i++]?!t&&r(e)?a():(a(!0),a(t)):e||0};return t=a(),t&&e(t)},r.load=function(t,e,r){t?e([t],r):r()},r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;(function(t){n=[r(4),r(76),r(27),t],i=function(t,e,r,n){n={id:"dojo/_base/kernel"};var i,a,o,s={},u={},l={config:e,global:this,dijit:s,dojox:u},c={dojo:["dojo",l],dijit:["dijit",s],dojox:["dojox",u]},d=r.map&&r.map[n.id.match(/[^\/]+/)[0]];for(a in d)c[a]?c[a][0]=d[a]:c[a]=[d[a],{}];for(a in c)o=c[a],o[1]._scopeName=o[0],e.noGlobals||(this[o[0]]=o[1]);l.scopeMap=c,l.baseUrl=l.config.baseUrl=r.baseUrl,l.isAsync=!t("dojo-loader")||r.async,l.locale=e.locale;var h="$Rev: 31379 $".match(/\d+/);if(l.version={major:1,minor:9,patch:0,flag:"",revision:h?+h[0]:NaN,toString:function(){var t=l.version;return t.major+"."+t.minor+"."+t.patch+t.flag+" ("+t.revision+")"}},t.add("extend-dojo",1),Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l),t("host-rhino")?l.exit=function(t){quit(t)}:l.exit=function(){},t.add("dojo-guarantee-console",1),t("dojo-guarantee-console")){"undefined"!=typeof console||(console={});var f,p=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];for(i=0;f=p[i++];)console[f]||!function(){var t=f+"";console[t]="log"in console?function(){var e=Array.apply({},arguments);e.unshift(t+":")}:function(){},console[t]._fake=!0}()}if(t.add("dojo-debug-messages",!!e.isDebug),l.deprecated=l.experimental=function(){},t("dojo-debug-messages")&&(l.deprecated=function(t,e,r){var n="DEPRECATED: "+t;e&&(n+=" "+e),r&&(n+=" -- will be removed in version: "+r),console.warn(n)},l.experimental=function(t,e){var r="EXPERIMENTAL: "+t+" -- APIs subject to change without notice.";e&&(r+=" "+e),console.warn(r)}),t.add("dojo-modulePaths",1),t("dojo-modulePaths")&&e.modulePaths){l.deprecated("dojo.modulePaths","use paths configuration");var m={};for(a in e.modulePaths)m[a.replace(/\./g,"/")]=e.modulePaths[a];r({paths:m})}return t.add("dojo-moduleUrl",1),t("dojo-moduleUrl")&&(l.moduleUrl=function(t,e){l.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var n=null;return t&&(n=r.toUrl(t.replace(/\./g,"/")+(e?"/"+e:"")+"/*.*").replace(/\/\*\.\*/,"")+(e?"":"/")),n}),l._hasResource={},l}.apply(e,n),!(void 0!==i&&(t.exports=i))}).call(e,r(28)(t))},function(t,e,r){var n,i;n=[r(5),r(4),r(2)],i=function(t,e,r){function n(t){return s[t]=new Function("item","index","array",t)}function i(t){var e=!t;return function(r,i,a){var o,u=0,l=r&&r.length||0;if(l&&"string"==typeof r&&(r=r.split("")),"string"==typeof i&&(i=s[i]||n(i)),a){for(;u<l;++u)if(o=!i.call(a,r[u],u,r),t^o)return!o}else for(;u<l;++u)if(o=!i(r[u],u,r),t^o)return!o;return e}}function a(t){var e=1,r=0,n=0;return t||(e=r=n=-1),function(i,a,s,l){if(l&&e>0)return u.lastIndexOf(i,a,s);var c,d=i&&i.length||0,h=t?d+n:r;for(s===o?c=t?r:d+n:s<0?(c=d+s,c<0&&(c=r)):c=s>=d?d+n:s,d&&"string"==typeof i&&(i=i.split(""));c!=h;c+=e)if(i[c]==a)return c;return-1}}var o,s={},u={every:i(!1),some:i(!0),indexOf:a(!0),lastIndexOf:a(!1),forEach:function(t,e,r){var i=0,a=t&&t.length||0;if(a&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||n(e)),r)for(;i<a;++i)e.call(r,t[i],i,t);else for(;i<a;++i)e(t[i],i,t)},map:function(t,e,r,i){var a=0,o=t&&t.length||0,u=new(i||Array)(o);if(o&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||n(e)),r)for(;a<o;++a)u[a]=e.call(r,t[a],a,t);else for(;a<o;++a)u[a]=e(t[a],a,t);return u},filter:function(t,e,r){var i,a=0,o=t&&t.length||0,u=[];if(o&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||n(e)),r)for(;a<o;++a)i=t[a],e.call(r,i,a,t)&&u.push(i);else for(;a<o;++a)i=t[a],e(i,a,t)&&u.push(i);return u},clearCache:function(){s={}}};return e("extend-dojo")&&r.mixin(t,u),u}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(9),r(17)],i=function(t,e){if(t("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}var r={};t("ie")?r.byId=function(t,r){if("string"!=typeof t)return t;var n=r||e.doc,i=t&&n.getElementById(t);if(i&&(i.attributes.id.value==t||i.id==t))return i;var a=n.all[t];a&&!a.nodeName||(a=[a]);for(var o=0;i=a[o++];)if(i.attributes&&i.attributes.id&&i.attributes.id.value==t||i.id==t)return i}:r.byId=function(t,r){return("string"==typeof t?(r||e.doc).getElementById(t):t)||null},r.isDescendant=function(t,e){try{for(t=r.byId(t),e=r.byId(e);t;){if(t==e)return!0;t=t.parentNode}}catch(t){}return!1},t.add("css-user-select",function(t,e,r){if(!r)return!1;var n=r.style,i=["Khtml","O","ms","Moz","Webkit"],a=i.length,o="userSelect";do if("undefined"!=typeof n[o])return o;while(a--&&(o=i[a]+"UserSelect"));return!1});var n=t("css-user-select");return r.setSelectable=n?function(t,e){r.byId(t).style[n]=e?"":"none"}:function(t,e){t=r.byId(t);var n=t.getElementsByTagName("*"),i=n.length;if(e)for(t.removeAttribute("unselectable");i--;)n[i].removeAttribute("unselectable");else for(t.setAttribute("unselectable","on");i--;)n[i].setAttribute("unselectable","on")},r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n;(function(t,i){(function(){function a(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function o(t,e,r,n){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(n,o,r(o),t)}return n}function s(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function u(t,e){for(var r=null==t?0:t.length;r--&&e(t[r],r,t)!==!1;);return t}function l(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function c(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}function d(t,e){var r=null==t?0:t.length;return!!r&&A(t,e,0)>-1}function h(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function f(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function p(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function m(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r}function g(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function v(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function y(t){return t.split("")}function _(t){return t.match(je)||[]}function b(t,e,r){var n;return r(t,function(t,r,i){if(e(t,r,i))return n=r,!1}),n}function E(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function A(t,e,r){return e===e?X(t,e,r):E(t,S,r)}function T(t,e,r,n){for(var i=r-1,a=t.length;++i<a;)if(n(t[i],e))return i;return-1}function S(t){return t!==t}function w(t,e){var r=null==t?0:t.length;return r?P(t,e)/r:Mt}function C(t){return function(e){return null==e?rt:e[t]}}function k(t){return function(e){return null==t?rt:t[e]}}function L(t,e,r,n,i){return i(t,function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)}),r}function D(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function P(t,e){for(var r,n=-1,i=t.length;++n<i;){var a=e(t[n]);a!==rt&&(r=r===rt?a:r+a)}return r}function I(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function R(t,e){return f(e,function(e){return[e,t[e]]})}function O(t){return function(e){return t(e)}}function x(t,e){return f(e,function(e){return t[e]})}function M(t,e){return t.has(e)}function N(t,e){for(var r=-1,n=t.length;++r<n&&A(e,t[r],0)>-1;);return r}function F(t,e){for(var r=t.length;r--&&A(e,t[r],0)>-1;);return r}function U(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}function B(t){return"\\"+Jr[t]}function j(t,e){return null==t?rt:t[e]}function G(t){return Vr.test(t)}function H(t){return Kr.test(t)}function V(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}function K(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function W(t,e){return function(r){return t(e(r))}}function q(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r];o!==e&&o!==lt||(t[r]=lt,a[i++]=r)}return a}function Y(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function z(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}function X(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function Q(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}function $(t){return G(t)?Z(t):gn(t)}function J(t){return G(t)?tt(t):y(t)}function Z(t){for(var e=Gr.lastIndex=0;Gr.test(t);)++e;return e}function tt(t){return t.match(Gr)||[]}function et(t){return t.match(Hr)||[]}var rt,nt="4.17.15",it=200,at="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ot="Expected a function",st="__lodash_hash_undefined__",ut=500,lt="__lodash_placeholder__",ct=1,dt=2,ht=4,ft=1,pt=2,mt=1,gt=2,vt=4,yt=8,_t=16,bt=32,Et=64,At=128,Tt=256,St=512,wt=30,Ct="...",kt=800,Lt=16,Dt=1,Pt=2,It=3,Rt=1/0,Ot=9007199254740991,xt=1.7976931348623157e308,Mt=NaN,Nt=4294967295,Ft=Nt-1,Ut=Nt>>>1,Bt=[["ary",At],["bind",mt],["bindKey",gt],["curry",yt],["curryRight",_t],["flip",St],["partial",bt],["partialRight",Et],["rearg",Tt]],jt="[object Arguments]",Gt="[object Array]",Ht="[object AsyncFunction]",Vt="[object Boolean]",Kt="[object Date]",Wt="[object DOMException]",qt="[object Error]",Yt="[object Function]",zt="[object GeneratorFunction]",Xt="[object Map]",Qt="[object Number]",$t="[object Null]",Jt="[object Object]",Zt="[object Promise]",te="[object Proxy]",ee="[object RegExp]",re="[object Set]",ne="[object String]",ie="[object Symbol]",ae="[object Undefined]",oe="[object WeakMap]",se="[object WeakSet]",ue="[object ArrayBuffer]",le="[object DataView]",ce="[object Float32Array]",de="[object Float64Array]",he="[object Int8Array]",fe="[object Int16Array]",pe="[object Int32Array]",me="[object Uint8Array]",ge="[object Uint8ClampedArray]",ve="[object Uint16Array]",ye="[object Uint32Array]",_e=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,Ee=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ae=/&(?:amp|lt|gt|quot|#39);/g,Te=/[&<>"']/g,Se=RegExp(Ae.source),we=RegExp(Te.source),Ce=/<%-([\s\S]+?)%>/g,ke=/<%([\s\S]+?)%>/g,Le=/<%=([\s\S]+?)%>/g,De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Re=/[\\^$.*+?()[\]{}|]/g,Oe=RegExp(Re.source),xe=/^\s+|\s+$/g,Me=/^\s+/,Ne=/\s+$/,Fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Be=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ge=/\\(\\)?/g,He=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ve=/\w*$/,Ke=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,qe=/^\[object .+?Constructor\]$/,Ye=/^0o[0-7]+$/i,ze=/^(?:0|[1-9]\d*)$/,Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe=/($^)/,$e=/['\n\r\u2028\u2029\\]/g,Je="\\ud800-\\udfff",Ze="\\u0300-\\u036f",tr="\\ufe20-\\ufe2f",er="\\u20d0-\\u20ff",rr=Ze+tr+er,nr="\\u2700-\\u27bf",ir="a-z\\xdf-\\xf6\\xf8-\\xff",ar="\\xac\\xb1\\xd7\\xf7",or="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sr="\\u2000-\\u206f",ur=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lr="A-Z\\xc0-\\xd6\\xd8-\\xde",cr="\\ufe0e\\ufe0f",dr=ar+or+sr+ur,hr="['’]",fr="["+Je+"]",pr="["+dr+"]",mr="["+rr+"]",gr="\\d+",vr="["+nr+"]",yr="["+ir+"]",_r="[^"+Je+dr+gr+nr+ir+lr+"]",br="\\ud83c[\\udffb-\\udfff]",Er="(?:"+mr+"|"+br+")",Ar="[^"+Je+"]",Tr="(?:\\ud83c[\\udde6-\\uddff]){2}",Sr="[\\ud800-\\udbff][\\udc00-\\udfff]",wr="["+lr+"]",Cr="\\u200d",kr="(?:"+yr+"|"+_r+")",Lr="(?:"+wr+"|"+_r+")",Dr="(?:"+hr+"(?:d|ll|m|re|s|t|ve))?",Pr="(?:"+hr+"(?:D|LL|M|RE|S|T|VE))?",Ir=Er+"?",Rr="["+cr+"]?",Or="(?:"+Cr+"(?:"+[Ar,Tr,Sr].join("|")+")"+Rr+Ir+")*",xr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nr=Rr+Ir+Or,Fr="(?:"+[vr,Tr,Sr].join("|")+")"+Nr,Ur="(?:"+[Ar+mr+"?",mr,Tr,Sr,fr].join("|")+")",Br=RegExp(hr,"g"),jr=RegExp(mr,"g"),Gr=RegExp(br+"(?="+br+")|"+Ur+Nr,"g"),Hr=RegExp([wr+"?"+yr+"+"+Dr+"(?="+[pr,wr,"$"].join("|")+")",Lr+"+"+Pr+"(?="+[pr,wr+kr,"$"].join("|")+")",wr+"?"+kr+"+"+Dr,wr+"+"+Pr,Mr,xr,gr,Fr].join("|"),"g"),Vr=RegExp("["+Cr+Je+rr+cr+"]"),Kr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qr=-1,Yr={};Yr[ce]=Yr[de]=Yr[he]=Yr[fe]=Yr[pe]=Yr[me]=Yr[ge]=Yr[ve]=Yr[ye]=!0,Yr[jt]=Yr[Gt]=Yr[ue]=Yr[Vt]=Yr[le]=Yr[Kt]=Yr[qt]=Yr[Yt]=Yr[Xt]=Yr[Qt]=Yr[Jt]=Yr[ee]=Yr[re]=Yr[ne]=Yr[oe]=!1;var zr={};zr[jt]=zr[Gt]=zr[ue]=zr[le]=zr[Vt]=zr[Kt]=zr[ce]=zr[de]=zr[he]=zr[fe]=zr[pe]=zr[Xt]=zr[Qt]=zr[Jt]=zr[ee]=zr[re]=zr[ne]=zr[ie]=zr[me]=zr[ge]=zr[ve]=zr[ye]=!0,zr[qt]=zr[Yt]=zr[oe]=!1;var Xr={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Qr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Jr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zr=parseFloat,tn=parseInt,en="object"==typeof t&&t&&t.Object===Object&&t,rn="object"==typeof self&&self&&self.Object===Object&&self,nn=en||rn||Function("return this")(),an="object"==typeof e&&e&&!e.nodeType&&e,on=an&&"object"==typeof i&&i&&!i.nodeType&&i,sn=on&&on.exports===an,un=sn&&en.process,ln=function(){try{var t=on&&on.require&&on.require("util").types;return t?t:un&&un.binding&&un.binding("util")}catch(t){}}(),cn=ln&&ln.isArrayBuffer,dn=ln&&ln.isDate,hn=ln&&ln.isMap,fn=ln&&ln.isRegExp,pn=ln&&ln.isSet,mn=ln&&ln.isTypedArray,gn=C("length"),vn=k(Xr),yn=k(Qr),_n=k($r),bn=function t(e){function r(t){if(au(t)&&!gh(t)&&!(t instanceof y)){if(t instanceof i)return t;if(gc.call(t,"__wrapped__"))return eo(t)}return new i(t)}function n(){}function i(t,e){this.__wrapped__=t,
this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=rt}function y(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nt,this.__views__=[]}function k(){var t=new y(this.__wrapped__);return t.__actions__=Mi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Mi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Mi(this.__views__),t}function X(){if(this.__filtered__){var t=new y(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Z(){var t=this.__wrapped__.value(),e=this.__dir__,r=gh(t),n=e<0,i=r?t.length:0,a=Sa(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=n?s:o-1,c=this.__iteratees__,d=c.length,h=0,f=qc(u,this.__takeCount__);if(!r||!n&&i==u&&f==u)return yi(t,this.__actions__);var p=[];t:for(;u--&&h<f;){l+=e;for(var m=-1,g=t[l];++m<d;){var v=c[m],y=v.iteratee,_=v.type,b=y(g);if(_==Pt)g=b;else if(!b){if(_==Dt)continue t;break t}}p[h++]=g}return p}function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function je(){this.__data__=rd?rd(null):{},this.size=0}function Je(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ze(t){var e=this.__data__;if(rd){var r=e[t];return r===st?rt:r}return gc.call(e,t)?e[t]:rt}function tr(t){var e=this.__data__;return rd?e[t]!==rt:gc.call(e,t)}function er(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=rd&&e===rt?st:e,this}function rr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function nr(){this.__data__=[],this.size=0}function ir(t){var e=this.__data__,r=Dr(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Pc.call(e,r,1),--this.size,!0}function ar(t){var e=this.__data__,r=Dr(e,t);return r<0?rt:e[r][1]}function or(t){return Dr(this.__data__,t)>-1}function sr(t,e){var r=this.__data__,n=Dr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function ur(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function lr(){this.size=0,this.__data__={hash:new tt,map:new(Jc||rr),string:new tt}}function cr(t){var e=ba(this,t).delete(t);return this.size-=e?1:0,e}function dr(t){return ba(this,t).get(t)}function hr(t){return ba(this,t).has(t)}function fr(t,e){var r=ba(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function pr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ur;++e<r;)this.add(t[e])}function mr(t){return this.__data__.set(t,st),this}function gr(t){return this.__data__.has(t)}function vr(t){var e=this.__data__=new rr(t);this.size=e.size}function yr(){this.__data__=new rr,this.size=0}function _r(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function br(t){return this.__data__.get(t)}function Er(t){return this.__data__.has(t)}function Ar(t,e){var r=this.__data__;if(r instanceof rr){var n=r.__data__;if(!Jc||n.length<it-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ur(n)}return r.set(t,e),this.size=r.size,this}function Tr(t,e){var r=gh(t),n=!r&&mh(t),i=!r&&!n&&yh(t),a=!r&&!n&&!i&&Th(t),o=r||n||i||a,s=o?I(t.length,lc):[],u=s.length;for(var l in t)!e&&!gc.call(t,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ra(l,u))||s.push(l);return s}function Sr(t){var e=t.length;return e?t[Zn(0,e-1)]:rt}function wr(t,e){return $a(Mi(t),Mr(e,0,t.length))}function Cr(t){return $a(Mi(t))}function kr(t,e,r){(r===rt||Ws(t[e],r))&&(r!==rt||e in t)||Or(t,e,r)}function Lr(t,e,r){var n=t[e];gc.call(t,e)&&Ws(n,r)&&(r!==rt||e in t)||Or(t,e,r)}function Dr(t,e){for(var r=t.length;r--;)if(Ws(t[r][0],e))return r;return-1}function Pr(t,e,r,n){return pd(t,function(t,i,a){e(n,t,r(t),a)}),n}function Ir(t,e){return t&&Ni(e,ju(e),t)}function Rr(t,e){return t&&Ni(e,Gu(e),t)}function Or(t,e,r){"__proto__"==e&&xc?xc(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function xr(t,e){for(var r=-1,n=e.length,i=rc(n),a=null==t;++r<n;)i[r]=a?rt:Fu(t,e[r]);return i}function Mr(t,e,r){return t===t&&(r!==rt&&(t=t<=r?t:r),e!==rt&&(t=t>=e?t:e)),t}function Nr(t,e,r,n,i,a){var o,u=e&ct,l=e&dt,c=e&ht;if(r&&(o=i?r(t,n,i,a):r(t)),o!==rt)return o;if(!iu(t))return t;var d=gh(t);if(d){if(o=ka(t),!u)return Mi(t,o)}else{var h=Cd(t),f=h==Yt||h==zt;if(yh(t))return wi(t,u);if(h==Jt||h==jt||f&&!i){if(o=l||f?{}:La(t),!u)return l?Ui(t,Rr(o,t)):Fi(t,Ir(o,t))}else{if(!zr[h])return i?t:{};o=Da(t,h,u)}}a||(a=new vr);var p=a.get(t);if(p)return p;a.set(t,o),Ah(t)?t.forEach(function(n){o.add(Nr(n,e,r,n,t,a))}):bh(t)&&t.forEach(function(n,i){o.set(i,Nr(n,e,r,i,t,a))});var m=c?l?ga:ma:l?Gu:ju,g=d?rt:m(t);return s(g||t,function(n,i){g&&(i=n,n=t[i]),Lr(o,i,Nr(n,e,r,i,t,a))}),o}function Fr(t){var e=ju(t);return function(r){return Ur(r,t,e)}}function Ur(t,e,r){var n=r.length;if(null==t)return!n;for(t=sc(t);n--;){var i=r[n],a=e[i],o=t[i];if(o===rt&&!(i in t)||!a(o))return!1}return!0}function Gr(t,e,r){if("function"!=typeof t)throw new cc(ot);return Dd(function(){t.apply(rt,r)},e)}function Hr(t,e,r,n){var i=-1,a=d,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;r&&(e=f(e,O(r))),n?(a=h,o=!1):e.length>=it&&(a=M,o=!1,e=new pr(e));t:for(;++i<s;){var c=t[i],p=null==r?c:r(c);if(c=n||0!==c?c:0,o&&p===p){for(var m=l;m--;)if(e[m]===p)continue t;u.push(c)}else a(e,p,n)||u.push(c)}return u}function Vr(t,e){var r=!0;return pd(t,function(t,n,i){return r=!!e(t,n,i)}),r}function Kr(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],o=e(a);if(null!=o&&(s===rt?o===o&&!gu(o):r(o,s)))var s=o,u=a}return u}function Xr(t,e,r,n){var i=t.length;for(r=Au(r),r<0&&(r=-r>i?0:i+r),n=n===rt||n>i?i:Au(n),n<0&&(n+=i),n=r>n?0:Tu(n);r<n;)t[r++]=e;return t}function Qr(t,e){var r=[];return pd(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function $r(t,e,r,n,i){var a=-1,o=t.length;for(r||(r=Ia),i||(i=[]);++a<o;){var s=t[a];e>0&&r(s)?e>1?$r(s,e-1,r,n,i):p(i,s):n||(i[i.length]=s)}return i}function Jr(t,e){return t&&gd(t,e,ju)}function en(t,e){return t&&vd(t,e,ju)}function rn(t,e){return c(e,function(e){return eu(t[e])})}function an(t,e){e=Ti(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[Ja(e[r++])];return r&&r==n?t:rt}function on(t,e,r){var n=e(t);return gh(t)?n:p(n,r(t))}function un(t){return null==t?t===rt?ae:$t:Oc&&Oc in sc(t)?Ta(t):Ka(t)}function ln(t,e){return t>e}function gn(t,e){return null!=t&&gc.call(t,e)}function bn(t,e){return null!=t&&e in sc(t)}function An(t,e,r){return t>=qc(e,r)&&t<Wc(e,r)}function Tn(t,e,r){for(var n=r?h:d,i=t[0].length,a=t.length,o=a,s=rc(a),u=1/0,l=[];o--;){var c=t[o];o&&e&&(c=f(c,O(e))),u=qc(c.length,u),s[o]=!r&&(e||i>=120&&c.length>=120)?new pr(o&&c):rt}c=t[0];var p=-1,m=s[0];t:for(;++p<i&&l.length<u;){var g=c[p],v=e?e(g):g;if(g=r||0!==g?g:0,!(m?M(m,v):n(l,v,r))){for(o=a;--o;){var y=s[o];if(!(y?M(y,v):n(t[o],v,r)))continue t}m&&m.push(v),l.push(g)}}return l}function Sn(t,e,r,n){return Jr(t,function(t,i,a){e(n,r(t),i,a)}),n}function wn(t,e,r){e=Ti(e,t),t=qa(t,e);var n=null==t?t:t[Ja(Eo(e))];return null==n?rt:a(n,t,r)}function Cn(t){return au(t)&&un(t)==jt}function kn(t){return au(t)&&un(t)==ue}function Ln(t){return au(t)&&un(t)==Kt}function Dn(t,e,r,n,i){return t===e||(null==t||null==e||!au(t)&&!au(e)?t!==t&&e!==e:Pn(t,e,r,n,Dn,i))}function Pn(t,e,r,n,i,a){var o=gh(t),s=gh(e),u=o?Gt:Cd(t),l=s?Gt:Cd(e);u=u==jt?Jt:u,l=l==jt?Jt:l;var c=u==Jt,d=l==Jt,h=u==l;if(h&&yh(t)){if(!yh(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new vr),o||Th(t)?da(t,e,r,n,i,a):ha(t,e,u,r,n,i,a);if(!(r&ft)){var f=c&&gc.call(t,"__wrapped__"),p=d&&gc.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return a||(a=new vr),i(m,g,r,n,a)}}return!!h&&(a||(a=new vr),fa(t,e,r,n,i,a))}function In(t){return au(t)&&Cd(t)==Xt}function Rn(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=sc(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=r[i];var u=s[0],l=t[u],c=s[1];if(o&&s[2]){if(l===rt&&!(u in t))return!1}else{var d=new vr;if(n)var h=n(l,c,u,t,e,d);if(!(h===rt?Dn(c,l,ft|pt,n,d):h))return!1}}return!0}function On(t){if(!iu(t)||Fa(t))return!1;var e=eu(t)?Ac:qe;return e.test(Za(t))}function xn(t){return au(t)&&un(t)==ee}function Mn(t){return au(t)&&Cd(t)==re}function Nn(t){return au(t)&&nu(t.length)&&!!Yr[un(t)]}function Fn(t){return"function"==typeof t?t:null==t?Pl:"object"==typeof t?gh(t)?Vn(t[0],t[1]):Hn(t):Ul(t)}function Un(t){if(!Ua(t))return Kc(t);var e=[];for(var r in sc(t))gc.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Bn(t){if(!iu(t))return Va(t);var e=Ua(t),r=[];for(var n in t)("constructor"!=n||!e&&gc.call(t,n))&&r.push(n);return r}function jn(t,e){return t<e}function Gn(t,e){var r=-1,n=qs(t)?rc(t.length):[];return pd(t,function(t,i,a){n[++r]=e(t,i,a)}),n}function Hn(t){var e=Ea(t);return 1==e.length&&e[0][2]?ja(e[0][0],e[0][1]):function(r){return r===t||Rn(r,t,e)}}function Vn(t,e){return xa(t)&&Ba(e)?ja(Ja(t),e):function(r){var n=Fu(r,t);return n===rt&&n===e?Bu(r,t):Dn(e,n,ft|pt)}}function Kn(t,e,r,n,i){t!==e&&gd(e,function(a,o){if(i||(i=new vr),iu(a))Wn(t,e,o,r,Kn,n,i);else{var s=n?n(za(t,o),a,o+"",t,e,i):rt;s===rt&&(s=a),kr(t,o,s)}},Gu)}function Wn(t,e,r,n,i,a,o){var s=za(t,r),u=za(e,r),l=o.get(u);if(l)return void kr(t,r,l);var c=a?a(s,u,r+"",t,e,o):rt,d=c===rt;if(d){var h=gh(u),f=!h&&yh(u),p=!h&&!f&&Th(u);c=u,h||f||p?gh(s)?c=s:Ys(s)?c=Mi(s):f?(d=!1,c=wi(u,!0)):p?(d=!1,c=Pi(u,!0)):c=[]:fu(u)||mh(u)?(c=s,mh(s)?c=wu(s):iu(s)&&!eu(s)||(c=La(u))):d=!1}d&&(o.set(u,c),i(c,u,n,a,o),o.delete(u)),kr(t,r,c)}function qn(t,e){var r=t.length;if(r)return e+=e<0?r:0,Ra(e,r)?t[e]:rt}function Yn(t,e,r){var n=-1;e=f(e.length?e:[Pl],O(_a()));var i=Gn(t,function(t,r,i){var a=f(e,function(e){return e(t)});return{criteria:a,index:++n,value:t}});return D(i,function(t,e){return Ri(t,e,r)})}function zn(t,e){return Xn(t,e,function(e,r){return Bu(t,r)})}function Xn(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=an(t,o);r(s,o)&&ai(a,Ti(o,t),s)}return a}function Qn(t){return function(e){return an(e,t)}}function $n(t,e,r,n){var i=n?T:A,a=-1,o=e.length,s=t;for(t===e&&(e=Mi(e)),r&&(s=f(t,O(r)));++a<o;)for(var u=0,l=e[a],c=r?r(l):l;(u=i(s,c,u,n))>-1;)s!==t&&Pc.call(s,u,1),Pc.call(t,u,1);return t}function Jn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==a){var a=i;Ra(i)?Pc.call(t,i,1):mi(t,i)}}return t}function Zn(t,e){return t+Bc(Xc()*(e-t+1))}function ti(t,e,r,n){for(var i=-1,a=Wc(Uc((e-t)/(r||1)),0),o=rc(a);a--;)o[n?a:++i]=t,t+=r;return o}function ei(t,e){var r="";if(!t||e<1||e>Ot)return r;do e%2&&(r+=t),e=Bc(e/2),e&&(t+=t);while(e);return r}function ri(t,e){return Pd(Wa(t,e,Pl),t+"")}function ni(t){return Sr(Zu(t))}function ii(t,e){var r=Zu(t);return $a(r,Mr(e,0,r.length))}function ai(t,e,r,n){if(!iu(t))return t;e=Ti(e,t);for(var i=-1,a=e.length,o=a-1,s=t;null!=s&&++i<a;){var u=Ja(e[i]),l=r;if(i!=o){var c=s[u];l=n?n(c,u,s):rt,l===rt&&(l=iu(c)?c:Ra(e[i+1])?[]:{})}Lr(s,u,l),s=s[u]}return t}function oi(t){return $a(Zu(t))}function si(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var a=rc(i);++n<i;)a[n]=t[n+e];return a}function ui(t,e){var r;return pd(t,function(t,n,i){return r=e(t,n,i),!r}),!!r}function li(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e===e&&i<=Ut){for(;n<i;){var a=n+i>>>1,o=t[a];null!==o&&!gu(o)&&(r?o<=e:o<e)?n=a+1:i=a}return i}return ci(t,e,Pl,r)}function ci(t,e,r,n){e=r(e);for(var i=0,a=null==t?0:t.length,o=e!==e,s=null===e,u=gu(e),l=e===rt;i<a;){var c=Bc((i+a)/2),d=r(t[c]),h=d!==rt,f=null===d,p=d===d,m=gu(d);if(o)var g=n||p;else g=l?p&&(n||h):s?p&&h&&(n||!f):u?p&&h&&!f&&(n||!m):!f&&!m&&(n?d<=e:d<e);g?i=c+1:a=c}return qc(a,Ft)}function di(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r],s=e?e(o):o;if(!r||!Ws(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function hi(t){return"number"==typeof t?t:gu(t)?Mt:+t}function fi(t){if("string"==typeof t)return t;if(gh(t))return f(t,fi)+"";if(gu(t))return hd?hd.call(t):"";var e=t+"";return"0"==e&&1/t==-Rt?"-0":e}function pi(t,e,r){var n=-1,i=d,a=t.length,o=!0,s=[],u=s;if(r)o=!1,i=h;else if(a>=it){var l=e?null:Ad(t);if(l)return Y(l);o=!1,i=M,u=new pr}else u=e?[]:s;t:for(;++n<a;){var c=t[n],f=e?e(c):c;if(c=r||0!==c?c:0,o&&f===f){for(var p=u.length;p--;)if(u[p]===f)continue t;e&&u.push(f),s.push(c)}else i(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}function mi(t,e){return e=Ti(e,t),t=qa(t,e),null==t||delete t[Ja(Eo(e))]}function gi(t,e,r,n){return ai(t,e,r(an(t,e)),n)}function vi(t,e,r,n){for(var i=t.length,a=n?i:-1;(n?a--:++a<i)&&e(t[a],a,t););return r?si(t,n?0:a,n?a+1:i):si(t,n?a+1:0,n?i:a)}function yi(t,e){var r=t;return r instanceof y&&(r=r.value()),m(e,function(t,e){return e.func.apply(e.thisArg,p([t],e.args))},r)}function _i(t,e,r){var n=t.length;if(n<2)return n?pi(t[0]):[];for(var i=-1,a=rc(n);++i<n;)for(var o=t[i],s=-1;++s<n;)s!=i&&(a[i]=Hr(a[i]||o,t[s],e,r));return pi($r(a,1),e,r)}function bi(t,e,r){for(var n=-1,i=t.length,a=e.length,o={};++n<i;){var s=n<a?e[n]:rt;r(o,t[n],s)}return o}function Ei(t){return Ys(t)?t:[]}function Ai(t){return"function"==typeof t?t:Pl}function Ti(t,e){return gh(t)?t:xa(t,e)?[t]:Id(ku(t))}function Si(t,e,r){var n=t.length;return r=r===rt?n:r,!e&&r>=n?t:si(t,e,r)}function wi(t,e){if(e)return t.slice();var r=t.length,n=Cc?Cc(r):new t.constructor(r);return t.copy(n),n}function Ci(t){var e=new t.constructor(t.byteLength);return new wc(e).set(new wc(t)),e}function ki(t,e){var r=e?Ci(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Li(t){var e=new t.constructor(t.source,Ve.exec(t));return e.lastIndex=t.lastIndex,e}function Di(t){return dd?sc(dd.call(t)):{}}function Pi(t,e){var r=e?Ci(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Ii(t,e){if(t!==e){var r=t!==rt,n=null===t,i=t===t,a=gu(t),o=e!==rt,s=null===e,u=e===e,l=gu(e);if(!s&&!l&&!a&&t>e||a&&o&&u&&!s&&!l||n&&o&&u||!r&&u||!i)return 1;if(!n&&!a&&!l&&t<e||l&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!u)return-1}return 0}function Ri(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;++n<o;){var u=Ii(i[n],a[n]);if(u){if(n>=s)return u;var l=r[n];return u*("desc"==l?-1:1)}}return t.index-e.index}function Oi(t,e,r,n){for(var i=-1,a=t.length,o=r.length,s=-1,u=e.length,l=Wc(a-o,0),c=rc(u+l),d=!n;++s<u;)c[s]=e[s];for(;++i<o;)(d||i<a)&&(c[r[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function xi(t,e,r,n){for(var i=-1,a=t.length,o=-1,s=r.length,u=-1,l=e.length,c=Wc(a-s,0),d=rc(c+l),h=!n;++i<c;)d[i]=t[i];for(var f=i;++u<l;)d[f+u]=e[u];for(;++o<s;)(h||i<a)&&(d[f+r[o]]=t[i++]);return d}function Mi(t,e){var r=-1,n=t.length;for(e||(e=rc(n));++r<n;)e[r]=t[r];return e}function Ni(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=n?n(r[s],t[s],s,r,t):rt;u===rt&&(u=t[s]),i?Or(r,s,u):Lr(r,s,u)}return r}function Fi(t,e){return Ni(t,Sd(t),e)}function Ui(t,e){return Ni(t,wd(t),e)}function Bi(t,e){return function(r,n){var i=gh(r)?o:Pr,a=e?e():{};return i(r,t,_a(n,2),a)}}function ji(t){return ri(function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:rt,o=i>2?r[2]:rt;for(a=t.length>3&&"function"==typeof a?(i--,a):rt,o&&Oa(r[0],r[1],o)&&(a=i<3?rt:a,i=1),e=sc(e);++n<i;){var s=r[n];s&&t(e,s,n,a)}return e})}function Gi(t,e){return function(r,n){if(null==r)return r;if(!qs(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=sc(r);(e?a--:++a<i)&&n(o[a],a,o)!==!1;);return r}}function Hi(t){return function(e,r,n){for(var i=-1,a=sc(e),o=n(e),s=o.length;s--;){var u=o[t?s:++i];if(r(a[u],u,a)===!1)break}return e}}function Vi(t,e,r){function n(){var e=this&&this!==nn&&this instanceof n?a:t;return e.apply(i?r:this,arguments)}var i=e&mt,a=qi(t);return n}function Ki(t){return function(e){e=ku(e);var r=G(e)?J(e):rt,n=r?r[0]:e.charAt(0),i=r?Si(r,1).join(""):e.slice(1);return n[t]()+i}}function Wi(t){return function(e){return m(wl(al(e).replace(Br,"")),t,"")}}function qi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=fd(t.prototype),n=t.apply(r,e);return iu(n)?n:r}}function Yi(t,e,r){function n(){for(var o=arguments.length,s=rc(o),u=o,l=ya(n);u--;)s[u]=arguments[u];var c=o<3&&s[0]!==l&&s[o-1]!==l?[]:q(s,l);if(o-=c.length,o<r)return ia(t,e,Qi,n.placeholder,rt,s,c,rt,rt,r-o);var d=this&&this!==nn&&this instanceof n?i:t;return a(d,this,s)}var i=qi(t);return n}function zi(t){return function(e,r,n){var i=sc(e);if(!qs(e)){var a=_a(r,3);e=ju(e),r=function(t){return a(i[t],t,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:rt}}function Xi(t){return pa(function(e){var r=e.length,n=r,a=i.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if("function"!=typeof o)throw new cc(ot);if(a&&!s&&"wrapper"==va(o))var s=new i([],!0)}for(n=s?n:r;++n<r;){o=e[n];var u=va(o),l="wrapper"==u?Td(o):rt;s=l&&Na(l[0])&&l[1]==(At|yt|bt|Tt)&&!l[4].length&&1==l[9]?s[va(l[0])].apply(s,l[3]):1==o.length&&Na(o)?s[u]():s.thru(o)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&gh(n))return s.plant(n).value();for(var i=0,a=r?e[i].apply(this,t):n;++i<r;)a=e[i].call(this,a);return a}})}function Qi(t,e,r,n,i,a,o,s,u,l){function c(){for(var v=arguments.length,y=rc(v),_=v;_--;)y[_]=arguments[_];if(p)var b=ya(c),E=U(y,b);if(n&&(y=Oi(y,n,i,p)),a&&(y=xi(y,a,o,p)),v-=E,p&&v<l){var A=q(y,b);return ia(t,e,Qi,c.placeholder,r,y,A,s,u,l-v)}var T=h?r:this,S=f?T[t]:t;return v=y.length,s?y=Ya(y,s):m&&v>1&&y.reverse(),d&&u<v&&(y.length=u),this&&this!==nn&&this instanceof c&&(S=g||qi(S)),S.apply(T,y)}var d=e&At,h=e&mt,f=e&gt,p=e&(yt|_t),m=e&St,g=f?rt:qi(t);return c}function $i(t,e){return function(r,n){return Sn(r,t,e(n),{})}}function Ji(t,e){return function(r,n){var i;if(r===rt&&n===rt)return e;if(r!==rt&&(i=r),n!==rt){if(i===rt)return n;"string"==typeof r||"string"==typeof n?(r=fi(r),n=fi(n)):(r=hi(r),n=hi(n)),i=t(r,n)}return i}}function Zi(t){return pa(function(e){return e=f(e,O(_a())),ri(function(r){var n=this;return t(e,function(t){return a(t,n,r)})})})}function ta(t,e){e=e===rt?" ":fi(e);var r=e.length;if(r<2)return r?ei(e,t):e;var n=ei(e,Uc(t/$(e)));return G(e)?Si(J(n),0,t).join(""):n.slice(0,t)}function ea(t,e,r,n){function i(){for(var e=-1,u=arguments.length,l=-1,c=n.length,d=rc(c+u),h=this&&this!==nn&&this instanceof i?s:t;++l<c;)d[l]=n[l];for(;u--;)d[l++]=arguments[++e];return a(h,o?r:this,d)}var o=e&mt,s=qi(t);return i}function ra(t){return function(e,r,n){return n&&"number"!=typeof n&&Oa(e,r,n)&&(r=n=rt),e=Eu(e),r===rt?(r=e,e=0):r=Eu(r),n=n===rt?e<r?1:-1:Eu(n),ti(e,r,n,t)}}function na(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=Su(e),r=Su(r)),t(e,r)}}function ia(t,e,r,n,i,a,o,s,u,l){var c=e&yt,d=c?o:rt,h=c?rt:o,f=c?a:rt,p=c?rt:a;e|=c?bt:Et,e&=~(c?Et:bt),e&vt||(e&=~(mt|gt));var m=[t,e,i,f,d,p,h,s,u,l],g=r.apply(rt,m);return Na(t)&&Ld(g,m),g.placeholder=n,Xa(g,t,e)}function aa(t){var e=oc[t];return function(t,r){if(t=Su(t),r=null==r?0:qc(Au(r),292),r&&Hc(t)){var n=(ku(t)+"e").split("e"),i=e(n[0]+"e"+(+n[1]+r));return n=(ku(i)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return e(t)}}function oa(t){return function(e){var r=Cd(e);return r==Xt?K(e):r==re?z(e):R(e,t(e))}}function sa(t,e,r,n,i,a,o,s){var u=e&gt;if(!u&&"function"!=typeof t)throw new cc(ot);var l=n?n.length:0;if(l||(e&=~(bt|Et),n=i=rt),o=o===rt?o:Wc(Au(o),0),s=s===rt?s:Au(s),l-=i?i.length:0,e&Et){var c=n,d=i;n=i=rt}var h=u?rt:Td(t),f=[t,e,r,n,i,c,d,a,o,s];if(h&&Ha(f,h),t=f[0],e=f[1],r=f[2],n=f[3],i=f[4],s=f[9]=f[9]===rt?u?0:t.length:Wc(f[9]-l,0),!s&&e&(yt|_t)&&(e&=~(yt|_t)),e&&e!=mt)p=e==yt||e==_t?Yi(t,e,s):e!=bt&&e!=(mt|bt)||i.length?Qi.apply(rt,f):ea(t,e,r,n);else var p=Vi(t,e,r);var m=h?yd:Ld;return Xa(m(p,f),t,e)}function ua(t,e,r,n){return t===rt||Ws(t,fc[r])&&!gc.call(n,r)?e:t}function la(t,e,r,n,i,a){return iu(t)&&iu(e)&&(a.set(e,t),Kn(t,e,rt,la,a),a.delete(e)),t}function ca(t){return fu(t)?rt:t}function da(t,e,r,n,i,a){var o=r&ft,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var c=-1,d=!0,h=r&pt?new pr:rt;for(a.set(t,e),a.set(e,t);++c<s;){var f=t[c],p=e[c];if(n)var m=o?n(p,f,c,e,t,a):n(f,p,c,t,e,a);if(m!==rt){if(m)continue;d=!1;break}if(h){if(!v(e,function(t,e){if(!M(h,e)&&(f===t||i(f,t,r,n,a)))return h.push(e)})){d=!1;break}}else if(f!==p&&!i(f,p,r,n,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function ha(t,e,r,n,i,a,o){switch(r){case le:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ue:return!(t.byteLength!=e.byteLength||!a(new wc(t),new wc(e)));case Vt:case Kt:case Qt:return Ws(+t,+e);case qt:return t.name==e.name&&t.message==e.message;case ee:case ne:return t==e+"";case Xt:var s=K;case re:var u=n&ft;if(s||(s=Y),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;n|=pt,o.set(t,e);var c=da(s(t),s(e),n,i,a,o);return o.delete(t),c;case ie:if(dd)return dd.call(t)==dd.call(e)}return!1}function fa(t,e,r,n,i,a){var o=r&ft,s=ma(t),u=s.length,l=ma(e),c=l.length;if(u!=c&&!o)return!1;for(var d=u;d--;){var h=s[d];if(!(o?h in e:gc.call(e,h)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var p=!0;a.set(t,e),a.set(e,t);for(var m=o;++d<u;){h=s[d];var g=t[h],v=e[h];if(n)var y=o?n(v,g,h,e,t,a):n(g,v,h,t,e,a);if(!(y===rt?g===v||i(g,v,r,n,a):y)){p=!1;break}m||(m="constructor"==h)}if(p&&!m){var _=t.constructor,b=e.constructor;_!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(p=!1)}return a.delete(t),a.delete(e),p}function pa(t){return Pd(Wa(t,rt,fo),t+"")}function ma(t){return on(t,ju,Sd)}function ga(t){return on(t,Gu,wd)}function va(t){for(var e=t.name+"",r=id[e],n=gc.call(id,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e}function ya(t){var e=gc.call(r,"placeholder")?r:t;return e.placeholder}function _a(){var t=r.iteratee||Il;return t=t===Il?Fn:t,arguments.length?t(arguments[0],arguments[1]):t}function ba(t,e){var r=t.__data__;return Ma(e)?r["string"==typeof e?"string":"hash"]:r.map}function Ea(t){for(var e=ju(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Ba(i)]}return e}function Aa(t,e){var r=j(t,e);return On(r)?r:rt}function Ta(t){var e=gc.call(t,Oc),r=t[Oc];try{t[Oc]=rt;var n=!0}catch(t){}var i=_c.call(t);return n&&(e?t[Oc]=r:delete t[Oc]),i}function Sa(t,e,r){for(var n=-1,i=r.length;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=qc(e,t+o);break;case"takeRight":t=Wc(t,e-o)}}return{start:t,end:e}}function wa(t){var e=t.match(Ue);return e?e[1].split(Be):[]}function Ca(t,e,r){e=Ti(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var o=Ja(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:(i=null==t?0:t.length,!!i&&nu(i)&&Ra(o,i)&&(gh(t)||mh(t)))}function ka(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&gc.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function La(t){return"function"!=typeof t.constructor||Ua(t)?{}:fd(kc(t))}function Da(t,e,r){var n=t.constructor;switch(e){case ue:return Ci(t);case Vt:case Kt:return new n(+t);case le:return ki(t,r);case ce:case de:case he:case fe:case pe:case me:case ge:case ve:case ye:return Pi(t,r);case Xt:return new n;case Qt:case ne:return new n(t);case ee:return Li(t);case re:return new n;case ie:return Di(t)}}function Pa(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(Fe,"{\n/* [wrapped with "+e+"] */\n")}function Ia(t){return gh(t)||mh(t)||!!(Ic&&t&&t[Ic])}function Ra(t,e){var r=typeof t;return e=null==e?Ot:e,!!e&&("number"==r||"symbol"!=r&&ze.test(t))&&t>-1&&t%1==0&&t<e}function Oa(t,e,r){if(!iu(r))return!1;var n=typeof e;return!!("number"==n?qs(r)&&Ra(e,r.length):"string"==n&&e in r)&&Ws(r[e],t)}function xa(t,e){if(gh(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!gu(t))||(Pe.test(t)||!De.test(t)||null!=e&&t in sc(e))}function Ma(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Na(t){var e=va(t),n=r[e];if("function"!=typeof n||!(e in y.prototype))return!1;if(t===n)return!0;var i=Td(n);return!!i&&t===i[0]}function Fa(t){return!!yc&&yc in t}function Ua(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||fc;return t===r}function Ba(t){return t===t&&!iu(t)}function ja(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==rt||t in sc(r)))}}function Ga(t){var e=Is(t,function(t){return r.size===ut&&r.clear(),t}),r=e.cache;return e}function Ha(t,e){var r=t[1],n=e[1],i=r|n,a=i<(mt|gt|At),o=n==At&&r==yt||n==At&&r==Tt&&t[7].length<=e[8]||n==(At|Tt)&&e[7].length<=e[8]&&r==yt;if(!a&&!o)return t;n&mt&&(t[2]=e[2],i|=r&mt?0:vt);var s=e[3];if(s){var u=t[3];t[3]=u?Oi(u,s,e[4]):s,t[4]=u?q(t[3],lt):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?xi(u,s,e[6]):s,t[6]=u?q(t[5],lt):e[6]),s=e[7],s&&(t[7]=s),n&At&&(t[8]=null==t[8]?e[8]:qc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Va(t){var e=[];if(null!=t)for(var r in sc(t))e.push(r);return e}function Ka(t){return _c.call(t)}function Wa(t,e,r){return e=Wc(e===rt?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=Wc(n.length-e,0),s=rc(o);++i<o;)s[i]=n[e+i];i=-1;for(var u=rc(e+1);++i<e;)u[i]=n[i];return u[e]=r(s),a(t,this,u)}}function qa(t,e){return e.length<2?t:an(t,si(e,0,-1))}function Ya(t,e){for(var r=t.length,n=qc(e.length,r),i=Mi(t);n--;){var a=e[n];t[n]=Ra(a,r)?i[a]:rt}return t}function za(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Xa(t,e,r){var n=e+"";return Pd(t,Pa(n,to(wa(n),r)))}function Qa(t){var e=0,r=0;return function(){var n=Yc(),i=Lt-(n-r);if(r=n,i>0){if(++e>=kt)return arguments[0]}else e=0;return t.apply(rt,arguments)}}function $a(t,e){var r=-1,n=t.length,i=n-1;for(e=e===rt?n:e;++r<e;){var a=Zn(r,i),o=t[a];t[a]=t[r],t[r]=o}return t.length=e,t}function Ja(t){if("string"==typeof t||gu(t))return t;var e=t+"";return"0"==e&&1/t==-Rt?"-0":e}function Za(t){if(null!=t){try{return mc.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function to(t,e){return s(Bt,function(r){var n="_."+r[0];e&r[1]&&!d(t,n)&&t.push(n)}),t.sort()}function eo(t){if(t instanceof y)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Mi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ro(t,e,r){e=(r?Oa(t,e,r):e===rt)?1:Wc(Au(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var i=0,a=0,o=rc(Uc(n/e));i<n;)o[a++]=si(t,i,i+=e);return o}function no(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var a=t[e];a&&(i[n++]=a)}return i}function io(){var t=arguments.length;if(!t)return[];for(var e=rc(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return p(gh(r)?Mi(r):[r],$r(e,1))}function ao(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===rt?1:Au(e),si(t,e<0?0:e,n)):[]}function oo(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===rt?1:Au(e),e=n-e,si(t,0,e<0?0:e)):[]}function so(t,e){return t&&t.length?vi(t,_a(e,3),!0,!0):[]}function uo(t,e){return t&&t.length?vi(t,_a(e,3),!0):[]}function lo(t,e,r,n){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&Oa(t,e,r)&&(r=0,n=i),Xr(t,e,r,n)):[]}function co(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:Au(r);return i<0&&(i=Wc(n+i,0)),E(t,_a(e,3),i)}function ho(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n-1;return r!==rt&&(i=Au(r),i=r<0?Wc(n+i,0):qc(i,n-1)),E(t,_a(e,3),i,!0)}function fo(t){var e=null==t?0:t.length;return e?$r(t,1):[]}function po(t){var e=null==t?0:t.length;return e?$r(t,Rt):[]}function mo(t,e){var r=null==t?0:t.length;return r?(e=e===rt?1:Au(e),$r(t,e)):[]}function go(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n}function vo(t){return t&&t.length?t[0]:rt}function yo(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:Au(r);return i<0&&(i=Wc(n+i,0)),A(t,e,i)}function _o(t){var e=null==t?0:t.length;return e?si(t,0,-1):[]}function bo(t,e){return null==t?"":Vc.call(t,e)}function Eo(t){var e=null==t?0:t.length;return e?t[e-1]:rt}function Ao(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n;return r!==rt&&(i=Au(r),i=i<0?Wc(n+i,0):qc(i,n-1)),e===e?Q(t,e,i):E(t,S,i,!0)}function To(t,e){return t&&t.length?qn(t,Au(e)):rt}function So(t,e){return t&&t.length&&e&&e.length?$n(t,e):t}function wo(t,e,r){return t&&t.length&&e&&e.length?$n(t,e,_a(r,2)):t}function Co(t,e,r){return t&&t.length&&e&&e.length?$n(t,e,rt,r):t}function ko(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],a=t.length;for(e=_a(e,3);++n<a;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return Jn(t,i),r}function Lo(t){return null==t?t:Qc.call(t)}function Do(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&Oa(t,e,r)?(e=0,r=n):(e=null==e?0:Au(e),r=r===rt?n:Au(r)),si(t,e,r)):[]}function Po(t,e){return li(t,e)}function Io(t,e,r){return ci(t,e,_a(r,2))}function Ro(t,e){var r=null==t?0:t.length;if(r){var n=li(t,e);if(n<r&&Ws(t[n],e))return n}return-1}function Oo(t,e){return li(t,e,!0)}function xo(t,e,r){return ci(t,e,_a(r,2),!0)}function Mo(t,e){var r=null==t?0:t.length;if(r){var n=li(t,e,!0)-1;if(Ws(t[n],e))return n}return-1}function No(t){return t&&t.length?di(t):[]}function Fo(t,e){return t&&t.length?di(t,_a(e,2)):[]}function Uo(t){var e=null==t?0:t.length;return e?si(t,1,e):[]}function Bo(t,e,r){return t&&t.length?(e=r||e===rt?1:Au(e),si(t,0,e<0?0:e)):[]}function jo(t,e,r){var n=null==t?0:t.length;return n?(e=r||e===rt?1:Au(e),e=n-e,si(t,e<0?0:e,n)):[]}function Go(t,e){return t&&t.length?vi(t,_a(e,3),!1,!0):[]}function Ho(t,e){return t&&t.length?vi(t,_a(e,3)):[]}function Vo(t){return t&&t.length?pi(t):[]}function Ko(t,e){return t&&t.length?pi(t,_a(e,2)):[]}function Wo(t,e){return e="function"==typeof e?e:rt,t&&t.length?pi(t,rt,e):[]}function qo(t){if(!t||!t.length)return[];var e=0;return t=c(t,function(t){if(Ys(t))return e=Wc(t.length,e),!0}),I(e,function(e){return f(t,C(e))})}function Yo(t,e){if(!t||!t.length)return[];var r=qo(t);return null==e?r:f(r,function(t){return a(e,rt,t)})}function zo(t,e){return bi(t||[],e||[],Lr)}function Xo(t,e){return bi(t||[],e||[],ai)}function Qo(t){var e=r(t);return e.__chain__=!0,e}function $o(t,e){return e(t),t}function Jo(t,e){return e(t)}function Zo(){return Qo(this)}function ts(){return new i(this.value(),this.__chain__)}function es(){this.__values__===rt&&(this.__values__=bu(this.value()));var t=this.__index__>=this.__values__.length,e=t?rt:this.__values__[this.__index__++];return{done:t,value:e}}function rs(){return this}function ns(t){for(var e,r=this;r instanceof n;){var i=eo(r);i.__index__=0,i.__values__=rt,e?a.__wrapped__=i:e=i;var a=i;r=r.__wrapped__}return a.__wrapped__=t,e}function is(){var t=this.__wrapped__;if(t instanceof y){var e=t;return this.__actions__.length&&(e=new y(this)),e=e.reverse(),e.__actions__.push({func:Jo,args:[Lo],thisArg:rt}),new i(e,this.__chain__)}return this.thru(Lo)}function as(){return yi(this.__wrapped__,this.__actions__)}function os(t,e,r){var n=gh(t)?l:Vr;return r&&Oa(t,e,r)&&(e=rt),n(t,_a(e,3))}function ss(t,e){var r=gh(t)?c:Qr;return r(t,_a(e,3))}function us(t,e){return $r(ps(t,e),1)}function ls(t,e){return $r(ps(t,e),Rt)}function cs(t,e,r){return r=r===rt?1:Au(r),$r(ps(t,e),r)}function ds(t,e){var r=gh(t)?s:pd;return r(t,_a(e,3))}function hs(t,e){var r=gh(t)?u:md;return r(t,_a(e,3))}function fs(t,e,r,n){t=qs(t)?t:Zu(t),r=r&&!n?Au(r):0;var i=t.length;return r<0&&(r=Wc(i+r,0)),mu(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&A(t,e,r)>-1}function ps(t,e){var r=gh(t)?f:Gn;return r(t,_a(e,3))}function ms(t,e,r,n){return null==t?[]:(gh(e)||(e=null==e?[]:[e]),r=n?rt:r,gh(r)||(r=null==r?[]:[r]),Yn(t,e,r))}function gs(t,e,r){var n=gh(t)?m:L,i=arguments.length<3;return n(t,_a(e,4),r,i,pd)}function vs(t,e,r){var n=gh(t)?g:L,i=arguments.length<3;return n(t,_a(e,4),r,i,md)}function ys(t,e){var r=gh(t)?c:Qr;return r(t,Rs(_a(e,3)));
}function _s(t){var e=gh(t)?Sr:ni;return e(t)}function bs(t,e,r){e=(r?Oa(t,e,r):e===rt)?1:Au(e);var n=gh(t)?wr:ii;return n(t,e)}function Es(t){var e=gh(t)?Cr:oi;return e(t)}function As(t){if(null==t)return 0;if(qs(t))return mu(t)?$(t):t.length;var e=Cd(t);return e==Xt||e==re?t.size:Un(t).length}function Ts(t,e,r){var n=gh(t)?v:ui;return r&&Oa(t,e,r)&&(e=rt),n(t,_a(e,3))}function Ss(t,e){if("function"!=typeof e)throw new cc(ot);return t=Au(t),function(){if(--t<1)return e.apply(this,arguments)}}function ws(t,e,r){return e=r?rt:e,e=t&&null==e?t.length:e,sa(t,At,rt,rt,rt,rt,e)}function Cs(t,e){var r;if("function"!=typeof e)throw new cc(ot);return t=Au(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=rt),r}}function ks(t,e,r){e=r?rt:e;var n=sa(t,yt,rt,rt,rt,rt,rt,e);return n.placeholder=ks.placeholder,n}function Ls(t,e,r){e=r?rt:e;var n=sa(t,_t,rt,rt,rt,rt,rt,e);return n.placeholder=Ls.placeholder,n}function Ds(t,e,r){function n(e){var r=h,n=f;return h=f=rt,y=e,m=t.apply(n,r)}function i(t){return y=t,g=Dd(s,e),_?n(t):m}function a(t){var r=t-v,n=t-y,i=e-r;return b?qc(i,p-n):i}function o(t){var r=t-v,n=t-y;return v===rt||r>=e||r<0||b&&n>=p}function s(){var t=ih();return o(t)?u(t):void(g=Dd(s,a(t)))}function u(t){return g=rt,E&&h?n(t):(h=f=rt,m)}function l(){g!==rt&&Ed(g),y=0,h=v=f=g=rt}function c(){return g===rt?m:u(ih())}function d(){var t=ih(),r=o(t);if(h=arguments,f=this,v=t,r){if(g===rt)return i(v);if(b)return Ed(g),g=Dd(s,e),n(v)}return g===rt&&(g=Dd(s,e)),m}var h,f,p,m,g,v,y=0,_=!1,b=!1,E=!0;if("function"!=typeof t)throw new cc(ot);return e=Su(e)||0,iu(r)&&(_=!!r.leading,b="maxWait"in r,p=b?Wc(Su(r.maxWait)||0,e):p,E="trailing"in r?!!r.trailing:E),d.cancel=l,d.flush=c,d}function Ps(t){return sa(t,St)}function Is(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new cc(ot);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Is.Cache||ur),r}function Rs(t){if("function"!=typeof t)throw new cc(ot);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Os(t){return Cs(2,t)}function xs(t,e){if("function"!=typeof t)throw new cc(ot);return e=e===rt?e:Au(e),ri(t,e)}function Ms(t,e){if("function"!=typeof t)throw new cc(ot);return e=null==e?0:Wc(Au(e),0),ri(function(r){var n=r[e],i=Si(r,0,e);return n&&p(i,n),a(t,this,i)})}function Ns(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new cc(ot);return iu(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Ds(t,e,{leading:n,maxWait:e,trailing:i})}function Fs(t){return ws(t,1)}function Us(t,e){return ch(Ai(e),t)}function Bs(){if(!arguments.length)return[];var t=arguments[0];return gh(t)?t:[t]}function js(t){return Nr(t,ht)}function Gs(t,e){return e="function"==typeof e?e:rt,Nr(t,ht,e)}function Hs(t){return Nr(t,ct|ht)}function Vs(t,e){return e="function"==typeof e?e:rt,Nr(t,ct|ht,e)}function Ks(t,e){return null==e||Ur(t,e,ju(e))}function Ws(t,e){return t===e||t!==t&&e!==e}function qs(t){return null!=t&&nu(t.length)&&!eu(t)}function Ys(t){return au(t)&&qs(t)}function zs(t){return t===!0||t===!1||au(t)&&un(t)==Vt}function Xs(t){return au(t)&&1===t.nodeType&&!fu(t)}function Qs(t){if(null==t)return!0;if(qs(t)&&(gh(t)||"string"==typeof t||"function"==typeof t.splice||yh(t)||Th(t)||mh(t)))return!t.length;var e=Cd(t);if(e==Xt||e==re)return!t.size;if(Ua(t))return!Un(t).length;for(var r in t)if(gc.call(t,r))return!1;return!0}function $s(t,e){return Dn(t,e)}function Js(t,e,r){r="function"==typeof r?r:rt;var n=r?r(t,e):rt;return n===rt?Dn(t,e,rt,r):!!n}function Zs(t){if(!au(t))return!1;var e=un(t);return e==qt||e==Wt||"string"==typeof t.message&&"string"==typeof t.name&&!fu(t)}function tu(t){return"number"==typeof t&&Hc(t)}function eu(t){if(!iu(t))return!1;var e=un(t);return e==Yt||e==zt||e==Ht||e==te}function ru(t){return"number"==typeof t&&t==Au(t)}function nu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ot}function iu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function au(t){return null!=t&&"object"==typeof t}function ou(t,e){return t===e||Rn(t,e,Ea(e))}function su(t,e,r){return r="function"==typeof r?r:rt,Rn(t,e,Ea(e),r)}function uu(t){return hu(t)&&t!=+t}function lu(t){if(kd(t))throw new ic(at);return On(t)}function cu(t){return null===t}function du(t){return null==t}function hu(t){return"number"==typeof t||au(t)&&un(t)==Qt}function fu(t){if(!au(t)||un(t)!=Jt)return!1;var e=kc(t);if(null===e)return!0;var r=gc.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&mc.call(r)==bc}function pu(t){return ru(t)&&t>=-Ot&&t<=Ot}function mu(t){return"string"==typeof t||!gh(t)&&au(t)&&un(t)==ne}function gu(t){return"symbol"==typeof t||au(t)&&un(t)==ie}function vu(t){return t===rt}function yu(t){return au(t)&&Cd(t)==oe}function _u(t){return au(t)&&un(t)==se}function bu(t){if(!t)return[];if(qs(t))return mu(t)?J(t):Mi(t);if(Rc&&t[Rc])return V(t[Rc]());var e=Cd(t),r=e==Xt?K:e==re?Y:Zu;return r(t)}function Eu(t){if(!t)return 0===t?t:0;if(t=Su(t),t===Rt||t===-Rt){var e=t<0?-1:1;return e*xt}return t===t?t:0}function Au(t){var e=Eu(t),r=e%1;return e===e?r?e-r:e:0}function Tu(t){return t?Mr(Au(t),0,Nt):0}function Su(t){if("number"==typeof t)return t;if(gu(t))return Mt;if(iu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=iu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(xe,"");var r=We.test(t);return r||Ye.test(t)?tn(t.slice(2),r?2:8):Ke.test(t)?Mt:+t}function wu(t){return Ni(t,Gu(t))}function Cu(t){return t?Mr(Au(t),-Ot,Ot):0===t?t:0}function ku(t){return null==t?"":fi(t)}function Lu(t,e){var r=fd(t);return null==e?r:Ir(r,e)}function Du(t,e){return b(t,_a(e,3),Jr)}function Pu(t,e){return b(t,_a(e,3),en)}function Iu(t,e){return null==t?t:gd(t,_a(e,3),Gu)}function Ru(t,e){return null==t?t:vd(t,_a(e,3),Gu)}function Ou(t,e){return t&&Jr(t,_a(e,3))}function xu(t,e){return t&&en(t,_a(e,3))}function Mu(t){return null==t?[]:rn(t,ju(t))}function Nu(t){return null==t?[]:rn(t,Gu(t))}function Fu(t,e,r){var n=null==t?rt:an(t,e);return n===rt?r:n}function Uu(t,e){return null!=t&&Ca(t,e,gn)}function Bu(t,e){return null!=t&&Ca(t,e,bn)}function ju(t){return qs(t)?Tr(t):Un(t)}function Gu(t){return qs(t)?Tr(t,!0):Bn(t)}function Hu(t,e){var r={};return e=_a(e,3),Jr(t,function(t,n,i){Or(r,e(t,n,i),t)}),r}function Vu(t,e){var r={};return e=_a(e,3),Jr(t,function(t,n,i){Or(r,n,e(t,n,i))}),r}function Ku(t,e){return Wu(t,Rs(_a(e)))}function Wu(t,e){if(null==t)return{};var r=f(ga(t),function(t){return[t]});return e=_a(e),Xn(t,r,function(t,r){return e(t,r[0])})}function qu(t,e,r){e=Ti(e,t);var n=-1,i=e.length;for(i||(i=1,t=rt);++n<i;){var a=null==t?rt:t[Ja(e[n])];a===rt&&(n=i,a=r),t=eu(a)?a.call(t):a}return t}function Yu(t,e,r){return null==t?t:ai(t,e,r)}function zu(t,e,r,n){return n="function"==typeof n?n:rt,null==t?t:ai(t,e,r,n)}function Xu(t,e,r){var n=gh(t),i=n||yh(t)||Th(t);if(e=_a(e,4),null==r){var a=t&&t.constructor;r=i?n?new a:[]:iu(t)&&eu(a)?fd(kc(t)):{}}return(i?s:Jr)(t,function(t,n,i){return e(r,t,n,i)}),r}function Qu(t,e){return null==t||mi(t,e)}function $u(t,e,r){return null==t?t:gi(t,e,Ai(r))}function Ju(t,e,r,n){return n="function"==typeof n?n:rt,null==t?t:gi(t,e,Ai(r),n)}function Zu(t){return null==t?[]:x(t,ju(t))}function tl(t){return null==t?[]:x(t,Gu(t))}function el(t,e,r){return r===rt&&(r=e,e=rt),r!==rt&&(r=Su(r),r=r===r?r:0),e!==rt&&(e=Su(e),e=e===e?e:0),Mr(Su(t),e,r)}function rl(t,e,r){return e=Eu(e),r===rt?(r=e,e=0):r=Eu(r),t=Su(t),An(t,e,r)}function nl(t,e,r){if(r&&"boolean"!=typeof r&&Oa(t,e,r)&&(e=r=rt),r===rt&&("boolean"==typeof e?(r=e,e=rt):"boolean"==typeof t&&(r=t,t=rt)),t===rt&&e===rt?(t=0,e=1):(t=Eu(t),e===rt?(e=t,t=0):e=Eu(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=Xc();return qc(t+i*(e-t+Zr("1e-"+((i+"").length-1))),e)}return Zn(t,e)}function il(t){return Xh(ku(t).toLowerCase())}function al(t){return t=ku(t),t&&t.replace(Xe,vn).replace(jr,"")}function ol(t,e,r){t=ku(t),e=fi(e);var n=t.length;r=r===rt?n:Mr(Au(r),0,n);var i=r;return r-=e.length,r>=0&&t.slice(r,i)==e}function sl(t){return t=ku(t),t&&we.test(t)?t.replace(Te,yn):t}function ul(t){return t=ku(t),t&&Oe.test(t)?t.replace(Re,"\\$&"):t}function ll(t,e,r){t=ku(t),e=Au(e);var n=e?$(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return ta(Bc(i),r)+t+ta(Uc(i),r)}function cl(t,e,r){t=ku(t),e=Au(e);var n=e?$(t):0;return e&&n<e?t+ta(e-n,r):t}function dl(t,e,r){t=ku(t),e=Au(e);var n=e?$(t):0;return e&&n<e?ta(e-n,r)+t:t}function hl(t,e,r){return r||null==e?e=0:e&&(e=+e),zc(ku(t).replace(Me,""),e||0)}function fl(t,e,r){return e=(r?Oa(t,e,r):e===rt)?1:Au(e),ei(ku(t),e)}function pl(){var t=arguments,e=ku(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function ml(t,e,r){return r&&"number"!=typeof r&&Oa(t,e,r)&&(e=r=rt),(r=r===rt?Nt:r>>>0)?(t=ku(t),t&&("string"==typeof e||null!=e&&!Eh(e))&&(e=fi(e),!e&&G(t))?Si(J(t),0,r):t.split(e,r)):[]}function gl(t,e,r){return t=ku(t),r=null==r?0:Mr(Au(r),0,t.length),e=fi(e),t.slice(r,r+e.length)==e}function vl(t,e,n){var i=r.templateSettings;n&&Oa(t,e,n)&&(e=rt),t=ku(t),e=Lh({},e,i,ua);var a,o,s=Lh({},e.imports,i.imports,ua),u=ju(s),l=x(s,u),c=0,d=e.interpolate||Qe,h="__p += '",f=uc((e.escape||Qe).source+"|"+d.source+"|"+(d===Le?He:Qe).source+"|"+(e.evaluate||Qe).source+"|$","g"),p="//# sourceURL="+(gc.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++qr+"]")+"\n";t.replace(f,function(e,r,n,i,s,u){return n||(n=i),h+=t.slice(c,u).replace($e,B),r&&(a=!0,h+="' +\n__e("+r+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),h+="';\n";var m=gc.call(e,"variable")&&e.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(_e,""):h).replace(be,"$1").replace(Ee,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Qh(function(){return ac(u,p+"return "+h).apply(rt,l)});if(g.source=h,Zs(g))throw g;return g}function yl(t){return ku(t).toLowerCase()}function _l(t){return ku(t).toUpperCase()}function bl(t,e,r){if(t=ku(t),t&&(r||e===rt))return t.replace(xe,"");if(!t||!(e=fi(e)))return t;var n=J(t),i=J(e),a=N(n,i),o=F(n,i)+1;return Si(n,a,o).join("")}function El(t,e,r){if(t=ku(t),t&&(r||e===rt))return t.replace(Ne,"");if(!t||!(e=fi(e)))return t;var n=J(t),i=F(n,J(e))+1;return Si(n,0,i).join("")}function Al(t,e,r){if(t=ku(t),t&&(r||e===rt))return t.replace(Me,"");if(!t||!(e=fi(e)))return t;var n=J(t),i=N(n,J(e));return Si(n,i).join("")}function Tl(t,e){var r=wt,n=Ct;if(iu(e)){var i="separator"in e?e.separator:i;r="length"in e?Au(e.length):r,n="omission"in e?fi(e.omission):n}t=ku(t);var a=t.length;if(G(t)){var o=J(t);a=o.length}if(r>=a)return t;var s=r-$(n);if(s<1)return n;var u=o?Si(o,0,s).join(""):t.slice(0,s);if(i===rt)return u+n;if(o&&(s+=u.length-s),Eh(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=uc(i.source,ku(Ve.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var d=l.index;u=u.slice(0,d===rt?s:d)}}else if(t.indexOf(fi(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+n}function Sl(t){return t=ku(t),t&&Se.test(t)?t.replace(Ae,_n):t}function wl(t,e,r){return t=ku(t),e=r?rt:e,e===rt?H(t)?et(t):_(t):t.match(e)||[]}function Cl(t){var e=null==t?0:t.length,r=_a();return t=e?f(t,function(t){if("function"!=typeof t[1])throw new cc(ot);return[r(t[0]),t[1]]}):[],ri(function(r){for(var n=-1;++n<e;){var i=t[n];if(a(i[0],this,r))return a(i[1],this,r)}})}function kl(t){return Fr(Nr(t,ct))}function Ll(t){return function(){return t}}function Dl(t,e){return null==t||t!==t?e:t}function Pl(t){return t}function Il(t){return Fn("function"==typeof t?t:Nr(t,ct))}function Rl(t){return Hn(Nr(t,ct))}function Ol(t,e){return Vn(t,Nr(e,ct))}function xl(t,e,r){var n=ju(e),i=rn(e,n);null!=r||iu(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=rn(e,ju(e)));var a=!(iu(r)&&"chain"in r&&!r.chain),o=eu(t);return s(i,function(r){var n=e[r];t[r]=n,o&&(t.prototype[r]=function(){var e=this.__chain__;if(a||e){var r=t(this.__wrapped__),i=r.__actions__=Mi(this.__actions__);return i.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,p([this.value()],arguments))})}),t}function Ml(){return nn._===this&&(nn._=Ec),this}function Nl(){}function Fl(t){return t=Au(t),ri(function(e){return qn(e,t)})}function Ul(t){return xa(t)?C(Ja(t)):Qn(t)}function Bl(t){return function(e){return null==t?rt:an(t,e)}}function jl(){return[]}function Gl(){return!1}function Hl(){return{}}function Vl(){return""}function Kl(){return!0}function Wl(t,e){if(t=Au(t),t<1||t>Ot)return[];var r=Nt,n=qc(t,Nt);e=_a(e),t-=Nt;for(var i=I(n,e);++r<t;)e(r);return i}function ql(t){return gh(t)?f(t,Ja):gu(t)?[t]:Mi(Id(ku(t)))}function Yl(t){var e=++vc;return ku(t)+e}function zl(t){return t&&t.length?Kr(t,Pl,ln):rt}function Xl(t,e){return t&&t.length?Kr(t,_a(e,2),ln):rt}function Ql(t){return w(t,Pl)}function $l(t,e){return w(t,_a(e,2))}function Jl(t){return t&&t.length?Kr(t,Pl,jn):rt}function Zl(t,e){return t&&t.length?Kr(t,_a(e,2),jn):rt}function tc(t){return t&&t.length?P(t,Pl):0}function ec(t,e){return t&&t.length?P(t,_a(e,2)):0}e=null==e?nn:En.defaults(nn.Object(),e,En.pick(nn,Wr));var rc=e.Array,nc=e.Date,ic=e.Error,ac=e.Function,oc=e.Math,sc=e.Object,uc=e.RegExp,lc=e.String,cc=e.TypeError,dc=rc.prototype,hc=ac.prototype,fc=sc.prototype,pc=e["__core-js_shared__"],mc=hc.toString,gc=fc.hasOwnProperty,vc=0,yc=function(){var t=/[^.]+$/.exec(pc&&pc.keys&&pc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_c=fc.toString,bc=mc.call(sc),Ec=nn._,Ac=uc("^"+mc.call(gc).replace(Re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tc=sn?e.Buffer:rt,Sc=e.Symbol,wc=e.Uint8Array,Cc=Tc?Tc.allocUnsafe:rt,kc=W(sc.getPrototypeOf,sc),Lc=sc.create,Dc=fc.propertyIsEnumerable,Pc=dc.splice,Ic=Sc?Sc.isConcatSpreadable:rt,Rc=Sc?Sc.iterator:rt,Oc=Sc?Sc.toStringTag:rt,xc=function(){try{var t=Aa(sc,"defineProperty");return t({},"",{}),t}catch(t){}}(),Mc=e.clearTimeout!==nn.clearTimeout&&e.clearTimeout,Nc=nc&&nc.now!==nn.Date.now&&nc.now,Fc=e.setTimeout!==nn.setTimeout&&e.setTimeout,Uc=oc.ceil,Bc=oc.floor,jc=sc.getOwnPropertySymbols,Gc=Tc?Tc.isBuffer:rt,Hc=e.isFinite,Vc=dc.join,Kc=W(sc.keys,sc),Wc=oc.max,qc=oc.min,Yc=nc.now,zc=e.parseInt,Xc=oc.random,Qc=dc.reverse,$c=Aa(e,"DataView"),Jc=Aa(e,"Map"),Zc=Aa(e,"Promise"),td=Aa(e,"Set"),ed=Aa(e,"WeakMap"),rd=Aa(sc,"create"),nd=ed&&new ed,id={},ad=Za($c),od=Za(Jc),sd=Za(Zc),ud=Za(td),ld=Za(ed),cd=Sc?Sc.prototype:rt,dd=cd?cd.valueOf:rt,hd=cd?cd.toString:rt,fd=function(){function t(){}return function(e){if(!iu(e))return{};if(Lc)return Lc(e);t.prototype=e;var r=new t;return t.prototype=rt,r}}();r.templateSettings={escape:Ce,evaluate:ke,interpolate:Le,variable:"",imports:{_:r}},r.prototype=n.prototype,r.prototype.constructor=r,i.prototype=fd(n.prototype),i.prototype.constructor=i,y.prototype=fd(n.prototype),y.prototype.constructor=y,tt.prototype.clear=je,tt.prototype.delete=Je,tt.prototype.get=Ze,tt.prototype.has=tr,tt.prototype.set=er,rr.prototype.clear=nr,rr.prototype.delete=ir,rr.prototype.get=ar,rr.prototype.has=or,rr.prototype.set=sr,ur.prototype.clear=lr,ur.prototype.delete=cr,ur.prototype.get=dr,ur.prototype.has=hr,ur.prototype.set=fr,pr.prototype.add=pr.prototype.push=mr,pr.prototype.has=gr,vr.prototype.clear=yr,vr.prototype.delete=_r,vr.prototype.get=br,vr.prototype.has=Er,vr.prototype.set=Ar;var pd=Gi(Jr),md=Gi(en,!0),gd=Hi(),vd=Hi(!0),yd=nd?function(t,e){return nd.set(t,e),t}:Pl,_d=xc?function(t,e){return xc(t,"toString",{configurable:!0,enumerable:!1,value:Ll(e),writable:!0})}:Pl,bd=ri,Ed=Mc||function(t){return nn.clearTimeout(t)},Ad=td&&1/Y(new td([,-0]))[1]==Rt?function(t){return new td(t)}:Nl,Td=nd?function(t){return nd.get(t)}:Nl,Sd=jc?function(t){return null==t?[]:(t=sc(t),c(jc(t),function(e){return Dc.call(t,e)}))}:jl,wd=jc?function(t){for(var e=[];t;)p(e,Sd(t)),t=kc(t);return e}:jl,Cd=un;($c&&Cd(new $c(new ArrayBuffer(1)))!=le||Jc&&Cd(new Jc)!=Xt||Zc&&Cd(Zc.resolve())!=Zt||td&&Cd(new td)!=re||ed&&Cd(new ed)!=oe)&&(Cd=function(t){var e=un(t),r=e==Jt?t.constructor:rt,n=r?Za(r):"";if(n)switch(n){case ad:return le;case od:return Xt;case sd:return Zt;case ud:return re;case ld:return oe}return e});var kd=pc?eu:Gl,Ld=Qa(yd),Dd=Fc||function(t,e){return nn.setTimeout(t,e)},Pd=Qa(_d),Id=Ga(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ie,function(t,r,n,i){e.push(n?i.replace(Ge,"$1"):r||t)}),e}),Rd=ri(function(t,e){return Ys(t)?Hr(t,$r(e,1,Ys,!0)):[]}),Od=ri(function(t,e){var r=Eo(e);return Ys(r)&&(r=rt),Ys(t)?Hr(t,$r(e,1,Ys,!0),_a(r,2)):[]}),xd=ri(function(t,e){var r=Eo(e);return Ys(r)&&(r=rt),Ys(t)?Hr(t,$r(e,1,Ys,!0),rt,r):[]}),Md=ri(function(t){var e=f(t,Ei);return e.length&&e[0]===t[0]?Tn(e):[]}),Nd=ri(function(t){var e=Eo(t),r=f(t,Ei);return e===Eo(r)?e=rt:r.pop(),r.length&&r[0]===t[0]?Tn(r,_a(e,2)):[]}),Fd=ri(function(t){var e=Eo(t),r=f(t,Ei);return e="function"==typeof e?e:rt,e&&r.pop(),r.length&&r[0]===t[0]?Tn(r,rt,e):[]}),Ud=ri(So),Bd=pa(function(t,e){var r=null==t?0:t.length,n=xr(t,e);return Jn(t,f(e,function(t){return Ra(t,r)?+t:t}).sort(Ii)),n}),jd=ri(function(t){return pi($r(t,1,Ys,!0))}),Gd=ri(function(t){var e=Eo(t);return Ys(e)&&(e=rt),pi($r(t,1,Ys,!0),_a(e,2))}),Hd=ri(function(t){var e=Eo(t);return e="function"==typeof e?e:rt,pi($r(t,1,Ys,!0),rt,e)}),Vd=ri(function(t,e){return Ys(t)?Hr(t,e):[]}),Kd=ri(function(t){return _i(c(t,Ys))}),Wd=ri(function(t){var e=Eo(t);return Ys(e)&&(e=rt),_i(c(t,Ys),_a(e,2))}),qd=ri(function(t){var e=Eo(t);return e="function"==typeof e?e:rt,_i(c(t,Ys),rt,e)}),Yd=ri(qo),zd=ri(function(t){var e=t.length,r=e>1?t[e-1]:rt;return r="function"==typeof r?(t.pop(),r):rt,Yo(t,r)}),Xd=pa(function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,a=function(e){return xr(e,t)};return!(e>1||this.__actions__.length)&&n instanceof y&&Ra(r)?(n=n.slice(r,+r+(e?1:0)),n.__actions__.push({func:Jo,args:[a],thisArg:rt}),new i(n,this.__chain__).thru(function(t){return e&&!t.length&&t.push(rt),t})):this.thru(a)}),Qd=Bi(function(t,e,r){gc.call(t,r)?++t[r]:Or(t,r,1)}),$d=zi(co),Jd=zi(ho),Zd=Bi(function(t,e,r){gc.call(t,r)?t[r].push(e):Or(t,r,[e])}),th=ri(function(t,e,r){var n=-1,i="function"==typeof e,o=qs(t)?rc(t.length):[];return pd(t,function(t){o[++n]=i?a(e,t,r):wn(t,e,r)}),o}),eh=Bi(function(t,e,r){Or(t,r,e)}),rh=Bi(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),nh=ri(function(t,e){if(null==t)return[];var r=e.length;return r>1&&Oa(t,e[0],e[1])?e=[]:r>2&&Oa(e[0],e[1],e[2])&&(e=[e[0]]),Yn(t,$r(e,1),[])}),ih=Nc||function(){return nn.Date.now()},ah=ri(function(t,e,r){var n=mt;if(r.length){var i=q(r,ya(ah));n|=bt}return sa(t,n,e,r,i)}),oh=ri(function(t,e,r){var n=mt|gt;if(r.length){var i=q(r,ya(oh));n|=bt}return sa(e,n,t,r,i)}),sh=ri(function(t,e){return Gr(t,1,e)}),uh=ri(function(t,e,r){return Gr(t,Su(e)||0,r)});Is.Cache=ur;var lh=bd(function(t,e){e=1==e.length&&gh(e[0])?f(e[0],O(_a())):f($r(e,1),O(_a()));var r=e.length;return ri(function(n){for(var i=-1,o=qc(n.length,r);++i<o;)n[i]=e[i].call(this,n[i]);return a(t,this,n)})}),ch=ri(function(t,e){var r=q(e,ya(ch));return sa(t,bt,rt,e,r)}),dh=ri(function(t,e){var r=q(e,ya(dh));return sa(t,Et,rt,e,r)}),hh=pa(function(t,e){return sa(t,Tt,rt,rt,rt,e)}),fh=na(ln),ph=na(function(t,e){return t>=e}),mh=Cn(function(){return arguments}())?Cn:function(t){return au(t)&&gc.call(t,"callee")&&!Dc.call(t,"callee")},gh=rc.isArray,vh=cn?O(cn):kn,yh=Gc||Gl,_h=dn?O(dn):Ln,bh=hn?O(hn):In,Eh=fn?O(fn):xn,Ah=pn?O(pn):Mn,Th=mn?O(mn):Nn,Sh=na(jn),wh=na(function(t,e){return t<=e}),Ch=ji(function(t,e){if(Ua(e)||qs(e))return void Ni(e,ju(e),t);for(var r in e)gc.call(e,r)&&Lr(t,r,e[r])}),kh=ji(function(t,e){Ni(e,Gu(e),t)}),Lh=ji(function(t,e,r,n){Ni(e,Gu(e),t,n)}),Dh=ji(function(t,e,r,n){Ni(e,ju(e),t,n)}),Ph=pa(xr),Ih=ri(function(t,e){t=sc(t);var r=-1,n=e.length,i=n>2?e[2]:rt;for(i&&Oa(e[0],e[1],i)&&(n=1);++r<n;)for(var a=e[r],o=Gu(a),s=-1,u=o.length;++s<u;){var l=o[s],c=t[l];(c===rt||Ws(c,fc[l])&&!gc.call(t,l))&&(t[l]=a[l])}return t}),Rh=ri(function(t){return t.push(rt,la),a(Fh,rt,t)}),Oh=$i(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=_c.call(e)),t[e]=r},Ll(Pl)),xh=$i(function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=_c.call(e)),gc.call(t,e)?t[e].push(r):t[e]=[r]},_a),Mh=ri(wn),Nh=ji(function(t,e,r){Kn(t,e,r)}),Fh=ji(function(t,e,r,n){Kn(t,e,r,n)}),Uh=pa(function(t,e){var r={};if(null==t)return r;var n=!1;e=f(e,function(e){return e=Ti(e,t),n||(n=e.length>1),e}),Ni(t,ga(t),r),n&&(r=Nr(r,ct|dt|ht,ca));for(var i=e.length;i--;)mi(r,e[i]);return r}),Bh=pa(function(t,e){return null==t?{}:zn(t,e)}),jh=oa(ju),Gh=oa(Gu),Hh=Wi(function(t,e,r){return e=e.toLowerCase(),t+(r?il(e):e)}),Vh=Wi(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Kh=Wi(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()}),Wh=Ki("toLowerCase"),qh=Wi(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),Yh=Wi(function(t,e,r){return t+(r?" ":"")+Xh(e)}),zh=Wi(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()}),Xh=Ki("toUpperCase"),Qh=ri(function(t,e){try{return a(t,rt,e)}catch(t){return Zs(t)?t:new ic(t)}}),$h=pa(function(t,e){return s(e,function(e){e=Ja(e),Or(t,e,ah(t[e],t))}),t}),Jh=Xi(),Zh=Xi(!0),tf=ri(function(t,e){return function(r){return wn(r,t,e)}}),ef=ri(function(t,e){return function(r){return wn(t,r,e)}}),rf=Zi(f),nf=Zi(l),af=Zi(v),of=ra(),sf=ra(!0),uf=Ji(function(t,e){return t+e},0),lf=aa("ceil"),cf=Ji(function(t,e){return t/e},1),df=aa("floor"),hf=Ji(function(t,e){return t*e},1),ff=aa("round"),pf=Ji(function(t,e){return t-e},0);return r.after=Ss,r.ary=ws,r.assign=Ch,r.assignIn=kh,r.assignInWith=Lh,r.assignWith=Dh,r.at=Ph,r.before=Cs,r.bind=ah,r.bindAll=$h,r.bindKey=oh,r.castArray=Bs,r.chain=Qo,r.chunk=ro,r.compact=no,r.concat=io,r.cond=Cl,r.conforms=kl,r.constant=Ll,r.countBy=Qd,r.create=Lu,r.curry=ks,r.curryRight=Ls,r.debounce=Ds,r.defaults=Ih,r.defaultsDeep=Rh,r.defer=sh,r.delay=uh,r.difference=Rd,r.differenceBy=Od,r.differenceWith=xd,r.drop=ao,r.dropRight=oo,r.dropRightWhile=so,r.dropWhile=uo,r.fill=lo,r.filter=ss,r.flatMap=us,r.flatMapDeep=ls,r.flatMapDepth=cs,r.flatten=fo,r.flattenDeep=po,r.flattenDepth=mo,r.flip=Ps,r.flow=Jh,r.flowRight=Zh,r.fromPairs=go,r.functions=Mu,r.functionsIn=Nu,r.groupBy=Zd,r.initial=_o,r.intersection=Md,r.intersectionBy=Nd,r.intersectionWith=Fd,r.invert=Oh,r.invertBy=xh,r.invokeMap=th,r.iteratee=Il,r.keyBy=eh,r.keys=ju,r.keysIn=Gu,r.map=ps,r.mapKeys=Hu,r.mapValues=Vu,r.matches=Rl,r.matchesProperty=Ol,r.memoize=Is,r.merge=Nh,r.mergeWith=Fh,r.method=tf,r.methodOf=ef,r.mixin=xl,r.negate=Rs,r.nthArg=Fl,r.omit=Uh,r.omitBy=Ku,r.once=Os,r.orderBy=ms,r.over=rf,r.overArgs=lh,r.overEvery=nf,r.overSome=af,r.partial=ch,r.partialRight=dh,r.partition=rh,r.pick=Bh,r.pickBy=Wu,r.property=Ul,r.propertyOf=Bl,r.pull=Ud,r.pullAll=So,r.pullAllBy=wo,r.pullAllWith=Co,r.pullAt=Bd,r.range=of,r.rangeRight=sf,r.rearg=hh,r.reject=ys,r.remove=ko,r.rest=xs,r.reverse=Lo,r.sampleSize=bs,r.set=Yu,r.setWith=zu,r.shuffle=Es,r.slice=Do,r.sortBy=nh,r.sortedUniq=No,r.sortedUniqBy=Fo,r.split=ml,r.spread=Ms,r.tail=Uo,r.take=Bo,r.takeRight=jo,r.takeRightWhile=Go,r.takeWhile=Ho,r.tap=$o,r.throttle=Ns,r.thru=Jo,r.toArray=bu,r.toPairs=jh,r.toPairsIn=Gh,r.toPath=ql,r.toPlainObject=wu,r.transform=Xu,r.unary=Fs,r.union=jd,r.unionBy=Gd,r.unionWith=Hd,r.uniq=Vo,r.uniqBy=Ko,r.uniqWith=Wo,r.unset=Qu,r.unzip=qo,r.unzipWith=Yo,r.update=$u,r.updateWith=Ju,r.values=Zu,r.valuesIn=tl,r.without=Vd,r.words=wl,r.wrap=Us,r.xor=Kd,r.xorBy=Wd,r.xorWith=qd,r.zip=Yd,r.zipObject=zo,r.zipObjectDeep=Xo,r.zipWith=zd,r.entries=jh,r.entriesIn=Gh,r.extend=kh,r.extendWith=Lh,xl(r,r),r.add=uf,r.attempt=Qh,r.camelCase=Hh,r.capitalize=il,r.ceil=lf,r.clamp=el,r.clone=js,r.cloneDeep=Hs,r.cloneDeepWith=Vs,r.cloneWith=Gs,r.conformsTo=Ks,r.deburr=al,r.defaultTo=Dl,r.divide=cf,r.endsWith=ol,r.eq=Ws,r.escape=sl,r.escapeRegExp=ul,r.every=os,r.find=$d,r.findIndex=co,r.findKey=Du,r.findLast=Jd,r.findLastIndex=ho,r.findLastKey=Pu,r.floor=df,r.forEach=ds,r.forEachRight=hs,r.forIn=Iu,r.forInRight=Ru,r.forOwn=Ou,r.forOwnRight=xu,r.get=Fu,r.gt=fh,r.gte=ph,r.has=Uu,r.hasIn=Bu,r.head=vo,r.identity=Pl,r.includes=fs,r.indexOf=yo,r.inRange=rl,r.invoke=Mh,r.isArguments=mh,r.isArray=gh,r.isArrayBuffer=vh,r.isArrayLike=qs,r.isArrayLikeObject=Ys,r.isBoolean=zs,r.isBuffer=yh,r.isDate=_h,r.isElement=Xs,r.isEmpty=Qs,r.isEqual=$s,r.isEqualWith=Js,r.isError=Zs,r.isFinite=tu,r.isFunction=eu,r.isInteger=ru,r.isLength=nu,r.isMap=bh,r.isMatch=ou,r.isMatchWith=su,r.isNaN=uu,r.isNative=lu,r.isNil=du,r.isNull=cu,r.isNumber=hu,r.isObject=iu,r.isObjectLike=au,r.isPlainObject=fu,r.isRegExp=Eh,r.isSafeInteger=pu,r.isSet=Ah,r.isString=mu,r.isSymbol=gu,r.isTypedArray=Th,r.isUndefined=vu,r.isWeakMap=yu,r.isWeakSet=_u,r.join=bo,r.kebabCase=Vh,r.last=Eo,r.lastIndexOf=Ao,r.lowerCase=Kh,r.lowerFirst=Wh,r.lt=Sh,r.lte=wh,r.max=zl,r.maxBy=Xl,r.mean=Ql,r.meanBy=$l,r.min=Jl,r.minBy=Zl,r.stubArray=jl,r.stubFalse=Gl,r.stubObject=Hl,r.stubString=Vl,r.stubTrue=Kl,r.multiply=hf,r.nth=To,r.noConflict=Ml,r.noop=Nl,r.now=ih,r.pad=ll,r.padEnd=cl,r.padStart=dl,r.parseInt=hl,r.random=nl,r.reduce=gs,r.reduceRight=vs,r.repeat=fl,r.replace=pl,r.result=qu,r.round=ff,r.runInContext=t,r.sample=_s,r.size=As,r.snakeCase=qh,r.some=Ts,r.sortedIndex=Po,r.sortedIndexBy=Io,r.sortedIndexOf=Ro,r.sortedLastIndex=Oo,r.sortedLastIndexBy=xo,r.sortedLastIndexOf=Mo,r.startCase=Yh,r.startsWith=gl,r.subtract=pf,r.sum=tc,r.sumBy=ec,r.template=vl,r.times=Wl,r.toFinite=Eu,r.toInteger=Au,r.toLength=Tu,r.toLower=yl,r.toNumber=Su,r.toSafeInteger=Cu,r.toString=ku,r.toUpper=_l,r.trim=bl,r.trimEnd=El,r.trimStart=Al,r.truncate=Tl,r.unescape=Sl,r.uniqueId=Yl,r.upperCase=zh,r.upperFirst=Xh,r.each=ds,r.eachRight=hs,r.first=vo,xl(r,function(){var t={};return Jr(r,function(e,n){gc.call(r.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),r.VERSION=nt,s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){r[t].placeholder=r}),s(["drop","take"],function(t,e){y.prototype[t]=function(r){r=r===rt?1:Wc(Au(r),0);var n=this.__filtered__&&!e?new y(this):this.clone();return n.__filtered__?n.__takeCount__=qc(r,n.__takeCount__):n.__views__.push({size:qc(r,Nt),type:t+(n.__dir__<0?"Right":"")}),n},y.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==Dt||r==It;y.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:_a(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}}),s(["head","last"],function(t,e){var r="take"+(e?"Right":"");y.prototype[t]=function(){return this[r](1).value()[0]}}),s(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");y.prototype[t]=function(){return this.__filtered__?new y(this):this[r](1)}}),y.prototype.compact=function(){return this.filter(Pl)},y.prototype.find=function(t){return this.filter(t).head()},y.prototype.findLast=function(t){return this.reverse().find(t)},y.prototype.invokeMap=ri(function(t,e){return"function"==typeof t?new y(this):this.map(function(r){return wn(r,t,e)})}),y.prototype.reject=function(t){return this.filter(Rs(_a(t)))},y.prototype.slice=function(t,e){t=Au(t);var r=this;return r.__filtered__&&(t>0||e<0)?new y(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==rt&&(e=Au(e),r=e<0?r.dropRight(-e):r.take(e-t)),r)},y.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},y.prototype.toArray=function(){return this.take(Nt)},Jr(y.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),a=/^(?:head|last)$/.test(e),o=r[a?"take"+("last"==e?"Right":""):e],s=a||/^find/.test(e);o&&(r.prototype[e]=function(){var e=this.__wrapped__,u=a?[1]:arguments,l=e instanceof y,c=u[0],d=l||gh(e),h=function(t){var e=o.apply(r,p([t],u));return a&&f?e[0]:e};d&&n&&"function"==typeof c&&1!=c.length&&(l=d=!1);var f=this.__chain__,m=!!this.__actions__.length,g=s&&!f,v=l&&!m;if(!s&&d){e=v?e:new y(this);var _=t.apply(e,u);return _.__actions__.push({func:Jo,args:[h],thisArg:rt}),new i(_,f)}return g&&v?t.apply(this,u):(_=this.thru(h),g?a?_.value()[0]:_.value():_)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var e=dc[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);r.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(gh(r)?r:[],t)}return this[n](function(r){return e.apply(gh(r)?r:[],t)})}}),Jr(y.prototype,function(t,e){var n=r[e];if(n){var i=n.name+"";gc.call(id,i)||(id[i]=[]),id[i].push({name:e,func:n})}}),id[Qi(rt,gt).name]=[{name:"wrapper",func:rt}],y.prototype.clone=k,y.prototype.reverse=X,y.prototype.value=Z,r.prototype.at=Xd,r.prototype.chain=Zo,r.prototype.commit=ts,r.prototype.next=es,r.prototype.plant=ns,r.prototype.reverse=is,r.prototype.toJSON=r.prototype.valueOf=r.prototype.value=as,r.prototype.first=r.prototype.head,Rc&&(r.prototype[Rc]=rs),r},En=bn();nn._=En,n=function(){return En}.call(e,r,e,i),!(n!==rt&&(i.exports=n))}).call(this)}).call(e,function(){return this}(),r(28)(t))},function(t,e,r){var n,i;n=[r(4)],i=function(t){if(t("host-browser")){var e=navigator,r=e.userAgent,n=e.appVersion,i=parseFloat(n);if(t.add("ie11",r.indexOf("Trident")>=0),t.add("air",r.indexOf("AdobeAIR")>=0),t.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),t.add("khtml",n.indexOf("Konqueror")>=0?i:void 0),t.add("webkit",parseFloat(r.split("WebKit/")[1])||void 0),t.add("chrome",parseFloat(r.split("Chrome/")[1])||void 0),t.add("safari",n.indexOf("Safari")>=0&&!t("chrome")?parseFloat(n.split("Version/")[1]):void 0),t.add("mac",n.indexOf("Macintosh")>=0),t.add("quirks","BackCompat"==document.compatMode),r.match(/(iPhone|iPod|iPad)/)){var a=RegExp.$1.replace(/P/,"p"),o=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(o.replace(/_/,".").replace(/_/g,""));t.add(a,s),t.add("ios",s)}if(t.add("android",parseFloat(r.split("Android ")[1])||void 0),t.add("bb",(r.indexOf("BlackBerry")>=0||r.indexOf("BB10")>=0)&&parseFloat(r.split("Version/")[1])||void 0),t.add("svg","undefined"!=typeof SVGAngle),!t("webkit")){if(r.indexOf("Opera")>=0&&t.add("opera",i>=9.8?parseFloat(r.split("Version/")[1])||i:i),r.indexOf("Gecko")>=0&&!t("khtml")&&!t("webkit")&&t.add("mozilla",i),t("mozilla")&&t.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0),document.all&&!t("opera")){var u=parseFloat(n.split("MSIE ")[1])||void 0,l=document.documentMode;l&&5!=l&&Math.floor(u)!=l&&(u=l),t.add("ie",u)}t.add("wii","undefined"!=typeof opera&&opera.wiiremote)}}return t}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(54)],i=function(t,e){var r=t([],{constructor:function(){"withCredentials"in new XMLHttpRequest?this.corsSupport="xhr":"object"==typeof XDomainRequest||"function"==typeof XDomainRequest?this.corsSupport="xd":console.error("xhrProvider::constructor - CORS in not supported by the browser")},request:function(t,r,n,i,a){if("xd"==this.corsSupport){for(var o in n.query)t+=t.indexOf("?")!=-1?"&":"?",t+=o+"="+n.query[o];n.preventCache&&(t+=t.indexOf("?")!=-1?"&":"?",t+="_cb="+(new Date).getTime());var s=new XDomainRequest;s.open(n.method||"GET",t),s.timeout=0,s.onload=function(){if("json"==n.handleAs.toLowerCase())null!=i&&void 0!=i&&i(r,JSON.parse(s.responseText));else{var t;if(window.DOMParser){var e=new window.DOMParser;t=e.parseFromString(s.responseText,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(s.responseText);null!=i&&void 0!=i&&i(r,t.documentElement||t)}},s.onprogress=function(){},s.ontimeout=function(){},s.onerror=function(){null!=a&&void 0!=a&&a(r,"An unexpected error occurred")},setTimeout(function(){s.send()},250)}else"xhr"==this.corsSupport?e(t,n).then(function(t){null!=i&&void 0!=i&&i(r,t.documentElement||t)},function(t){null!=a&&void 0!=a&&a(r,"An unexpected error occurred: "+t);
}):console.error("xhrProvider::request - CORS in not supported by the browser")}});return r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[e,r(5),r(9),r(17),r(7),r(19)],i=function(t,e,r,n,i,a){function o(t,e){var r=e.parentNode;r&&r.insertBefore(t,e)}function s(t,e){var r=e.parentNode;r&&(r.lastChild==e?r.appendChild(t):r.insertBefore(t,e.nextSibling))}function u(t){if(t.canHaveChildren)try{return void(t.innerHTML="")}catch(t){}for(var e;e=t.lastChild;)l(e,t)}function l(t,e){t.firstChild&&u(t),e&&(r("ie")&&e.canHaveChildren&&"removeNode"in t?t.removeNode(!1):e.removeChild(t))}var c={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},d=/<\s*([\w\:]+)/,h={},f=0,p="__"+e._scopeName+"ToDomId";for(var m in c)if(c.hasOwnProperty(m)){var g=c[m];g.pre="option"==m?'<select multiple="multiple">':"<"+g.join("><")+">",g.post="</"+g.reverse().join("></")+">"}var v;r("ie")<=8&&(v=function(t){t.__dojo_html5_tested="yes";var e=y("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},t.body);1!==e.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(e){t.createElement(e)}),_(e)}),t.toDom=function(t,e){e=e||n.doc;var i=e[p];i||(e[p]=i=++f+"",h[i]=e.createElement("div")),r("ie")<=8&&!e.__dojo_html5_tested&&e.body&&v(e),t+="";var a,o,s,u,l=t.match(d),m=l?l[1].toLowerCase():"",g=h[i];if(l&&c[m])for(a=c[m],g.innerHTML=a.pre+t+a.post,o=a.length;o;--o)g=g.firstChild;else g.innerHTML=t;if(1==g.childNodes.length)return g.removeChild(g.firstChild);for(u=e.createDocumentFragment();s=g.firstChild;)u.appendChild(s);return u},t.place=function(e,r,n){if(r=i.byId(r),"string"==typeof e&&(e=/^\s*</.test(e)?t.toDom(e,r.ownerDocument):i.byId(e)),"number"==typeof n){var a=r.childNodes;!a.length||a.length<=n?r.appendChild(e):o(e,a[n<0?0:n])}else switch(n){case"before":o(e,r);break;case"after":s(e,r);break;case"replace":r.parentNode.replaceChild(e,r);break;case"only":t.empty(r),r.appendChild(e);break;case"first":if(r.firstChild){o(e,r.firstChild);break}default:r.appendChild(e)}return e};var y=t.create=function(e,r,o,s){var u=n.doc;return o&&(o=i.byId(o),u=o.ownerDocument),"string"==typeof e&&(e=u.createElement(e)),r&&a.set(e,r),o&&t.place(e,o,s),e};t.empty=function(t){u(i.byId(t))};var _=t.destroy=function(t){t=i.byId(t),t&&l(t,t.parentNode)}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(3)],i=function(t,e){var r=t([],{INTERNAL_REQUEST_API_FUNCTIONS:{"get-alternate-content":"_onApiRequestGetAlternateContent","get-vast-instream":"_onApiRequestGetVastInstream"},constructor:function(t,e){this.config=t,this.target=e},emit:function(t,r,n){n&&this.config.playerId!=n.id||e.emit(this.target,t,{data:r,bubbles:!0,cancelable:!0})}});return r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(33),r(3)],i=function(t,e){"use strict";function r(){}var n=t.after;return r.prototype={on:function(t,r){return e.parse(this,t,r,function(t,e){return n(t,"on"+e,r,!0)})},emit:function(t,r){var n=[this];return n.push.apply(n,arguments),e.emit.apply(e,n)}},r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5),r(32),r(25),r(24),r(4),r(2),r(90)],i=function(t,e,r,n,i,a,o){var s=function(){},u=Object.freeze||function(){},l=t.Deferred=function(t){function o(t){if(h)throw new Error("This deferred has already been resolved");d=t,h=!0,c()}function c(){for(var t;!t&&v;){var r=v;v=v.next,(t=r.progress==s)&&(h=!1);var n=m?r.error:r.resolved;if(i("config-useDeferredInstrumentation")&&m&&e.instrumentRejected&&e.instrumentRejected(d,!!n),n)try{var o=n(d);if(o&&"function"==typeof o.then){o.then(a.hitch(r.deferred,"resolve"),a.hitch(r.deferred,"reject"),a.hitch(r.deferred,"progress"));continue}var u=t&&void 0===o;t&&!u&&(m=o instanceof Error),r.deferred[u&&m?"reject":"resolve"](u?d:o)}catch(t){r.deferred.reject(t)}else m?r.deferred.reject(d):r.deferred.resolve(d)}}var d,h,f,p,m,g,v,y=this.promise=new r;this.isResolved=y.isResolved=function(){return 0==p},this.isRejected=y.isRejected=function(){return 1==p},this.isFulfilled=y.isFulfilled=function(){return p>=0},this.isCanceled=y.isCanceled=function(){return f},this.resolve=this.callback=function(t){this.fired=p=0,this.results=[t,null],o(t)},this.reject=this.errback=function(t){m=!0,this.fired=p=1,i("config-useDeferredInstrumentation")&&e.instrumentRejected&&e.instrumentRejected(t,!!v),o(t),this.results=[null,t]},this.progress=function(t){for(var e=v;e;){var r=e.progress;r&&r(t),e=e.next}},this.addCallbacks=function(t,e){return this.then(t,e,s),this},y.then=this.then=function(t,e,r){var n=r==s?this:new l(y.cancel),i={resolved:t,error:e,progress:r,deferred:n};return v?g=g.next=i:v=g=i,h&&c(),n.promise};var _=this;y.cancel=this.cancel=function(){if(!h){var e=t&&t(_);h||(e instanceof Error||(e=new n(e)),e.log=!1,_.reject(e))}f=!0},u(y)};return a.extend(l,{addCallback:function(e){return this.addCallbacks(a.hitch.apply(t,arguments))},addErrback:function(e){return this.addCallbacks(null,a.hitch.apply(t,arguments))},addBoth:function(e){var r=a.hitch.apply(t,arguments);return this.addCallbacks(r,r)},fired:-1}),l.when=t.when=o,l}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){function n(t){var e=i.keys(u);return void 0!=t&&e.indexOf(t)>-1}var i=r(8),a=r(21),o="prod01",s=a.getProtocol(),u={prod01:{liveStream:"playerservices.streamtheworld.com/api/livestream",nowPlayingHistory:s+"//np.tritondigital.com/public/nowplaying",playerWebAdmin:s+"//pwav4.tritondigital.com/jsonconfig.php",coreModuleDir:s+"//sdk.listenlive.co/core/swf/",npe:s+"//npe2.listenlive.co/services/",see:s+"//see-p-elb-01.tritondigital.net/widget/{tenantId}/see.js",UA:"UA-34627310-11"}},l=window.TdPlatform=function(t){var e=n(t)?t:o;this.endpoint=u[e]};t.exports=l},function(t,e,r){var n=r(8),i=r(110),a={parse:function(t){var e,r;return window.DOMParser?(e=new DOMParser,r=e.parseFromString(t,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async=!1,r.loadXML(t)),r},textContent:function(t){var e="";return t&&n.forEach(t.childNodes,function(t){switch(t.nodeType){case 3:case 2:case 4:e+=t.nodeValue}}),e},xmlToJson:function(t){var e={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!1,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!1};return i.parseXML(t,e)}};t.exports=a},function(t,e,r){var n,i;n=[r(5),r(2),r(9)],i=function(t,e,r){var n={global:t.global,doc:this.document||null,body:function(e){return e=e||t.doc,e.body||e.getElementsByTagName("body")[0]},setContext:function(e,r){t.global=n.global=e,t.doc=n.doc=r},withGlobal:function(e,r,i,a){var o=t.global;try{return t.global=n.global=e,n.withDoc.call(null,e.document,r,i,a)}finally{t.global=n.global=o}},withDoc:function(e,i,a,o){var s,u,l,c=n.doc,d=r("quirks"),h=r("ie");try{return t.doc=n.doc=e,t.isQuirks=r.add("quirks","BackCompat"==t.doc.compatMode,!0,!0),r("ie")&&(l=e.parentWindow)&&l.navigator&&(s=parseFloat(l.navigator.appVersion.split("MSIE ")[1])||void 0,u=e.documentMode,u&&5!=u&&Math.floor(s)!=u&&(s=u),t.isIE=r.add("ie",s,!0,!0)),a&&"string"==typeof i&&(i=a[i]),i.apply(a,o||[])}finally{t.doc=n.doc=c,t.isQuirks=r.add("quirks",d,!0,!0),t.isIE=r.add("ie",h,!0,!0)}}};return r("extend-dojo")&&e.mixin(t,n),n}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n=r(8),i=function(){if("object"==typeof i.instance)return i.instance;var t="en",e=["en","fr","pt","es"],a=document.getElementsByTagName("script");if(!n.isEmpty(a)){var o=a[a.length-1].getAttribute("tdsdk-lang");n.isEmpty(o)||(t=o)}this.setLocalization=function(e){t=e},this.getLocalization=function(){return n.indexOf(e,t)>-1?r(111)("./"+t+".json"):r(57)},i.instance=this};t.exports=new i},function(t,e,r){var n,i;n=[e,r(9),r(2),r(7),r(23),r(81)],i=function(t,e,r,n,i,a){function o(t,e){var r=t.getAttributeNode&&t.getAttributeNode(e);return r&&r.specified}var s={innerHTML:1,className:1,htmlFor:e("ie"),value:1},u={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};t.has=function(t,e){var r=e.toLowerCase();return s[a.names[r]||e]||o(n.byId(t),u[r]||e)},t.get=function(t,e){t=n.byId(t);var i=e.toLowerCase(),l=a.names[i]||e,c=s[l],d=t[l];if(c&&"undefined"!=typeof d)return d;if("href"!=l&&("boolean"==typeof d||r.isFunction(d)))return d;var h=u[i]||e;return o(t,h)?t.getAttribute(h):null},t.set=function(e,o,l){if(e=n.byId(e),2==arguments.length){for(var c in o)t.set(e,c,o[c]);return e}var d=o.toLowerCase(),h=a.names[d]||o,f=s[h];return"style"==h&&"string"!=typeof l?(i.set(e,l),e):f||"boolean"==typeof l||r.isFunction(l)?a.set(e,o,l):(e.setAttribute(u[d]||o,l),e)},t.remove=function(t,e){n.byId(t).removeAttribute(u[e.toLowerCase()]||e)},t.getNodeProp=function(t,e){t=n.byId(t);var r=e.toLowerCase(),i=a.names[r]||e;if(i in t&&"href"!=i)return t[i];var s=u[r]||e;return o(t,s)?t.getAttribute(s):null}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n;(function(t,i){(function(){"use strict";function a(t){return t=String(t),t.charAt(0).toUpperCase()+t.slice(1)}function o(t,e,r){var n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&r&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(n=n[/[\d.]+$/.exec(t)])&&(t="Windows "+n),t=String(t),e&&r&&(t=t.replace(RegExp(e,"i"),r)),t=u(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function s(t,e){var r=-1,n=t?t.length:0;if("number"==typeof n&&n>-1&&n<=E)for(;++r<n;)e(t[r],r,t);else l(t,e)}function u(t){return t=p(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:a(t)}function l(t,e){for(var r in t)S.call(t,r)&&e(t[r],r,t)}function c(t){return null==t?a(t):w.call(t).slice(8,-1)}function d(t,e){var r=null!=t?typeof t[e]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!t[e])}function h(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function f(t,e){var r=null;return s(t,function(n,i){r=e(r,n,i,t)}),r}function p(t){return String(t).replace(/^ +| +$/g,"")}function m(t){function e(e){return f(e,function(e,r){return e||RegExp("\\b"+(r.pattern||h(r))+"\\b","i").exec(t)&&(r.label||r)})}function r(e){return f(e,function(e,r,n){return e||(r[q]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec(q)]||RegExp("\\b"+h(n)+"(?:\\b|\\w*\\d)","i").exec(t))&&n})}function n(e){return f(e,function(e,r){return e||RegExp("\\b"+(r.pattern||h(r))+"\\b","i").exec(t)&&(r.label||r)})}function i(e){return f(e,function(e,r){var n=r.pattern||h(r);return!e&&(e=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=o(e,n,r.label||r)),e})}function a(e){return f(e,function(e,r){var n=r.pattern||h(r);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(r.label&&!RegExp(n,"i").test(r.label)?r.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),r=r.label||r,e=u(e[0].replace(RegExp(n,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),e})}function s(e){return f(e,function(e,r){return e||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})}function g(){return this.description||""}var y=v,_=t&&"object"==typeof t&&"String"!=c(t);_&&(y=t,t=null);var b=y.navigator||{},E=b.userAgent||"";t||(t=E);var T,S,C=_?!!b.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(w.toString()),k="Object",L=_?k:"ScriptBridgingProxyObject",D=_?k:"Environment",P=_&&y.java?"JavaPackage":c(y.java),I=_?k:"RuntimeObject",R=/\bJava/.test(P)&&y.java,O=R&&c(y.environment)==D,x=R?"a":"α",M=R?"b":"β",N=y.document||{},F=y.operamini||y.opera,U=A.test(U=_&&F?F["[[Class]]"]:c(F))?U:F=null,B=t,j=[],G=null,H=t==E,V=H&&F&&"function"==typeof F.version&&F.version(),K=e([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),W=n(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),q=a([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Y=r({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),z=i(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(K&&(K=[K]),Y&&!q&&(q=a([Y])),(T=/\bGoogle TV\b/.exec(q))&&(q=T[0]),/\bSimulator\b/i.test(t)&&(q=(q?q+" ":"")+"Simulator"),"Opera Mini"==W&&/\bOPiOS\b/.test(t)&&j.push("running in Turbo/Uncompressed mode"),"IE"==W&&/\blike iPhone OS\b/.test(t)?(T=m(t.replace(/like iPhone OS/,"")),Y=T.manufacturer,q=T.product):/^iP/.test(q)?(W||(W="Safari"),z="iOS"+((T=/ OS ([\d_]+)/i.exec(t))?" "+T[1].replace(/_/g,"."):"")):"Konqueror"!=W||/buntu/i.test(z)?Y&&"Google"!=Y&&(/Chrome/.test(W)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(q))||/\bAndroid\b/.test(z)&&/^Chrome/.test(W)&&/\bVersion\//i.test(t)?(W="Android Browser",z=/\bAndroid\b/.test(z)?z:"Android"):"Silk"==W?(/\bMobi/i.test(t)||(z="Android",j.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&j.unshift("accelerated")):"PaleMoon"==W&&(T=/\bFirefox\/([\d.]+)\b/.exec(t))?j.push("identifying as Firefox "+T[1]):"Firefox"==W&&(T=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(z||(z="Firefox OS"),q||(q=T[1])):!W||(T=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(W))?(W&&!q&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(T+"/")+8))&&(W=null),(T=q||Y||z)&&(q||Y||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(z))&&(W=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(z)?z:T)+" Browser")):"Electron"==W&&(T=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&j.push("Chromium "+T):z="Kubuntu",V||(V=s(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",h(W),"(?:Firefox|Minefield|NetFront)"])),(T="iCab"==K&&parseFloat(V)>3&&"WebKit"||/\bOpera\b/.test(W)&&(/\bOPR\b/.test(t)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(K)&&"WebKit"||!K&&/\bMSIE\b/i.test(t)&&("Mac OS"==z?"Tasman":"Trident")||"WebKit"==K&&/\bPlayStation\b(?! Vita\b)/i.test(W)&&"NetFront")&&(K=[T]),"IE"==W&&(T=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(W+=" Mobile",z="Windows Phone "+(/\+$/.test(T)?T:T+".x"),j.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(W="IE Mobile",z="Windows Phone 8.x",j.unshift("desktop mode"),V||(V=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=W&&"Trident"==K&&(T=/\brv:([\d.]+)/.exec(t))&&(W&&j.push("identifying as "+W+(V?" "+V:"")),W="IE",V=T[1]),H){if(d(y,"global"))if(R&&(T=R.lang.System,B=T.getProperty("os.arch"),z=z||T.getProperty("os.name")+" "+T.getProperty("os.version")),O){try{V=y.require("ringo/engine").version.join("."),W="RingoJS"}catch(t){(T=y.system)&&T.global.system==y.system&&(W="Narwhal",z||(z=T[0].os||null))}W||(W="Rhino")}else"object"==typeof y.process&&!y.process.browser&&(T=y.process)&&("object"==typeof T.versions&&("string"==typeof T.versions.electron?(j.push("Node "+T.versions.node),W="Electron",V=T.versions.electron):"string"==typeof T.versions.nw&&(j.push("Chromium "+V,"Node "+T.versions.node),W="NW.js",V=T.versions.nw)),W||(W="Node.js",B=T.arch,z=T.platform,V=/[\d.]+/.exec(T.version),V=V?V[0]:null));else c(T=y.runtime)==L?(W="Adobe AIR",z=T.flash.system.Capabilities.os):c(T=y.phantom)==I?(W="PhantomJS",V=(T=T.version||null)&&T.major+"."+T.minor+"."+T.patch):"number"==typeof N.documentMode&&(T=/\bTrident\/(\d+)/i.exec(t))?(V=[V,N.documentMode],(T=+T[1]+4)!=V[1]&&(j.push("IE "+V[1]+" mode"),K&&(K[1]=""),V[1]=T),V="IE"==W?String(V[1].toFixed(1)):V[0]):"number"==typeof N.documentMode&&/^(?:Chrome|Firefox)\b/.test(W)&&(j.push("masking as "+W+" "+V),W="IE",V="11.0",K=["Trident"],z="Windows");z=z&&u(z)}if(V&&(T=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(V)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(H&&b.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(G=/b/i.test(T)?"beta":"alpha",V=V.replace(RegExp(T+"\\+?$"),"")+("beta"==G?M:x)+(/\d+\+?/.exec(T)||"")),"Fennec"==W||"Firefox"==W&&/\b(?:Android|Firefox OS)\b/.test(z))W="Firefox Mobile";else if("Maxthon"==W&&V)V=V.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(q))"Xbox 360"==q&&(z=null),"Xbox 360"==q&&/\bIEMobile\b/.test(t)&&j.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(W)&&(!W||q||/Browser|Mobi/.test(W))||"Windows CE"!=z&&!/Mobi/i.test(t))if("IE"==W&&H)try{null===y.external&&j.unshift("platform preview")}catch(t){j.unshift("embedded")}else(/\bBlackBerry\b/.test(q)||/\bBB10\b/.test(t))&&(T=(RegExp(q.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||V)?(T=[T,/BB10/.test(t)],z=(T[1]?(q=null,Y="BlackBerry"):"Device Software")+" "+T[0],V=null):this!=l&&"Wii"!=q&&(H&&F||/Opera/.test(W)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==W&&/\bOS X (?:\d+\.){2,}/.test(z)||"IE"==W&&(z&&!/^Win/.test(z)&&V>5.5||/\bWindows XP\b/.test(z)&&V>8||8==V&&!/\bTrident\b/.test(t)))&&!A.test(T=m.call(l,t.replace(A,"")+";"))&&T.name&&(T="ing as "+T.name+((T=T.version)?" "+T:""),A.test(W)?(/\bIE\b/.test(T)&&"Mac OS"==z&&(z=null),T="identify"+T):(T="mask"+T,W=U?u(U.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(T)&&(z=null),H||(V=null)),K=["Presto"],j.push(T));else W+=" Mobile";(T=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(T=[parseFloat(T.replace(/\.(\d)$/,".0$1")),T],"Safari"==W&&"+"==T[1].slice(-1)?(W="WebKit Nightly",G="alpha",V=T[1].slice(0,-1)):V!=T[1]&&V!=(T[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(V=null),T[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==T[0]&&537.36==T[2]&&parseFloat(T[1])>=28&&"WebKit"==K&&(K=["Blink"]),H&&(C||T[1])?(K&&(K[1]="like Chrome"),T=T[1]||(T=T[0],T<530?1:T<532?2:T<532.05?3:T<533?4:T<534.03?5:T<534.07?6:T<534.1?7:T<534.13?8:T<534.16?9:T<534.24?10:T<534.3?11:T<535.01?12:T<535.02?"13+":T<535.07?15:T<535.11?16:T<535.19?17:T<536.05?18:T<536.1?19:T<537.01?20:T<537.11?"21+":T<537.13?23:T<537.18?24:T<537.24?25:T<537.36?26:"Blink"!=K?"27":"28")):(K&&(K[1]="like Safari"),T=T[0],T=T<400?1:T<500?2:T<526?3:T<533?4:T<534?"4+":T<535?5:T<537?6:T<538?7:T<601?8:"8"),K&&(K[1]+=" "+(T+="number"==typeof T?".x":/[.+]/.test(T)?"":"+")),"Safari"==W&&(!V||parseInt(V)>45)&&(V=T)),"Opera"==W&&(T=/\bzbov|zvav$/.exec(z))?(W+=" ",j.unshift("desktop mode"),"zvav"==T?(W+="Mini",V=null):W+="Mobile",z=z.replace(RegExp(" *"+T+"$"),"")):"Safari"==W&&/\bChrome\b/.exec(K&&K[1])&&(j.unshift("desktop mode"),W="Chrome Mobile",V=null,/\bOS X\b/.test(z)?(Y="Apple",z="iOS 4.3+"):z=null),V&&0==V.indexOf(T=/[\d.]+$/.exec(z))&&t.indexOf("/"+T+"-")>-1&&(z=p(z.replace(T,""))),K&&!/\b(?:Avant|Nook)\b/.test(W)&&(/Browser|Lunascape|Maxthon/.test(W)||"Safari"!=W&&/^iOS/.test(z)&&/\bSafari\b/.test(K[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(W)&&K[1])&&(T=K[K.length-1])&&j.push(T),j.length&&(j=["("+j.join("; ")+")"]),Y&&q&&q.indexOf(Y)<0&&j.push("on "+Y),q&&j.push((/^on /.test(j[j.length-1])?"":"on ")+q),z&&(T=/ ([\d.+]+)$/.exec(z),S=T&&"/"==z.charAt(z.length-T[0].length-1),z={architecture:32,family:T&&!S?z.replace(T[0],""):z,version:T?T[1]:null,toString:function(){var t=this.version;return this.family+(t&&!S?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(T=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(B))&&!/\bi686\b/i.test(B)?(z&&(z.architecture=64,z.family=z.family.replace(RegExp(" *"+T),"")),W&&(/\bWOW64\b/i.test(t)||H&&/\w(?:86|32)$/.test(b.cpuClass||b.platform)&&!/\bWin64; x64\b/i.test(t))&&j.unshift("32-bit")):z&&/^OS X/.test(z.family)&&"Chrome"==W&&parseFloat(V)>=39&&(z.architecture=64),t||(t=null);var X={};return X.description=t,X.layout=K&&K[0],X.manufacturer=Y,X.name=W,X.prerelease=G,X.product=q,X.ua=t,X.version=W&&V,X.os=z||{architecture:null,family:null,version:null,toString:function(){return"null"}},X.parse=m,X.toString=g,X.version&&j.unshift(V),X.name&&j.unshift(W),z&&W&&(z!=String(z).split(" ")[0]||z!=W.split(" ")[0]&&!q)&&j.push(q?"("+z+")":"on "+z),j.length&&(X.description=j.join(" ")),X}var g={function:!0,object:!0},v=g[typeof window]&&window||this,y=g[typeof e]&&e,_=g[typeof t]&&t&&!t.nodeType&&t,b=y&&_&&"object"==typeof i&&i;!b||b.global!==b&&b.window!==b&&b.self!==b||(v=b);var E=Math.pow(2,53)-1,A=/\bOpera/,T=Object.prototype,S=T.hasOwnProperty,w=T.toString,C=m();v.platform=C,n=function(){return C}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}).call(this)}).call(e,r(28)(t),function(){return this}())},function(t,e){var r="https:";t.exports={currentProtocolIsHttps:function(){return window.location.protocol===r},getProtocol:function(){return window.location.protocol}}},function(t,e,r){function n(){C.is(w.STOPPED)||C.is(w.PAUSED)||this.emit("html5-playback-status",{type:A.DATA_LOADING,mediaNode:this.audioNode})}function i(){C.is(w.STOPPED)||C.is(w.PAUSED)||this.emit("html5-playback-status",{type:A.LOAD_START,mediaNode:this.audioNode})}function a(){var t=this;C.is(w.STOPPED)||C.is(w.PAUSED)||null!==this.url&&("IE"===S.name&&"11.0"===S.version&&parseInt(S.os.version)>=7?this.audioNode.play():(t.emit("html5-playback-status",{type:A.CAN_PLAY,mediaNode:t.audioNode}),this.audioNode.play().then(function(){}).catch(function(e){t.handleHTMLPlayError(e)})))}function o(){var t=this;C.is(w.STOPPED)||C.is(w.PAUSED)||null!==this.url&&("IE"===S.name&&"11.0"===S.version&&parseInt(S.os.version)>=7?this.audioNode.play():this.audioNode.play().then(function(){t.emit("html5-playback-status",{type:A.CAN_PLAY_THROUGH,mediaNode:t.audioNode})}).catch(function(e){t.handleHTMLPlayError(e)}))}function s(){C.is(w.STOPPED)||C.is(w.PAUSED)||this.emit("html5-playback-status",{type:A.WAITING,mediaNode:this.audioNode})}function u(){C.is(w.STOPPED)||C.is(w.PAUSED)||this.emit("html5-playback-status",{type:A.EMPTIED,mediaNode:this.audioNode})}function l(){C.is(w.STOPPED)||C.is(w.PAUSED)||this.emit("html5-playback-status",{type:A.ABORT,mediaNode:this.audioNode})}function c(){C.is(w.STOPPED)||this.emit("html5-playback-status",{type:A.ENDED,mediaNode:this.audioNode})}function d(){null!==this.url&&this.emit("html5-playback-status",{type:A.PLAY,mediaNode:this.audioNode})}function h(){C.is(w.STOPPED)?this.emit("html5-playback-status",{type:A.STOP,mediaNode:this.audioNode}):this.emit("html5-playback-status",{type:A.PAUSE,mediaNode:this.audioNode})}function f(){var t=this.audioNode;C.is(w.STOPPED)?this.emit("html5-playback-status",{type:A.STOP,mediaNode:t}):3!=t.readyState?(this.resetAudioNode(),this.emit("html5-playback-status",{type:A.ERROR,mediaNode:t})):this.emit("html5-playback-status",{type:A.STOP,mediaNode:t})}function p(){var t=this.audioNode;this.emit("html5-playback-status",{type:A.ERROR,mediaNode:t})}function m(){C.is(w.STOPPED)||C.is(w.PAUSED)||(this.audioNode.currentTime.toFixed(1)==this.audioNode.duration.toFixed(1)?this.emit("html5-playback-status",{type:A.ENDED,mediaNode:this.audioNode}):this.isLive||this.emit("html5-playback-status",{type:A.TIME_UPDATE,mediaNode:this.audioNode}))}function g(){this.boundOnOffline=p.bind(this),this.audioNode.addEventListener("loadeddata",n.bind(this)),this.audioNode.addEventListener("loadstart",i.bind(this)),this.audioNode.addEventListener("canplay",a.bind(this)),this.audioNode.addEventListener("canplaythrough",o.bind(this)),this.audioNode.addEventListener("waiting",s.bind(this)),this.audioNode.addEventListener("emptied",u.bind(this)),this.audioNode.addEventListener("abort",l.bind(this)),this.audioNode.addEventListener("ended",c.bind(this)),this.audioNode.addEventListener("play",d.bind(this)),this.audioNode.addEventListener("pause",h.bind(this)),this.audioNode.addEventListener("timeupdate",m.bind(this)),this.audioNode.addEventListener("error",f.bind(this)),window.addEventListener("offline",this.boundOnOffline)}function v(){this.audioNode.removeEventListener("loadeddata",n),this.audioNode.removeEventListener("loadstart",i),this.audioNode.removeEventListener("canplay",a),this.audioNode.removeEventListener("canplaythrough",o),this.audioNode.removeEventListener("waiting",s),this.audioNode.removeEventListener("emptied",u),this.audioNode.removeEventListener("abort",l),this.audioNode.removeEventListener("ended",c),this.audioNode.removeEventListener("play",d),this.audioNode.removeEventListener("pause",h),this.audioNode.removeEventListener("timeupdate",m),this.audioNode.removeEventListener("error",f),window.removeEventListener("offline",this.boundOnOffline)}function y(){return this.audioNode||(this.audioNode=new Audio,this.audioNode.autoplay=!1,this.audioNode.preload="none",g.call(this)),this.audioNode}var _=r(8),b=r(91).EventEmitter,E=r(36),A=r(39),T=r(92),S=r(20),w={IDLE:"IDLE",PLAYING:"PLAYING",STOPPED:"STOPPED",PAUSED:"PAUSED"},C=T.create({initial:w.STOPPED,error:function(t,e){console.warn("Event",t,"inappropriate in current state",e)},events:[{name:"play",from:w.STOPPED,to:w.PLAYING},{name:"play",from:w.PLAYING,to:w.PLAYING},{name:"stop",from:w.PLAYING,to:w.STOPPED},{name:"stop",from:w.PAUSED,to:w.STOPPED},{name:"pause",from:w.PLAYING,to:w.PAUSED},{name:"resume",from:w.PAUSED,to:w.PLAYING}]});t.exports=_.assign(new b,{audioNode:null,init:function(){this.audioNode=y.call(this),this.url=null,this.audioNode.src=""},playAudio:function(t,e,r){this.audioNode&&this.stop(),this.audioNode=y.call(this),this.url=t||this.url,this.isLive=r||this.isLive,this.useHlsLibrary=e||this.useHlsLibrary,this.useHlsLibrary?(this.hls=new E,this.hls.loadSource(t),this.hls.attachMedia(this.audioNode)):(this.audioNode.src=t,this.audioNode.load()),C.play()},stop:function(){var t=this;C.is(w.STOPPED)||(this.audioNode=y.call(this),C.stop(),this.audioNode.pause(),"Safari"!==S.name||this.audioNode.src.indexOf("m3u8")>-1||this.useHlsLibrary?setTimeout(function(){t.audioNode.src="",t.url=null,t.resetAudioNode()},300):setTimeout(function(){t.url=null,t.resetAudioNode()},300),"iOS"===S.os.family&&"Chrome Mobile"===S.name&&window.stop(),this.useHlsLibrary&&(this.hls.detachMedia(),this.hls.stopLoad(),this.hls.destroy()))},pause:function(){C.is(w.PAUSED)||(this.audioNode=y.call(this),this.audioNode.pause(),C.pause())},resume:function(){var t=this;C.is(w.PAUSED)&&(this.audioNode=y.call(this),"IE"===S.name&&"11.0"===S.version&&parseInt(S.os.version)>=7?this.audioNode.play():this.audioNode.play().catch(function(e){t.handleHTMLPlayError(e)}),C.resume())},mute:function(){C.is(w.PLAYING)&&(this.audioNode=y.call(this),this.stop())},unMute:function(){C.is(w.PLAYING)||(this.audioNode=y.call(this))},setVolume:function(t){this.audioNode=y.call(this),this.audioNode.volume=t},isStopped:function(){return C.is(w.STOPPED)},resetAudioNode:function(){v.call(this),this.audioNode=null,C.can("stop")&&C.stop()},destroyAudioElement:function(){this.emit("destroyAudioElement")},handleHTMLPlayError:function(t){var e=this;"NotSupportedError"!==t.name&&"NotAllowedError"===t.name&&this.emit("html5-playback-status",{type:A.PLAY_NOT_ALLOWED,mediaNode:e.audioNode})}})},function(t,e,r){var n,i;n=[r(9),r(7)],i=function(t,e){function r(e,r,n){if(r=r.toLowerCase(),t("ie")){if("auto"==n){if("height"==r)return e.offsetHeight;if("width"==r)return e.offsetWidth}if("fontweight"==r)switch(n){case 700:return"bold";case 400:default:return"normal"}}return r in c||(c[r]=d.test(r)),c[r]?a(e,n):n}var n,i={};n=t("webkit")?function(t){var e;if(1==t.nodeType){var r=t.ownerDocument.defaultView;e=r.getComputedStyle(t,null),!e&&t.style&&(t.style.display="",e=r.getComputedStyle(t,null))}return e||{}}:t("ie")&&(t("ie")<9||t("quirks"))?function(t){return 1==t.nodeType&&t.currentStyle?t.currentStyle:{}}:function(t){return 1==t.nodeType?t.ownerDocument.defaultView.getComputedStyle(t,null):{}},i.getComputedStyle=n;var a;a=t("ie")?function(t,e){if(!e)return 0;if("medium"==e)return 4;if(e.slice&&"px"==e.slice(-2))return parseFloat(e);var r=t.style,n=t.runtimeStyle,i=t.currentStyle,a=r.left,o=n.left;n.left=i.left;try{r.left=e,e=r.pixelLeft}catch(t){e=0}return r.left=a,n.left=o,e}:function(t,e){return parseFloat(e)||0},i.toPixelValue=a;var o="DXImageTransform.Microsoft.Alpha",s=function(t,e){try{return t.filters.item(o)}catch(t){return e?{}:null}},u=t("ie")<9||t("ie")<10&&t("quirks")?function(t){try{return s(t).Opacity/100}catch(t){return 1}}:function(t){return n(t).opacity},l=t("ie")<9||t("ie")<10&&t("quirks")?function(t,e){""===e&&(e=1);var r=100*e,n=1===e;if(n?(t.style.zoom="",s(t)&&(t.style.filter=t.style.filter.replace(new RegExp("\\s*progid:"+o+"\\([^\\)]+?\\)","i"),""))):(t.style.zoom=1,s(t)?s(t,1).Opacity=r:t.style.filter+=" progid:"+o+"(Opacity="+r+")",s(t,1).Enabled=!0),"tr"==t.tagName.toLowerCase())for(var i=t.firstChild;i;i=i.nextSibling)"td"==i.tagName.toLowerCase()&&l(i,e);return e}:function(t,e){return t.style.opacity=e},c={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,h={cssFloat:1,styleFloat:1,float:1};return i.get=function(t,n){var a=e.byId(t),o=arguments.length,s="opacity"==n;if(2==o&&s)return u(a);n=h[n]?"cssFloat"in a.style?"cssFloat":"styleFloat":n;var l=i.getComputedStyle(a);return 1==o?l:r(a,n,l[n]||a.style[n])},i.set=function(t,r,n){var a=e.byId(t),o=arguments.length,s="opacity"==r;if(r=h[r]?"cssFloat"in a.style?"cssFloat":"styleFloat":r,3==o)return s?l(a,n):a.style[r]=n;for(var u in r)i.set(t,u,r[u]);return i.getComputedStyle(a)},i}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(35)],i=function(t){return t("CancelError",null,null,{dojoType:"cancel"})}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(2)],i=function(t){"use strict";function e(){throw new TypeError("abstract")}return t.extend(function(){},{then:function(t,r,n){e()},cancel:function(t,r){
e()},isResolved:function(){e()},isRejected:function(){e()},isFulfilled:function(){e()},isCanceled:function(){e()},always:function(t){return this.then(t,t)},otherwise:function(t){return this.then(null,t)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(13)],i=function(t){var e=new t;return{publish:function(t,r){return e.emit.apply(e,arguments)},subscribe:function(t,r){return e.on.apply(e,arguments)}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){function r(t,e){if(t instanceof Array){var i=t.map(function(t){return r(t)});e&&e.apply(this,i)}else{if(n[t])return n[t];console.error('Dynamic dojo require is not supported. Trying to require "'+t+'"')}}var n={};r.async=!0,r.toUrl=function(t){return t},r.register=function(t,e){return n[t]=e,e},r.unregister=function(t){delete n[t]},t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r){var n,i;n=[],i=function(){var t={VAST_AD:"vastAd",MEDIA_AD:"mediaAd",ANDO_RUN_SPOT:"andoRunSpot",TRITON_AD_PLATFORM:"tap"};return t}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n=r(8);t.exports={toSafeArray:function(t){return t?n.isArray(t)?t:[t]:[]}}},function(t,e,r){var n,i,a=r(15);n=[r(1),r(2),r(6),r(3),r(13)],i=function(t,e,r,n,i){var o=t([i],{constructor:function(t,e){this.data=t,this.platformId=e,this.url=t.staticURL,this.id=t.id,this.listeners=[],this.platform=new a(e),this.alreadyFetched=!1},getStaticUrl:function(){return this.data.staticURL},getDynamicUrl:function(){return this.platform.endpoint.npe},getDynamicArtistUrl:function(t){return this.getDynamicUrl()+"artist/"+t},getDynamicAlbumUrl:function(t){return this.getDynamicUrl()+"album/"+t},getDynamicTrackUrl:function(t){return this.getDynamicUrl()+"track/"+t},getDynamicArtistPictureUrl:function(t,e){return this.getDynamicUrl()+"artist/"+t+"/picture/"+e},getDynamicAlbumPictureUrl:function(t,e){return this.getDynamicUrl()+"album/"+t+"/picture/"+e},notify:function(t,e){this.emit(t,e)},getRequestArgs:function(){return{handleAs:"json",preventCache:!1,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}},addEventListener:function(t,i){var a=-1;r.forEach(this.listeners,function(e,r){e.eventName==t&&e.callback==i&&(a=r)},this),a==-1&&this.listeners.push({eventName:t,callback:i,listener:n(this,t,e.hitch(this,i))})},removeEventListener:function(t,e){var n=-1;r.forEach(this.listeners,function(r,i){r.eventName==t&&r.callback==e&&(n=i)},this),n>-1&&(this.listeners[n].listener.remove(),this.listeners.splice(n,1))}});return o}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(4),r(2),r(24),r(25),r(56)],i=function(t,e,r,n,i){"use strict";var a=0,o=1,s=2,u="This deferred has already been fulfilled.",l=Object.freeze||function(){},c=function(e,r,n,i,a){t("config-deferredInstrumentation")&&r===s&&p.instrumentRejected&&0===e.length&&p.instrumentRejected(n,!1,i,a);for(var o=0;o<e.length;o++)d(e[o],r,n,i)},d=function(e,r,n,i){var u=e[r],l=e.deferred;if(u)try{var c=u(n);if(r===a)"undefined"!=typeof c&&f(l,r,c);else{if(c&&"function"==typeof c.then)return e.cancel=c.cancel,void c.then(h(l,o),h(l,s),h(l,a));f(l,o,c)}}catch(t){f(l,s,t)}else f(l,r,n);t("config-deferredInstrumentation")&&r===s&&p.instrumentRejected&&p.instrumentRejected(n,!!u,i,l.promise)},h=function(t,e){return function(r){f(t,e,r)}},f=function(t,e,r){if(!t.isCanceled())switch(e){case a:t.progress(r);break;case o:t.resolve(r);break;case s:t.reject(r)}},p=function(e){var i,h,f,m=this.promise=new n,g=this,v=!1,y=[];t("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(g,p),Error.captureStackTrace(m,p)),this.isResolved=m.isResolved=function(){return i===o},this.isRejected=m.isRejected=function(){return i===s},this.isFulfilled=m.isFulfilled=function(){return!!i},this.isCanceled=m.isCanceled=function(){return v},this.progress=function(t,e){if(i){if(e===!0)throw new Error(u);return m}return c(y,a,t,null,g),m},this.resolve=function(t,e){if(i){if(e===!0)throw new Error(u);return m}return c(y,i=o,h=t,null,g),y=null,m};var _=this.reject=function(e,r){if(i){if(r===!0)throw new Error(u);return m}return t("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(f={},_),c(y,i=s,h=e,f,g),y=null,m};this.then=m.then=function(t,e,r){var n=[r,t,e];return n.cancel=m.cancel,n.deferred=new p(function(t){return n.cancel&&n.cancel(t)}),i&&!y?d(n,i,h,f):y.push(n),n.deferred.promise},this.cancel=m.cancel=function(t,n){if(i){if(n===!0)throw new Error(u)}else{if(e){var a=e(t);t="undefined"==typeof a?t:a}if(v=!0,!i)return"undefined"==typeof t&&(t=new r),_(t),t;if(i===s&&h===t)return t}},l(m)};return p.prototype.toString=function(){return"[object Deferred]"},i&&i(p),p}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";function t(t,e,r,i){var a,o=t[e],s="around"==e;if(s){var u=r(function(){return o.advice(this,arguments)});a={remove:function(){u&&(u=t=r=null)},advice:function(t,e){return u?u.apply(t,e):o.advice(t,e)}}}else a={remove:function(){if(a.advice){var n=a.previous,i=a.next;i||n?(n?n.next=i:t[e]=i,i&&(i.previous=n)):delete t[e],t=r=a.advice=null}},id:n++,advice:r,receiveArguments:i};if(o&&!s)if("after"==e){for(;o.next&&(o=o.next););o.next=a,a.previous=o}else"before"==e&&(t[e]=a,a.next=o,o.previous=a);else t[e]=a;return a}function e(e){return function(i,a,o,s){var u,l=i[a];l&&l.target==i||(i[a]=u=function(){for(var t=n,e=arguments,i=u.before;i;)e=i.advice.apply(this,e)||e,i=i.next;if(u.around)var a=u.around.advice(this,e);for(var o=u.after;o&&o.id<t;){if(o.receiveArguments){var s=o.advice.apply(this,e);a=s===r?a:s}else a=o.advice.call(this,a,e);o=o.next}return a},l&&(u.around={advice:function(t,e){return l.apply(t,e)}}),u.target=i);var c=t(u||l,e,o,s);return o=null,c}}var r,n=0,i=e("after"),a=e("before"),o=e("around");return{before:a,around:o,after:i}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(35)],i=function(t){return t("RequestError",function(t,e){this.response=e})}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(2)],i=function(t){return function(e,r,n,i){n=n||Error;var a=function(t){if(n===Error){Error.captureStackTrace&&Error.captureStackTrace(this,a);var e,i=Error.call(this,t);for(e in i)i.hasOwnProperty(e)&&(this[e]=i[e]);this.message=t,this.stack=i.stack}else n.apply(this,arguments);r&&r.apply(this,arguments)};return a.prototype=t.delegate(n.prototype,i),a.prototype.name=e,a.prototype.constructor=a,a}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){"undefined"!=typeof window&&function(e,r){t.exports=r()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(e){return t[e]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":/*!*********************************************!*\
	  !*** ./node_modules/eventemitter3/index.js ***!
	  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new i(r,n||t,a),s=l?l+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function o(t,e){0===--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,l="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(l=!1)),s.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)u.call(t,e)&&r.push(l?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},s.prototype.listeners=function(t){var e=l?l+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,a=new Array(i);n<i;n++)a[n]=r[n].fn;return a},s.prototype.listenerCount=function(t){var e=l?l+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,n,i,a){var o=l?l+t:t;if(!this._events[o])return!1;var s,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,n),!0;case 5:return c.fn.call(c.context,e,r,n,i),!0;case 6:return c.fn.call(c.context,e,r,n,i,a),!0}for(u=1,s=new Array(d-1);u<d;u++)s[u-1]=arguments[u];c.fn.apply(c.context,s)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,n);break;default:if(!s)for(h=1,s=new Array(d-1);h<d;h++)s[h-1]=arguments[h];c[u].fn.apply(c[u].context,s)}}return!0},s.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},s.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},s.prototype.removeListener=function(t,e,r,n){var i=l?l+t:t;if(!this._events[i])return this;if(!e)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||o(this,i);else{for(var s=0,u=[],c=a.length;s<c;s++)(a[s].fn!==e||n&&!a[s].once||r&&a[s].context!==r)&&u.push(a[s]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=l?l+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=l,s.EventEmitter=s,t.exports=s},"./node_modules/node-libs-browser/node_modules/events/events.js":/*!**********************************************************************!*\
	  !*** ./node_modules/node-libs-browser/node_modules/events/events.js ***!
	  \**********************************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),l=r.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(i=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,o,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(s=o;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},"./node_modules/url-toolkit/src/url-toolkit.js":/*!*****************************************************!*\
	  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
	  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){!function(e){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),e=e.trim(),!e){if(!r.alwaysNormalize)return t;var i=o.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=n.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(d)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=r.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=o}(this)},"./node_modules/webworkify-webpack/index.js":/*!**************************************************!*\
	  !*** ./node_modules/webworkify-webpack/index.js ***!
	  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){function n(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw console.error(t),t};var n=e(e.s=ENTRY_MODULE);return n.default||n}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(t){return!isNaN(1*t)}function o(t,e,n){var o={};o[n]=[];var s=e.toString(),u=s.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return o;for(var d,h=u[1],f=new RegExp("(\\\\n|\\W)"+i(h)+c,"g");d=f.exec(s);)"dll-reference"!==d[3]&&o[n].push(d[3]);for(f=new RegExp("\\("+i(h)+'\\("(dll-reference\\s('+l+'))"\\)\\)'+c,"g");d=f.exec(s);)t[d[2]]||(o[n].push(d[1]),t[d[2]]=r(d[1]).m),o[d[2]]=o[d[2]]||[],o[d[2]].push(d[4]);for(var p=Object.keys(o),m=0;m<p.length;m++)for(var g=0;g<o[p[m]].length;g++)a(o[p[m]][g])&&(o[p[m]][g]=1*o[p[m]][g]);return o}function s(t){var e=Object.keys(t);return e.reduce(function(e,r){return e||t[r].length>0},!1)}function u(t,e){for(var r={main:[e]},n={main:[]},i={main:{}};s(r);)for(var a=Object.keys(r),u=0;u<a.length;u++){var l=a[u],c=r[l],d=c.pop();if(i[l]=i[l]||{},!i[l][d]&&t[l][d]){i[l][d]=!0,n[l]=n[l]||[],n[l].push(d);for(var h=o(t,t[l][d],l),f=Object.keys(h),p=0;p<f.length;p++)r[f[p]]=r[f[p]]||[],r[f[p]]=r[f[p]].concat(h[f[p]])}}return n}var l="[\\.|\\-|\\+|\\w|/|@]+",c="\\((/\\*.*?\\*/)?s?.*?("+l+").*?\\)";t.exports=function(t,e){e=e||{};var i={main:r.m},a=e.all?{main:Object.keys(i.main)}:u(i,t),o="";Object.keys(a).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;a[t][e];)e++;a[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a[t].map(function(e){return""+JSON.stringify(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),o=o+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a.main.map(function(t){return""+JSON.stringify(t)+": "+i.main[t].toString()}).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(e.bare)return s;var l=window.URL||window.webkitURL||window.mozURL||window.msURL,c=l.createObjectURL(s),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.js":/*!***********************!*\
	  !*** ./src/config.js ***!
	  \***********************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ./controller/abr-controller */"./src/controller/abr-controller.js"),i=r(/*! ./controller/buffer-controller */"./src/controller/buffer-controller.js"),a=r(/*! ./controller/cap-level-controller */"./src/controller/cap-level-controller.js"),o=r(/*! ./controller/fps-controller */"./src/controller/fps-controller.js"),s=r(/*! ./utils/xhr-loader */"./src/utils/xhr-loader.js"),u=r(/*! ./controller/audio-track-controller */"./src/controller/audio-track-controller.js"),l=r(/*! ./controller/audio-stream-controller */"./src/controller/audio-stream-controller.js"),c=r(/*! ./utils/cues */"./src/utils/cues.js"),d=r(/*! ./controller/timeline-controller */"./src/controller/timeline-controller.js"),h=r(/*! ./controller/subtitle-track-controller */"./src/controller/subtitle-track-controller.js"),f=r(/*! ./controller/subtitle-stream-controller */"./src/controller/subtitle-stream-controller.js"),p=r(/*! ./controller/eme-controller */"./src/controller/eme-controller.js"),m=r(/*! ./utils/mediakeys-helper */"./src/utils/mediakeys-helper.js");e.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:a.default,fpsController:o.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:m.requestMediaKeySystemAccess},e.hlsDefaultConfig.subtitleStreamController=f.SubtitleStreamController,e.hlsDefaultConfig.subtitleTrackController=h.default,e.hlsDefaultConfig.timelineController=d.default,e.hlsDefaultConfig.cueHandler=c,e.hlsDefaultConfig.enableCEA708Captions=!0,e.hlsDefaultConfig.enableWebVTT=!0,e.hlsDefaultConfig.captionsTextTrack1Label="English",e.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",e.hlsDefaultConfig.captionsTextTrack2Label="Spanish",e.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",e.hlsDefaultConfig.audioStreamController=l.default,e.hlsDefaultConfig.audioTrackController=u.default,e.hlsDefaultConfig.emeController=p.default},"./src/controller/abr-controller.js":/*!******************************************!*\
	  !*** ./src/controller/abr-controller.js ***!
	  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),s=r(/*! ../errors */"./src/errors.js"),u=r(/*! ../utils/logger */"./src/utils/logger.js"),l=r(/*! ../utils/ewma-bandwidth-estimator */"./src/utils/ewma-bandwidth-estimator.js"),c=window.performance,d=function(e){function r(t){var r=e.call(this,t,i.default.FRAG_LOADING,i.default.FRAG_LOADED,i.default.FRAG_BUFFERED,i.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return n(r,e),r.prototype.destroy=function(){this.clearTimer(),a.default.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,n=r.config,i=e.level,a=r.levels[i].details.live,o=void 0,s=void 0;a?(o=n.abrEwmaFastLive,s=n.abrEwmaSlowLive):(o=n.abrEwmaFastVoD,s=n.abrEwmaSlowVoD),this._bwEstimator=new l.default(r,s,o,n.abrEwmaDefaultEstimate)}},r.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent;if(r){var n=r.loader,a=t.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var s=n.stats;if(e&&s&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var l=c.now()-s.trequest,d=Math.abs(e.playbackRate);if(l>500*r.duration/d){var h=t.levels,f=Math.max(1,s.bw?s.bw/8:1e3*s.loaded/l),p=h[r.level],m=p.realBitrate?Math.max(p.realBitrate,p.bitrate):p.bitrate,g=s.total?s.total:Math.max(s.loaded,Math.round(r.duration*m/8)),v=e.currentTime,y=(g-s.loaded)/f,_=(o.BufferHelper.bufferInfo(e,v,t.config.maxBufferHole).end-v)/d;if(_<2*r.duration/d&&y>_){var b=void 0,E=void 0;for(E=r.level-1;E>a;E--){var A=h[E].realBitrate?Math.max(h[E].realBitrate,h[E].bitrate):h[E].bitrate;if(b=r.duration*A/(6.4*f),b<_)break}b<y&&(u.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+y.toFixed(1)+":"+_.toFixed(1)),t.nextLoadLevel=E,this._bwEstimator.sample(l,s.loaded),n.abort(),this.clearTimer(),t.trigger(i.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:s}))}}}}},r.prototype.onFragLoaded=function(e){var r=e.frag;if("main"===r.type&&t.isFinite(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[r.level],i=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,a=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:i,duration:a},n.realBitrate=Math.round(8*i/a)}if(e.frag.bitrateTest){var o=e.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(e)}}},r.prototype.onFragBuffered=function(e){var r=e.stats,n=e.frag;if(r.aborted!==!0&&"main"===n.type&&t.isFinite(n.sn)&&(!n.bitrateTest||r.tload===r.tbuffered)){var i=r.tparsed-r.trequest;u.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(i,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(t){switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(r.prototype,"nextAutoLevel",{get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(t===-1||e&&e.canEstimate()))return t;var r=this._nextABRAutoLevel;return t!==-1&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_nextABRAutoLevel",{get:function(){var t=this.hls,e=t.maxAutoLevel,r=t.levels,n=t.config,i=t.minAutoLevel,a=t.media,s=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,c=a?a.currentTime:0,d=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,h=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,f=(o.BufferHelper.bufferInfo(a,c,n.maxBufferHole).end-c)/d,p=this._findBestLevel(s,l,h,i,e,f,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(p>=0)return p;u.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var m=l?Math.min(l,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(0===f){var y=this.bitrateTestDelay;if(y){var _=l?Math.min(l,n.maxLoadingDelay):n.maxLoadingDelay;m=_-y,u.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*m)+" ms"),g=v=1}}return p=this._findBestLevel(s,l,h,i,e,f+m,g,v,r),Math.max(p,0)},enumerable:!0,configurable:!0}),r.prototype._findBestLevel=function(t,e,r,n,i,a,o,s,l){for(var c=i;c>=n;c--){var d=l[c];if(d){var h=d.details,f=h?h.totalduration/h.fragments.length:e,p=!!h&&h.live,m=void 0;m=c<=t?o*r:s*r;var g=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,v=g*f/m;if(u.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(m)+"/"+g+"/"+f+"/"+a+"/"+v),m>g&&(!v||p&&!this.bitrateTestDelay||v<a))return c}}return-1},r}(a.default);e.default=d}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":/*!***************************************************!*\
	  !*** ./src/controller/audio-stream-controller.js ***!
	  \***************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../utils/binary-search */"./src/utils/binary-search.js"),a=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),o=r(/*! ../demux/demuxer */"./src/demux/demuxer.js"),s=r(/*! ../events */"./src/events.js"),u=r(/*! ./level-helper */"./src/controller/level-helper.js"),l=r(/*! ../utils/time-ranges */"./src/utils/time-ranges.js"),c=r(/*! ../errors */"./src/errors.js"),d=r(/*! ../utils/logger */"./src/utils/logger.js"),h=r(/*! ../utils/discontinuities */"./src/utils/discontinuities.js"),f=r(/*! ./fragment-tracker */"./src/controller/fragment-tracker.js"),p=r(/*! ../loader/fragment */"./src/loader/fragment.js"),m=r(/*! ./base-stream-controller */"./src/controller/base-stream-controller.js"),g=window.performance,v=100,y=function(e){function r(t,r){var n=e.call(this,t,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.AUDIO_TRACKS_UPDATED,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.BUFFER_RESET,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED,s.default.INIT_PTS_FOUND)||this;return n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=m.State.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return n(r,e),r.prototype.onInitPtsFound=function(t){var e=t.id,r=t.frag.cc,n=t.initPTS;"main"===e&&(this.initPTS[r]=n,this.videoTrackCC=r,d.logger.log("InitPTS for cc: "+r+" found from video track: "+n),this.state===m.State.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(v),this.fragLoadError=0,e>0&&t===-1?(d.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=m.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=m.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=m.State.STOPPED},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(t){if(this.state!==t){var e=this.state;this._state=t,d.logger.log("audio stream:"+e+"->"+t)}},enumerable:!0,configurable:!0}),r.prototype.doTick=function(){var e,r,n,o=this.hls,u=o.config;switch(this.state){case m.State.ERROR:case m.State.PAUSED:case m.State.BUFFER_FLUSHING:break;case m.State.STARTING:this.state=m.State.WAITING_TRACK,this.loadedmetadata=!1;break;case m.State.IDLE:var l=this.tracks;if(!l)break;if(!this.media&&(this.startFragRequested||!u.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(e=this.nextLoadPosition,void 0===e)break;var c=this.mediaBuffer?this.mediaBuffer:this.media,p=this.videoBuffer?this.videoBuffer:this.media,v=a.BufferHelper.bufferInfo(c,e,u.maxBufferHole),y=a.BufferHelper.bufferInfo(p,e,u.maxBufferHole),_=v.len,b=v.end,E=this.fragPrevious,A=Math.min(u.maxBufferLength,u.maxMaxBufferLength),T=Math.max(A,y.len),S=this.audioSwitch,w=this.trackId;if((_<T||S)&&w<l.length){if(n=l[w].details,"undefined"==typeof n){this.state=m.State.WAITING_TRACK;break}if(!S&&this._streamEnded(v,n))return this.hls.trigger(s.default.BUFFER_EOS,{type:"audio"}),void(this.state=m.State.ENDED);var C=n.fragments,k=C.length,L=C[0].start,D=C[k-1].start+C[k-1].duration,P=void 0;if(S)if(n.live&&!n.PTSKnown)d.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),b=0;else if(b=e,n.PTSKnown&&e<L){if(!(v.end>L||v.nextStart))return;d.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=L+.05}if(n.initSegment&&!n.initSegment.data)P=n.initSegment;else if(b<=L){if(P=C[0],null!==this.videoTrackCC&&P.cc!==this.videoTrackCC&&(P=h.findFragWithCC(C,this.videoTrackCC)),n.live&&P.loadIdx&&P.loadIdx===this.fragLoadIdx){var I=v.nextStart?v.nextStart:L;return d.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(I+.05)),void(this.media.currentTime=I+.05)}}else{var R=void 0,O=u.maxFragLookUpTolerance,x=E?C[E.sn-C[0].sn+1]:void 0,M=function(t){var e=Math.min(O,t.duration);return t.start+t.duration-e<=b?1:t.start-e>b&&t.start?-1:0};b<D?(b>D-O&&(O=0),R=x&&!M(x)?x:i.default.search(C,M)):R=C[k-1],R&&(P=R,L=R.start,E&&P.level===E.level&&P.sn===E.sn&&(P.sn<n.endSN?(P=C[P.sn+1-n.startSN],d.logger.log("SN just loaded, load next one: "+P.sn)):P=null))}P&&(P.encrypted?(d.logger.log("Loading key for "+P.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+w),this.state=m.State.KEY_LOADING,o.trigger(s.default.KEY_LOADING,{frag:P})):(d.logger.log("Loading "+P.sn+", cc: "+P.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+w+", currentTime:"+e+",bufferEnd:"+b.toFixed(3)),this.fragCurrent=P,(S||this.fragmentTracker.getState(P)===f.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,t.isFinite(P.sn)&&(this.nextLoadPosition=P.start+P.duration),o.trigger(s.default.FRAG_LOADING,{frag:P}),this.state=m.State.FRAG_LOADING)))}break;case m.State.WAITING_TRACK:r=this.tracks[this.trackId],r&&r.details&&(this.state=m.State.IDLE);break;case m.State.FRAG_LOADING_WAITING_RETRY:var N=g.now(),F=this.retryDate;c=this.media;var U=c&&c.seeking;(!F||N>=F||U)&&(d.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=m.State.IDLE);break;case m.State.WAITING_INIT_PTS:var B=this.videoTrackCC;if(void 0===this.initPTS[B])break;var j=this.waitingFragment;if(j){var G=j.frag.cc;B!==G?(r=this.tracks[this.trackId],r.details&&r.details.live&&(d.logger.warn("Waiting fragment CC ("+G+") does not match video track CC ("+B+")"),this.waitingFragment=null,this.state=m.State.IDLE)):(this.state=m.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=m.State.IDLE;break;case m.State.STOPPED:case m.State.FRAG_LOADING:case m.State.PARSING:case m.State.PARSED:case m.State.ENDED:}},r.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onAudioTracksUpdated=function(t){d.logger.log("audio tracks updated"),this.tracks=t.audioTracks},r.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=m.State.PAUSED,this.waitingFragment=null,e?this.setInterval(v):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=m.State.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(e){var r=e.details,n=e.id,i=this.tracks[n],a=r.totalduration,o=0;if(d.logger.log("track "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+a),r.live){var s=i.details;s&&r.fragments.length>0?(u.mergeDetails(s,r),o=r.fragments[0].start,r.PTSKnown?d.logger.log("live audio playlist sliding:"+o.toFixed(3)):d.logger.log("live audio playlist - outdated PTS, unknown sliding")):(r.PTSKnown=!1,d.logger.log("live audio playlist - first load, unknown sliding"))}else r.PTSKnown=!1;if(i.details=r,!this.startFragRequested){if(this.startPosition===-1){var l=r.startTimeOffset;t.isFinite(l)?(d.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===m.State.WAITING_TRACK&&(this.state=m.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===m.State.KEY_LOADING&&(this.state=m.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===m.State.FRAG_LOADING&&e&&"audio"===r.type&&r.level===e.level&&r.sn===e.sn){var n=this.tracks[this.trackId],i=n.details,a=i.totalduration,u=e.level,l=e.sn,c=e.cc,h=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",f=this.stats=t.stats;if("initSegment"===l)this.state=m.State.IDLE,f.tparsed=f.tbuffered=g.now(),i.initSegment.data=t.payload,this.hls.trigger(s.default.FRAG_BUFFERED,{stats:f,frag:e,id:"audio"}),this.tick();else{this.state=m.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new o.default(this.hls,"audio"));var p=this.initPTS[c],v=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==p){this.pendingBuffering=!0,d.logger.log("Demuxing "+l+" of ["+i.startSN+" ,"+i.endSN+"],track "+u);var y=!1;this.demuxer.push(t.payload,v,h,null,e,a,y,p)}else d.logger.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+l+" of ["+i.startSN+" ,"+i.endSN+"],track "+u),this.waitingFragment=t,this.state=m.State.WAITING_INIT_PTS}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===m.State.PARSING){var n=t.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=t.id,this.hls.trigger(s.default.BUFFER_CODECS,n),d.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,o))}this.tick()}}},r.prototype.onFragParsingData=function(e){var r=this,n=this.fragCurrent,i=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&i.sn===n.sn&&i.level===n.level&&this.state===m.State.PARSING){var a=this.trackId,o=this.tracks[a],l=this.hls;t.isFinite(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),n.addElementaryStream(p.default.ElementaryStreamTypes.AUDIO),d.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),u.updateFragPTSDTS(o.details,n,e.startPTS,e.endPTS);var h=this.audioSwitch,f=this.media,g=!1;if(h&&f)if(f.readyState){var v=f.currentTime;d.logger.log("switching audio track : currentTime:"+v),v>=e.startPTS&&(d.logger.log("switching audio track : flushing all audio"),this.state=m.State.BUFFER_FLUSHING,l.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:t.POSITIVE_INFINITY,type:"audio"}),g=!0,this.audioSwitch=!1,l.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,l.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:a});var y=this.pendingData;if(!y)return d.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void l.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&y.push({type:e.type,data:t,parent:"audio",content:"data"})}),!g&&y.length&&(y.forEach(function(t){r.state===m.State.PARSING&&(r.pendingBuffering=!0,r.hls.trigger(s.default.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===m.State.PARSING&&(this.stats.tparsed=g.now(),this.state=m.State.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},r.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==m.State.PARSING&&e!==m.State.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==m.State.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,r=this.hls;if(t){this.fragPrevious=t,e.tbuffered=g.now(),r.trigger(s.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;d.logger.log("audio buffered : "+l.default.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=m.State.IDLE}this.tick()}},r.prototype.onError=function(e){var r=e.frag;if(!r||"audio"===r.type)switch(e.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=e.frag;if(n&&"audio"!==n.type)break;if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var o=this.config;if(i<=o.fragLoadingMaxRetry){this.fragLoadError=i;var u=Math.min(Math.pow(2,i-1)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout);d.logger.warn("AudioStreamController: frag loading failed, retry in "+u+" ms"),this.retryDate=g.now()+u,this.state=m.State.FRAG_LOADING_WAITING_RETRY}else d.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=m.State.ERROR}break;case c.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case c.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==m.State.ERROR&&(this.state=e.fatal?m.State.ERROR:m.State.IDLE,d.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case c.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===m.State.PARSING||this.state===m.State.PARSED)){var l=this.mediaBuffer,h=this.media.currentTime,f=l&&a.BufferHelper.isBuffered(l,h)&&a.BufferHelper.isBuffered(l,h+.5);if(f){var o=this.config;o.maxMaxBufferLength>=o.maxBufferLength&&(o.maxMaxBufferLength/=2,d.logger.warn("AudioStreamController: reduce max buffer length to "+o.maxMaxBufferLength+"s")),this.state=m.State.IDLE}else d.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=m.State.BUFFER_FLUSHING,this.hls.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:t.POSITIVE_INFINITY,type:"audio"})}}},r.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(d.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach(function(e){t.hls.trigger(s.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=m.State.PARSED):(this.state=m.State.IDLE,this.fragPrevious=null,this.tick())},r}(m.default);e.default=y}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":/*!**************************************************!*\
	  !*** ./src/controller/audio-track-controller.js ***!
	  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../task-loop */"./src/task-loop.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=r(/*! ../errors */"./src/errors.js"),u=function(t){function e(e){var r=t.call(this,e,i.default.MANIFEST_LOADING,i.default.MANIFEST_PARSED,i.default.AUDIO_TRACK_LOADED,i.default.AUDIO_TRACK_SWITCHED,i.default.LEVEL_LOADED,i.default.ERROR)||this;return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}return n(e,t),e.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},e.prototype.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(i.default.AUDIO_TRACKS_UPDATED,{audioTracks:e})},e.prototype.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)return void o.logger.warn("Invalid audio track id:",t.id);if(o.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()},e.prototype.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},e.prototype.onLevelLoaded=function(t){var e=this.hls.levels[t.level];if(e.audioGroupIds){var r=e.audioGroupIds[e.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},e.prototype.onError=function(t){t.type===s.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(o.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},Object.defineProperty(e.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioTrack",{get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),e.prototype._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)return void o.logger.debug("Same id as current audio-track passed, and track details available -> no-op");if(t<0||t>=this.tracks.length)return void o.logger.warn("Invalid id passed to audio-track controller");var e=this.tracks[t];o.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var r=e.url,n=e.type,a=e.id;this.hls.trigger(i.default.AUDIO_TRACK_SWITCHING,{id:a,type:n,url:r}),this._loadTrackDetailsIfNeeded(e)},e.prototype.doTick=function(){this._updateTrack(this._trackId)},e.prototype._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var a=e.filter(function(t){return t.default});a.length?e=a:o.logger.warn("No default audio tracks defined")}var u=!1,l=function(){e.forEach(function(e){u||t.audioGroupId&&e.groupId!==t.audioGroupId||n&&n!==e.name||(t._setAudioTrack(e.id),u=!0)})};l(),u||(n=null,l()),u||(o.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},e.prototype._needsTrackLoading=function(t){var e=t.details,r=t.url;return!(e&&!e.live)&&!!r},e.prototype._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,r=t.id;o.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(i.default.AUDIO_TRACK_LOADING,{url:e,id:r})}},e.prototype._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,o.logger.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},e.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],r=e.name,n=e.language,i=e.groupId;o.logger.warn("Loading failed on audio track id: "+t+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var a=t,s=0;s<this.tracks.length;s++)if(!this.trackIdBlacklist[s]){var u=this.tracks[s];if(u.name===r){a=s;break}}return a===t?void o.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"'):(o.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),void this._setAudioTrack(a))},e}(a.default);e.default=u},"./src/controller/base-stream-controller.js":/*!**************************************************!*\
	  !*** ./src/controller/base-stream-controller.js ***!
	  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../task-loop */"./src/task-loop.js"),a=r(/*! ./fragment-tracker */"./src/controller/fragment-tracker.js"),o=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js");e.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var u=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return n(i,r),i.prototype.doTick=function(){},i.prototype.startLoad=function(){},i.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=e.State.STOPPED},i.prototype._streamEnded=function(t,e){var r=this,n=r.fragCurrent,i=r.fragmentTracker;if(!e.live&&n&&!n.backtracked&&n.sn===e.endSN&&!t.nextStart){var o=i.getState(n);return o===a.FragmentState.PARTIAL||o===a.FragmentState.OK}return!1},i.prototype.onMediaSeeking=function(){var r=this,n=r.config,i=r.media,a=r.mediaBuffer,u=r.state,l=i?i.currentTime:null,c=o.BufferHelper.bufferInfo(a||i,l,this.config.maxBufferHole);if(t.isFinite(l)&&s.logger.log("media seeking to "+l.toFixed(3)),u===e.State.FRAG_LOADING){var d=this.fragCurrent;if(0===c.len&&d){var h=n.maxFragLookUpTolerance,f=d.start-h,p=d.start+d.duration+h;l<f||l>p?(d.loader&&(s.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),d.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=e.State.IDLE):s.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else u===e.State.ENDED&&(0===c.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=e.State.IDLE);i&&(this.lastCurrentTime=l),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=l),this.tick()},i.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.prototype.onHandlerDestroying=function(){this.stopLoad(),r.prototype.onHandlerDestroying.call(this)},i.prototype.onHandlerDestroyed=function(){this.state=e.State.STOPPED,this.fragmentTracker=null},i}(i.default);e.default=u}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":/*!*********************************************!*\
	  !*** ./src/controller/buffer-controller.js ***!
	  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=r(/*! ../errors */"./src/errors.js"),u=r(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.js"),l=u.getMediaSource(),c=function(e){function r(t){var r=e.call(this,t,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_RESET,i.default.BUFFER_APPENDING,i.default.BUFFER_CODECS,i.default.BUFFER_EOS,i.default.BUFFER_FLUSHING,i.default.LEVEL_PTS_UPDATED,i.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r.bufferCodecEventsExpected=0,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return n(r,e),r.prototype.destroy=function(){a.default.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio,i=Math.abs(n.timestampOffset-t.start);if(i>.1){var a=n.updating;try{n.abort()}catch(t){o.logger.warn("can not abort audio buffer: "+t)}a?this.audioTimestampOffset=t.start:(o.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+t.start),n.timestampOffset=t.start)}}},r.prototype.onManifestParsed=function(t){this.bufferCodecEventsExpected=t.altAudio?2:1,o.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var r=this.mediaSource=new l;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),e.src=window.URL.createObjectURL(r),this._objectUrl=e.src}},r.prototype.onMediaDetaching=function(){o.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){o.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):o.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(i.default.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){o.logger.log("media source opened"),this.hls.trigger(i.default.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var t=this,e=t.bufferCodecEventsExpected,r=t.pendingTracks,n=Object.keys(r).length;(n&&!e||2===n)&&(this.createSourceBuffers(r),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){o.logger.log("media source closed")},r.prototype.onMediaSourceEnded=function(){o.logger.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;o.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,r=this.segments.reduce(function(t,r){return r.parent===e?t+1:t},0),n={},a=this.sourceBuffer;for(var s in a)n[s]=a[s].buffered;this.hls.trigger(i.default.BUFFER_APPENDED,{parent:e,pending:r,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===r&&this.flushLiveBackBuffer()},r.prototype.onSBUpdateError=function(t){o.logger.error("sourceBuffer error:",t),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(t){var e=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(t).forEach(function(r){e.pendingTracks[r]=t[r]});var r=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),r&&"open"===r.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;for(var n in t)if(!e[n]){var a=t[n],u=a.levelCodec||a.codec,l=a.container+";codecs="+u;o.logger.log("creating sourceBuffer("+l+")");try{var c=e[n]=r.addSourceBuffer(l);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[n]={codec:u,container:a.container},a.buffer=c}catch(t){o.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:l})}}this.hls.trigger(i.default.BUFFER_CREATED,{tracks:t})},r.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},r.prototype.onBufferAppendFail=function(t){o.logger.error("sourceBuffer error:",t.event),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(t){var e=this.sourceBuffer,r=t.type;for(var n in e)r&&n!==r||e[n].ended||(e[n].ended=!0,o.logger.log(n+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var r in t){var n=t[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}o.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){o.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},r.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.flushLiveBackBuffer=function(){if(this._live){var t=this.hls.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))for(var e=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=e-Math.max(t,this._levelTargetDuration),a=n.length-1;a>=0;a--){var o=n[a],s=r[o].buffered;s.length>0&&i>s.start(0)&&this.removeBufferRange(o,r[o],0,i)}}},r.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var e,r=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(this.sourceBuffer[n].updating===!0)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),this._live===!0&&r.liveDurationInfinity===!0?(o.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!t.isFinite(e))&&(o.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var n in r)e+=r[n].buffered.length}catch(t){o.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(i.default.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var t=this,e=t.hls,r=t.segments,n=t.sourceBuffer;if(Object.keys(n).length){if(this.media.error)return this.segments=[],void o.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var a=r.shift();try{var u=a.type,l=n[u];l?l.updating?r.unshift(a):(l.ended=!1,this.parent=a.parent,l.appendBuffer(a.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){o.logger.error("error while trying to append buffer:"+t.message),r.unshift(a);var c={type:s.ErrorTypes.MEDIA_ERROR,parent:a.parent};22!==t.code?(this.appendError?this.appendError++:this.appendError=1,c.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(o.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],c.fatal=!0,e.trigger(i.default.ERROR,c)):(c.fatal=!1,e.trigger(i.default.ERROR,c))):(this.segments=[],c.details=s.ErrorDetails.BUFFER_FULL_ERROR,c.fatal=!1,e.trigger(i.default.ERROR,c))}}}},r.prototype.flushBuffer=function(t,e,r){var n,i=this.sourceBuffer;if(Object.keys(i).length){if(o.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var a in i)if(!r||a===r){if(n=i[a],n.ended=!1,n.updating)return o.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(a,n,t,e))return this.flushBufferCounter++,!1}}else o.logger.warn("abort flushing too many retries");o.logger.log("buffer flushed")}return!0},r.prototype.removeBufferRange=function(t,e,r,n){try{for(var i=0;i<e.buffered.length;i++){var a=e.buffered.start(i),s=e.buffered.end(i),u=Math.max(a,r),l=Math.min(s,n);if(Math.min(l,s)-u>.5)return o.logger.log("sb remove "+t+" ["+u+","+l+"], of ["+a+","+s+"], pos:"+this.media.currentTime),e.remove(u,l),!0}}catch(t){o.logger.warn("removeBufferRange failed",t)}return!1},r}(a.default);e.default=c}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":/*!************************************************!*\
	  !*** ./src/controller/cap-level-controller.js ***!
	  \************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=function(e){function r(r){var n=e.call(this,r,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_CODECS,i.default.MEDIA_DETACHING)||this;return n.autoLevelCapping=t.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}return n(r,e),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},r.prototype.onFpsDropLevelCapping=function(t){r.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},r.prototype.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},r.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this._startCapping()},r.prototype.onBufferCodecs=function(t){var e=this.hls;e.config.capLevelToPlayerSize&&t.video&&this._startCapping()},r.prototype.onLevelsUpdated=function(t){this.levels=t.levels},r.prototype.onMediaDetaching=function(){this._stopCapping()},r.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},r.prototype.getMaxLevel=function(t){var e=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,i){return r.isLevelAllowed(i,e.restrictedLevels)&&i<=t});return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=t.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=t.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(r.prototype,"mediaWidth",{get:function(){var t,e=this.media;return e&&(t=e.width||e.clientWidth||e.offsetWidth,t*=r.contentScaleFactor),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaHeight",{get:function(){var t,e=this.media;return e&&(t=e.height||e.clientHeight||e.offsetHeight,t*=r.contentScaleFactor),t},enumerable:!0,configurable:!0}),Object.defineProperty(r,"contentScaleFactor",{get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t},enumerable:!0,configurable:!0}),r.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),e.indexOf(t)===-1},r.getMaxLevelByMediaSize=function(t,e,r){if(!t||t&&!t.length)return-1;for(var n=function(t,e){return!e||(t.width!==e.width||t.height!==e.height)},i=t.length-1,a=0;a<t.length;a+=1){var o=t[a];if((o.width>=e||o.height>=r)&&n(o,t[a+1])){i=a;break}}return i},r}(a.default);e.default=o}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":/*!******************************************!*\
	  !*** ./src/controller/eme-controller.js ***!
	  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../event-handler */"./src/event-handler.js"),a=r(/*! ../events */"./src/events.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=window.XMLHttpRequest,l=3,c={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},d=function(t,e,r){var n={videoCapabilities:[]};return e.forEach(function(t){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})}),[n]},h=function(t,e,r){switch(t){case c.WIDEVINE:return d(e,r);default:throw Error("Unknown key-system: "+t)}},f=function(t){function e(e){var r=t.call(this,e,a.default.MEDIA_ATTACHED,a.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=e.config.widevineLicenseUrl,r._licenseXhrSetup=e.config.licenseXhrSetup,r._emeEnabled=e.config.emeEnabled,r._requestMediaKeySystemAccess=e.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return n(e,t),e.prototype.getLicenseServerUrl=function(t){var e;switch(t){case c.WIDEVINE:e=this._widevineLicenseUrl;break;default:e=null}return e||(s.logger.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),e},e.prototype._attemptKeySystemAccess=function(t,e,r){var n=this,i=h(t,e,r);return i?(s.logger.log("Requesting encrypted media key-system access"),void this.requestMediaKeySystemAccess(t,i).then(function(e){n._onMediaKeySystemAccessObtained(t,e)}).catch(function(e){s.logger.error('Failed to obtain key-system "'+t+'" access:',e)})):void s.logger.warn("Can not create config for key-system (maybe because platform is not supported):",t)},Object.defineProperty(e.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),e.prototype._onMediaKeySystemAccessObtained=function(t,e){var r=this;s.logger.log('Access for key-system "'+t+'" obtained');var n={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(n),e.createMediaKeys().then(function(e){n.mediaKeys=e,s.logger.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated()}).catch(function(t){s.logger.error("Failed to create media-keys:",t)})},e.prototype._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},e.prototype._onNewMediaKeySession=function(t){var e=this;s.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(r){e._onKeySessionMessage(t,r.message)},!1)},e.prototype._onKeySessionMessage=function(t,e){s.logger.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){s.logger.log("Received license data, updating key-session"),t.update(e)})},e.prototype._onMediaEncrypted=function(t,e){s.logger.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=e,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},e.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return s.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});s.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},e.prototype._generateRequestWithPreferredKeySession=function(){var t=this,e=this._mediaKeysList[0];if(!e)return s.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(e.mediaKeysSessionInitialized)return void s.logger.warn("Key-Session already initialized but requested again");var r=e.mediaKeysSession;r||(s.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var n=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;s.logger.log('Generating key-session request for "'+n+'" init data type'),e.mediaKeysSessionInitialized=!0,r.generateRequest(n,i).then(function(){s.logger.debug("Key-session generation succeeded")}).catch(function(e){s.logger.error("Error generating key-session request:",e),t.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},e.prototype._createLicenseXhr=function(t,e,r){var n=new u,i=this._licenseXhrSetup;try{if(i)try{i(n,t)}catch(e){n.open("POST",t,!0),i(n,t)}n.readyState||n.open("POST",t,!0)}catch(t){return s.logger.error("Error setting up key-system license XHR",t),void this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,t,e,r),n},e.prototype._onLicenseRequestReadyStageChange=function(t,e,r,n){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,s.logger.log("License request succeeded"),n(t.response);else{if(s.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=l){var i=l-this._requestLicenseFailureCount+1;return s.logger.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(r,n)}this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},e.prototype._generateLicenseRequestChallenge=function(t,e){var r;return t.mediaKeySystemDomain===c.PLAYREADY?s.logger.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===c.WIDEVINE?r=e:s.logger.error("Unsupported key-system:",t.mediaKeySystemDomain),r},e.prototype._requestLicense=function(t,e){s.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return s.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,t,e);s.logger.log("Sending license request to URL: "+n),i.send(this._generateLicenseRequestChallenge(r,t))},e.prototype.onMediaAttached=function(t){var e=this;if(this._emeEnabled){var r=t.media;this._media=r,r.addEventListener("encrypted",function(t){e._onMediaEncrypted(t.initDataType,t.initData)})}},e.prototype.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map(function(t){return t.audioCodec}),r=t.levels.map(function(t){return t.videoCodec});this._attemptKeySystemAccess(c.WIDEVINE,e,r)}},e}(i.default);e.default=f},"./src/controller/fps-controller.js":/*!******************************************!*\
	  !*** ./src/controller/fps-controller.js ***!
	  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=window.performance,u=function(t){function e(e){return t.call(this,e,i.default.MEDIA_ATTACHING)||this}return n(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;if(e.capLevelOnFPSDrop){var r=this.video=t.media instanceof window.HTMLVideoElement?t.media:null;"function"==typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod)}},e.prototype.checkFPS=function(t,e,r){var n=s.now();if(e){if(this.lastTime){var a=n-this.lastTime,u=r-this.lastDroppedFrames,l=e-this.lastDecodedFrames,c=1e3*u/a,d=this.hls;if(d.trigger(i.default.FPS_DROP,{currentDropped:u,currentDecoded:l,totalDroppedFrames:r}),c>0&&u>d.config.fpsDroppedMonitoringThreshold*l){var h=d.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=h)&&(h-=1,d.trigger(i.default.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:d.currentLevel}),d.autoLevelCapping=h,d.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(a.default);e.default=u},"./src/controller/fragment-finders.js":/*!********************************************!*\
	  !*** ./src/controller/fragment-finders.js ***!
	  \********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){function n(e,r,n){if(!Array.isArray(e)||!e.length||!t.isFinite(r))return null;if(r<e[0].programDateTime)return null;if(r>=e[e.length-1].endProgramDateTime)return null;n=n||0;for(var i=0;i<e.length;++i){var a=e[i];if(o(r,n,a))return a}return null}function i(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=t?e[t.sn-e[0].sn+1]:null;return i&&!a(r,n,i)?i:s.default.search(e,a.bind(null,r,n))}function a(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);var n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}function o(t,e,r){var n=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-n>t}Object.defineProperty(e,"__esModule",{value:!0});var s=r(/*! ../utils/binary-search */"./src/utils/binary-search.js");e.findFragmentByPDT=n,e.findFragmentByPTS=i,e.fragmentWithinToleranceTest=a,e.pdtWithinToleranceTest=o}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":/*!********************************************!*\
	  !*** ./src/controller/fragment-tracker.js ***!
	  \********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../event-handler */"./src/event-handler.js"),a=r(/*! ../events */"./src/events.js");e.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var o=function(r){function o(t){var e=r.call(this,t,a.default.BUFFER_APPENDED,a.default.FRAG_BUFFERED,a.default.FRAG_LOADED)||this;return e.bufferPadding=.2,e.fragments=Object.create(null),e.timeRanges=Object.create(null),e.config=t.config,e}return n(o,r),o.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,i.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},o.prototype.getBufferedFrag=function(t,e){var r=this.fragments,n=Object.keys(r).filter(function(n){var i=r[n];if(i.body.type!==e)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=t&&t<=a.endPTS});if(0===n.length)return null;var i=n.pop();return r[i].body},o.prototype.detectEvictedFragments=function(t,e){var r,n,i=this;Object.keys(this.fragments).forEach(function(a){var o=i.fragments[a];if(o.buffered===!0){var s=o.range[t];if(s){r=s.time;for(var u=0;u<r.length;u++)if(n=r[u],i.isTimeBuffered(n.startPTS,n.endPTS,e)===!1){i.removeFragment(o.body);break}}}})},o.prototype.detectPartialFragments=function(t){var e=this,r=this.getFragmentKey(t),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(t.hasElementaryStream(r)){var i=e.timeRanges[r];n.range[r]=e.getBufferedTimes(t.startPTS,t.endPTS,i)}}))},o.prototype.getBufferedTimes=function(t,e,r){for(var n,i,a=[],o=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,t>=n&&e<=i){a.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))});break}if(t<i&&e>n)a.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))}),o=!0;else if(e<=n)break}return{time:a,partial:o}},o.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},o.prototype.getPartialFragment=function(t){var e,r,n,i=this,a=null,o=0;return Object.keys(this.fragments).forEach(function(s){var u=i.fragments[s];i.isPartial(u)&&(r=u.body.startPTS-i.bufferPadding,n=u.body.endPTS+i.bufferPadding,t>=r&&t<=n&&(e=Math.min(t-r,n-t),o<=e&&(a=u.body,o=e)))}),a},o.prototype.getState=function(t){var r=this.getFragmentKey(t),n=this.fragments[r],i=e.FragmentState.NOT_LOADED;return void 0!==n&&(i=n.buffered?this.isPartial(n)===!0?e.FragmentState.PARTIAL:e.FragmentState.OK:e.FragmentState.APPENDING),i},o.prototype.isPartial=function(t){return t.buffered===!0&&(void 0!==t.range.video&&t.range.video.partial===!0||void 0!==t.range.audio&&t.range.audio.partial===!0)},o.prototype.isTimeBuffered=function(t,e,r){for(var n,i,a=0;a<r.length;a++){if(n=r.start(a)-this.bufferPadding,i=r.end(a)+this.bufferPadding,t>=n&&e<=i)return!0;if(e<=n)return!1}return!1},o.prototype.onFragLoaded=function(e){var r=e.frag;t.isFinite(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},o.prototype.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var r=e.timeRanges[t];e.detectEvictedFragments(t,r)})},o.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},o.prototype.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},o.prototype.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},o.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},o}(i.default);e.FragmentTracker=o}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":/*!******************************************!*\
	  !*** ./src/controller/gap-controller.js ***!
	  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),i=r(/*! ../errors */"./src/errors.js"),a=r(/*! ../events */"./src/events.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=1e3,u=.5,l=function(){function t(t,e,r,n){this.config=t,this.media=e,this.fragmentTracker=r,this.hls=n,this.stallReported=!1}return t.prototype.poll=function(t,e){var r=this,i=r.config,a=r.media,u=a.currentTime,l=window.performance.now();if(u!==t)return this.stallReported&&(o.logger.warn("playback not stuck anymore @"+u+", after "+Math.round(l-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(a.ended||!a.buffered.length||a.readyState>2||a.seeking&&n.BufferHelper.isBuffered(a,u))){var c=l-this.stalled,d=n.BufferHelper.bufferInfo(a,u,i.maxBufferHole);if(!this.stalled)return void(this.stalled=l);c>=s&&this._reportStall(d.len),this._tryFixBufferStall(d,c)}},t.prototype._tryFixBufferStall=function(t,e){var r=this,n=r.config,i=r.fragmentTracker,a=r.media,o=a.currentTime,s=i.getPartialFragment(o);s&&this._trySkipBufferHole(s),t.len>u&&e>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},t.prototype._reportStall=function(t){var e=this,r=e.hls,n=e.media,s=e.stallReported;s||(this.stallReported=!0,o.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),r.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},t.prototype._trySkipBufferHole=function(t){for(var e=this,r=e.hls,n=e.media,s=n.currentTime,u=0,l=0;l<n.buffered.length;l++){var c=n.buffered.start(l);if(s>=u&&s<c)return n.currentTime=Math.max(c,n.currentTime+.1),o.logger.warn("skipping hole, adjusting currentTime from "+s+" to "+n.currentTime),this.stalled=null,void r.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+s+" to "+n.currentTime,frag:t});u=n.buffered.end(l)}},t.prototype._tryNudgeBuffer=function(){var t=this,e=t.config,r=t.hls,n=t.media,s=n.currentTime,u=(this.nudgeRetry||0)+1;if(this.nudgeRetry=u,u<e.nudgeMaxRetry){var l=s+u*e.nudgeOffset;o.logger.log("adjust currentTime from "+s+" to "+l),n.currentTime=l,r.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.logger.error("still stuck in high buffer @"+s+" after "+e.nudgeMaxRetry+", raise fatal error"),r.trigger(a.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}();e.default=l},"./src/controller/id3-track-controller.js":/*!************************************************!*\
	  !*** ./src/controller/id3-track-controller.js ***!
	  \************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../demux/id3 */"./src/demux/id3.js"),s=r(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.js"),u=function(t){function e(e){var r=t.call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA)||this;return r.id3Track=void 0,r.media=void 0,r}return n(e,t),e.prototype.destroy=function(){a.default.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,!this.media},e.prototype.onMediaDetaching=function(){s.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},e.prototype.getID3Track=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return s.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var a=o.default.getID3Frames(r[i].data);if(a){var s=r[i].pts,u=i<r.length-1?r[i+1].pts:e.endPTS;s===u&&(u+=1e-4);for(var l=0;l<a.length;l++){var c=a[l];if(!o.default.isTimeStampFrame(c)){var d=new n(s,u,"");d.value=c,this.id3Track.addCue(d)}}}}},e}(a.default);e.default=u},"./src/controller/level-controller.js":/*!********************************************!*\
	  !*** ./src/controller/level-controller.js ***!
	  \********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i,a=r(/*! ../events */"./src/events.js"),o=r(/*! ../event-handler */"./src/event-handler.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=r(/*! ../errors */"./src/errors.js"),l=r(/*! ../utils/codecs */"./src/utils/codecs.js"),c=r(/*! ./level-helper */"./src/controller/level-helper.js"),d=(window.performance,function(t){function e(e){var r=t.call(this,e,a.default.MANIFEST_LOADED,a.default.LEVEL_LOADED,a.default.AUDIO_TRACK_SWITCHED,a.default.FRAG_LOADED,a.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,i=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}return n(e,t),e.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},e.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e,r=[],n=[],o={},d=null,h=!1,f=!1;if(t.levels.forEach(function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,h=h||!!t.videoCodec,f=f||!!t.audioCodec,i&&t.audioCodec&&t.audioCodec.indexOf("mp4a.40.34")!==-1&&(t.audioCodec=void 0),d=o[t.bitrate],d?d.url.push(t.url):(t.url=[t.url],t.urlId=0,o[t.bitrate]=t,r.push(t)),e&&(e.AUDIO&&(f=!0,c.addGroupId(d||t,"audio",e.AUDIO)),e.SUBTITLES&&c.addGroupId(d||t,"text",e.SUBTITLES))}),h&&f&&(r=r.filter(function(t){var e=t.videoCodec;return!!e})),r=r.filter(function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||l.isCodecSupportedInMp4(e,"audio"))&&(!r||l.isCodecSupportedInMp4(r,"video"))}),t.audioTracks&&(n=t.audioTracks.filter(function(t){return!t.audioCodec||l.isCodecSupportedInMp4(t.audioCodec,"audio")}),n.forEach(function(t,e){t.id=e})),r.length>0){e=r[0].bitrate,r.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=r;for(var p=0;p<r.length;p++)if(r[p].bitrate===e){this._firstLevel=p,s.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+e);break}this.hls.trigger(a.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:t.stats,audio:f,video:h,altAudio:n.some(function(t){return!!t.url})})}else this.hls.trigger(a.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))},enumerable:!0,configurable:!0}),e.prototype.setLevelInternal=function(t){var e=this._levels,r=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){s.logger.log("switching to level "+t),this.currentLevelIndex=t;var n=e[t];n.level=t,r.trigger(a.default.LEVEL_SWITCHING,n)}var i=e[t],o=i.details;if(!o||o.live){var l=i.urlId;r.trigger(a.default.LEVEL_LOADING,{url:i.url[l],level:t,id:l})}}else r.trigger(a.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(e.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),t!==-1&&(this.level=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(t){this._firstLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t},enumerable:!0,configurable:!0}),e.prototype.onError=function(t){if(t.fatal)return void(t.type===u.ErrorTypes.NETWORK_ERROR&&this.clearTimer());var e,r=!1,n=!1;switch(t.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,n=!0;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,r=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,r=!0}void 0!==e&&this.recoverLevel(t,e,r,n)},e.prototype.recoverLevel=function(t,e,r,n){var i,a,o,u=this,l=this.hls.config,c=t.details,d=this._levels[e];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return s.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return u.loadLevel()},a),t.levelRetry=!0,this.levelRetryCount++,s.logger.warn("level controller, "+c+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&(i=d.url.length,i>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,s.logger.warn("level controller, "+c+" for level "+e+": switching to redundant URL-id "+d.urlId)):this.manualLevelIndex===-1?(o=0===e?this._levels.length-1:e-1,s.logger.warn("level controller, "+c+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):n&&(s.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var r=this._levels[e.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,r=t.level,n=t.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var a=c.computeReloadInterval(i.details,n,t.stats.trequest);s.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},a)}else this.clearTimer()}},e.prototype.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===e){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},e.prototype.loadLevel=function(){if(s.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var e=this.currentLevelIndex,r=t.urlId,n=t.url[r];s.logger.log("Attempt loading level index "+e+" with URL-id "+r),this.hls.trigger(a.default.LEVEL_LOADING,{url:n,level:e,id:r})}}},Object.defineProperty(e.prototype,"nextLoadLevel",{get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)},enumerable:!0,configurable:!0}),e}(o.default));e.default=d},"./src/controller/level-helper.js":/*!****************************************!*\
	  !*** ./src/controller/level-helper.js ***!
	  \****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){function n(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}}function i(e,r,n){var i=e[r],a=e[n],o=a.startPTS;t.isFinite(o)?n>r?(i.duration=o-i.start,i.duration<0&&d.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(a.duration=i.start-o,a.duration<0&&d.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):n>r?a.start=i.start+i.duration:a.start=Math.max(i.start-a.duration,0)}function a(e,r,n,a,o,s){var u=n;if(t.isFinite(r.startPTS)){var l=Math.abs(r.startPTS-n);t.isFinite(r.deltaPTS)?r.deltaPTS=Math.max(l,r.deltaPTS):r.deltaPTS=l,u=Math.max(n,r.startPTS),n=Math.min(n,r.startPTS),a=Math.max(a,r.endPTS),o=Math.min(o,r.startDTS),s=Math.max(s,r.endDTS)}var c=n-r.start;r.start=r.startPTS=n,r.maxStartPTS=u,r.endPTS=a,r.startDTS=o,r.endDTS=s,r.duration=a-n;var d=r.sn;if(!e||d<e.startSN||d>e.endSN)return 0;var h,f,p;for(h=d-e.startSN,f=e.fragments,f[h]=r,p=h;p>0;p--)i(f,p,p-1);for(p=h;p<f.length-1;p++)i(f,p,p+1);return e.PTSKnown=!0,c}function o(e,r){r.initSegment&&e.initSegment&&(r.initSegment=e.initSegment);var n,i=0;if(u(e,r,function(e,a){i=e.cc-a.cc,t.isFinite(e.startPTS)&&(a.start=a.startPTS=e.startPTS,a.endPTS=e.endPTS,a.duration=e.duration,a.backtracked=e.backtracked,a.dropped=e.dropped,n=a),r.PTSKnown=!0}),r.PTSKnown){if(i){d.logger.log("discontinuity sliding from playlist, take drift into account");for(var o=r.fragments,s=0;s<o.length;s++)o[s].cc+=i}n?a(r,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):l(e,r),r.PTSKnown=e.PTSKnown}}function s(t,e,r){void 0===r&&(r=0);var n=-1;u(t,e,function(t,e,r){e.start=t.start,n=r});var i=e.fragments;if(n<0)return void i.forEach(function(t){t.start+=r});for(var a=n+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}function u(t,e,r){if(t&&e)for(var n=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,o=n;o<=i;o++){var s=t.fragments[a+o],u=e.fragments[o];if(!s||!u)break;r(s,u,o)}}function l(t,e){var r=e.startSN-t.startSN,n=t.fragments,i=e.fragments;if(!(r<0||r>n.length))for(var a=0;a<i.length;a++)i[a].start+=n[r].start}function c(t,e,r){var n=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),i=n/2;return t&&e.endSN===t.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}Object.defineProperty(e,"__esModule",{value:!0});var d=r(/*! ../utils/logger */"./src/utils/logger.js");e.addGroupId=n,e.updatePTS=i,e.updateFragPTSDTS=a,e.mergeDetails=o,e.mergeSubtitlePlaylists=s,e.mapFragmentIntersection=u,e.adjustSliding=l,e.computeReloadInterval=c}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":/*!*********************************************!*\
	  !*** ./src/controller/stream-controller.js ***!
	  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../utils/binary-search */"./src/utils/binary-search.js"),a=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),o=r(/*! ../demux/demuxer */"./src/demux/demuxer.js"),s=r(/*! ../events */"./src/events.js"),u=r(/*! ./fragment-tracker */"./src/controller/fragment-tracker.js"),l=r(/*! ../loader/fragment */"./src/loader/fragment.js"),c=r(/*! ../loader/playlist-loader */"./src/loader/playlist-loader.js"),d=r(/*! ./level-helper */"./src/controller/level-helper.js"),h=r(/*! ../utils/time-ranges */"./src/utils/time-ranges.js"),f=r(/*! ../errors */"./src/errors.js"),p=r(/*! ../utils/logger */"./src/utils/logger.js"),m=r(/*! ../utils/discontinuities */"./src/utils/discontinuities.js"),g=r(/*! ./fragment-finders */"./src/controller/fragment-finders.js"),v=r(/*! ./gap-controller */"./src/controller/gap-controller.js"),y=r(/*! ./base-stream-controller */"./src/controller/base-stream-controller.js"),_=100,b=function(e){function r(t,r){var n=e.call(this,t,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.MANIFEST_LOADING,s.default.MANIFEST_PARSED,s.default.LEVEL_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_LOAD_EMERGENCY_ABORTED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_SWITCHED,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED)||this;return n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=y.State.STOPPED,n.stallReported=!1,n.gapController=null,n}return n(r,e),r.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(_),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;n===-1&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}e>0&&t===-1&&(p.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=y.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=y.State.STOPPED},r.prototype.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},r.prototype.doTick=function(){switch(this.state){case y.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case y.State.IDLE:this._doTickIdle();break;case y.State.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=y.State.IDLE);break;case y.State.FRAG_LOADING_WAITING_RETRY:var e=window.performance.now(),r=this.retryDate;(!r||e>=r||this.media&&this.media.seeking)&&(p.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=y.State.IDLE);break;case y.State.ERROR:case y.State.STOPPED:case y.State.FRAG_LOADING:case y.State.PARSING:case y.State.PARSED:case y.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var t=this.hls,e=t.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&e.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=t.nextLoadLevel,o=this.levels[i];if(o){var u,l=o.bitrate;u=l?Math.max(8*e.maxBufferSize/l,e.maxBufferLength):e.maxBufferLength,u=Math.min(u,e.maxMaxBufferLength);var c=a.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,e.maxBufferHole),d=c.len;if(!(d>=u)){p.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+u.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=i;var h=o.details;if(!h||h.live&&this.levelLastLoaded!==i)return void(this.state=y.State.WAITING_LEVEL);if(this._streamEnded(c,h)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(s.default.BUFFER_EOS,f),void(this.state=y.State.ENDED)}this._fetchPayloadOrEos(n,c,h)}}}},r.prototype._fetchPayloadOrEos=function(t,e,r){var n=this.fragPrevious,i=this.level,a=r.fragments,o=a.length;if(0!==o){var s,u=a[0].start,l=a[o-1].start+a[o-1].duration,c=e.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(o<d)return void p.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+d);if(s=this._ensureFragmentAtLivePoint(r,c,u,l,n,a,o),null===s)return}else c<u&&(s=a[0]);s||(s=this._findFragment(u,n,o,a,c,l,r)),s&&(s.encrypted?(p.logger.log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(s)):(p.logger.log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+t.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(s)))}},r.prototype._ensureFragmentAtLivePoint=function(t,e,r,n,a,o,s){var u,l=this.hls.config,c=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(r-l.maxFragLookUpTolerance,n-d)){var h=this.liveSyncPosition=this.computeLivePosition(r,t);p.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),e=h,c&&c.readyState&&c.duration>h&&(c.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&e>n&&c&&c.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(a)if(t.hasProgramDateTime)p.logger.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),u=g.findFragmentByPDT(o,a.endProgramDateTime,l.maxFragLookUpTolerance);else{var f=a.sn+1;if(f>=t.startSN&&f<=t.endSN){var m=o[f-t.startSN];a.cc===m.cc&&(u=m,p.logger.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=i.default.search(o,function(t){return a.cc-t.cc}),u&&p.logger.log("live playlist, switching playlist, load frag with same CC: "+u.sn))}u||(u=o[Math.min(s-1,Math.round(s/2))],p.logger.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},r.prototype._findFragment=function(t,e,r,n,i,a,o){var s,u=this.hls.config;if(i<a){var l=i>a-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance;s=g.findFragmentByPTS(e,n,i,l)}else s=n[r-1];if(s){var c=s.sn-o.startSN,d=e&&s.level===e.level,h=n[c-1],f=n[c+1];if(e&&s.sn===e.sn)if(d&&!s.backtracked)if(s.sn<o.endSN){var m=e.deltaPTS;m&&m>u.maxBufferHole&&e.dropped&&c?(s=h,p.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=f,p.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(f&&f.backtracked?(p.logger.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+f.sn),s=f):(p.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,h?(s=h,s.backtracked=!0):c&&(s=null)))}return s},r.prototype._loadKey=function(t){this.state=y.State.KEY_LOADING,this.hls.trigger(s.default.KEY_LOADING,{frag:t})},r.prototype._loadFragment=function(e){var r=this.fragmentTracker.getState(e);this.fragCurrent=e,this.startFragRequested=!0,t.isFinite(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||r===u.FragmentState.NOT_LOADED||r===u.FragmentState.PARTIAL?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(s.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new o.default(this.hls,"main")),this.state=y.State.FRAG_LOADING):r===u.FragmentState.APPENDING&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(t){if(this.state!==t){var e=this.state;this._state=t,p.logger.log("main stream:"+e+"->"+t),this.hls.trigger(s.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},enumerable:!0,configurable:!0}),r.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,c.default.LevelType.MAIN)},Object.defineProperty(r.prototype,"currentLevel",{get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nextBufferedFrag",{get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null},enumerable:!0,configurable:!0}),r.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},Object.defineProperty(r.prototype,"nextLevel",{get:function(){var t=this.nextBufferedFrag;return t?t.level:-1},enumerable:!0,configurable:!0}),r.prototype._checkFragmentChanged=function(){var t,e,r=this.media;if(r&&r.readyState&&r.seeking===!1&&(e=r.currentTime,e>this.lastCurrentTime&&(this.lastCurrentTime=e),a.BufferHelper.isBuffered(r,e)?t=this.getBufferedFrag(e):a.BufferHelper.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(s.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(s.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.prototype.immediateLevelSwitch=function(){if(p.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,r=void 0;e?(r=e.paused,e.pause()):r=!0,this.previouslyPaused=r}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,t.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,a.BufferHelper.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},r.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var r=void 0,n=void 0,i=void 0;if(n=this.getBufferedFrag(e.currentTime),n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)r=0;else{var a=this.hls.nextLoadLevel,o=this.levels[a],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*s)+1:0}if(i=this.getBufferedFrag(e.currentTime+r),i&&(i=this.followingBufferedFrag(i))){var u=this.fragCurrent;u&&u.loader&&u.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,t.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(t,e){this.state=y.State.BUFFER_FLUSHING;var r={startOffset:t,endOffset:e};this.altAudio&&(r.type="video"),this.hls.trigger(s.default.BUFFER_FLUSHING,r)},r.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new v.default(r,e,this.fragmentTracker,this.hls)},r.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(p.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeked=function(){var e=this.media,r=e?e.currentTime:void 0;t.isFinite(r)&&p.logger.log("media seeked to "+r.toFixed(3)),this.tick()},r.prototype.onManifestLoading=function(){p.logger.log("trigger BUFFER_RESET"),this.hls.trigger(s.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(t){var e,r=!1,n=!1;t.levels.forEach(function(t){e=t.audioCodec,e&&(e.indexOf("mp4a.40.2")!==-1&&(r=!0),e.indexOf("mp4a.40.5")!==-1&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&p.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.prototype.onLevelLoaded=function(e){var r=e.details,n=e.level,i=this.levels[this.levelLastLoaded],a=this.levels[n],o=r.totalduration,u=0;if(p.logger.log("level "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+o),r.live){var l=a.details;l&&r.fragments.length>0?(d.mergeDetails(l,r),u=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(u,l),r.PTSKnown&&t.isFinite(u)?p.logger.log("live playlist sliding:"+u.toFixed(3)):(p.logger.log("live playlist - outdated PTS, unknown sliding"),m.alignStream(this.fragPrevious,i,r))):(p.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,m.alignStream(this.fragPrevious,i,r))}else r.PTSKnown=!1;if(a.details=r,this.levelLastLoaded=n,this.hls.trigger(s.default.LEVEL_UPDATED,{details:r,level:n}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var c=r.startTimeOffset;t.isFinite(c)?(c<0&&(p.logger.log("negative start time offset "+c+", count from end of last fragment"),c=u+o+c),p.logger.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):r.live?(this.startPosition=this.computeLivePosition(u,r),p.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===y.State.WAITING_LEVEL&&(this.state=y.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===y.State.KEY_LOADING&&(this.state=y.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(t){var e=this,r=e.fragCurrent,n=e.hls,i=e.levels,a=e.media,u=t.frag;if(this.state===y.State.FRAG_LOADING&&r&&"main"===u.type&&u.level===r.level&&u.sn===r.sn){var l=t.stats,c=i[r.level],d=c.details;if(this.bitrateTest=!1,this.stats=l,p.logger.log("Loaded "+r.sn+" of ["+d.startSN+" ,"+d.endSN+"],level "+r.level),u.bitrateTest&&n.nextLoadLevel)this.state=y.State.IDLE,this.startFragRequested=!1,l.tparsed=l.tbuffered=window.performance.now(),n.trigger(s.default.FRAG_BUFFERED,{stats:l,frag:r,id:"main"}),this.tick();else if("initSegment"===u.sn)this.state=y.State.IDLE,l.tparsed=l.tbuffered=window.performance.now(),d.initSegment.data=t.payload,n.trigger(s.default.FRAG_BUFFERED,{stats:l,frag:r,id:"main"}),this.tick();else{p.logger.log("Parsing "+r.sn+" of ["+d.startSN+" ,"+d.endSN+"],level "+r.level+", cc "+r.cc),this.state=y.State.PARSING,this.pendingBuffering=!0,this.appended=!1,u.bitrateTest&&(u.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:u}));var h=!(a&&a.seeking)&&(d.PTSKnown||!d.live),f=d.initSegment?d.initSegment.data:[],m=this._getAudioCodec(c),g=this.demuxer=this.demuxer||new o.default(this.hls,"main");g.push(t.payload,f,m,c.videoCodec,r,d.totalduration,h)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===y.State.PARSING){var n=t.tracks,i=void 0,a=void 0;if(n.audio&&this.altAudio&&delete n.audio,a=n.audio){var o=this.levels[this.level].audioCodec,u=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),o=o.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&u.indexOf("firefox")===-1&&(o="mp4a.40.5"),u.indexOf("android")!==-1&&"audio/mpeg"!==a.container&&(o="mp4a.40.2",p.logger.log("Android: force audio codec to "+o)),a.levelCodec=o,a.id=t.id}a=n.video,a&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=t.id),this.hls.trigger(s.default.BUFFER_CODECS,n);for(i in n){a=n[i],p.logger.log("main track:"+i+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var l=a.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(e){var r=this,n=this.fragCurrent,i=e.frag;if(n&&"main"===e.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===y.State.PARSING){var a=this.levels[this.level],o=n;if(t.isFinite(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),e.hasAudio===!0&&o.addElementaryStream(l.default.ElementaryStreamTypes.AUDIO),e.hasVideo===!0&&o.addElementaryStream(l.default.ElementaryStreamTypes.VIDEO),p.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped)if(o.backtracked)p.logger.warn("Already backtracked on this fragment, appending with the gap",o.sn);else{var u=a.details;if(!u||o.sn!==u.startSN)return p.logger.warn("missing video frame(s), backtracking fragment",o.sn),this.fragmentTracker.removeFragment(o),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=y.State.IDLE,this.fragPrevious=o,void this.tick();p.logger.warn("missing video frame(s) on first frag, appending with gap",o.sn)}else o.backtracked=!1;var c=d.updateFragPTSDTS(a.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),h=this.hls;h.trigger(s.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:c,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(t){t&&t.length&&r.state===y.State.PARSING&&(r.appended=!0,r.pendingBuffering=!0,h.trigger(s.default.BUFFER_APPENDING,{type:e.type,data:t,parent:"main",content:"data"}))}),this.tick()}},r.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===y.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=y.State.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(e){var r=!!e.url,n=e.id;if(!r){if(this.mediaBuffer!==this.media){p.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(p.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=y.State.IDLE}var a=this.hls;a.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:t.POSITIVE_INFINITY,type:"audio"}),a.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(t){var e=t.id,r=!!this.hls.audioTracks[e].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(p.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.prototype.onBufferCreated=function(t){var e,r,n=t.tracks,i=!1;for(var a in n){var o=n[a];"main"===o.id?(r=a,e=o,"video"===a&&(this.videoBuffer=n[a].buffer)):i=!0}i&&e?(p.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==y.State.PARSING&&e!==y.State.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==y.State.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;p.logger.log("main buffered : "+h.default.toString(e.buffered)),this.fragPrevious=t;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(s.default.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.state=y.State.IDLE}this.tick()}},r.prototype.onError=function(e){var r=e.frag||this.fragCurrent;if(!r||"main"===r.type){var n=!!this.media&&a.BufferHelper.isBuffered(this.media,this.media.currentTime)&&a.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);p.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=y.State.FRAG_LOADING_WAITING_RETRY}else p.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=y.State.ERROR;break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==y.State.ERROR&&(e.fatal?(this.state=y.State.ERROR,p.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==y.State.WAITING_LEVEL||(this.state=y.State.IDLE));break;case f.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==y.State.PARSING&&this.state!==y.State.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=y.State.IDLE):(p.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,t.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,p.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=this.mediaBuffer?this.mediaBuffer:t,r=e.buffered;!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,r)}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=y.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(l.default.ElementaryStreamTypes.VIDEO,t.buffered),this.state=y.State.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)},r.prototype._seekToStartPos=function(){var t=this.media,e=t.currentTime,r=t.seeking?e:this.startPosition;e!==r&&(p.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+e+" "),t.currentTime=r)},r.prototype._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),e&&(e=e.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),e},Object.defineProperty(r.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t},enumerable:!0,configurable:!0}),r}(y.default);e.default=b}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":/*!******************************************************!*\
	  !*** ./src/controller/subtitle-stream-controller.js ***!
	  \******************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../utils/logger */"./src/utils/logger.js"),o=r(/*! ../crypt/decrypter */"./src/crypt/decrypter.js"),s=r(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.js"),u=r(/*! ./fragment-finders */"./src/controller/fragment-finders.js"),l=r(/*! ./fragment-tracker */"./src/controller/fragment-tracker.js"),c=r(/*! ./base-stream-controller */"./src/controller/base-stream-controller.js"),d=r(/*! ./level-helper */"./src/controller/level-helper.js"),h=window.performance,f=500,p=function(t){function e(e,r){var n=t.call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.ERROR,i.default.KEY_LOADED,i.default.FRAG_LOADED,i.default.SUBTITLE_TRACKS_UPDATED,i.default.SUBTITLE_TRACK_SWITCH,i.default.SUBTITLE_TRACK_LOADED,i.default.SUBTITLE_FRAG_PROCESSED,i.default.LEVEL_UPDATED)||this;return n.fragmentTracker=r,n.config=e.config,n.state=c.State.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new o.default(e,e.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(n),n}return n(e,t),e.prototype.onSubtitleFragProcessed=function(t){var e=t.frag,r=t.success;if(this.fragPrevious=e,this.state=c.State.IDLE,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,a=e.start,o=0;o<n.length;o++)if(a>=n[o].start&&a<=n[o].end){i=n[o];break}var s=e.start+e.duration;i?i.end=s:(i={start:a,end:s},n.push(i))}}},e.prototype.onMediaAttached=function(t){var e=t.media;this.media=e,e.addEventListener("seeking",this._onMediaSeeking),this.state=c.State.IDLE},e.prototype.onMediaDetaching=function(){this.media.removeEventListener("seeking",this._onMediaSeeking),this.media=null,this.state=c.State.STOPPED},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.state=c.State.IDLE)},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;a.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach(function(t){e.tracksBuffered[t.id]=[]})},e.prototype.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,!this.tracks||this.currentTrackId===-1)return void this.clearInterval();var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(f)},e.prototype.onSubtitleTrackLoaded=function(t){var e=t.id,r=t.details,n=this,i=n.currentTrackId,a=n.tracks,o=a[i];e>=a.length||e!==i||!o||(r.live&&d.mergeSubtitlePlaylists(o.details,r,this.lastAVStart),o.details=r,this.setInterval(f))},e.prototype.onKeyLoaded=function(){this.state===c.State.KEY_LOADING&&(this.state=c.State.IDLE)},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag.decryptdata,n=t.frag,a=this.hls;if(this.state===c.State.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var o=h.now();this.decrypter.decrypt(t.payload,r.key.buffer,r.iv.buffer,function(t){var e=h.now();a.trigger(i.default.FRAG_DECRYPTED,{frag:n,payload:t,stats:{tstart:o,tdecrypt:e}})})}},e.prototype.onLevelUpdated=function(t){var e=t.details,r=e.fragments;this.lastAVStart=r.length?r[0].start:0},e.prototype.doTick=function(){if(!this.media)return void(this.state=c.State.IDLE);switch(this.state){case c.State.IDLE:var t=this,e=t.config,r=t.currentTrackId,n=t.fragmentTracker,o=t.media,d=t.tracks;if(!d||!d[r]||!d[r].details)break;var h=e.maxBufferHole,f=e.maxFragLookUpTolerance,p=Math.min(e.maxBufferLength,e.maxMaxBufferLength),m=s.BufferHelper.bufferedInfo(this._getBuffered(),o.currentTime,h),g=m.end,v=m.len,y=d[r].details,_=y.fragments,b=_.length,E=_[b-1].start+_[b-1].duration;if(v>p)return;var A=void 0,T=this.fragPrevious;g<E?(T&&y.hasProgramDateTime&&(A=u.findFragmentByPDT(_,T.endProgramDateTime,f)),A||(A=u.findFragmentByPTS(T,_,g,f))):A=_[b-1],A&&A.encrypted?(a.logger.log("Loading key for "+A.sn),this.state=c.State.KEY_LOADING,this.hls.trigger(i.default.KEY_LOADING,{frag:A})):A&&n.getState(A)===l.FragmentState.NOT_LOADED&&(this.fragCurrent=A,this.state=c.State.FRAG_LOADING,this.hls.trigger(i.default.FRAG_LOADING,{frag:A}))}},e.prototype.stopLoad=function(){this.lastAVStart=0,t.prototype.stopLoad.call(this)},e.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},e.prototype.onMediaSeeking=function(){this.fragPrevious=null},e}(c.default);e.SubtitleStreamController=p},"./src/controller/subtitle-track-controller.js":/*!*****************************************************!*\
	  !*** ./src/controller/subtitle-track-controller.js ***!
	  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){function n(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];"subtitles"===n.kind&&n.label&&e.push(t[r])}return e}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! ../events */"./src/events.js"),o=r(/*! ../event-handler */"./src/event-handler.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=r(/*! ./level-helper */"./src/controller/level-helper.js"),l=function(e){function r(t){var r=e.call(this,t,a.default.MEDIA_ATTACHED,a.default.MEDIA_DETACHING,a.default.MANIFEST_LOADED,a.default.SUBTITLE_TRACK_LOADED)||this;return r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r}return i(r,e),r.prototype.destroy=function(){o.default.prototype.destroy.call(this)},r.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},r.prototype.onManifestLoaded=function(t){var e=this,r=t.subtitles||[];this.tracks=r,this.hls.trigger(a.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},r.prototype.onSubtitleTrackLoaded=function(t){var e=this,r=t.id,n=t.details,i=this,a=i.trackId,o=i.tracks,l=o[a];if(r>=o.length||r!==a||!l||this.stopped)return void this._clearReloadTimer();if(s.logger.log("subtitle track "+r+" loaded"),n.live){var c=u.computeReloadInterval(l.details,n,t.stats.trequest);s.logger.log("Reloading live subtitle playlist in "+c+"ms"),this.timer=setTimeout(function(){e._loadCurrentTrack()},c)}else this._clearReloadTimer()},r.prototype.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.prototype.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},Object.defineProperty(r.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))},enumerable:!0,configurable:!0}),r.prototype._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype._loadCurrentTrack=function(){var t=this,e=t.trackId,r=t.tracks,n=t.hls,i=r[e];e<0||!i||i.details&&!i.details.live||(s.logger.log("Loading subtitle track "+e),n.trigger(a.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:e}))},r.prototype._toggleTrackModes=function(t){var e=this,r=e.media,i=e.subtitleDisplay,a=e.trackId;if(r){var o=n(r.textTracks);if(t===-1)[].slice.call(o).forEach(function(t){t.mode="disabled"});else{var s=o[a];s&&(s.mode="disabled")}var u=o[t];u&&(u.mode=i?"showing":"hidden")}},r.prototype._setSubtitleTrackInternal=function(e){var r=this,n=r.hls,i=r.tracks;!t.isFinite(e)||e<-1||e>=i.length||(this.trackId=e,s.logger.log("Switching to subtitle track "+e),n.trigger(a.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},r.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=n(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack=t}},r}(o.default);e.default=l}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/controller/timeline-controller.js":/*!***********************************************!*\
	  !*** ./src/controller/timeline-controller.js ***!
	  \***********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){function n(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function i(t,e,r,n){return Math.min(e,n)-Math.max(t,r)}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(/*! ../events */"./src/events.js"),s=r(/*! ../event-handler */"./src/event-handler.js"),u=r(/*! ../utils/cea-608-parser */"./src/utils/cea-608-parser.js"),l=r(/*! ../utils/output-filter */"./src/utils/output-filter.js"),c=r(/*! ../utils/webvtt-parser */"./src/utils/webvtt-parser.js"),d=r(/*! ../utils/logger */"./src/utils/logger.js"),h=r(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.js"),f=function(e){function r(t){var r=e.call(this,t,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_USERDATA,o.default.FRAG_DECRYPTED,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.FRAG_LOADED,o.default.LEVEL_SWITCHING,o.default.INIT_PTS_FOUND)||this;if(r.hls=t,r.config=t.config,r.enabled=!0,r.Cues=t.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new l.default(r,"textTrack1"),i=new l.default(r,"textTrack2");r.cea608Parser=new u.default(0,n,i)}return r}return a(r,e),r.prototype.addCues=function(t,e,r,n){for(var a=this.cueRanges,o=!1,s=a.length;s--;){var u=a[s],l=i(u[0],u[1],e,r);if(l>=0&&(u[0]=Math.min(u[0],e),u[1]=Math.max(u[1],r),o=!0,l/(r-e)>.5))return}o||a.push([e,r]),this.Cues.newCue(this.captionsTracks[t],e,r,n)},r.prototype.onInitPtsFound=function(t){var e=this;if("main"===t.id&&(this.initPTS[t.frag.cc]=t.initPTS),this.unparsedVttFrags.length){var r=this.unparsedVttFrags;this.unparsedVttFrags=[],r.forEach(function(t){e.onFragLoaded(t)})}},r.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var n=e.textTracks[r];if(n[t])return n}return null},r.prototype.createCaptionsTrack=function(t){var e=this.captionsProperties[t],r=e.label,n=e.languageCode,i=this.captionsTracks;if(!i[t]){var a=this.getExistingTrack(t);if(a)i[t]=a,h.clearCurrentCues(i[t]),h.sendAddTrackEvent(i[t],this.media);else{var o=this.createTextTrack("captions",r,n);o&&(o[t]=!0,i[t]=o)}}},r.prototype.createTextTrack=function(t,e,r){var n=this.media;if(n)return n.addTextTrack(t,e,r)},r.prototype.destroy=function(){s.default.prototype.destroy.call(this)},r.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},r.prototype.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){h.clearCurrentCues(t[e]),delete t[e]})},r.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)h.clearCurrentCues(e[r])}},r.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,i){var a;if(i<r.length){for(var o=null,s=0;s<r.length;s++)if(n(r[s],t)){o=r[s];break}o&&(a=o)}a||(a=e.createTextTrack("subtitles",t.name,t.lang)),t.default?a.mode=e.hls.subtitleDisplay?"showing":"hidden":a.mode="disabled",e.textTracks.push(a)})}},r.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},r.prototype.onFragLoaded=function(e){var r=e.frag,n=e.payload;if("main"===r.type){var i=r.sn;if(i!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=i}else if("subtitle"===r.type)if(n.byteLength){if(!t.isFinite(this.initPTS[r.cc]))return this.unparsedVttFrags.push(e),void(this.initPTS.length&&this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r}));var s=r.decryptdata;null!=s&&null!=s.key&&"AES-128"===s.method||this._parseVTTs(r,n)}else this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})},r.prototype._parseVTTs=function(t,e){var r=this.vttCCs;r[t.cc]||(r[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var n=this.textTracks,i=this.hls;c.default.parse(e,this.initPTS[t.cc],r,t.cc,function(e){var r=n[t.level];return"disabled"===r.mode?void i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}):(e.forEach(function(t){if(!r.cues.getCueById(t.id))try{r.addCue(t)}catch(n){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,r.addCue(e)}}),void i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t}))},function(e){d.logger.log("Failed to parse VTT cue: "+e),i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},r.prototype.onFragDecrypted=function(e){var r=e.payload,n=e.frag;if("subtitle"===n.type){if(!t.isFinite(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(n,r)}},r.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var r=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,r)}},r.prototype.extractCea608Data=function(t){for(var e,r,n,i,a,o=31&t[0],s=2,u=[],l=0;l<o;l++)e=t[s++],r=127&t[s++],n=127&t[s++],i=0!==(4&e),a=3&e,0===r&&0===n||i&&0===a&&(u.push(r),u.push(n));return u},r}(s.default);e.default=f}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":/*!*********************************!*\
	  !*** ./src/crypt/aes-crypto.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}();e.default=n},"./src/crypt/aes-decryptor.js":/*!************************************!*\
	  !*** ./src/crypt/aes-decryptor.js ***!
	  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(t){var e=t.byteLength,r=e&&new DataView(t).getUint8(e-1);return r?t.slice(0,e-r):t}Object.defineProperty(e,"__esModule",{value:!0}),e.removePadding=n;var i=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),n=0;n<4;n++)r[n]=e.getUint32(4*n);return r},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,n=r[0],i=r[1],a=r[2],o=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,m=0;for(m=0;m<256;m++)m<128?h[m]=m<<1:h[m]=m<<1^283;for(m=0;m<256;m++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,t[f]=g,e[g]=f;var v=h[f],y=h[v],_=h[y],b=257*h[g]^16843008*g;n[f]=b<<24|b>>>8,i[f]=b<<16|b>>>16,a[f]=b<<8|b>>>24,o[f]=b,b=16843009*_^65537*y^257*v^16843008*f,u[g]=b<<24|b>>>8,l[g]=b<<16|b>>>16,c[g]=b<<8|b>>>24,d[g]=b,f?(f=v^h[h[h[_^v]]],p^=h[h[p]]):f=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,n=0;n<e.length&&r;)r=e[n]===this.key[n],n++;if(!r){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),h=this.sBox,f=this.rcon,p=this.invSubMix,m=p[0],g=p[1],v=p[2],y=p[3];for(a=0;a<l;a++)a<i?s=c[a]=e[a]:(u=s,a%i===0?(u=u<<8|u>>>24,u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u],u^=f[a/i|0]<<24):i>6&&a%i===4&&(u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u]),c[a]=s=(c[a-i]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],o<4||a<=4?d[o]=u:d[o]=m[h[u>>>24]]^g[h[u>>>16&255]]^v[h[u>>>8&255]]^y[h[255&u]],d[o]=d[o]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,r,i){for(var a,o,s,u,l,c,d,h,f,p,m,g,v,y,_=this.keySize+6,b=this.invKeySchedule,E=this.invSBox,A=this.invSubMix,T=A[0],S=A[1],w=A[2],C=A[3],k=this.uint8ArrayToUint32Array_(r),L=k[0],D=k[1],P=k[2],I=k[3],R=new Int32Array(t),O=new Int32Array(R.length),x=this.networkToHostOrderSwap;e<R.length;){for(f=x(R[e]),p=x(R[e+1]),m=x(R[e+2]),g=x(R[e+3]),l=f^b[0],c=g^b[1],d=m^b[2],h=p^b[3],v=4,y=1;y<_;y++)a=T[l>>>24]^S[c>>16&255]^w[d>>8&255]^C[255&h]^b[v],o=T[c>>>24]^S[d>>16&255]^w[h>>8&255]^C[255&l]^b[v+1],s=T[d>>>24]^S[h>>16&255]^w[l>>8&255]^C[255&c]^b[v+2],u=T[h>>>24]^S[l>>16&255]^w[c>>8&255]^C[255&d]^b[v+3],l=a,c=o,d=s,h=u,v+=4;a=E[l>>>24]<<24^E[c>>16&255]<<16^E[d>>8&255]<<8^E[255&h]^b[v],o=E[c>>>24]<<24^E[d>>16&255]<<16^E[h>>8&255]<<8^E[255&l]^b[v+1],s=E[d>>>24]<<24^E[h>>16&255]<<16^E[l>>8&255]<<8^E[255&c]^b[v+2],u=E[h>>>24]<<24^E[l>>16&255]<<16^E[c>>8&255]<<8^E[255&d]^b[v+3],v+=3,O[e]=x(a^L),O[e+1]=x(u^D),O[e+2]=x(s^P),O[e+3]=x(o^I),L=f,D=p,P=m,I=g,e+=4}return i?n(O.buffer):O.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}();e.default=i},"./src/crypt/decrypter.js":/*!********************************!*\
	  !*** ./src/crypt/decrypter.js ***!
	  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ./aes-crypto */"./src/crypt/aes-crypto.js"),i=r(/*! ./fast-aes-key */"./src/crypt/fast-aes-key.js"),a=r(/*! ./aes-decryptor */"./src/crypt/aes-decryptor.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=r(/*! ../events */"./src/events.js"),l=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),c=l.getSelfScope(),d=function(){function t(t,e,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=i,i)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,r,o){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new a.default),l.expandKey(e),o(l.decrypt(t,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new i.default(c,e)),this.fastAesKey.expandKey().then(function(i){var a=new n.default(c,r);a.decrypt(t,i).catch(function(n){u.onWebCryptoError(n,t,e,r,o)}).then(function(t){o(t)})}).catch(function(n){u.onWebCryptoError(n,t,e,r,o)})}},t.prototype.onWebCryptoError=function(t,e,r,n,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,n,i)):(s.logger.error("decrypting error : "+t.message),this.observer.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.default=d},"./src/crypt/fast-aes-key.js":/*!***********************************!*\
	  !*** ./src/crypt/fast-aes-key.js ***!
	  \***********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}();e.default=n},"./src/demux/aacdemuxer.js":/*!*********************************!*\
	  !*** ./src/demux/aacdemuxer.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ./adts */"./src/demux/adts.js"),i=r(/*! ../utils/logger */"./src/utils/logger.js"),a=r(/*! ../demux/id3 */"./src/demux/id3.js"),o=function(){function e(t,e,r){this.observer=t,this.config=r,this.remuxer=e}return e.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(t){if(!t)return!1;for(var e=a.default.getID3Data(t,0)||[],r=e.length,o=t.length;r<o;r++)if(n.probe(t,r))return i.logger.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,r,o,s){for(var u=this._audioTrack,l=a.default.getID3Data(e,0)||[],c=a.default.getTimeStamp(l),d=t.isFinite(c)?90*c:9e4*r,h=0,f=d,p=e.length,m=l.length,g=[{pts:f,dts:f,data:l}];m<p-1;)if(n.isHeader(e,m)&&m+5<p){n.initTrackConfig(u,this.observer,e,m,u.manifestCodec);var v=n.appendFrame(u,e,m,d,h);if(!v){i.logger.log("Unable to parse AAC frame");break}m+=v.length,f=v.sample.pts,h++}else a.default.isHeader(e,m)?(l=a.default.getID3Data(e,m),g.push({pts:f,dts:f,data:l}),m+=l.length):m++;this.remuxer.remux(u,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},r,o,s)},e.prototype.destroy=function(){},e}();e.default=o}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/demux/adts.js":/*!***************************!*\
	  !*** ./src/demux/adts.js ***!
	  \***************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(t,e,r,n){var i,a,o,s,u,l=navigator.userAgent.toLowerCase(),c=n,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=((192&e[r+2])>>>6)+1,a=(60&e[r+2])>>>2,a>d.length-1?void t.trigger(m.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a}):(s=(1&e[r+2])<<2,s|=(192&e[r+3])>>>6,f.logger.log("manifest codec:"+n+",ADTS data:type:"+i+",sampleingIndex:"+a+"["+d[a]+"Hz],channelConfig:"+s),/firefox/i.test(l)?a>=6?(i=5,u=new Array(4),o=a-3):(i=2,u=new Array(2),o=a):l.indexOf("android")!==-1?(i=2,u=new Array(2),o=a):(i=5,u=new Array(4),n&&(n.indexOf("mp4a.40.29")!==-1||n.indexOf("mp4a.40.5")!==-1)||!n&&a>=6?o=a-3:((n&&n.indexOf("mp4a.40.2")!==-1&&(a>=6&&1===s||/vivaldi/i.test(l))||!n&&1===s)&&(i=2,u=new Array(2)),o=a)),u[0]=i<<3,u[0]|=(14&a)>>1,u[1]|=(1&a)<<7,u[1]|=s<<3,5===i&&(u[1]|=(14&o)>>1,u[2]=(1&o)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:d[a],channelCount:s,codec:"mp4a.40."+i,manifestCodec:c})}function i(t,e){return 255===t[e]&&240===(246&t[e+1])}function a(t,e){return 1&t[e+1]?7:9}function o(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function s(t,e){return!!(e+1<t.length&&i(t,e))}function u(t,e){if(e+1<t.length&&i(t,e)){var r=a(t,e),n=r;e+5<t.length&&(n=o(t,e));var s=e+n;if(s===t.length||s+1<t.length&&i(t,s))return!0}return!1}function l(t,e,r,i,a){if(!t.samplerate){var o=n(e,r,i,a);t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,f.logger.log("parsed codec:"+t.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function c(t){return 9216e4/t}function d(t,e,r,n,i){var s,u,l,c=t.length;if(s=a(t,e),u=o(t,e),u-=s,u>0&&e+s+u<=c)return l=r+n*i,{headerLength:s,frameLength:u,stamp:l}}function h(t,e,r,n,i){var a=c(t.samplerate),o=d(e,r,n,i,a);if(o){var s=o.stamp,u=o.headerLength,l=o.frameLength,h={unit:e.subarray(r+u,r+u+l),pts:s,dts:s};return t.samples.push(h),t.len+=l,{sample:h,length:l+u}}}Object.defineProperty(e,"__esModule",{value:!0});var f=r(/*! ../utils/logger */"./src/utils/logger.js"),p=r(/*! ../errors */"./src/errors.js"),m=r(/*! ../events */"./src/events.js");e.getAudioConfig=n,e.isHeaderPattern=i,e.getHeaderLength=a,e.getFullFrameLength=o,e.isHeader=s,e.probe=u,e.initTrackConfig=l,e.getFrameDuration=c,e.parseFrameHeader=d,e.appendFrame=h},"./src/demux/demuxer-inline.js":/*!*************************************!*\
	  !*** ./src/demux/demuxer-inline.js ***!
	  \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=r(/*! ../events */"./src/events.js"),a=r(/*! ../errors */"./src/errors.js"),o=r(/*! ../crypt/decrypter */"./src/crypt/decrypter.js"),s=r(/*! ../demux/aacdemuxer */"./src/demux/aacdemuxer.js"),u=r(/*! ../demux/mp4demuxer */"./src/demux/mp4demuxer.js"),l=r(/*! ../demux/tsdemuxer */"./src/demux/tsdemuxer.js"),c=r(/*! ../demux/mp3demuxer */"./src/demux/mp3demuxer.js"),d=r(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.js"),h=r(/*! ../remux/passthrough-remuxer */"./src/remux/passthrough-remuxer.js"),f=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),p=r(/*! ../utils/logger */"./src/utils/logger.js"),m=f.getSelfScope();try{n=m.performance.now.bind(m.performance)}catch(t){p.logger.debug("Unable to use Performance API on this environment"),n=m.Date.now}var g=function(){function t(t,e,r,n){this.observer=t,this.typeSupported=e,this.config=r,this.vendor=n}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,r,a,s,u,l,c,d,h,f,p){var m=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var g=this.decrypter;null==g&&(g=this.decrypter=new o.default(this.observer,this.config));var v=n();g.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var o=n();m.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:o}}),m.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),a,s,u,l,c,d,h,f,p)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),a,s,u,l,c,d,h,f,p)},t.prototype.pushDecrypted=function(t,e,r,n,o,f,p,m,g,v,y,_){var b=this.demuxer;if(!b||(p||m)&&!this.probe(t)){for(var E=this.observer,A=this.typeSupported,T=this.config,S=[{demux:l.default,remux:d.default},{demux:u.default,remux:h.default},{demux:s.default,remux:d.default},{demux:c.default,remux:d.default}],w=0,C=S.length;w<C;w++){var k=S[w],L=k.demux.probe;if(L(t)){var D=this.remuxer=new k.remux(E,T,A,this.vendor);b=new k.demux(E,D,T,A),this.probe=L;break}}if(!b)return void E.trigger(i.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=b}var P=this.remuxer;(p||m)&&(b.resetInitSegment(r,n,o,v),P.resetInitSegment()),p&&(b.resetTimeStamp(_),P.resetTimeStamp(_)),"function"==typeof b.setDecryptData&&b.setDecryptData(e),b.append(t,f,g,y)},t}();e.default=g},"./src/demux/demuxer-worker.js":/*!*************************************!*\
	  !*** ./src/demux/demuxer-worker.js ***!
	  \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),i=r(/*! ../events */"./src/events.js"),a=r(/*! ../utils/logger */"./src/utils/logger.js"),o=r(/*! events */"./node_modules/node-libs-browser/node_modules/events/events.js"),s=function(t){var e=new o.EventEmitter;e.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.emit.apply(e,[t,t].concat(r))},e.off=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.removeListener.apply(e,[t].concat(r))};var r=function(e,r){t.postMessage({event:e,data:r})};t.addEventListener("message",function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new n.default(e,o.typeSupported,s,o.vendor),a.enableLogs(s.debug),r("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),e.on(i.default.FRAG_DECRYPTED,r),e.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),e.on(i.default.FRAG_PARSED,r),e.on(i.default.ERROR,r),e.on(i.default.FRAG_PARSING_METADATA,r),e.on(i.default.FRAG_PARSING_USERDATA,r),e.on(i.default.INIT_PTS_FOUND,r),e.on(i.default.FRAG_PARSING_DATA,function(e,r){var n=[],i={event:e,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),t.postMessage(i,n)})};e.default=s},"./src/demux/demuxer.js":/*!******************************!*\
	  !*** ./src/demux/demuxer.js ***!
	  \******************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! webworkify-webpack */"./node_modules/webworkify-webpack/index.js"),i=r(/*! ../events */"./src/events.js"),a=r(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),o=r(/*! ../utils/logger */"./src/utils/logger.js"),s=r(/*! ../errors */"./src/errors.js"),u=r(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.js"),l=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),c=r(/*! ../observer */"./src/observer.js"),d=l.getSelfScope(),h=u.getMediaSource(),f=function(){function e(t,e){var r=this;this.hls=t,this.id=e;var u=this.observer=new c.Observer,l=t.config,f=function(e,n){n=n||{},n.frag=r.frag,n.id=r.id,t.trigger(e,n)};u.on(i.default.FRAG_DECRYPTED,f),u.on(i.default.FRAG_PARSING_INIT_SEGMENT,f),u.on(i.default.FRAG_PARSING_DATA,f),u.on(i.default.FRAG_PARSED,f),u.on(i.default.ERROR,f),u.on(i.default.FRAG_PARSING_METADATA,f),u.on(i.default.FRAG_PARSING_USERDATA,f),u.on(i.default.INIT_PTS_FOUND,f);var p={mp4:h.isTypeSupported("video/mp4"),mpeg:h.isTypeSupported("audio/mpeg"),mp3:h.isTypeSupported('audio/mp4; codecs="mp3"')},m=navigator.vendor;if(l.enableWorker&&"undefined"!=typeof Worker){o.logger.log("demuxing in webworker");var g=void 0;try{g=this.w=n("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),g.addEventListener("message",this.onwmsg),g.onerror=function(e){t.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},g.postMessage({cmd:"init",typeSupported:p,vendor:m,id:e,config:JSON.stringify(l)})}catch(t){o.logger.warn("Error in worker:",t),o.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),g&&d.URL.revokeObjectURL(g.objectURL),this.demuxer=new a.default(u,p,l,m),this.w=void 0}}else this.demuxer=new a.default(u,p,l,m)}return e.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,r,n,i,a,s,u,l){var c=this.w,d=t.isFinite(a.startPTS)?a.startPTS:a.start,h=a.decryptdata,f=this.frag,p=!(f&&a.cc===f.cc),m=!(f&&a.level===f.level),g=f&&a.sn===f.sn+1,v=!m&&g;if(p&&o.logger.log(this.id+":discontinuity detected"),m&&o.logger.log(this.id+":switch detected"),this.frag=a,c)c.postMessage({cmd:"demux",data:e,decryptdata:h,initSegment:r,audioCodec:n,videoCodec:i,timeOffset:d,discontinuity:p,trackSwitch:m,contiguous:v,duration:s,accurateTimeOffset:u,defaultInitPTS:l},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,h,r,n,i,d,p,m,v,s,u,l)}},e.prototype.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":d.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},e}();e.default=f}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":/*!*********************************!*\
	  !*** ./src/demux/exp-golomb.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../utils/logger */"./src/utils/logger.js"),i=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,n=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");n.set(t.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.prototype.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?r<<e|this.readBits(e):r},t.prototype.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!==(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e,r,n=8,i=8;for(e=0;e<t;e++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i},t.prototype.readSPS=function(){var t,e,r,n,i,a,o,s,u,l=0,c=0,d=0,h=0,f=this.readUByte.bind(this),p=this.readBits.bind(this),m=this.readUEG.bind(this),g=this.readBoolean.bind(this),v=this.skipBits.bind(this),y=this.skipEG.bind(this),_=this.skipUEG.bind(this),b=this.skipScalingList.bind(this);if(f(),t=f(),e=p(5),v(3),r=f(),_(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var E=m();if(3===E&&v(1),_(),_(),v(1),g())for(s=3!==E?8:12,u=0;u<s;u++)g()&&b(u<6?16:64)}_();var A=m();if(0===A)m();else if(1===A)for(v(1),y(),y(),n=m(),u=0;u<n;u++)y();_(),v(1),i=m(),a=m(),o=p(1),0===o&&v(1),v(1),g()&&(l=m(),c=m(),d=m(),h=m());var T=[1,1];if(g()&&g()){var S=f();switch(S){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[f()<<8|f(),f()<<8|f()]}}return{width:Math.ceil(16*(i+1)-2*l-2*c),height:(2-o)*(a+1)*16-(o?2:4)*(d+h),pixelRatio:T}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}();e.default=i},"./src/demux/id3.js":/*!**************************!*\
	  !*** ./src/demux/id3.js ***!
	  \**************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,r){for(var n=r,i=0;t.isHeader(e,r);){i+=10;var a=t._readSize(e,r+6);i+=a,t.isFooter(e,r+10)&&(i+=10),r+=i}if(i>0)return e.subarray(n,n+i)},t._readSize=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},t.getTimeStamp=function(e){for(var r=t.getID3Frames(e),n=0;n<r.length;n++){var i=r[n];if(t.isTimeStampFrame(i))return t._readTimeStamp(i)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var r=String.fromCharCode(e[0],e[1],e[2],e[3]),n=t._readSize(e,4),i=10;return{type:r,size:n,data:e.subarray(i,i+n)}},t.getID3Frames=function(e){for(var r=0,n=[];t.isHeader(e,r);){var i=t._readSize(e,r+6);r+=10;for(var a=r+i;r+8<a;){var o=t._getFrameData(e.subarray(r)),s=t._decodeFrame(o);s&&n.push(s),r+=o.size+10}t.isFooter(e,r)&&(r+=10)}return n},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var r=t._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(r.length+1));return{key:e.type,info:r,data:n.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var r=1,n=t._utf8ArrayToStr(e.data.subarray(r));r+=n.length+1;var i=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:n,data:i}}var a=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:a}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var r=1,n=t._utf8ArrayToStr(e.data.subarray(r));r+=n.length+1;var i=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:n,data:i}}var a=t._utf8ArrayToStr(e.data);return{key:e.type,data:a}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);for(var r,n,i,a=t.length,o="",s=0;s<a;){if(r=t[s++],0===r&&e)return o;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:n=t[s++],o+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=t[s++],i=t[s++],o+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&i)<<0)}}return o},t}(),i=n._utf8ArrayToStr;e.utf8ArrayToStr=i,e.default=n},"./src/demux/mp3demuxer.js":/*!*********************************!*\
	  !*** ./src/demux/mp3demuxer.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../demux/id3 */"./src/demux/id3.js"),i=r(/*! ../utils/logger */"./src/utils/logger.js"),a=r(/*! ./mpegaudio */"./src/demux/mpegaudio.js"),o=function(){function t(t,e,r){this.observer=t,this.config=r,this.remuxer=e}return t.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e,r,o=n.default.getID3Data(t,0);if(o&&void 0!==n.default.getTimeStamp(o))for(e=o.length,r=Math.min(t.length-1,e+100);e<r;e++)if(a.default.probe(t,e))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var o=n.default.getID3Data(t,0),s=n.default.getTimeStamp(o),u=s?90*s:9e4*e,l=o.length,c=t.length,d=0,h=0,f=this._audioTrack,p=[{pts:u,dts:u,data:o}];l<c;)if(a.default.isHeader(t,l)){var m=a.default.appendFrame(f,t,l,u,d);if(!m)break;l+=m.length,h=m.sample.pts,d++}else n.default.isHeader(t,l)?(o=n.default.getID3Data(t,l),p.push({pts:h,dts:h,data:o}),l+=o.length):l++;this.remuxer.remux(f,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},t}();e.default=o},"./src/demux/mp4demuxer.js":/*!*********************************!*\
	  !*** ./src/demux/mp4demuxer.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../utils/logger */"./src/utils/logger.js"),i=r(/*! ../events */"./src/events.js"),a=Math.pow(2,32)-1,o=function(){function t(t,e){this.observer=t,this.remuxer=e}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,r,n,a){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:a?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:a?e:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:a?e:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r},t.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},t.findBox=function(e,r){var n,i,a,o,s,u,l,c=[];if(e.data?(u=e.start,o=e.end,e=e.data):(u=0,o=e.byteLength),!r.length)return null;for(n=u;n<o;)i=t.readUint32(e,n),a=t.bin2str(e.subarray(n+4,n+8)),l=i>1?n+i:o,a===r[0]&&(1===r.length?c.push({data:e,start:n+8,end:l}):(s=t.findBox({data:e,start:n+8,end:l},r.slice(1)),s.length&&(c=c.concat(s)))),n=l;return c},t.parseSegmentIndex=function(e){var r,n=t.findBox(e,["moov"])[0],i=n?n.end:null,a=0,o=t.findBox(e,["sidx"]);if(!o||!o[0])return null;r=[],o=o[0];var s=o.data[0];a=0===s?8:16;var u=t.readUint32(o,a);a+=4;var l=0,c=0;a+=0===s?8:16,a+=2;var d=o.end+c,h=t.readUint16(o,a);a+=2;for(var f=0;f<h;f++){var p=a,m=t.readUint32(o,p);p+=4;var g=2147483647&m,v=(2147483648&m)>>>31;if(1===v)return void console.warn("SIDX has hierarchical references (not supported)");var y=t.readUint32(o,p);p+=4,r.push({referenceSize:g,subsegmentDuration:y,info:{duration:y/u,start:d,end:d+g-1}}),d+=g,p+=4,a=p}return{earliestPresentationTime:l,timescale:u,version:s,referencesCount:h,references:r,moovEndOffset:i}},t.parseInitSegment=function(e){var r=[],i=t.findBox(e,["moov","trak"]);return i.forEach(function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=t.readUint32(i,o),u=t.findBox(e,["mdia","mdhd"])[0];if(u){a=u.data[u.start],o=0===a?12:20;var l=t.readUint32(u,o),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var d=t.bin2str(c.data.subarray(c.start+8,c.start+12)),h={soun:"audio",vide:"video"}[d];if(h){var f=t.findBox(e,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=t.bin2str(f.data.subarray(f.start+12,f.start+16));n.logger.log("MP4Demuxer:"+h+":"+p+" found")}r[s]={timescale:l,type:h},r[h]={timescale:l,id:s}}}}}}),r},t.getStartDTS=function(e,r){var n,i,a;return n=t.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return t.findBox(r,["tfhd"]).map(function(n){var i,a,o;return i=t.readUint32(n,4),a=e[i].timescale||9e4,o=t.findBox(r,["tfdt"]).map(function(e){var r,n;return r=e.data[e.start],n=t.readUint32(e,4),1===r&&(n*=Math.pow(2,32),n+=t.readUint32(e,8)),n})[0],o/a})})),a=Math.min.apply(null,i),isFinite(a)?a:0},t.offsetStartDTS=function(e,r,n){t.findBox(r,["moof","traf"]).map(function(r){return t.findBox(r,["tfhd"]).map(function(i){var o=t.readUint32(i,4),s=e[o].timescale||9e4;t.findBox(r,["tfdt"]).map(function(e){var r=e.data[e.start],i=t.readUint32(e,4);if(0===r)t.writeUint32(e,4,i-n*s);else{i*=Math.pow(2,32),i+=t.readUint32(e,8),i-=n*s,i=Math.max(i,0);var o=Math.floor(i/(a+1)),u=Math.floor(i%(a+1));t.writeUint32(e,4,o),t.writeUint32(e,8,u)}})})})},t.prototype.append=function(e,r,n,a){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,u=this.initPTS;if(void 0===u){var l=t.getStartDTS(o,e);this.initPTS=u=l-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:u})}t.offsetStartDTS(o,e,u),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,n,a,e)},t.prototype.destroy=function(){},t}();e.default=o},"./src/demux/mpegaudio.js":/*!********************************!*\
	  !*** ./src/demux/mpegaudio.js ***!
	  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,n,i){if(!(r+24>e.length)){var a=this.parseHeader(e,r);if(a&&r+a.frameLength<=e.length){var o=9e4*a.samplesPerFrame/a.sampleRate,s=n+i*o,u={unit:e.subarray(r,r+a.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(u),t.len+=a.frameLength,{sample:u,length:a.frameLength}}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,a=t[e+2]>>4&15,o=t[e+2]>>2&3,s=t[e+2]>>1&1;if(1!==r&&0!==a&&15!==a&&3!==o){var u=3===r?3-i:3===i?3:4,l=1e3*n.BitratesMap[14*u+a-1],c=3===r?0:2===r?1:2,d=n.SamplingRateMap[3*c+o],h=t[e+3]>>6===3?1:2,f=n.SamplesCoefficients[r][i],p=n.BytesInSlot[i],m=8*f*p,g=parseInt(f*l/d+s,10)*p;return{sampleRate:d,channelCount:h,frameLength:g,samplesPerFrame:m}}},isHeaderPattern:function(t,e){return 255===t[e]&&224===(224&t[e+1])&&0!==(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=4,n=this.parseHeader(t,e),i=r;n&&n.frameLength&&(i=n.frameLength);var a=e+i;if(a===t.length||a+1<t.length&&this.isHeaderPattern(t,a))return!0}return!1}};e.default=n},"./src/demux/sample-aes.js":/*!*********************************!*\
	  !*** ./src/demux/sample-aes.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../crypt/decrypter */"./src/crypt/decrypter.js"),i=function(){function t(t,e,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new n.default(t,e,{removePKCS7Padding:!1})}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,r,n){var i=t[e].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),i.set(a,16),n||s.decryptAacSamples(t,e+1,r)})},t.prototype.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,n),!n)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),n=0,i=32;i<=t.length-16;i+=160,n+=16)r.set(t.subarray(i,i+16),n);return r},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,n=32;n<=t.length-16;n+=160,r+=16)t.set(e.subarray(r,r+16),n);return t},t.prototype.decryptAvcSample=function(t,e,r,n,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,function(s){i.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(t,e,r+1,n)})},t.prototype.decryptAvcSamples=function(t,e,r,n){for(;;e++,r=0){if(e>=t.length)return void n();for(var i=t[e].units;!(r>=i.length);r++){var a=i[r];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,n,a,o),!o)return}}}},t}();e.default=i},"./src/demux/tsdemuxer.js":/*!********************************!*\
	  !*** ./src/demux/tsdemuxer.js ***!
	  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ./adts */"./src/demux/adts.js"),i=r(/*! ./mpegaudio */"./src/demux/mpegaudio.js"),a=r(/*! ../events */"./src/events.js"),o=r(/*! ./exp-golomb */"./src/demux/exp-golomb.js"),s=r(/*! ./sample-aes */"./src/demux/sample-aes.js"),u=r(/*! ../utils/logger */"./src/utils/logger.js"),l=r(/*! ../errors */"./src/errors.js"),c={video:1,audio:2,id3:3,text:4},d=function(){function t(t,e,r,n){this.observer=t,this.config=r,this.typeSupported=n,this.remuxer=e,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new s.default(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var r=t._syncOffset(e);return!(r<0)&&(r&&u.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:c[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,r,n,i){var o,s,c,d,h,f,p=e.length,m=!1;this.contiguous=n;var g=this.pmtParsed,v=this._avcTrack,y=this._audioTrack,_=this._id3Track,b=v.pid,E=y.pid,A=_.pid,T=this._pmtId,S=v.pesData,w=y.pesData,C=_.pesData,k=this._parsePAT,L=this._parsePMT,D=this._parsePES,P=this._parseAVCPES.bind(this),I=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),x=t._syncOffset(e);for(p-=(p+x)%188,o=x;o<p;o+=188)if(71===e[o]){if(s=!!(64&e[o+1]),c=((31&e[o+1])<<8)+e[o+2],d=(48&e[o+3])>>4,d>1){if(h=o+5+e[o+4],h===o+188)continue}else h=o+4;switch(c){case b:s&&(S&&(f=D(S))&&void 0!==f.pts&&P(f,!1),S={data:[],size:0}),S&&(S.data.push(e.subarray(h,o+188)),S.size+=o+188-h);break;case E:s&&(w&&(f=D(w))&&void 0!==f.pts&&(y.isAAC?I(f):R(f)),w={data:[],size:0}),w&&(w.data.push(e.subarray(h,o+188)),w.size+=o+188-h);break;case A:s&&(C&&(f=D(C))&&void 0!==f.pts&&O(f),C={data:[],size:0}),C&&(C.data.push(e.subarray(h,o+188)),C.size+=o+188-h);break;case 0:s&&(h+=e[h]+1),T=this._pmtId=k(e,h);break;case T:s&&(h+=e[h]+1);var M=L(e,h,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);b=M.avc,b>0&&(v.pid=b),E=M.audio,E>0&&(y.pid=E,y.isAAC=M.isAAC),A=M.id3,A>0&&(_.pid=A),m&&!g&&(u.logger.log("reparse from beginning"),m=!1,o=x-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=!0}}else this.observer.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(f=D(S))&&void 0!==f.pts?(P(f,!0),v.pesData=null):v.pesData=S,w&&(f=D(w))&&void 0!==f.pts?(y.isAAC?I(f):R(f),y.pesData=null):(w&&w.size&&u.logger.log("last AAC PES packet truncated,might overlap between fragments"),y.pesData=w),C&&(f=D(C))&&void 0!==f.pts?(O(f),_.pesData=null):_.pesData=C,null==this.sampleAes?this.remuxer.remux(y,v,_,this._txtTrack,r,n,i):this.decryptAndRemux(y,v,_,this._txtTrack,r,n,i)},t.prototype.decryptAndRemux=function(t,e,r,n,i,a,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,r,n,i,a,o)})}else this.decryptAndRemuxAvc(t,e,r,n,i,a,o)},t.prototype.decryptAndRemuxAvc=function(t,e,r,n,i,a,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,r,n,i,a,o)})}else this.remuxer.remux(t,e,r,n,i,a,o)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,r,n){var i,a,o,s,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&t[e+1])<<8|t[e+2],a=e+3+i-4,o=(15&t[e+10])<<8|t[e+11],e+=12+o;e<a;){switch(s=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){u.logger.log("unkown stream type:"+t[e]);break}case 15:l.audio===-1&&(l.audio=s);break;case 21:l.id3===-1&&(l.id3=s);break;case 219:if(!n){u.logger.log("unkown stream type:"+t[e]);break}case 27:l.avc===-1&&(l.avc=s);break;case 3:case 4:r?l.audio===-1&&(l.audio=s,l.isAAC=!1):u.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:u.logger.warn("HEVC stream type found, not supported for now");break;default:u.logger.log("unkown stream type:"+t[e])}e+=((15&t[e+3])<<8|t[e+4])+5}return l},t.prototype._parsePES=function(t){var e,r,n,i,a,o,s,l,c,d=0,h=t.data;if(!t||0===t.size)return null;for(;h[0].length<19&&h.length>1;){var f=new Uint8Array(h[0].length+h[1].length);f.set(h[0]),f.set(h[1],h[0].length),h[0]=f,h.splice(1,1)}if(e=h[0],n=(e[0]<<16)+(e[1]<<8)+e[2],1===n){if(i=(e[4]<<8)+e[5],i&&i>t.size-6)return null;r=e[7],192&r&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,s>4294967295&&(s-=8589934592),64&r?(l=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,l>4294967295&&(l-=8589934592),s-l>54e5&&(u.logger.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),a=e[8],c=a+9,t.size-=c,o=new Uint8Array(t.size);for(var p=0,m=h.length;p<m;p++){e=h[p];var g=e.byteLength;if(c){if(c>g){c-=g;continue}e=e.subarray(c),g-=c,c=0}o.set(e,d),d+=g}return i&&(i-=a+3),{data:o,pts:s,dts:l,len:i}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var r=e.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||t.key===!0||e.sps&&(n||this.contiguous)?(t.id=n,r.push(t)):e.dropped++}t.debug.length&&u.logger.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var r,n,i,a=this,s=this._avcTrack,u=this._parseAVCNALu(t.data),l=!1,c=this.avcSample,d=!1,h=this.pushAccesUnit.bind(this),f=function(t,e,r,n){return{key:t,pts:e,dts:r,units:[],debug:n}};t.data=null,c&&u.length&&!s.audFound&&(h(c,s),c=this.avcSample=f(!1,t.pts,t.dts,"")),u.forEach(function(e){switch(e.type){case 1:n=!0,c||(c=a.avcSample=f(!0,t.pts,t.dts,"")),l&&(c.debug+="NDR "),c.frame=!0;var u=e.data;if(d&&u.length>4){var p=new o.default(u).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(c.key=!0)}break;case 5:n=!0,c||(c=a.avcSample=f(!0,t.pts,t.dts,"")),l&&(c.debug+="IDR "),c.key=!0,c.frame=!0;break;case 6:n=!0,l&&c&&(c.debug+="SEI "),r=new o.default(a.discardEPB(e.data)),r.readUByte();for(var m=0,g=0,v=!1,y=0;!v&&r.bytesAvailable>1;){m=0;do y=r.readUByte(),m+=y;while(255===y);g=0;do y=r.readUByte(),g+=y;while(255===y);if(4===m&&0!==r.bytesAvailable){v=!0;var _=r.readUByte();if(181===_){var b=r.readUShort();if(49===b){var E=r.readUInt();if(1195456820===E){var A=r.readUByte();if(3===A){var T=r.readUByte(),S=r.readUByte(),w=31&T,C=[T,S];for(i=0;i<w;i++)C.push(r.readUByte()),C.push(r.readUByte()),C.push(r.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:t.pts,bytes:C})}}}}}else if(g<r.bytesAvailable)for(i=0;i<g;i++)r.readUByte()}break;case 7:if(n=!0,d=!0,l&&c&&(c.debug+="SPS "),!s.sps){r=new o.default(e.data);var k=r.readSPS();s.width=k.width,s.height=k.height,s.pixelRatio=k.pixelRatio,s.sps=[e.data],s.duration=a._duration;var L=e.data.subarray(1,4),D="avc1.";for(i=0;i<3;i++){var P=L[i].toString(16);P.length<2&&(P="0"+P),D+=P}s.codec=D}break;case 8:n=!0,l&&c&&(c.debug+="PPS "),s.pps||(s.pps=[e.data]);break;case 9:n=!1,s.audFound=!0,c&&h(c,s),c=a.avcSample=f(!1,t.pts,t.dts,l?"AUD ":"");break;case 12:n=!1;break;default:n=!1,c&&(c.debug+="unknown NAL "+e.type+" ")}if(c&&n){var I=c.units;I.push(e)}}),e&&c&&(h(c,s),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var n=r-1;n>=0;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var r=this._avcTrack,n=r.samples;e=n[n.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t},t.prototype._parseAVCNALu=function(t){var e,r,n,i,a,o=0,s=t.byteLength,u=this._avcTrack,l=u.naluState||0,c=l,d=[],h=-1;for(l===-1&&(h=0,a=31&t[0],l=0,o=1);o<s;)if(e=t[o++],l)if(1!==l)if(e)if(1===e){if(h>=0)n={data:t.subarray(h,o-l-1),type:a},d.push(n);else{var f=this._getLastNalUnit();if(f&&(c&&o<=4-c&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-c)),r=o-l-1,r>0)){var p=new Uint8Array(f.data.byteLength+r);p.set(f.data,0),p.set(t.subarray(0,r),f.data.byteLength),f.data=p}}o<s?(i=31&t[o],h=o,a=i,l=0):l=-1}else l=0;else l=3;else l=e?0:2;else l=e?0:1;if(h>=0&&l>=0&&(n={data:t.subarray(h,s),type:a,state:l},d.push(n)),0===d.length){var f=this._getLastNalUnit();if(f){var p=new Uint8Array(f.data.byteLength+t.byteLength);p.set(f.data,0),p.set(t,f.data.byteLength),f.data=p}}return u.naluState=l,d},t.prototype.discardEPB=function(t){for(var e,r,n=t.byteLength,i=[],a=1;a<n-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;e=n-i.length,r=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===i[0]&&(o++,i.shift()),r[a]=t[o];return r},t.prototype._parseAACPES=function(t){var e,r,i,o,s,c=this._audioTrack,d=t.data,h=t.pts,f=0,p=this.aacOverFlow,m=this.aacLastPTS;if(p){var g=new Uint8Array(p.byteLength+d.byteLength);g.set(p,0),g.set(d,p.byteLength),d=g}for(i=f,s=d.length;i<s-1&&!n.isHeader(d,i);i++);if(i){var v=void 0,y=void 0;if(i<s-1?(v="AAC PES did not start with ADTS header,offset:"+i,y=!1):(v="no ADTS header found in AAC PES",y=!0),u.logger.warn("parsing error:"+v),this.observer.trigger(a.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:y,reason:v}),y)return}if(n.initTrackConfig(c,this.observer,d,i,this.audioCodec),r=0,e=n.getFrameDuration(c.samplerate),p&&m){var _=m+e;Math.abs(_-h)>1&&(u.logger.log("AAC: align PTS for overlapping frames by "+Math.round((_-h)/90)),h=_)}for(;i<s;)if(n.isHeader(d,i)&&i+5<s){var b=n.appendFrame(c,d,i,h,r);if(!b)break;i+=b.length,o=b.sample.pts,r++}else i++;p=i<s?d.subarray(i,s):null,this.aacOverFlow=p,this.aacLastPTS=o},t.prototype._parseMPEGPES=function(t){for(var e=t.data,r=e.length,n=0,a=0,o=t.pts;a<r;)if(i.default.isHeader(e,a)){var s=i.default.appendFrame(this._audioTrack,e,a,o,n);if(!s)break;a+=s.length,n++}else a++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}();e.default=d},"./src/errors.js":/*!***********************!*\
	  !*** ./src/errors.js ***!
	  \***********************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},e.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":/*!******************************!*\
	  !*** ./src/event-handler.js ***!
	  \******************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ./utils/logger */"./src/utils/logger.js"),i=r(/*! ./errors */"./src/errors.js"),a=r(/*! ./events */"./src/events.js"),o={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=function(){function t(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.hls=t,this.onEvent=this.onEvent.bind(this),this.handledEvents=e,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.prototype.onHandlerDestroying=function(){},t.prototype.onHandlerDestroyed=function(){},t.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(o[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){var r=function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)};try{r.call(this,t,e).call()}catch(e){n.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(a.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}();e.default=s},"./src/events.js":/*!***********************!*\
	  !*** ./src/events.js ***!
	  \***********************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};e.default=n},"./src/hls.js":/*!********************!*\
	  !*** ./src/hls.js ***!
	  \********************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),a=r(/*! ./errors */"./src/errors.js"),o=r(/*! ./loader/playlist-loader */"./src/loader/playlist-loader.js"),s=r(/*! ./loader/fragment-loader */"./src/loader/fragment-loader.js"),u=r(/*! ./loader/key-loader */"./src/loader/key-loader.js"),l=r(/*! ./controller/fragment-tracker */"./src/controller/fragment-tracker.js"),c=r(/*! ./controller/stream-controller */"./src/controller/stream-controller.js"),d=r(/*! ./controller/level-controller */"./src/controller/level-controller.js"),h=r(/*! ./controller/id3-track-controller */"./src/controller/id3-track-controller.js"),f=r(/*! ./is-supported */"./src/is-supported.js"),p=r(/*! ./utils/logger */"./src/utils/logger.js"),m=r(/*! ./config */"./src/config.js"),g=r(/*! ./events */"./src/events.js"),v=r(/*! ./observer */"./src/observer.js"),y=function(t){function e(r){void 0===r&&(r={});var n=t.call(this)||this,i=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in i)a in r||(r[a]=i[a]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');p.enableLogs(r.debug),n.config=r,n._autoLevelCapping=-1;var f=n.abrController=new r.abrController(n),m=new r.bufferController(n),g=new r.capLevelController(n),v=new r.fpsController(n),y=new o.default(n),_=new s.default(n),b=new u.default(n),E=new h.default(n),A=n.levelController=new d.default(n),T=new l.FragmentTracker(n),S=n.streamController=new c.default(n,T),w=[A,S],C=r.audioStreamController;C&&w.push(new C(n,T)),n.networkControllers=w;var k=[y,_,b,f,m,g,v,E,T];if(C=r.audioTrackController){var L=new C(n);n.audioTrackController=L,k.push(L)}if(C=r.subtitleTrackController){var D=new C(n);n.subtitleTrackController=D,w.push(D)}if(C=r.emeController){var P=new C(n);n.emeController=P,k.push(P)}return C=r.subtitleStreamController,C&&w.push(new C(n,T)),C=r.timelineController,C&&k.push(new C(n)),n.coreComponents=k,n}return n(e,t),Object.defineProperty(e,"version",{get:function(){return"0.12.4"},enumerable:!0,configurable:!0}),e.isSupported=function(){return f.isSupported()},Object.defineProperty(e,"Events",{get:function(){return g.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ErrorTypes",{get:function(){return a.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ErrorDetails",{get:function(){return a.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DefaultConfig",{get:function(){return e.defaultConfig?e.defaultConfig:m.hlsDefaultConfig},set:function(t){e.defaultConfig=t},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){p.logger.log("destroy"),this.trigger(g.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(t){p.logger.log("attachMedia"),this.media=t,this.trigger(g.default.MEDIA_ATTACHING,{media:t})},e.prototype.detachMedia=function(){p.logger.log("detachMedia"),this.trigger(g.default.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(t){t=i.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),p.logger.log("loadSource:"+t),this.url=t,this.trigger(g.default.MANIFEST_LOADING,{url:t})},e.prototype.startLoad=function(t){void 0===t&&(t=-1),p.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},e.prototype.stopLoad=function(){p.logger.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},e.prototype.swapAudioCodec=function(){p.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){p.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},Object.defineProperty(e.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(t){p.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(t){p.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(t){p.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){p.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(t){p.logger.log("set startLevel:"+t);var e=this;t!==-1&&(t=Math.max(t,e.minAutoLevel)),e.levelController.startLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(t){p.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoLevelEnabled",{get:function(){return this.levelController.manualLevel===-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minAutoLevel",{get:function(){for(var t=this,e=t.levels,r=t.config.minAutoBitrate,n=e?e.length:0,i=0;i<n;i++){var a=e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate;if(a>r)return i}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxAutoLevel",{get:function(){var t,e=this,r=e.levels,n=e.autoLevelCapping;return t=n===-1&&r&&r.length?r.length-1:n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextAutoLevel",{get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var e=this;e.abrController.nextAutoLevel=Math.max(e.minAutoLevel,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioTracks",{get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioTrack",{get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subtitleTracks",{get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subtitleTrack",{get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subtitleDisplay",{get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)},enumerable:!0,configurable:!0}),e}(v.Observer);e.default=y},"./src/is-supported.js":/*!*****************************!*\
	  !*** ./src/is-supported.js ***!
	  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(){var t=i.getMediaSource(),e=window.SourceBuffer||window.WebKitSourceBuffer,r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!n}Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ./utils/mediasource-helper */"./src/utils/mediasource-helper.js");e.isSupported=n},"./src/loader/fragment-loader.js":/*!***************************************!*\
	  !*** ./src/loader/fragment-loader.js ***!
	  \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=function(e){function r(t){var r=e.call(this,t,i.default.FRAG_LOADING)||this;return r.loaders={},r}return n(r,e),r.prototype.destroy=function(){var t=this.loaders;for(var r in t){var n=t[r];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var r=e.frag,n=r.type,i=this.loaders,a=this.hls.config,o=a.fLoader,u=a.loader;r.loaded=0;var l=i[n];l&&(s.logger.warn("abort previous fragment loader for type: "+n),l.abort()),l=i[n]=r.loader=a.fLoader?new o(a):new u(a);var c,d,h;c={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var f=r.byteRangeStartOffset,p=r.byteRangeEndOffset;t.isFinite(f)&&t.isFinite(p)&&(c.rangeStart=f,c.rangeEnd=p),d={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},l.load(c,d,h)},r.prototype.loadsuccess=function(t,e,r,n){void 0===n&&(n=null);var a=t.data,o=r.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:a,frag:o,stats:e,networkDetails:n})},r.prototype.loaderror=function(t,e,r){void 0===r&&(r=null);var n=e.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:r})},r.prototype.loadtimeout=function(t,e,r){void 0===r&&(r=null);var n=e.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:r})},r.prototype.loadprogress=function(t,e,r,n){void 0===n&&(n=null);var a=e.frag;a.loaded=t.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:a,stats:t,networkDetails:n})},r}(a.default);e.default=u}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/loader/fragment.js":/*!********************************!*\
	  !*** ./src/loader/fragment.js ***!
	  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),i=r(/*! ./level-key */"./src/loader/level-key.js"),a=function(){function e(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=(t={},t[e.ElementaryStreamTypes.AUDIO]=!1,t[e.ElementaryStreamTypes.VIDEO]=!1,t)}return Object.defineProperty(e,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var t=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var r=this.lastByteRangeEndOffset;t[0]=r||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0],this._byteRange=t}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endProgramDateTime",{get:function(){if(!t.isFinite(this.programDateTime))return null;var e=t.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),e.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},e.prototype.hasElementaryStream=function(t){return this._elementaryStreams[t]===!0},e.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},e.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&(r=new i.default,r.method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(e)),r},e}();e.default=a}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":/*!**********************************!*\
	  !*** ./src/loader/key-loader.js ***!
	  \**********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=function(t){function e(e){var r=t.call(this,e,i.default.KEY_LOADING)||this;return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return n(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},a.default.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,r=e.type,n=this.loaders[r],a=e.decryptdata,o=a.uri;if(o!==this.decrypturl||null===this.decryptkey){var u=this.hls.config;n&&(s.logger.warn("abort previous key loader for type:"+r),n.abort()),e.loader=this.loaders[r]=new u.loader(u),this.decrypturl=o,this.decryptkey=null;var l=void 0,c=void 0,d=void 0;l={url:o,frag:e,responseType:"arraybuffer"},c={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(l,c,d)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(i.default.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(t.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(i.default.KEY_LOADED,{frag:n})},e.prototype.loaderror=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.prototype.loadtimeout=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},e}(a.default);e.default=u},"./src/loader/level-key.js":/*!*********************************!*\
	  !*** ./src/loader/level-key.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function t(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(t.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=n.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),t}();e.default=i},"./src/loader/level.js":/*!*****************************!*\
	  !*** ./src/loader/level.js ***!
	  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}return Object.defineProperty(e.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!t.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),e}();e.default=r}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":/*!***********************************!*\
	  !*** ./src/loader/m3u8-parser.js ***!
	  \***********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){function n(t,e){for(var r=t[e],n=e-1;n>=0;n--){var i=t[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}function i(e,r){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):r&&r.programDateTime&&(e.programDateTime=r.endProgramDateTime),t.isFinite(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}Object.defineProperty(e,"__esModule",{value:!0});var a=r(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),o=r(/*! ./fragment */"./src/loader/fragment.js"),s=r(/*! ./level */"./src/loader/level.js"),u=r(/*! ./level-key */"./src/loader/level-key.js"),l=r(/*! ../utils/attr-list */"./src/utils/attr-list.js"),c=r(/*! ../utils/logger */"./src/utils/logger.js"),d=r(/*! ../utils/codecs */"./src/utils/codecs.js"),h=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,f=/#EXT-X-MEDIA:(.*)/g,p=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),m=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,g=/\.(mp4|m4s|m4v|m4a)$/i,v=function(){function e(){}return e.findGroup=function(t,e){if(!t)return null;for(var r=null,n=0;n<t.length;n++){var i=t[n];i.id===e&&(r=i)}return r},e.convertAVC1ToAVCOTI=function(t){var e,r=t.split(".");return r.length>2?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},e.resolve=function(t,e){return a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){function n(t,e){["video","audio"].forEach(function(r){var n=t.filter(function(t){return d.isCodecType(t,r)});if(n.length){var i=n.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[r+"Codec"]=i.length>0?i[0]:n[0],t=t.filter(function(t){return n.indexOf(t)===-1})}}),e.unknownCodecs=t}var i,a=[];for(h.lastIndex=0;null!=(i=h.exec(t));){var o={},s=o.attrs=new l.default(i[1]);o.url=e.resolve(i[2],r);var u=s.decimalResolution("RESOLUTION");u&&(o.width=u.width,o.height=u.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,n([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&o.videoCodec.indexOf("avc1")!==-1&&(o.videoCodec=e.convertAVC1ToAVCOTI(o.videoCodec)),a.push(o)}return a},e.parseMasterPlaylistMedia=function(t,r,n,i){void 0===i&&(i=[]);var a,o=[],s=0;for(f.lastIndex=0;null!==(a=f.exec(t));){var u={},c=new l.default(a[1]);if(c.TYPE===n){if(u.groupId=c["GROUP-ID"],u.name=c.NAME,u.type=n,u.default="YES"===c.DEFAULT,u.autoselect="YES"===c.AUTOSELECT,u.forced="YES"===c.FORCED,c.URI&&(u.url=e.resolve(c.URI,r)),u.lang=c.LANGUAGE,u.name||(u.name=u.lang),i.length){var d=e.findGroup(i,u.groupId);u.audioCodec=d?d.codec:i[0].codec}u.id=s++,o.push(u)}}return o},e.parseLevelPlaylist=function(e,r,a,d,h){var f,v,y=0,_=0,b=new s.default(r),E=new u.default,A=0,T=null,S=new o.default,w=null;for(p.lastIndex=0;null!==(f=p.exec(e));){var C=f[1];if(C){S.duration=parseFloat(C);var k=(" "+f[2]).slice(1);S.title=k||null,S.tagList.push(k?["INF",C,k]:["INF",C])}else if(f[3]){if(t.isFinite(S.duration)){var L=y++;S.type=d,S.start=_,S.levelkey=E,S.sn=L,S.level=a,S.cc=A,S.urlId=h,S.baseurl=r,S.relurl=(" "+f[3]).slice(1),i(S,T),b.fragments.push(S),T=S,_+=S.duration,S=new o.default}}else if(f[4]){if(S.rawByteRange=(" "+f[4]).slice(1),T){var D=T.byteRangeEndOffset;D&&(S.lastByteRangeEndOffset=D)}}else if(f[5])S.rawProgramDateTime=(" "+f[5]).slice(1),S.tagList.push(["PROGRAM-DATE-TIME",S.rawProgramDateTime]),null===w&&(w=b.fragments.length);else{for(f=f[0].match(m),v=1;v<f.length&&void 0===f[v];v++);var P=(" "+f[v+1]).slice(1),I=(" "+f[v+2]).slice(1);switch(f[v]){case"#":S.tagList.push(I?[P,I]:[P]);break;case"PLAYLIST-TYPE":b.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":y=b.startSN=parseInt(P);break;case"TARGETDURATION":b.targetduration=parseFloat(P);break;case"VERSION":b.version=parseInt(P);break;case"EXTM3U":break;case"ENDLIST":b.live=!1;break;case"DIS":A++,S.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":A=parseInt(P);break;case"KEY":var R=P,O=new l.default(R),x=O.enumeratedString("METHOD"),M=O.URI,N=O.hexadecimalInteger("IV");x&&(E=new u.default,M&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(x)>=0&&(E.method=x,E.baseuri=r,E.reluri=M,E.key=null,E.iv=N));break;case"START":var F=P,U=new l.default(F),B=U.decimalFloatingPoint("TIME-OFFSET");t.isFinite(B)&&(b.startTimeOffset=B);break;case"MAP":var j=new l.default(P);S.relurl=j.URI,S.rawByteRange=j.BYTERANGE,S.baseurl=r,S.level=a,S.type=d,S.sn="initSegment",b.initSegment=S,S=new o.default,S.rawProgramDateTime=b.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+f)}}}return S=T,S&&!S.relurl&&(b.fragments.pop(),_-=S.duration),b.totalduration=_,b.averagetargetduration=_/b.fragments.length,b.endSN=y-1,b.startCC=b.fragments[0]?b.fragments[0].cc:0,b.endCC=A,!b.initSegment&&b.fragments.length&&b.fragments.every(function(t){return g.test(t.relurl)})&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),S=new o.default,S.relurl=b.fragments[0].relurl,S.baseurl=r,S.level=a,S.type=d,S.sn="initSegment",b.initSegment=S,b.needSidxRanges=!0),w&&n(b.fragments,w),b},e}();e.default=v}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":/*!***************************************!*\
	  !*** ./src/loader/playlist-loader.js ***!
	  \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ../events */"./src/events.js"),a=r(/*! ../event-handler */"./src/event-handler.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=r(/*! ../demux/mp4demuxer */"./src/demux/mp4demuxer.js"),l=r(/*! ./m3u8-parser */"./src/loader/m3u8-parser.js"),c=window.performance,d={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},h={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},f=function(e){function r(t){var r=e.call(this,t,i.default.MANIFEST_LOADING,i.default.LEVEL_LOADING,i.default.AUDIO_TRACK_LOADING,i.default.SUBTITLE_TRACK_LOADING)||this;return r.loaders={},r}return n(r,e),Object.defineProperty(r,"ContextType",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LevelType",{get:function(){return h},enumerable:!0,configurable:!0}),r.canHaveQualityLevels=function(t){return t!==d.AUDIO_TRACK&&t!==d.SUBTITLE_TRACK},r.mapContextToLevelType=function(t){var e=t.type;switch(e){case d.AUDIO_TRACK:return h.AUDIO;case d.SUBTITLE_TRACK:return h.SUBTITLE;default:return h.MAIN}},r.getResponseUrl=function(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r},r.prototype.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,n=e.loader,i=r||n,a=new i(e);return t.loader=a,this.loaders[t.type]=a,a},r.prototype.getInternalLoader=function(t){return this.loaders[t.type]},r.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},r.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},r.prototype.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},r.prototype.onManifestLoading=function(t){this.load(t.url,{type:d.MANIFEST,level:0,id:null})},r.prototype.onLevelLoading=function(t){this.load(t.url,{type:d.LEVEL,level:t.level,id:t.id})},r.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:d.AUDIO_TRACK,level:null,id:t.id})},r.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:d.SUBTITLE_TRACK,level:null,id:t.id})},r.prototype.load=function(t,e){var r=this.hls.config;s.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n=this.getInternalLoader(e);if(n){var i=n.context;if(i&&i.url===t)return s.logger.trace("playlist request ongoing"),!1;s.logger.warn("aborting previous loader for type: "+e.type),n.abort()}var a,o,u,l;switch(e.type){case d.MANIFEST:a=r.manifestLoadingMaxRetry,o=r.manifestLoadingTimeOut,u=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout;break;case d.LEVEL:a=0,o=r.levelLoadingTimeOut;break;default:a=r.levelLoadingMaxRetry,o=r.levelLoadingTimeOut,u=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout}n=this.createInternalLoader(e),e.url=t,e.responseType=e.responseType||"";var c={timeout:o,maxRetry:a,retryDelay:u,maxRetryDelay:l},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return s.logger.debug("Calling internal loader delegate for URL: "+t),n.load(e,c,h),!0},r.prototype.loadsuccess=function(t,e,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(t,r),void this._handlePlaylistLoaded(t,e,r,n);this.resetInternalLoader(r.type);var i=t.data;return e.tload=c.now(),0!==i.indexOf("#EXTM3U")?void this._handleManifestParsingError(t,r,"no EXTM3U delimiter",n):void(i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,r,n):this._handleMasterPlaylist(t,e,r,n))},r.prototype.loaderror=function(t,e,r){void 0===r&&(r=null),this._handleNetworkError(e,r,!1,t)},r.prototype.loadtimeout=function(t,e,r){void 0===r&&(r=null),this._handleNetworkError(e,r,!0)},r.prototype._handleMasterPlaylist=function(t,e,n,a){var o=this.hls,u=t.data,c=r.getResponseUrl(t,n),d=l.default.parseMasterPlaylist(u,c);if(!d.length)return void this._handleManifestParsingError(t,n,"no level found in manifest",a);var h=d.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),f=l.default.parseMasterPlaylistMedia(u,c,"AUDIO",h),p=l.default.parseMasterPlaylistMedia(u,c,"SUBTITLES");if(f.length){var m=!1;f.forEach(function(t){t.url||(m=!0)}),m===!1&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(s.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main"}))}o.trigger(i.default.MANIFEST_LOADED,{levels:d,audioTracks:f,subtitles:p,url:c,stats:e,networkDetails:a})},r.prototype._handleTrackOrLevelPlaylist=function(e,n,a,o){var s=this.hls,u=a.id,h=a.level,f=a.type,p=r.getResponseUrl(e,a),m=t.isFinite(u)?u:0,g=t.isFinite(h)?h:m,v=r.mapContextToLevelType(a),y=l.default.parseLevelPlaylist(e.data,p,g,v,m);if(y.tload=n.tload,f===d.MANIFEST){var _={url:p,details:y};s.trigger(i.default.MANIFEST_LOADED,{levels:[_],audioTracks:[],url:p,stats:n,networkDetails:o})}if(n.tparsed=c.now(),y.needSidxRanges){var b=y.initSegment.url;return void this.load(b,{isSidxRequest:!0,type:f,level:h,levelDetails:y,id:u,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}a.levelDetails=y,this._handlePlaylistLoaded(e,n,a,o)},r.prototype._handleSidxRequest=function(t,e){var r=u.default.parseSegmentIndex(new Uint8Array(t.data));if(r){var n=r.references,i=e.levelDetails;n.forEach(function(t,e){var r=t.info,n=i.fragments[e];0===n.byteRange.length&&(n.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))}),i.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},r.prototype._handleManifestParsingError=function(t,e,r,n){this.hls.trigger(i.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:r,networkDetails:n})},r.prototype._handleNetworkError=function(t,e,r,n){void 0===r&&(r=!1),void 0===n&&(n=null),s.logger.info("A network error occured while loading a "+t.type+"-type playlist");var a,u,l=this.getInternalLoader(t);switch(t.type){case d.MANIFEST:a=r?o.ErrorDetails.MANIFEST_LOAD_TIMEOUT:o.ErrorDetails.MANIFEST_LOAD_ERROR,u=!0;break;case d.LEVEL:a=r?o.ErrorDetails.LEVEL_LOAD_TIMEOUT:o.ErrorDetails.LEVEL_LOAD_ERROR,u=!1;break;case d.AUDIO_TRACK:a=r?o.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,u=!1;break;default:u=!1}l&&(l.abort(),this.resetInternalLoader(t.type));var c={type:o.ErrorTypes.NETWORK_ERROR,details:a,fatal:u,url:l.url,loader:l,context:t,networkDetails:e};n&&(c.response=n),this.hls.trigger(i.default.ERROR,c)},r.prototype._handlePlaylistLoaded=function(t,e,n,a){var o=n.type,s=n.level,u=n.id,l=n.levelDetails;if(!l.targetduration)return void this._handleManifestParsingError(t,n,"invalid target duration",a);var c=r.canHaveQualityLevels(n.type);if(c)this.hls.trigger(i.default.LEVEL_LOADED,{details:l,level:s||0,id:u||0,stats:e,networkDetails:a});else switch(o){case d.AUDIO_TRACK:this.hls.trigger(i.default.AUDIO_TRACK_LOADED,{details:l,id:u,stats:e,networkDetails:a});break;case d.SUBTITLE_TRACK:this.hls.trigger(i.default.SUBTITLE_TRACK_LOADED,{details:l,id:u,stats:e,networkDetails:a})}},r}(a.default);e.default=f}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/observer.js":/*!*************************!*\
	  !*** ./src/observer.js ***!
	  \*************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.emit.apply(this,[t,t].concat(e))},e}(i.EventEmitter);e.Observer=a},"./src/polyfills/number.js":/*!*********************************!*\
	  !*** ./src/polyfills/number.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),i=n.getSelfScope(),a=i.Number;e.Number=a,a.isFinite=a.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},"./src/remux/aac-helper.js":/*!*********************************!*\
	  !*** ./src/remux/aac-helper.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}();e.default=n},"./src/remux/mp4-generator.js":/*!************************************!*\
	  !*** ./src/remux/mp4-generator.js ***!
	  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Math.pow(2,32)-1,i=function(){function t(){}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,u,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;i--;)n+=r[i].byteLength;for(e=new Uint8Array(n),e[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e.set(t,4),i=0,n=8;i<a;i++)e.set(r[i],n),n+=r[i].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,r))},t.moov=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(n))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(n+1)),a=Math.floor(r%(n+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)},t.sdtp=function(e){var r,n,i=e.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,n,i,a=[],o=[];for(r=0;r<e.sps.length;r++)n=e.sps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));for(r=0;r<e.pps.length;r++)n=e.pps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),u=e.width,l=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,a=e.width,o=e.height,s=Math.floor(i/(n+1)),u=Math.floor(i%(n+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),a=e.id,o=Math.floor(r/(n+1)),s=Math.floor(r%(n+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var n,i,a,o,s,u,l=e.samples||[],c=l.length,d=12+16*c,h=new Uint8Array(d);for(r+=8+d,h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=l[n],a=i.duration,o=i.size,s=i.flags,u=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var r,n=t.moov(e);return r=new Uint8Array(t.FTYP.byteLength+n.byteLength),r.set(t.FTYP),r.set(n,t.FTYP.byteLength),r},t}();e.default=i},"./src/remux/mp4-remuxer.js":/*!**********************************!*\
	  !*** ./src/remux/mp4-remuxer.js ***!
	  \**********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ./aac-helper */"./src/remux/aac-helper.js"),i=r(/*! ./mp4-generator */"./src/remux/mp4-generator.js"),a=r(/*! ../events */"./src/events.js"),o=r(/*! ../errors */"./src/errors.js"),s=r(/*! ../utils/logger */"./src/utils/logger.js"),u=1e4,l=function(){function t(t,e,r,n){this.observer=t,this.config=e,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,r,n,i,o,u){if(this.ISGenerated||this.generateIS(t,e,i),this.ISGenerated){var l=t.samples.length,c=e.samples.length,d=i,h=i;if(l&&c){var f=(t.samples[0].pts-e.samples[0].pts)/e.inputTimeScale;d+=Math.max(0,f),h+=Math.max(0,-f)}if(l){t.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,i));var p=this.remuxAudio(t,d,o,u);if(c){var m=void 0;p&&(m=p.endPTS-p.startPTS),e.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,i)),this.remuxVideo(e,h,o,m,u)}}else if(c){var g=this.remuxVideo(e,h,o,0,u);g&&t.codec&&this.remuxEmptyAudio(t,d,o,g)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(a.default.FRAG_PARSED)},t.prototype.generateIS=function(t,e,r){var n,u,l=this.observer,c=t.samples,d=e.samples,h=this.typeSupported,f="audio/mp4",p={},m={tracks:p},g=void 0===this._initPTS;if(g&&(n=u=1/0),t.config&&c.length&&(t.timescale=t.samplerate,s.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(h.mpeg?(f="audio/mpeg",t.codec=""):h.mp3&&(t.codec="mp3")),p.audio={container:f,codec:t.codec,initSegment:!t.isAAC&&h.mpeg?new Uint8Array:i.default.initSegment([t]),metadata:{channelCount:t.channelCount}},g&&(n=u=c[0].pts-t.inputTimeScale*r)),e.sps&&e.pps&&d.length){var v=e.inputTimeScale;e.timescale=v,p.video={container:"video/mp4",codec:e.codec,initSegment:i.default.initSegment([e]),metadata:{width:e.width,height:e.height}},g&&(n=Math.min(n,d[0].pts-v*r),u=Math.min(u,d[0].dts-v*r),this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(p).length?(l.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,m),this.ISGenerated=!0,g&&(this._initPTS=n,this._initDTS=u)):l.trigger(a.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,r,n,u){var l,c,d,h,f,p,m,g=8,v=t.timescale,y=t.samples,_=[],b=y.length,E=this._PTSNormalize,A=this._initPTS,T=this.nextAvcDts,S=this.isSafari;if(0!==b){S&&(r|=y.length&&T&&(u&&Math.abs(e-T/v)<.1||Math.abs(y[0].pts-T-A)<v/5)),r||(T=e*v),y.forEach(function(t){t.pts=E(t.pts-A,T),t.dts=E(t.dts-A,T)}),y.sort(function(t,e){var r=t.dts-e.dts,n=t.pts-e.pts;return r||n||t.id-e.id});var w=y.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(w<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(w/90)+" ms to overcome this issue");for(var C=0;C<y.length;C++)y[C].dts+=w}var k=y[0];f=Math.max(k.dts,0),h=Math.max(k.pts,0);var L=Math.round((f-T)/90);r&&L&&(L>1?s.logger.log("AVC:"+L+" ms hole between fragments detected,filling it"):L<-1&&s.logger.log("AVC:"+-L+" ms overlapping between fragments detected"),f=T,y[0].dts=f,h=Math.max(h-L,T),y[0].pts=h,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(h/90)+"/"+Math.round(f/90)+",delta:"+L+" ms")),k=y[y.length-1],m=Math.max(k.dts,0),p=Math.max(k.pts,0,m),S&&(l=Math.round((m-f)/(y.length-1)));for(var D=0,P=0,C=0;C<b;C++){for(var I=y[C],R=I.units,O=R.length,x=0,M=0;M<O;M++)x+=R[M].data.length;P+=x,D+=O,I.length=x,S?I.dts=f+C*l:I.dts=Math.max(I.dts,f),I.pts=Math.max(I.pts,I.dts)}var N=P+4*D+8;try{c=new Uint8Array(N)}catch(t){return void this.observer.trigger(a.default.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var F=new DataView(c.buffer);F.setUint32(0,N),c.set(i.default.types.mdat,4);for(var C=0;C<b;C++){for(var U=y[C],B=U.units,j=0,G=void 0,M=0,O=B.length;M<O;M++){var H=B[M],V=H.data,K=H.data.byteLength;F.setUint32(g,K),g+=4,c.set(V,g),g+=K,j+=4+K}if(S)G=Math.max(0,l*Math.round((U.pts-U.dts)/l));else{if(C<b-1)l=y[C+1].dts-U.dts;else{var W=this.config,q=U.dts-y[C>0?C-1:C].dts;if(W.stretchShortVideoTrack){var Y=W.maxBufferHole,z=Math.floor(Y*v),X=(n?h+n*v:this.nextAudioPts)-U.pts;X>z?(l=X-q,l<0&&(l=q),s.logger.log("It is approximately "+X/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=q}else l=q}G=Math.round(U.pts-U.dts)}_.push({size:j,duration:l,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=m+l;var Q=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,_.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var $=_[0].flags;$.dependsOn=2,$.isNonSync=0}t.samples=_,d=i.default.moof(t.sequenceNumber++,f,t),t.samples=[];var J={data1:d,data2:c,startPTS:h/v,endPTS:(p+l)/v,startDTS:f/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:_.length,dropped:Q};return this.observer.trigger(a.default.FRAG_PARSING_DATA,J),J}},t.prototype.remuxAudio=function(t,e,r,l){var c,d,h,f,p,m,g,v=t.inputTimeScale,y=t.timescale,_=v/y,b=t.isAAC?1024:1152,E=b*_,A=this._PTSNormalize,T=this._initPTS,S=!t.isAAC&&this.typeSupported.mpeg,w=t.samples,C=[],k=this.nextAudioPts;if(r|=w.length&&k&&(l&&Math.abs(e-k/v)<.1||Math.abs(w[0].pts-k-T)<20*E),w.forEach(function(t){t.pts=t.dts=A(t.pts-T,e*v)}),w=w.filter(function(t){return t.pts>=0}),0!==w.length){if(r||(k=l?e*v:w[0].pts),t.isAAC)for(var L=this.config.maxAudioFramesDrift,D=0,P=k;D<w.length;){var I,R=w[D],O=R.pts;I=O-P;var x=Math.abs(1e3*I/v);if(I<=-L*E)s.logger.warn("Dropping 1 audio frame @ "+(P/v).toFixed(3)+"s due to "+Math.round(x)+" ms overlap."),w.splice(D,1),t.len-=R.unit.length;else if(I>=L*E&&x<u&&P){var M=Math.round(I/E);s.logger.warn("Injecting "+M+" audio frame @ "+(P/v).toFixed(3)+"s due to "+Math.round(1e3*I/v)+" ms gap.");for(var N=0;N<M;N++){var F=Math.max(P,0);h=n.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),h||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),h=R.unit.subarray()),w.splice(D,0,{unit:h,pts:F,dts:F}),t.len+=h.length,P+=E,D++}R.pts=R.dts=P,P+=E,D++}else Math.abs(I)>.1*E,R.pts=R.dts=P,P+=E,D++}for(var N=0,U=w.length;N<U;N++){var B=w[N],j=B.unit,O=B.pts;if(void 0!==g)d.duration=Math.round((O-g)/_);else{var G=Math.round(1e3*(O-k)/v),H=0;if(r&&t.isAAC&&G){if(G>0&&G<u)H=Math.round((O-k)/E),s.logger.log(G+" ms hole between AAC samples detected,filling it"),H>0&&(h=n.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),h||(h=j.subarray()),t.len+=H*h.length);else if(G<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(k/v).toFixed(3)+"s/"+(O/v).toFixed(3)+"s/"+-G+"ms"),t.len-=j.byteLength;continue}O=k}if(m=O,!(t.len>0))return;var V=S?t.len:t.len+8;c=S?0:8;try{f=new Uint8Array(V)}catch(t){return void this.observer.trigger(a.default.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:V,reason:"fail allocating audio mdat "+V})}if(!S){var K=new DataView(f.buffer);K.setUint32(0,V),f.set(i.default.types.mdat,4)}for(var D=0;D<H;D++)h=n.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),h||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),h=j.subarray()),f.set(h,c),c+=h.byteLength,d={size:h.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},C.push(d)}f.set(j,c);var W=j.byteLength;c+=W,d={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},C.push(d),g=O}var q=0,Y=C.length;if(Y>=2&&(q=C[Y-2].duration,d.duration=q),Y){this.nextAudioPts=k=g+_*q,t.len=0,t.samples=C,p=S?new Uint8Array:i.default.moof(t.sequenceNumber++,m/_,t),t.samples=[];var z=m/v,X=k/v,Q={data1:p,data2:f,startPTS:z,endPTS:X,startDTS:z,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.observer.trigger(a.default.FRAG_PARSING_DATA,Q),Q}return null}},t.prototype.remuxEmptyAudio=function(t,e,r,i){var a=t.inputTimeScale,o=t.samplerate?t.samplerate:a,u=a/o,l=this.nextAudioPts,c=(void 0!==l?l:i.startDTS*a)+this._initDTS,d=i.endDTS*a+this._initDTS,h=1024,f=u*h,p=Math.ceil((d-c)/f),m=n.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(s.logger.warn("remux empty Audio"),!m)return void s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var g=[],v=0;v<p;v++){var y=c+v*f;g.push({unit:m,pts:y,dts:y}),t.len+=m.length}t.samples=g,this.remuxAudio(t,e,r)},t.prototype.remuxID3=function(t){var e,r=t.samples.length,n=t.inputTimeScale,i=this._initPTS,o=this._initDTS;if(r){for(var s=0;s<r;s++)e=t.samples[s],e.pts=(e.pts-i)/n,e.dts=(e.dts-o)/n;this.observer.trigger(a.default.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},t.prototype.remuxText=function(t){t.samples.sort(function(t,e){return t.pts-e.pts});var e,r=t.samples.length,n=t.inputTimeScale,i=this._initPTS;if(r){for(var o=0;o<r;o++)e=t.samples[o],e.pts=(e.pts-i)/n;this.observer.trigger(a.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},t.prototype._PTSNormalize=function(t,e){var r;if(void 0===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t},t}();e.default=l},"./src/remux/passthrough-remuxer.js":/*!******************************************!*\
	  !*** ./src/remux/passthrough-remuxer.js ***!
	  \******************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../events */"./src/events.js"),i=function(){function t(t){this.observer=t}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,r,i,a,o,s,u){var l=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),l.trigger(n.default.FRAG_PARSING_DATA,{data1:u,startPTS:a,startDTS:a,type:c,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),l.trigger(n.default.FRAG_PARSED)},t}();e.default=i},"./src/task-loop.js":/*!**************************!*\
	  !*** ./src/task-loop.js ***!
	  \**************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ./event-handler */"./src/event-handler.js"),a=function(t){function e(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=t.apply(this,[e].concat(r))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return n(e,t),e.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.prototype.hasInterval=function(){return!!this._tickInterval},e.prototype.hasNextTick=function(){return!!this._tickTimer},e.prototype.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,t),!0)},e.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},e.prototype.doTick=function(){},e}(i.default);e.default=a},"./src/utils/attr-list.js":/*!********************************!*\
	  !*** ./src/utils/attr-list.js ***!
	  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function e(t){"string"==typeof t&&(t=e.parseAttrList(t));for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])}return e.prototype.decimalInteger=function(e){var r=parseInt(this[e],10);return r>t.MAX_SAFE_INTEGER?1/0:r},e.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)r[n]=parseInt(e.slice(2*n,2*n+2),16);return r}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var r=parseInt(this[e],16);return r>t.MAX_SAFE_INTEGER?1/0:r},e.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.prototype.enumeratedString=function(t){return this[t]},e.prototype.decimalResolution=function(t){var e=r.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},e.parseAttrList=function(t){var e,r={};for(n.lastIndex=0;null!==(e=n.exec(t));){var i=e[2],a='"';0===i.indexOf(a)&&i.lastIndexOf(a)===i.length-1&&(i=i.slice(1,-1)),r[e[1]]=i}return r},e}();e.default=i}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":/*!************************************!*\
	  !*** ./src/utils/binary-search.js ***!
	  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={search:function(t,e){for(var r=0,n=t.length-1,i=null,a=null;r<=n;){i=(r+n)/2|0,a=t[i];var o=e(a);if(o>0)r=i+1;else{if(!(o<0))return a;n=i-1}}return null}};e.default=n},"./src/utils/buffer-helper.js":/*!************************************!*\
	  !*** ./src/utils/buffer-helper.js ***!
	  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var r=t.buffered,n=0;n<r.length;n++)if(e>=r.start(n)&&e<=r.end(n))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,r){try{if(t){var n=t.buffered,i=[],a=void 0;for(a=0;a<n.length;a++)i.push({start:n.start(a),end:n.end(a)});return this.bufferedInfo(i,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,r){var n,i,a,o,s,u=[];for(t.sort(function(t,e){var r=t.start-e.start;return r?r:e.end-t.end}),s=0;s<t.length;s++){var l=u.length;if(l){var c=u[l-1].end;t[s].start-c<r?t[s].end>c&&(u[l-1].end=t[s].end):u.push(t[s])}else u.push(t[s])}for(s=0,n=0,i=a=e;s<u.length;s++){var d=u[s].start,h=u[s].end;if(e+r>=d&&e<h)i=d,a=h,n=a-e;else if(e+r<d){o=d;break}}return{len:n,start:i,end:a,nextStart:o}},t}();e.BufferHelper=n},"./src/utils/cea-608-parser.js":/*!*************************************!*\
	  !*** ./src/utils/cea-608-parser.js ***!
	  \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(t){var e=t;return n.hasOwnProperty(t)&&(e=n[t]),String.fromCharCode(e)},a=15,o=100,s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},l={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],h={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var r=this.verboseFilter[t];this.verboseLevel>=r}},f=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},p=function(){function t(t,e,r,n,i){this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var n=e[r];t.hasOwnProperty(n)&&(this[n]=t[n])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),m=function(){function t(t,e,r,n,i,a){this.uchar=t||" ",this.penState=new p(e,r,n,i,a)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),g=function(){function t(){this.chars=[];for(var t=0;t<o;t++)this.chars.push(new m);this.pos=0,this.currPenState=new p}return t.prototype.equals=function(t){for(var e=!0,r=0;r<o;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<o;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<o;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(h.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>o&&(h.log("ERROR","Too large cursor position "+this.pos),this.pos=o)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=i(t);return this.pos>=o?void h.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),void this.moveCursor(1))},t.prototype.clearFromPos=function(t){var e;for(e=t;e<o;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,r=0;r<o;r++){var n=this.chars[r].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t);var e=this.chars[this.pos];e.setPenState(this.currPenState)},t}(),v=function(){function t(){this.rows=[];for(var t=0;t<a;t++)this.rows.push(new g);this.currRow=a-1,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<a;t++)this.rows[t].clear();this.currRow=a-1},t.prototype.equals=function(t){for(var e=!0,r=0;r<a;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<a;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<a;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){var t=this.rows[this.currRow];t.backSpace()},t.prototype.clearToEndOfRow=function(){var t=this.rows[this.currRow];t.clearToEndOfRow()},t.prototype.insertChar=function(t){var e=this.rows[this.currRow];e.insertChar(t)},t.prototype.setPen=function(t){var e=this.rows[this.currRow];e.setPenStyles(t)},t.prototype.moveCursor=function(t){var e=this.rows[this.currRow];e.moveCursor(t)},t.prototype.setCursor=function(t){h.log("INFO","setCursor: "+t);var e=this.rows[this.currRow];e.setCursor(t)},t.prototype.setPAC=function(t){h.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<a;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[n].cueStartTime;if(o&&o<h.time)for(var r=0;r<this.nrRollUpRows;r++)this.rows[e-this.nrRollUpRows+r+1].copy(i.rows[n+r])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,l=Math.max(u-1,0);s.setCursor(t.indent),t.color=s.chars[l].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)},t.prototype.setBkgData=function(t){h.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void h.log("DEBUG","roll_up but nrRollUpRows not set yet");h.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),h.log("INFO","Rolling up")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],r="",n=-1,i=0;i<a;i++){var o=this.rows[i].getTextString();o&&(n=i+1,t?e.push("Row "+n+": '"+o+"'"):e.push(o.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},t.prototype.getTextAndFormat=function(){return this.rows},t}(),y=function(){function t(t,e){this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new v,this.nonDisplayedMemory=new v,this.lastOutputScreen=new v,this.currRollUpRow=this.displayedMemory.rows[a-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[a-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,h.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";h.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(h.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){h.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){h.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){h.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){h.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){h.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){h.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){h.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){h.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){h.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.prototype.ccCR=function(){h.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.prototype.ccENM=function(){h.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(h.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,h.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.prototype.ccTO=function(t){h.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2===1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=n[r]}h.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=h.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t===!0&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),_=function(){function t(t,e,r){this.field=t||1,this.outputs=[e,r],this.channels=[new y(1,e),new y(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e){var r,n,i,a=!1;this.lastTime=t,h.setTime(t);for(var o=0;o<e.length;o+=2)if(n=127&e[o],i=127&e[o+1],0!==n||0!==i){if(h.log("DATA","["+f([e[o],e[o+1]])+"] -> ("+f([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(a=this.parseChars(n,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else h.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,h.log("WARNING","Couldn't parse cleaned data "+f([n,i])+" orig: "+f([e[o],e[o+1]])))}else this.dataCounters.padding+=2},t.prototype.parseCmd=function(t,e){var r=null,n=(20===t||28===t)&&e>=32&&e<=47,i=(23===t||31===t)&&e>=33&&e<=35;if(!n&&!i)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,h.log("DEBUG","Repeated command ("+f([t,e])+") is dropped"),!0;r=20===t||23===t?1:2;var a=this.channels[r-1];return 20===t||28===t?32===e?a.ccRCL():33===e?a.ccBS():34===e?a.ccAOF():35===e?a.ccAON():36===e?a.ccDER():37===e?a.ccRU(2):38===e?a.ccRU(3):39===e?a.ccRU(4):40===e?a.ccFON():41===e?a.ccRDC():42===e?a.ccTR():43===e?a.ccRTD():44===e?a.ccEDM():45===e?a.ccCR():46===e?a.ccENM():47===e&&a.ccEOC():a.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},t.prototype.parseMidrow=function(t,e){var r=null;if((17===t||25===t)&&e>=32&&e<=47){if(r=17===t?1:2,r!==this.currChNr)return h.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[r-1];return n.ccMIDROW(e),h.log("DEBUG","MIDROW ("+f([t,e])+")"),!0}return!1},t.prototype.parsePAC=function(t,e){var r=null,n=null,i=(t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127,a=(16===t||24===t)&&e>=64&&e<=95;if(!i&&!a)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=t<=23?1:2,n=e>=64&&e<=95?1===r?s[t]:l[t]:1===r?u[t]:c[t];var o=this.interpretPAC(n,e),d=this.channels[r-1];return d.setPAC(o),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},t.prototype.interpretPAC=function(t,e){var r=e,n={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,n.underline=1===(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.prototype.parseChars=function(t,e){var r=null,n=null,a=null;if(t>=25?(r=2,a=t-8):(r=1,a=t),a>=17&&a<=19){var o=e;o=17===a?e+80:18===a?e+112:e+144,h.log("INFO","Special char '"+i(o)+"' in channel "+r),n=[o]}else t>=32&&t<=127&&(n=0===e?[t]:[t,e]);if(n){var s=f(n);h.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},t.prototype.parseBackgroundAttributes=function(t,e){var r,n,i,a,o=(16===t||24===t)&&e>=32&&e<=47,s=(23===t||31===t)&&e>=45&&e<=47;return!(!o&&!s)&&(r={},16===t||24===t?(n=Math.floor((e-32)/2),r.background=d[n],e%2===1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0)),i=t<24?1:2,a=this.channels[i-1],a.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},t.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}();e.default=_},"./src/utils/codecs.js":/*!*****************************!*\
	  !*** ./src/utils/codecs.js ***!
	  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(t,e){var r=a[e];return!!r&&r[t.slice(0,4)]===!0}function i(t,e){return window.MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}Object.defineProperty(e,"__esModule",{value:!0});var a={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};e.isCodecType=n,e.isCodecSupportedInMp4=i},"./src/utils/cues.js":/*!***************************!*\
	  !*** ./src/utils/cues.js ***!
	  \***************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(t,e,r,n){for(var a,o,s,u,l,c=window.VTTCue||window.TextTrackCue,d=0;d<n.rows.length;d++)if(a=n.rows[d],s=!0,u=0,l="",!a.isEmpty()){for(var h=0;h<a.chars.length;h++)a.chars[h].uchar.match(/\s/)&&s?u++:(l+=a.chars[h].uchar,s=!1);a.cueStartTime=e,e===r&&(r+=1e-4),o=new c(e,r,i.fixLineBreaks(l.trim())),u>=16?u--:u++,navigator.userAgent.match(/Firefox\//)?o.line=d+1:o.line=d>7?d-2:d+1,o.align="left",o.position=Math.max(0,Math.min(100,100*(u/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ./vttparser */"./src/utils/vttparser.js");e.newCue=n},"./src/utils/discontinuities.js":/*!**************************************!*\
	  !*** ./src/utils/discontinuities.js ***!
	  \**************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){function n(t,e){for(var r=null,n=0;n<t.length;n+=1){var i=t[n];if(i&&i.cc===e){r=i;break}}return r}function i(t,e){return d.default.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function a(t,e,r){var n=!1;return e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)&&(n=!0),n}function o(t,e){var r=t.fragments,i=e.fragments;if(!i.length||!r.length)return void h.logger.log("No fragments to align");var a=n(r,i[0].cc);return!a||a&&!a.startPTS?void h.logger.log("No frag in previous level to align on"):a}function s(t,e){e.fragments.forEach(function(e){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}),e.PTSKnown=!0}function u(t,e,r){l(t,r,e),!r.PTSKnown&&e&&c(r,e.details)}function l(t,e,r){if(a(t,r,e)){var n=o(r.details,e);n&&(h.logger.log("Adjusting PTS using last level due to CC increase within current level"),s(n.start,e))}}function c(e,r){if(r&&r.fragments.length){if(!e.hasProgramDateTime||!r.hasProgramDateTime)return;var n=r.fragments[0].programDateTime,i=e.fragments[0].programDateTime,a=(i-n)/1e3+r.fragments[0].start;t.isFinite(a)&&(h.logger.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),s(a,e))}}Object.defineProperty(e,"__esModule",{value:!0});var d=r(/*! ./binary-search */"./src/utils/binary-search.js"),h=r(/*! ../utils/logger */"./src/utils/logger.js");e.findFirstFragWithCC=n,e.findFragWithCC=i,e.shouldAlignOnDiscontinuities=a,e.findDiscontinuousReferenceFrag=o,e.adjustPts=s,e.alignStream=u,e.alignDiscontinuities=l,e.alignPDT=c}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":/*!***********************************************!*\
	  !*** ./src/utils/ewma-bandwidth-estimator.js ***!
	  \***********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../utils/ewma */"./src/utils/ewma.js"),i=function(){function t(t,e,r,i){this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(e),this.fast_=new n.default(r)}return t.prototype.sample=function(t,e){t=Math.max(t,this.minDelayMs_);var r=8e3*e/t,n=t/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}();e.default=i},"./src/utils/ewma.js":/*!***************************!*\
	  !*** ./src/utils/ewma.js ***!
	  \***************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}();e.default=n},"./src/utils/get-self-scope.js":/*!*************************************!*\
	  !*** ./src/utils/get-self-scope.js ***!
	  \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(){return"undefined"==typeof window?self:window}Object.defineProperty(e,"__esModule",{value:!0}),e.getSelfScope=n},"./src/utils/logger.js":/*!*****************************!*\
	  !*** ./src/utils/logger.js ***!
	  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(){}function i(t,e){return e="["+t+"] > "+e}function a(t){var e=c.console[t];return e?function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r[0]&&(r[0]=i(t,r[0])),e.apply(c.console,r)}:n}function o(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];e.forEach(function(e){l[e]=t[e]?t[e].bind(t):a(e)})}Object.defineProperty(e,"__esModule",{value:!0});var s=r(/*! ./get-self-scope */"./src/utils/get-self-scope.js"),u={trace:n,debug:n,log:n,warn:n,info:n,error:n},l=u,c=s.getSelfScope();e.enableLogs=function(t){if(t===!0||"object"==typeof t){o(t,"debug","log","info","warn","error");try{l.log()}catch(t){l=u}}else l=u},e.logger=l},"./src/utils/mediakeys-helper.js":/*!***************************************!*\
	  !*** ./src/utils/mediakeys-helper.js ***!
	  \***************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();e.requestMediaKeySystemAccess=n},"./src/utils/mediasource-helper.js":/*!*****************************************!*\
	  !*** ./src/utils/mediasource-helper.js ***!
	  \*****************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}Object.defineProperty(e,"__esModule",{value:!0}),e.getMediaSource=n},"./src/utils/output-filter.js":/*!************************************!*\
	  !*** ./src/utils/output-filter.js ***!
	  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.timelineController=t,this.trackName=e,this.startTime=null,this.endTime=null,this.screen=null}return t.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.prototype.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t}();e.default=n},"./src/utils/texttrack-utils.js":/*!**************************************!*\
	  !*** ./src/utils/texttrack-utils.js ***!
	  \**************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(t,e){var r=null;try{r=new window.Event("addtrack")}catch(t){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function i(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}Object.defineProperty(e,"__esModule",{value:!0}),e.sendAddTrackEvent=n,e.clearCurrentCues=i},"./src/utils/time-ranges.js":/*!**********************************!*\
	  !*** ./src/utils/time-ranges.js ***!
	  \**********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={toString:function(t){for(var e="",r=t.length,n=0;n<r;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e}};e.default=n},"./src/utils/vttcue.js":/*!*****************************!*\
	  !*** ./src/utils/vttcue.js ***!
	  \*****************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function t(t){if("string"!=typeof t)return!1;var e=a[t.toLowerCase()];return!!e&&t.toLowerCase()}function e(t){if("string"!=typeof t)return!1;var e=o[t.toLowerCase()];return!!e&&t.toLowerCase()}function r(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function n(n,a,o){var s=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,h=n,f=a,p=o,m=null,g="",v=!0,y="auto",_="start",b=50,E="middle",A=50,T="middle";if(Object.defineProperty(s,"id",r({},l,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(s,"pauseOnExit",r({},l,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(s,"startTime",r({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},l,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},l,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},l,{get:function(){return m},set:function(t){m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},l,{get:function(){return g},set:function(e){var r=t(e);if(r===!1)throw new SyntaxError("An invalid or illegal string was specified.");g=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},l,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},l,{get:function(){return y},set:function(t){if("number"!=typeof t&&t!==i)throw new SyntaxError("An invalid number or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},l,{get:function(){return _},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");_=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},l,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},l,{get:function(){return E},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");E=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},l,{get:function(){return A},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},l,{get:function(){return T},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");T=r,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",a={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){var t=window.WebVTT;return t.convertCueToDOMTree(window,this.text)},n}()},"./src/utils/vttparser.js":/*!********************************!*\
	  !*** ./src/utils/vttparser.js ***!
	  \********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";function n(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new c,this.regionList=[]}function i(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+(0|n)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function a(){this.values=Object.create(null)}function o(t,e,r,n){var i=n?t.split(n):[t];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(r);if(2===o.length){var s=o[0],u=o[1];e(s,u)}}}function s(t,e,r){function n(){var e=i(t);if(null===e)throw new Error("Malformed timestamp: "+l);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function s(t,e){var n=new a;o(t,function(t,e){switch(t){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===e){n.set(t,r[i].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var a=e.split(","),o=a[0];n.integer(t,o),n.percent(t,o)&&n.set("snapToLines",!1),n.alt(t,o,["auto"]),2===a.length&&n.alt("lineAlign",a[1],["start",h,"end"]);break;case"position":a=e.split(","),n.percent(t,a[0]),2===a.length&&n.alt("positionAlign",a[1],["start",h,"end","line-left","line-right","auto"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start",h,"end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&d.line===-1&&(i=-1),e.line=i,e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align",h);var s=n.get("position","auto");"auto"===s&&50===d.position&&(s="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=s}function u(){t=t.replace(/^\s+/,"")}var l=t;if(u(),e.startTime=n(),u(),"-->"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+l);t=t.substr(3),u(),e.endTime=n(),u(),s(t,e)}function u(t){return t.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(e,"__esModule",{value:!0});var l=r(/*! ./vttcue */"./src/utils/vttcue.js"),c=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};a.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){var r;return!!((r=e.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(e=parseFloat(e),e>=0&&e<=100))&&(this.set(t,e),!0)}};var d=new l.default(0,0,0),h="middle"===d.align?"middle":"center";e.fixLineBreaks=u,n.prototype={parse:function(t){function e(){var t=n.buffer,e=0;for(t=u(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,n.buffer=t.substr(e),r}function r(t){o(t,function(t,e){switch(t){case"Region":}},/:/)}var n=this;t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{var i=void 0;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;i=e();var a=i.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var c=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(c?c=!1:i=e(),n.state){case"HEADER":/:/.test(i)?r(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new l.default(0,0,""),n.state="CUE",i.indexOf("-->")===-1){n.cue.id=i;continue}case"CUE":try{s(i,n.cue,n.regionList)}catch(t){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var d=i.indexOf("-->")!==-1;if(!i||d&&(c=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID");continue}}}catch(t){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}},e.default=n},"./src/utils/webvtt-parser.js":/*!************************************!*\
	  !*** ./src/utils/webvtt-parser.js ***!
	  \************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ./vttparser */"./src/utils/vttparser.js"),i=r(/*! ../demux/id3 */"./src/demux/id3.js"),a=function(t,e,r){return t.substr(r||0,e.length)===e},o=function(e){var r=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),a=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return t.isFinite(r)&&t.isFinite(n)&&t.isFinite(i)&&t.isFinite(a)?(r+=1e3*n,r+=6e4*i,r+=36e5*a):-1},s=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()},u=function(t,e,r){var n=t[e],i=t[n.prevCC];if(!i||!i.new&&n.new)return t.ccOffset=t.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)t.ccOffset+=n.start-i.start,n.new=!1,n=i,i=t[n.prevCC];t.presentationOffset=r},l={parse:function(t,e,r,l,c,d){var h,f=/\r\n|\n\r|\n|\r/g,p=i.utf8ArrayToStr(new Uint8Array(t)).trim().replace(f,"\n").split("\n"),m="00:00.000",g=0,v=0,y=0,_=[],b=!0,E=new n.default;E.oncue=function(t){var e=r[l],n=r.ccOffset;e&&e.new&&(void 0!==v?n=r.ccOffset=e.start:u(r,l,y)),y&&(n=y-r.presentationOffset),t.startTime+=n-v,t.endTime+=n-v,t.id=s(t.startTime.toString())+s(t.endTime.toString())+s(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&_.push(t)},E.onparsingerror=function(t){h=t},E.onflush=function(){return h&&d?void d(h):void c(_)},p.forEach(function(t){if(b){if(a(t,"X-TIMESTAMP-MAP=")){b=!1,t.substr(16).split(",").forEach(function(t){a(t,"LOCAL:")?m=t.substr(6):a(t,"MPEGTS:")&&(g=parseInt(t.substr(7)))});try{e+(9e4*r[l].start||0)<0&&(e+=8589934592),g-=e,v=o(m)/1e3,y=g/9e4,v===-1&&(h=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){h=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(b=!1)}E.parse(t+"\n")}),E.flush()}};e.default=l}).call(this,r(/*! ./src/polyfills/number */"./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":/*!*********************************!*\
	  !*** ./src/utils/xhr-loader.js ***!
	  \*********************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */
function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! ../utils/logger */"./src/utils/logger.js"),i=window.performance,a=window.XMLHttpRequest,o=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:i.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t,e=this.context;t=this.loader=new a;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(r){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,r=e.readyState,a=this.stats,o=this.context,s=this.config;if(!a.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===a.tfirst&&(a.tfirst=Math.max(i.now(),a.trequest)),4===r){var u=e.status;if(u>=200&&u<300){a.tload=Math.max(a.tfirst,i.now());var l=void 0,c=void 0;"arraybuffer"===o.responseType?(l=e.response,c=l.byteLength):(l=e.responseText,c=l.length),a.loaded=a.total=c;var d={url:e.responseURL,data:l};this.callbacks.onSuccess(d,a,o,e)}else a.retry>=s.maxRetry||u>=400&&u<499?(n.logger.error(u+" while loading "+o.url),this.callbacks.onError({code:u,text:e.statusText},o,e)):(n.logger.warn(u+" while loading "+o.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),a.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},t.prototype.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,e)},t}();e.default=o}}).default})},function(t,e){var r=function(){function t(){if(!K){try{var t=F.getElementsByTagName("body")[0].appendChild(v("span"));t.parentNode.removeChild(t)}catch(t){return}K=!0;for(var e=j.length,r=0;r<e;r++)j[r]()}}function e(t){K?t():j[j.length]=t}function n(t){if(typeof N.addEventListener!=D)N.addEventListener("load",t,!1);else if(typeof F.addEventListener!=D)F.addEventListener("load",t,!1);else if(typeof N.attachEvent!=D)y(N,"onload",t);else if("function"==typeof N.onload){var e=N.onload;N.onload=function(){e(),t()}}else N.onload=t}function i(){B?a():o()}function a(){var t=F.getElementsByTagName("body")[0],e=v(P);e.setAttribute("type",O);var r=t.appendChild(e);if(r){var n=0;!function(){if(typeof r.GetVariable!=D){var i=r.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),Y.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(n<10)return n++,void setTimeout(arguments.callee,10);t.removeChild(e),r=null,o()}()}else o()}function o(){var t=G.length;if(t>0)for(var e=0;e<t;e++){var r=G[e].id,n=G[e].callbackFn,i={success:!1,id:r};if(Y.pv[0]>0){var a=g(r);if(a)if(!_(G[e].swfVersion)||Y.wk&&Y.wk<312)if(G[e].expressInstall&&u()){var o={};o.data=G[e].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var d={},h=a.getElementsByTagName("param"),f=h.length,p=0;p<f;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(d[h[p].getAttribute("name")]=h[p].getAttribute("value"));l(o,d,r,n)}else c(a),n&&n(i);else E(r,!0),n&&(i.success=!0,i.ref=s(r),n(i))}else if(E(r,!0),n){var m=s(r);m&&typeof m.SetVariable!=D&&(i.success=!0,i.ref=m),n(i)}}}function s(t){var e=null,r=g(t);if(r&&"OBJECT"==r.nodeName)if(typeof r.SetVariable!=D)e=r;else{var n=r.getElementsByTagName(P)[0];n&&(e=n)}return e}function u(){return!W&&_("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(t,e,r,n){W=!0,w=n||null,C={success:!1,id:r};var i=g(r);if(i){"OBJECT"==i.nodeName?(T=d(i),S=null):(T=i,S=r),t.id=x,(typeof t.width==D||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==D||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var a=Y.ie&&Y.win?["Active"].concat("").join("X"):"PlugIn",o="MMredirectURL="+N.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+F.title;if(typeof e.flashvars!=D?e.flashvars+="&"+o:e.flashvars=o,Y.ie&&Y.win&&4!=i.readyState){var s=v("div");r+="SWFObjectNew",s.setAttribute("id",r),i.parentNode.insertBefore(s,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}h(t,e,r)}}function c(t){if(Y.ie&&Y.win&&4!=t.readyState){var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(d(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(d(t),t)}function d(t){var e=v("div");if(Y.win&&Y.ie)e.innerHTML=t.innerHTML;else{var r=t.getElementsByTagName(P)[0];if(r){var n=r.childNodes;if(n)for(var i=n.length,a=0;a<i;a++)1==n[a].nodeType&&"PARAM"==n[a].nodeName||8==n[a].nodeType||e.appendChild(n[a].cloneNode(!0))}}return e}function h(t,e,r){var n,i=g(r);if(Y.wk&&Y.wk<312)return n;if(i)if(typeof t.id==D&&(t.id=r),Y.ie&&Y.win){var a="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?a+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+t[o]+'"'));var s="";for(var u in e)e[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+e[u]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",H[H.length]=t.id,n=g(t.id)}else{var l=v(P);l.setAttribute("type",O);for(var c in t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&f(l,d,e[d]);i.parentNode.replaceChild(l,i),n=l}return n}function f(t,e,r){var n=v("param");n.setAttribute("name",e),n.setAttribute("value",r),t.appendChild(n)}function p(t){var e=g(t);e&&"OBJECT"==e.nodeName&&(Y.ie&&Y.win?(e.style.display="none",function(){4==e.readyState?m(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function m(t){var e=g(t);if(e){for(var r in e)"function"==typeof e[r]&&(e[r]=null);e.parentNode.removeChild(e)}}function g(t){var e=null;try{e=F.getElementById(t)}catch(t){}return e}function v(t){return F.createElement(t)}function y(t,e,r){t.attachEvent(e,r),V[V.length]=[t,e,r]}function _(t){var e=Y.pv,r=t.split(".");return r[0]=parseInt(r[0],10),r[1]=parseInt(r[1],10)||0,r[2]=parseInt(r[2],10)||0,e[0]>r[0]||e[0]==r[0]&&e[1]>r[1]||e[0]==r[0]&&e[1]==r[1]&&e[2]>=r[2]}function b(t,e,r,n){if(!Y.ie||!Y.mac){var i=F.getElementsByTagName("head")[0];if(i){var a=r&&"string"==typeof r?r:"screen";if(n&&(k=null,L=null),!k||L!=a){var o=v("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),k=i.appendChild(o),Y.ie&&Y.win&&typeof F.styleSheets!=D&&F.styleSheets.length>0&&(k=F.styleSheets[F.styleSheets.length-1]),L=a}Y.ie&&Y.win?k&&typeof k.addRule==P&&k.addRule(t,e):k&&typeof F.createTextNode!=D&&k.appendChild(F.createTextNode(t+" {"+e+"}"))}}}function E(t,e){if(q){var r=e?"visible":"hidden";K&&g(t)?g(t).style.visibility=r:b("#"+t,"visibility:"+r)}}function A(t){var e=/[\\\"<>\.;]/,r=null!=e.exec(t);return r&&typeof encodeURIComponent!=D?encodeURIComponent(t):t}var T,S,w,C,k,L,D="undefined",P="object",I="Shockwave Flash",R="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",x="SWFObjectExprInst",M="onreadystatechange",N=window,F=document,U=navigator,B=!1,j=[i],G=[],H=[],V=[],K=!1,W=!1,q=!0,Y=function(){var t=typeof F.getElementById!=D&&typeof F.getElementsByTagName!=D&&typeof F.createElement!=D,e=U.userAgent.toLowerCase(),r=U.platform.toLowerCase(),n=r?/win/.test(r):/win/.test(e),i=r?/mac/.test(r):/mac/.test(e),a=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,s=[0,0,0],u=null;if(typeof U.plugins!=D&&typeof U.plugins[I]==P)u=U.plugins[I].description,!u||typeof U.mimeTypes!=D&&U.mimeTypes[O]&&!U.mimeTypes[O].enabledPlugin||(B=!0,o=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof N[["Active"].concat("Object").join("X")]!=D)try{var l=new(window[["Active"].concat("Object").join("X")])(R);l&&(u=l.GetVariable("$version"),u&&(o=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))}catch(t){}return{w3:t,pv:s,wk:a,ie:o,win:n,mac:i}}();(function(){Y.w3&&((typeof F.readyState!=D&&"complete"==F.readyState||typeof F.readyState==D&&(F.getElementsByTagName("body")[0]||F.body))&&t(),K||(typeof F.addEventListener!=D&&F.addEventListener("DOMContentLoaded",t,!1),Y.ie&&Y.win&&(F.attachEvent(M,function(){"complete"==F.readyState&&(F.detachEvent(M,arguments.callee),t())}),N==top&&!function(){if(!K){try{F.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),Y.wk&&!function(){if(!K)return/loaded|complete/.test(F.readyState)?void t():void setTimeout(arguments.callee,0)}(),n(t)))})(),function(){Y.ie&&Y.win&&window.attachEvent("onunload",function(){for(var t=V.length,e=0;e<t;e++)V[e][0].detachEvent(V[e][1],V[e][2]);for(var n=H.length,i=0;i<n;i++)p(H[i]);for(var a in Y)Y[a]=null;Y=null;for(var o in r)r[o]=null;r=null})}();return{registerObject:function(t,e,r,n){if(Y.w3&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=r,i.callbackFn=n,G[G.length]=i,E(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){if(Y.w3)return s(t)},embedSWF:function(t,r,n,i,a,o,s,c,d,f){var p={success:!1,id:r};Y.w3&&!(Y.wk&&Y.wk<312)&&t&&r&&n&&i&&a?(E(r,!1),e(function(){n+="",i+="";var e={};if(d&&typeof d===P)for(var m in d)e[m]=d[m];e.data=t,e.width=n,e.height=i;var g={};if(c&&typeof c===P)for(var v in c)g[v]=c[v];if(s&&typeof s===P)for(var y in s)typeof g.flashvars!=D?g.flashvars+="&"+y+"="+s[y]:g.flashvars=y+"="+s[y];if(_(a)){var b=h(e,g,r);e.id==r&&E(r,!0),p.success=!0,p.ref=b}else{if(o&&u())return e.data=o,void l(e,g,r,f);E(r,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){q=!1},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(t,e,r){return Y.w3?h(t,e,r):void 0},showExpressInstall:function(t,e,r,n){Y.w3&&u()&&l(t,e,r,n)},removeSWF:function(t){Y.w3&&p(t)},createCSS:function(t,e,r,n){Y.w3&&b(t,e,r,n)},addDomLoadEvent:e,addLoadEvent:n,getQueryParamValue:function(t){var e=F.location.search||F.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return A(e);for(var r=e.split("&"),n=0;n<r.length;n++)if(r[n].substring(0,r[n].indexOf("="))==t)return A(r[n].substring(r[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var t=g(x);t&&T&&(t.parentNode.replaceChild(T,t),S&&(E(S,!0),Y.ie&&Y.win&&(T.style.display="block")),w&&w(C)),W=!1}}}}();t.exports=r},function(t,e,r){var n,i;n=[],i=function(){var t={AD_ID:"adId",AD_TYPE:"adType",CUE_TITLE:"cueTitle",CUE_TIME_DURATION:"cueTimeDuration",AD_URL:"adUrl",AD_VAST_URL:"adVastURL",AD_VAST:"adVast"};return t}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports={ABORT:"abort",CAN_PLAY:"canPlay",CAN_PLAY_THROUGH:"canPlayThrough",DATA_LOADING:"dataLoading",EMPTIED:"emptied",ENDED:"ended",ERROR:"error",LOAD_START:"loadStart",PAUSE:"pause",PLAY:"play",PROGRESS:"progress",STALLED:"stalled",STOP:"stop",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",WAITING:"waiting",PLAY_NOT_ALLOWED:"playbackNotAllowed"}},function(t,e,r){var n,i;n=[r(1),r(3),r(2),r(103),r(102)],i=function(t,e,r,n,i){var a=t([i],{constructor:function(t,e){this.target=t,this.config=e,this.adQuartile=new n,this._defaultSequence=-1,this._adsTrackingProgress=[],this._destroyAdToggle=!1},init:function(){this._destroyAdlisteners(),this.onAdPlaybackStatusListener=this.target.on("ad-playback-status",r.hitch(this,this._onAdPlaybackStatus)),this.inherited(arguments)},destroyAd:function(){this.html5OnDemand&&("function"==typeof this.html5OnDemand.skip&&(this._destroyAdToggle=!0,this.html5OnDemand.skip()),this.html5OnDemand=null)},skipAd:function(){this.html5OnDemand&&("function"==typeof this.html5OnDemand.skip&&this.html5OnDemand.skip(),this.html5OnDemand=null)},initAdListeners:function(t){this.html5OnDemand=t,this.html5OnDemand.initHTMLElementsStyle(this.html5OnDemand.videoNode),this.playbackOnDemandStatushandler=this.html5OnDemand.setPlaybackStatusHandler(r.hitch(this,this._onAdPlaybackStatus)),this.clickTrackingElementClickedHandler=this.html5OnDemand.setClickTrackingElementClickedHandler(r.hitch(this,this._onClickTrackingElementClicked)),this.adPlaybackCompleteHandler=this.target.on("ad-playback-complete",r.hitch(this,this._destroyAdlisteners)),this.adPlaybackDestroyHandler=this.target.on("ad-playback-destroy",r.hitch(this,this._destroyAdlisteners)),this.adPlaybackErrorHandler=this.target.on("ad-playback-error",r.hitch(this,this._destroyAdlisteners))},getVastInlineAd:function(){return null},_onAdPlaybackStatus:function(t){if(this.html5Node=t.html5Node,"MEDIA_STARTED"==t.code)0==this.html5Node.currentTime&&this.emit(this.AD_MODULE_PLAYBACK_START,{id:this.playerNode,type:t.adServerType,error:!1});else if("MEDIA_TIME_UPDATE"==t.code){var e=Math.round(this.html5Node.currentTime),r=Math.round(this.html5Node.duration);this._checkVideoPlaybackQuartile(this._getTimePercent(e,r)),this.emit(this.AD_MODULE_COUNTDOWN,{countDown:r-e})}else"MEDIA_ENDED"!=t.code&&"MEDIA_ERROR"!=t.code||(this.html5OnDemand.stop(),this._destroyAdToggle?this.emit(this.AD_MODULE_PLAYBACK_DESTROY):this.emit(this.AD_MODULE_PLAYBACK_COMPLETE,{id:this.playerNode,type:t.adServerType,error:!1}),this._destroyAdToggle=!1,this._adsTrackingProgress=[],this.onAdPlaybackStatusListener.remove())},_onClickTrackingElementClicked:function(t){this.emit(this.AD_MODULE_CLICK_TRACKING,t)},_getTimePercent:function(t,e){return 0==e?0:(t/e).toFixed(2)},_checkVideoPlaybackQuartile:function(t){var e=Math.floor(4*t);void 0==this._adsTrackingProgress[e]&&(this._adsTrackingProgress[e]=!0,this.emit(this.AD_MODULE_QUARTILE,{id:this.playerNode,adQuartile:this.adQuartile.getQuartileByIndex(e),error:!1}))},_destroyAdlisteners:function(){this.playbackOnDemandStatushandler&&this.playbackOnDemandStatushandler.remove(),this.clickTrackingElementClickedHandler&&this.clickTrackingElementClickedHandler.remove(),this.adPlaybackCompleteHandler&&this.adPlaybackCompleteHandler.remove(),this.adPlaybackErrorHandler&&this.adPlaybackErrorHandler.remove(),this.onAdPlaybackStatusListener&&this.onAdPlaybackStatusListener.remove(),this.adPlaybackDestroyHandler&&this.adPlaybackDestroyHandler.remove()}});return a}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(t){this.id=t,this.inlineAd=null,this.wrapperAd=null}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.id=null,this.width=null,this.height=null,this.expandedWidth=null,this.expandedHeight=null,this.resourceType=null,this.creativeType=null,this.url=null,this.code=null,this.clickThroughURL=null,this.altText=null,this.adParameters=null,this.creativeView=null}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.vastAd=null}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{DELIVERY_STREAMING:"streaming",DELIVERY_PROGRESSIVE:"progressive",constructor:function(){this.url=null,this.id=null,this.delivery=null,this.bitrate=null,this.width=null,this.height=null,this.type=null,this.scalable=!1,this.maintainAspectRatio=!1,this.apiFramework=null,this.minBitrate=null,this.maxBitrate=null,this.codec=null}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{IFRAME:"iframe",HTML:"html",STATIC:"static",SCRIPT:"script",OTHER:"other",constructor:function(t){this.name=t}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.urls=[],this.type=null},addUrls:function(t){for(var e=t.length,r=0;r<e;r++)this.urls.push(t[r])}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.clickThrough=null,this.clickTrackings=[],this.customClicks=[]}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.vastAdTagURL=null,this.impression=null,this.impressions=[],this.error=null,this.trackingEvents=null,this.creatives=[],this.videoClicks=null},getLinearTrackingEvents:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).trackingEvents:this.trackingEvents},_getLinearElement:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,r=0;r<e;r++)if(null!=this.creatives[r].linearElement){if(t==-1)return this.creatives[r].linearElement;if(this.creatives[r].sequence==t)return this.creatives[r].linearElement}},getLinearVideoClick:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).videoClick:this.videoClicks}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){var t={ID:"id",NODEKIND_ELEMENT:"element",INLINE:"InLine",WRAPPER:"Wrapper",AD_SYSTEM:"AdSystem",AD_TITLE:"AdTitle",DESCRIPTION:"Description",ERROR:"Error",IMPRESSION:"Impression",TRACKING_EVENTS:"TrackingEvents",COMPANION_ADS:"CompanionAds",COMPANION_CLICK_THROUGH:"CompanionClickThrough",LINEAR:"Linear",NON_LINEAR_ADS:"NonLinearAds",NON_LINEAR:"NonLinear",NON_LINEAR_CLICK_THROUGH:"NonLinearClickThrough",TRACKING:"Tracking",EVENT:"event",DURATION:"Duration",AD_ID:"AdID",MEDIA_FILES:"MediaFiles",MEDIA_FILE:"MediaFile",VIDEO_CLICKS:"VideoClicks",CLICK_THROUGH:"ClickThrough",CLICK_TRACKING:"ClickTracking",CUSTOM_CLICK:"CustomClick",COMPANION:"Companion",ALT_TEXT:"AltText",AD_PARAMETERS:"AdParameters",BITRATE:"bitrate",MIN_BITRATE:"minBitrate",MAX_BITRATE:"maxBitrate",CODEC:"codec",DELIVERY:"delivery",TYPE:"type",WIDTH:"width",HEIGHT:"height",EXPANDED_WIDTH:"expandedWidth",EXPANDED_HEIGHT:"expandedHeight",CREATIVE_TYPE:"creativeType",SEQUENCE:"sequence",SCALABLE:"scalable",MAINTAIN_ASPECT_RATIO:"maintainAspectRatio",API_FRAMEWORK:"apiFramework",IFRAME_RESOURCE:"IFrameResource",HTML_RESOURCE:"HTMLResource",STATIC_RESOURCE:"StaticResource",CREATIVE_VIEW:"creativeView",MIN_SUGGESTED_DURATION:"minSuggestedDuration",EXPIRES:"Expires",CATEGORY:"Category",SURVEY:"Survey",ADVERTISER:"Advertiser",AUDIO_INTERACTIONS:"AudioInteractions",LOGO_TILE:"logoTile",LOGO_TITLE:"logoTitle",LOGO_ARTIST:"logoArtist",LOGO_URL:"logoURL"};return t}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(16);n=[r(1)],i=function(t){var e=t([],{constructor:function(t){this.target=t},getTagValue:function(t,e){return 0==t.getElementsByTagName(e).length?null:a.textContent(t.getElementsByTagName(e)[0])},getDataAsArray:function(t,e,r){if(0==t.getElementsByTagName(e).length)return null;for(var n=t.getElementsByTagName(e)[0].childNodes,i=[],o=0;o<n.length;o++)n[o].nodeName==r&&i.push(a.textContent(n[o]));return i},trim:function(t){return void 0==t?null:t.replace(/^\s+|\s+$/g,"")}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(2)],i=function(t){var e={};return{objectToQuery:function(r){var n=encodeURIComponent,i=[];for(var a in r){var o=r[a];if(o!=e[a]){var s=n(a)+"=";if(t.isArray(o))for(var u=0,l=o.length;u<l;++u)i.push(s+n(o[u]));else i.push(s+n(o))}}return i.join("&")},queryToObject:function(e){for(var r,n,i,a=decodeURIComponent,o=e.split("&"),s={},u=0,l=o.length;u<l;++u)if(i=o[u],i.length){var c=i.indexOf("=");c<0?(r=a(i),n=""):(r=a(i.slice(0,c)),n=a(i.slice(c+1))),"string"==typeof s[r]&&(s[r]=[s[r]]),t.isArray(s[r])?s[r].push(n):s[r]=n}return s}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(54)],i=function(t){return t}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[e,r(34),r(24),r(32),r(51),r(6),r(2),r(25)],i=function(t,e,r,n,i,a,o,s){function u(t){return c(t)}function l(t){return t.data||t.text}t.deepCopy=function(e,r){for(var n in r){var i=e[n],a=r[n];i!==a&&(i&&"object"==typeof i&&a&&"object"==typeof a?t.deepCopy(i,a):e[n]=a)}return e},t.deepCreate=function(e,r){r=r||{};var n,i,a=o.delegate(e);for(n in e)i=e[n],i&&"object"==typeof i&&(a[n]=t.deepCreate(i,r[n]));return t.deepCopy(a,r)};var c=Object.freeze||function(t){return t};t.deferred=function(i,a,d,h,f,p){function m(t){throw t.response=i,t}var g=new n(function(t){return a&&a(g,i),t&&(t instanceof e||t instanceof r)?t:new r("Request canceled",i)});g.response=i,g.isValid=d,g.isReady=h,g.handleResponse=f;var v=g.then(u).otherwise(m);t.notify&&v.then(o.hitch(t.notify,"emit","load"),o.hitch(t.notify,"emit","error"));var y=v.then(l),_=new s;for(var b in y)y.hasOwnProperty(b)&&(_[b]=y[b]);return _.response=v,c(_),p&&g.then(function(t){p.call(g,t)},function(t){p.call(g,i,t)}),g.promise=_,g.then=_.then,g},t.addCommonMethods=function(t,e){a.forEach(e||["GET","POST","PUT","DELETE"],function(e){t[("DELETE"===e?"DEL":e).toLowerCase()]=function(r,n){return n=o.delegate(n||{}),n.method=e,t(r,n)}})},t.parseArgs=function(t,e,r){var n=e.data,a=e.query;return n&&!r&&"object"==typeof n&&(e.data=i.objectToQuery(n)),a?("object"==typeof a&&(a=i.objectToQuery(a)),e.preventCache&&(a+=(a?"&":"")+"request.preventCache="+ +new Date)):e.preventCache&&(a="request.preventCache="+ +new Date),t&&a&&(t+=(~t.indexOf("?")?"&":"?")+a),{url:t,options:e,getHeader:function(t){return null}}},t.checkStatus=function(t){return t=t||0,t>=200&&t<300||304===t||1223===t||!t}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(34),r(88),r(87),r(53),r(4)],i=function(t,e,r,n,i){function a(e,i){var a=e.xhr;if(e.status=e.xhr.status,e.text=a.responseText,"xml"===e.options.handleAs&&(e.data=a.responseXML),!i)try{r(e)}catch(t){i=t}i?this.reject(i):n.checkStatus(a.status)?this.resolve(e):(i=new t("Unable to load "+e.url+" status: "+a.status,e),this.reject(i))}function o(t){return this.xhr.getResponseHeader(t)}function s(r,p,m){var g=n.parseArgs(r,n.deepCreate(f,p),i("native-formdata")&&p&&p.data&&p.data instanceof FormData);r=g.url,p=g.options;var v,y=function(){v&&v()},_=n.deferred(g,d,u,l,a,y),b=g.xhr=s._create();if(!b)return _.cancel(new t("XHR was not created")),m?_:_.promise;g.getHeader=o,c&&(v=c(b,_,g));var E=p.data,A=!p.sync,T=p.method;try{b.open(T,r,A,p.user||h,p.password||h),p.withCredentials&&(b.withCredentials=p.withCredentials);var S=p.headers,w="application/x-www-form-urlencoded";if(S)for(var C in S)"content-type"===C.toLowerCase()?w=S[C]:S[C]&&b.setRequestHeader(C,S[C]);w&&w!==!1&&b.setRequestHeader("Content-Type",w),S&&"X-Requested-With"in S||b.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.notify&&n.notify.emit("send",g,_.promise.cancel),b.send(E)}catch(t){_.reject(t)}return e(_),b=null,m?_:_.promise}i.add("native-xhr",function(){return"undefined"!=typeof XMLHttpRequest}),i.add("dojo-force-activex-xhr",function(){return i("activex")&&!document.addEventListener&&"file:"===window.location.protocol}),i.add("native-xhr2",function(){if(i("native-xhr")){var t=new XMLHttpRequest;return"undefined"!=typeof t.addEventListener&&("undefined"==typeof opera||"undefined"!=typeof t.upload)}}),i.add("native-formdata",function(){return"function"==typeof FormData});var u,l,c,d;i("native-xhr2")?(u=function(t){return!this.isFulfilled()},d=function(t,e){e.xhr.abort()},c=function(e,r,n){function i(t){r.handleResponse(n)}function a(e){var i=e.target,a=new t("Unable to load "+n.url+" status: "+i.status,n);r.handleResponse(n,a)}function o(t){t.lengthComputable&&(n.loaded=t.loaded,n.total=t.total,r.progress(n))}return e.addEventListener("load",i,!1),e.addEventListener("error",a,!1),e.addEventListener("progress",o,!1),function(){e.removeEventListener("load",i,!1),e.removeEventListener("error",a,!1),e.removeEventListener("progress",o,!1),e=null}}):(u=function(t){return t.xhr.readyState},l=function(t){return 4===t.xhr.readyState},d=function(t,e){var r=e.xhr,n=typeof r.abort;"function"!==n&&"object"!==n&&"unknown"!==n||r.abort()});var h,f={data:null,query:null,sync:!1,method:"GET"};if(s._create=function(){throw new Error("XMLHTTP not available")},i("native-xhr")&&!i("dojo-force-activex-xhr"))s._create=function(){return new XMLHttpRequest};else if(i("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),s._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(t){try{new ActiveXObject("Microsoft.XMLHTTP"),s._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(t){}}return n.addCommonMethods(s),s}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(4),r(27)],i=function(t,e){"use strict";var r=document.createElement("div");t.add("dom-qsa2.1",!!r.querySelectorAll),t.add("dom-qsa3",function(){try{return r.innerHTML="<p class='TEST'></p>",1==r.querySelectorAll(".TEST:empty").length}catch(t){}});var n,i="./acme",a="./lite";return{load:function(r,o,s,u){var l=e;if(r="default"==r?t("config-selectorEngine")||"css3":r,r="css2"==r||"lite"==r?a:"css2.1"==r?t("dom-qsa2.1")?a:i:"css3"==r?t("dom-qsa3")?a:i:"acme"==r?i:(l=o)&&r,"?"==r.charAt(r.length-1)){r=r.substring(0,r.length-1);var c=!0}return c&&(t("dom-compliant-qsa")||n)?s(n):void l([r],function(t){"./lite"!=r&&(n=t),s(t)})}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports=void 0},function(t,e){t.exports={gettingStationInformation:"Getting station information...",paused:"Paused",onAir:"On Air",disconnected:"Disconnected",streamUnavailable:"Stream unavailable",buffering:"Buffering",connecting:"Live stream connection in progress...",reconnecting:"Live stream connection in progress...",seekfailed:"Seek failed",seekinvalidtime:"Impossible to seek due to invalid time",ended:"Ended",pause:"Paused",play:"Playing",stop:"Stopped",error:"Error",streamGeoBlocked:"Sorry, this content is not available in your area",stationNotFound:"Station not found",flashPluginOutOfDate:"Your Flash plugin version detected is out of date. Minimum version required is: 10.2.0",browserNotSupported:"Your browser does not support HTML5 feature",embedFailed:"The embed failed!",playbackNotAllowed:"Playback of media in the current context or situation is not allowed"}},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(t){if(d===clearTimeout)return clearTimeout(t);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function o(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&s())}function s(){if(!m){var t=i(o);m=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,m=!1,a(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,d,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(t){d=n}}();var f,p=[],m=!1,g=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];p.push(new u(t,e)),1!==p.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,r){var n,i,a=r(21),o=a.getProtocol();n=[r(1)],i=function(t){var e=t([],{ENDPOINT:o+"//runspot4.tritondigital.com/RunSpotV4.svc/GetVASTAd?&StationID={sid}&MediaFormat={mediaformat}&RecordImpressionOnCall={recordimpressiononcall}&AdMinimumDuration={adminimumduration}&AdMaximumDuration={admaximumduration}&AdLevelPlacement={adlevelplacement}&AdCategory={adcategory}",mediaAdBlankFiles:["blank.flv","9483.mp3"],getVastUri:function(t,e,r,n,i,a,o,s){var r=void 0!=r?r:"21",n=void 0!=n?n:"1",i=void 0!=i&&i,a=void 0!=a?a:"0",o=void 0!=o?o:"900",s=void 0!=s?s:"1",u=void 0!=t?t:this.ENDPOINT;return u=u.replace("{sid}",e),u=u.replace("{mediaformat}",parseInt(r)),u=u.replace("{adlevelplacement}",parseInt(n)),u=u.replace("{recordimpressiononcall}",i),u=u.replace("{adminimumduration}",parseInt(a)),u=u.replace("{admaximumduration}",parseInt(o)),u=u.replace("{adcategory}",parseInt(s))}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){var t={HLS_TRACK_ID:"hlsTrackId",HLS_SEGMENT_ID:"hlsSegmentId"};return t}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){var t={CUE_TITLE:"cueTitle",ARTIST_NAME:"artistName",ALBUM_NAME:"albumName",PROGRAM_ID:"trackID",CUE_TIME_DURATION:"cueTimeDuration",CUE_TIME_START:"cueTimeStart",TRACK_ID:"trackID",NOW_PLAYING_URL:"nowplayingURL",TRACK_COVER_URL:"coverURL"};return t}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports={AUDIO:"Audio",VIDEO:"Video"}},function(t,e){/** @license
	 * eventsource.js
	 * Available under MIT License (MIT)
	 * https://github.com/Yaffle/EventSource/
	 */
!function(t){function e(){this.data={}}function r(){this.listeners=new e}function n(t){c(function(){throw t},0)}function i(t){this.type=t,this.target=void 0}function a(t,e){i.call(this,t),this.data=e.data,this.lastEventId=e.lastEventId}function o(t,e){var r=t;return r!==r&&(r=e),r<C?C:r>k?k:r}function s(t,e,r){try{"function"==typeof e&&e.call(t,r)}catch(t){n(t)}}function u(e,n){function u(){G=_,void 0!=F&&(F.abort(),F=void 0),0!==U&&(d(U),U=0),0!==B&&(d(B),B=0),O.readyState=_}function l(t){var r="";if(G===y||G===v)try{r=F.responseText}catch(t){}var n=void 0,l=!1;if(G===v){var h=0,f="",p=void 0;if("contentType"in F)""!==t&&"error"!==t&&(h=200,f="OK",p=F.contentType);else try{h=F.status,f=F.statusText,p=F.getResponseHeader("Content-Type")}catch(t){h=0,f="",p=void 0}if(void 0==p&&(p=""),0===h&&""===f&&"load"===t&&""!==r&&(h=200,f="OK",""===p)){var m=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(e);void 0!=m&&(p=m[1])}if(200===h&&w.test(p)){if(G=y,M=!0,x=P,O.readyState=y,n=new i("open"),O.dispatchEvent(n),s(O,O.onopen,n),G===_)return}else if(0!==h&&(200!==h||""!==p)){var C="";C=200!==h?"EventSource's response has a status "+h+" "+f.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+p.replace(/\s+/g," ")+". Aborting the connection.",c(function(){throw new Error(C)},0),l=!0}}if(G===y){r.length>j&&(M=!0);for(var L=j-1,D=r.length,N="\n";++L<D;)if(N=r.charAt(L),q===b&&"\n"===N)q=E;else if(q===b&&(q=E),"\r"===N||"\n"===N){if("data"===Y?H.push(z):"id"===Y?V=z:"event"===Y?K=z:"retry"===Y?(P=o(Number(z),P),x=P):"heartbeatTimeout"===Y&&(I=o(Number(z),I),0!==U&&(d(U),U=c(W,I))),z="",Y="",q===E){if(0!==H.length&&(R=V,""===K&&(K="message"),n=new a(K,{data:H.join("\n"),lastEventId:V}),O.dispatchEvent(n),"message"===K&&s(O,O.onmessage,n),G===_))return;H.length=0,K=""}q="\r"===N?b:E}else q===E&&(q=A),q===A?":"===N?q=T:Y+=N:q===T?(" "!==N&&(z+=N),q=S):q===S&&(z+=N);j=D}G!==y&&G!==v||!("load"===t||"error"===t||l||j>1048576||0===U&&!M)?0===U&&(M=!1,U=c(W,I)):(l?u():(""!==t||0!==U||M||c(function(){throw new Error("No activity within "+I+" milliseconds. Reconnecting.")},0),G=g,F.abort(),0!==U&&(d(U),U=0),x>16*P&&(x=16*P),x>k&&(x=k),U=c(W,x),x=2*x+1,O.readyState=v),n=new i("error"),O.dispatchEvent(n),s(O,O.onerror,n))}function h(){l("progress")}function f(){l("load")}function C(){l("error")}function L(){l(4===F.readyState?0===F.status?"error":"load":"progress")}e=e.toString();var D=p&&void 0!=n&&Boolean(n.withCredentials),P=o(1e3,0),I=o(6e10,0),R="",O=this,x=P,M=!1,N=void 0!=n&&void 0!=n.Transport?n.Transport:m,F=new N,U=0,B=0,j=0,G=g,H=[],V="",K="",W=void 0,q=E,Y="",z="";"readyState"in F&&void 0!=t.opera&&(B=c(function t(){3===F.readyState&&l("progress"),B=c(t,500)},0)),W=function(){if(U=0,G!==g)return void l("");if((!("ontimeout"in F)||"sendAsBinary"in F||"mozAnon"in F)&&void 0!=t.document&&void 0!=t.document.readyState&&"complete"!==t.document.readyState)return void(U=c(W,4));F.onload=f,F.onerror=C,"onabort"in F&&(F.onabort=C),"onprogress"in F&&(F.onprogress=h),"onreadystatechange"in F&&(F.onreadystatechange=L),M=!1,U=c(W,I),j=0,G=v,H.length=0,K="",V=R,z="",Y="",q=E;var r=e.slice(0,5);r="data:"!==r&&"blob:"!==r?e+((e.indexOf("?",0)===-1?"?":"&")+"lastEventId="+encodeURIComponent(R)+"&r="+(Math.random()+1).toString().slice(2)):e,F.open("GET",r,!0),"withCredentials"in F&&(F.withCredentials=D),"responseType"in F&&(F.responseType="text"),"setRequestHeader"in F&&F.setRequestHeader("Accept","text/event-stream"),F.send(void 0)},r.call(this),this.close=u,this.url=e,this.readyState=v,this.withCredentials=D,this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,W()}function l(){this.CONNECTING=v,this.OPEN=y,this.CLOSED=_}var c=t.setTimeout,d=t.clearTimeout;e.prototype.get=function(t){return this.data[t+"~"]},e.prototype.set=function(t,e){this.data[t+"~"]=e},e.prototype.delete=function(t){delete this.data[t+"~"]},r.prototype.dispatchEvent=function(t){t.target=this;var e=t.type.toString(),r=this.listeners,i=r.get(e);if(void 0!=i)for(var a=i.length,o=-1,s=void 0;++o<a;){s=i[o];try{s.call(this,t)}catch(t){n(t)}}},r.prototype.addEventListener=function(t,e){t=t.toString();var r=this.listeners,n=r.get(t);void 0==n&&(n=[],r.set(t,n));for(var i=n.length;--i>=0;)if(n[i]===e)return;n.push(e)},r.prototype.removeEventListener=function(t,e){t=t.toString();var r=this.listeners,n=r.get(t);if(void 0!=n){for(var i=n.length,a=[],o=-1;++o<i;)n[o]!==e&&a.push(n[o]);0===a.length?r.delete(t):r.set(t,a)}},a.prototype=i.prototype;var h=t.XMLHttpRequest,f=t.XDomainRequest,p=void 0!=h&&void 0!=(new h).withCredentials,m=p||void 0!=h&&void 0==f?h:f,g=-1,v=0,y=1,_=2,b=3,E=4,A=5,T=6,S=7,w=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,C=1e3,k=18e6;l.prototype=r.prototype,u.prototype=new l,l.call(u),p&&(u.prototype.withCredentials=void 0);var L=function(){return void 0!=t.EventSource&&"withCredentials"in t.EventSource.prototype};void 0!=m&&(void 0==t.EventSource||p&&!L())&&(t.NativeEventSource=t.EventSource,t.EventSource=u)}("undefined"!=typeof window?window:this)},function(t,e,r){var n,i,a=r(16),o=r(15);n=[r(1),r(2),r(12),r(61),r(38),r(10),r(14)],i=function(t,e,r,n,i,s,u){var l=t([r],{cuePointMap:{timestamp:"timestamp",type:"type",cue_title:n.CUE_TITLE,track_artist_name:n.ARTIST_NAME,track_album_name:n.ALBUM_NAME,program_id:n.PROGRAM_ID,cue_time_duration:n.CUE_TIME_DURATION,cue_time_start:n.CUE_TIME_START,track_id:n.TRACK_ID,track_nowplaying_url:n.NOW_PLAYING_URL,track_cover_url:n.TRACK_COVER_URL,ad_id:i.AD_ID,ad_type:i.AD_TYPE,cue_title:i.CUE_TITLE,cue_time_duration:i.CUE_TIME_DURATION,ad_url:i.AD_URL},constructor:function(t,e){this.inherited(arguments),this.platform=new o(t.platformId)},start:function(){this.emit("module-ready",{id:"NowPlayingApi",module:this})},load:function(t){var r=new u,n=this._getRequestArgs(t.hd?t.mount+"AAC":t.mount,t.numberToFetch,t.eventType||"track",t.mode),i=new s;return i.request(this.platform.endpoint.nowPlayingHistory,{mount:t.mount,mode:t.mode||"songHistory",deferred:r},n,e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError)),r},_onLoadError:function(t,e){return console.error("nowPlayingApi::_onLoadError - mount="+t.mount+" - error="+e),this.emit("nowplaying-api-error",{mount:t.mount,error:t.error}),t.deferred.reject({mount:t.mount,error:t.error})},_onLoadComplete:function(t,e){e=e.getElementsByTagName("nowplaying-info");for(var r,n,i,o,s,u,l=[],c=0;c<e.length;c++){s=e[c].getAttribute("type"),u=e[c].getAttribute("timestamp"),n=e[c].childNodes,r={parameters:{}},r[this.cuePointMap.type]=s,r[this.cuePointMap.timestamp]=parseInt(u);for(var d=0;d<n.length;d++)i=n[d].getAttribute("name"),o=a.textContent(n[d]),void 0!=this.cuePointMap[i]&&(r[this.cuePointMap[i]]=o),r.parameters[i]=o;l.push(r)}l=l.sort(function(t,e){return t.cueTimeStart-e.cueTimeStart}).reverse(),this._emitNotificationByMode(t.mount,t.mode,l),t.deferred.resolve({mount:t.mount,list:l})},_emitNotificationByMode:function(t,e,r){switch(e){case"songHistory":this._emitSongHistoryNotification(t,r);break;case"nowPlaying":this._emitNowPlayingNotification(t,r)}},_emitSongHistoryNotification:function(t,e){e.length>0?this.emit("list-loaded",{mount:t,list:e}):this.emit("list-empty",{mount:t})},_emitNowPlayingNotification:function(t,e){e.length>0?this.emit("cue-point",{mount:t,cuePoint:e[0]}):this.emit("cue-point-empty",{mount:t})},_getRequestArgs:function(t,e,r,n){return{handleAs:"xml",preventCache:!0,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"},query:{mountName:t,numberToFetch:"nowPlaying"==n?1:e,eventType:r}}}});return l}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.id=null,this.adID=null,this.sequence=null,this.linearElement=null,this.companionAds=[],this.nonLinearAds=[]}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.creatives=[],this.inherited(arguments)},addWrapperLinearTrackingEvents:function(t){var e=this._getLinearElement();null!=e&&(e.trackingEvents=e.trackingEvents.concat(t))},addWrapperLinearVideoClickTracking:function(t){var e=this._getLinearElement();null!=e&&null!=e.videoClick&&(e.videoClick.clickTrackings=e.videoClick.clickTrackings.concat(t))},addImpressions:function(t){null!=t&&(this.impressions=this.impressions.concat(t))},addCustomClicks:function(t){var e=this._getLinearElement();null!=e&&null!=e.videoClick&&(e.videoClick.customClicks=e.videoClick.customClicks.concat(t))},getLinearTrackingEvents:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement()?this._getLinearElement().trackingEvents:null},getCompanionAdUrl:function(t,e,r,n){var i=this.getCompanionAds(n);if(null==i)return null;for(var a=!1,o=i.length,s=0;s<o;s++)if(a=i[s].width==t&&i[s].height==e,1!=a){if(null==r)return i[s];if(companionAd.resourceType==r)return i[s]}return null},getCompanionAds:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,r=0;r<e;r++)if(this.creatives[r].companionAds.length>0){if(t==-1)return this.creatives[r].companionAds;if(this.creatives[r].sequence==t)return this.creatives[r].companionAds}},getLinearMediaFiles:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t)?this._getLinearElement(t).mediaFiles:null},getLinearMediaFileByIndex:function(t,e){var e=e;void 0==e&&(e=-1);var t=t;return void 0==t&&(t=0),null!=this._getLinearElement(e).mediaFiles[t]?this._getLinearElement(e).mediaFiles[t]:null},getLinearVideoClick:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t).videoClick?this._getLinearElement(t).videoClick:null},getNonLinearAds:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,r=0;r<e;r++)if(this.creatives[r].nonLinearAds.length>0){if(t==-1)return this.creatives[r].nonLinearAds;if(this.creatives[r].sequence==t)return this.creatives[r].nonLinearAds}},getLinearDuration:function(t){var t=t;return void 0==t&&(t=-1),null!=this._getLinearElement(t).duration?this._getLinearElement(t).duration:null},_getLinearElement:function(t){var t=t;void 0==t&&(t=-1);for(var e=this.creatives.length,r=0;r<e;r++)if(null!=this.creatives[r].linearElement){if(t==-1)return this.creatives[r].linearElement;if(this.creatives[r].sequence==t)return this.creatives[r].linearElement}}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.duration=null,this.trackingEvents=[],this.videoClick=null,this.mediaFiles=[]}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.resourceType=null,this.creativeType=null,this.url=null,this.code=null,this.clickThroughURL=null,this.adParameters=null,this.scalable=!1,this.maintainAspectRatio=!1,this.apiFramework=null,this.minSuggestedDuration=null}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(18);n=[r(1)],i=function(t){var e=t([],{constructor:function(){var t=a.getLocalization();this.flashModuleMap={flashPluginOutOfDate:{code:100,message:t.flashPluginOutOfDate}},this.html5ModuleMap={browserNotSupported:{code:101,message:t.browserNotSupported}}}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(2),r(4),r(3),r(7),r(12),r(26),r(51)],i=function(t,e,r,n,i,a,o,s){var u=t([a],{TIME_OUT_MESSAGE_DELAY:3e4,constructor:function(t,e,r){this.type=r,this.volume=1,this.connection=null,this._track=null,this._currentLiveApiParams=null,this.isLiveStream=!1,this.lowActivated=!1,this.playAdCalled=!1,this.mount=null,this.station=null,this.__resetBackOff(),t&&t.playerId&&(this.playerNode=i.byId(t.playerId,document)),t&&t.mount&&(this.mount=t.mount),t&&t.station&&(this.station=t.station),this.hls=void 0==t.hls||t.hls,this.audioAdaptive=void 0!=t.audioAdaptive&&t.audioAdaptive,this.__initSbmConfig(t)},start:function(){n(this.target,"stream-start",e.hitch(this,this.__onStreamStart)),n(this.target,"stream-stop",e.hitch(this,this.__onStreamStop)),n(this.target,"stream-fail",e.hitch(this,this.__onStreamFailed)),n(this.target,"media-playback-started",e.hitch(this,this._onMediaPlaybackStarted)),n(this.target,"media-playback-error",e.hitch(this,this._onMediaPlaybackError)),n(this.target,"ad-break-cue-point",e.hitch(this,this.__onAdBreakCuePoint))},play:function(t){return void 0!=t.file&&""!=t.file?(this.isLiveStream=!1,void this.__playMedia(t)):(this._currentLiveApiParams=t,void(this.connectionIterator?(this.isLiveStream=!0,this.__connect(this.connectionIterator.current())):console.error("techModule::play - connectionIterator is not defined")))},setConnectionIterator:function(t){this.connectionIterator=t},currentConnection:function(){return this.connection},currentTrack:function(){return this._track},setCurrentTrack:function(t){this._track=t},_onMediaPlaybackStarted:function(t){},_onMediaPlaybackError:function(){},__onStreamStart:function(){this.__resetBackOff(),this._currentLiveApiParams&&this._currentLiveApiParams.connectionTimeOut>0&&(this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutAlert),6e4*this._currentLiveApiParams.connectionTimeOut))},__onStreamStop:function(){this.breakTimer&&clearInterval(this.breakTimer),this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer)},__onStreamFailed:function(){console.error("techModule::__onStreamFailed"),this.__reconnect()},__onStreamUnmute:function(){console.info("techModule::__onStreamUnmute"),this.connectionIterator&&this.__reconnect()},__reconnect:function(){if(!this.connectionIterator)return void console.error("techModule::__reconnect - connectionIterator is not defined");if(this.connectionIterator.hasLooped()){var t=Math.min(this.backOffDelay<<this.backOffRetry++,6e4);this.backOffTimer=setTimeout(e.hitch(this,this.__onBackOffTimeOut),t)}else this.__connect(this.connectionIterator.next())},__onBackOffTimeOut:function(){this.connectionIterator.reset(),this.__connect(this.connectionIterator.next())},__resetBackOff:function(){this.backOffRetry=0,this.backOffDelay=4e3*Math.random()+1e3,this.backOffTimer&&clearTimeout(this.backOffTimer)},__playMedia:function(t){null!=t&&(1==this.config.adStitcher&&t.trackingParameters&&(t.file+=(t.file.indexOf("?")!=-1?"&":"?")+s.objectToQuery(t.trackingParameters).replace(/\./g,"%2E")),this.playMedia({url:t.file}))},__connect:function(t){if(null!=t){if(this.connection=t,null!=this.connection&&(this.mount=this.connection.mount?this.connection.mount:null),null!=this._currentLiveApiParams&&(this.station=this._currentLiveApiParams.station?this._currentLiveApiParams.station:null),this.connection.isGeoBlocked&&this.connection.alternateContent)return void o.publish("api/request","get-alternate-content",this.connection.alternateContent);var e=this._currentLiveApiParams.trackingParameters||{};this.lowActivated&&this.connection.isAudioAdaptive&&(e.utags="low-bw");var r=this.connection.mimeType,n=this.connection.url;e&&(n=n+"?"+s.objectToQuery(e)),this.emit("stream-select"),this.playStream({url:n,mimeType:r,format:this.connection.format,timeShift:this._currentLiveApiParams.timeShift,uuidEnabled:this.connection.uuidEnabled,sendPageUrl:this.connection.sendPageUrl,hasVideo:this.connection.hasVideo,type:this.connection.type,mount:this.connection.mount,sbmConfig:this.__getSbmData(),isHLS:this.connection.isHLS,isHLSTS:this.connection.isHLSTS})}},__getSbmData:function(){return null!=this._sbmConfig&&this._sbmConfig.active&&null!=this.connection.metadata&&null!=this.connection.metadata.sseSideband?(this._sbmConfig.info=this.connection.metadata.sseSideband,this._sbmConfig):this._sbmConfig},__onAdBreakCuePoint:function(t){var e=t.data.adBreakData;this.breakTimer&&clearInterval(this.breakTimer),e.duration>0&&this.__initBreakTimer(e.duration)},__initBreakTimer:function(t){this.breakTimer=setInterval(e.hitch(this,this.__onBreakTimerComplete),t)},__onBreakTimerComplete:function(){this.breakTimer&&clearInterval(this.breakTimer),this.emit("ad-break-cue-point-complete")},__initSbmConfig:function(t){t.sbm&&!t.sbm.active?this._sbmConfig={active:!1,aSyncCuePointFallback:void 0==t.sbm.aSyncCuePointFallback||t.sbm.aSyncCuePointFallback}:t.sbm&&t.sbm.active?this._sbmConfig={active:!0,aSyncCuePointFallback:void 0==t.sbm.aSyncCuePointFallback||t.sbm.aSyncCuePointFallback}:"Html5"==this.type?this._sbmConfig={active:!0,aSyncCuePointFallback:!0}:this._sbmConfig=null},prepare:function(t){"adModule"===t&&(this.playAdCalled=!0)},playStream:function(t){},pause:function(){},stop:function(){this.isLiveStream?(this.__resetBackOff(),this.stopStream()):this.stopMedia()},resume:function(){},seek:function(t){1==this.isLiveStream?this.seekStream(t):this.seekMedia(t)},seekLive:function(){},restartConnectionTimeOut:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this._currentLiveApiParams.connectionTimeOut>0&&(this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutAlert),6e4*this._currentLiveApiParams.connectionTimeOut))},setVolume:function(t){this.volume=t},getVolume:function(){return this.volume},mute:function(){},unMute:function(){},playAd:function(t,e){this.playAdCalled=!0},skipAd:function(){},destroyAd:function(){},__onTimeOutAlert:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this.connectionTimeOutTimer=setInterval(e.hitch(this,this.__onTimeOutReached),this.TIME_OUT_MESSAGE_DELAY),this.emit("timeout-alert")},__onTimeOutReached:function(){this.connectionTimeOutTimer&&clearInterval(this.connectionTimeOutTimer),this.stopStream(),this.emit("timeout-reach")}});return u}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=(r(20),r(36),r(39));r(22);n=[r(1),r(3),r(13),r(6),r(2),r(19),r(86),r(4)],i=function(t,e,r,n,i,o,s,u){var l=t([r],{MAX_CONNECTION_LATENCY:5e3,constructor:function(){this.inherited(arguments),this.mediaNode=null,this.audioSource=null,this.isStopped=!0,this.isPaused=!0,this.listeners=[],this.volume=1,this._onCanPlayHandler=i.hitch(this,this._onCanPlay),this._onCanPlayThroughHandler=i.hitch(this,this._onCanPlayThrough),this._onLoadDataHandler=i.hitch(this,this._onLoadData),this._onLoadStartHandler=i.hitch(this,this._onLoadStart),this._onWaitingHandler=i.hitch(this,this._onWaiting),this._onEmptiedHandler=i.hitch(this,this._onEmptied),this._onAbortHandler=i.hitch(this,this._onAbort),this._onErrorHandler=i.hitch(this,this._onError),this._onLoadedMetadataHandler=i.hitch(this,this._onLoadedmetadata),this._onTimeUpdateHandler=i.hitch(this,this._onTimeupdate),this._onEndedHandler=i.hitch(this,this._onEnded),this._onPlayHandler=i.hitch(this,this._onPlay),this._onPauseHandler=i.hitch(this,this._onPause),this._onProgressHandler=i.hitch(this,this._onProgress),this._onStalledHandler=i.hitch(this,this._onStalled),this._onSuspendHandler=i.hitch(this,this._onSuspend)},play:function(t){t&&(this.params=t,this.mediaNode=t.mediaNode,this.isStopped=!1,this.isPaused=!1,this._loadMedia(t))},stop:function(){this.isStopped=!0,this.isPaused=!1,void 0!=this.mediaNode&&(this.mediaNode.pause(),this._emptyMediaNode())},skip:function(){this.isStopped=!0,this.isPaused=!1,void 0!=this.mediaNode&&(this.emit("html5-playback-status",{type:a.ENDED}),this.mediaNode.pause())},pause:function(){this.isPaused=!0,void 0!=this.mediaNode&&this.mediaNode.pause()},resume:function(){var t=this;this.isPaused=!1,void 0!=this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch(function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})})},seek:function(t){void 0!=this.mediaNode&&(this.mediaNode.currentTime=t,this.isPaused&&this.resume())},setVolume:function(t){void 0!=this.mediaNode&&(this.volume=t,this.mediaNode.volume=t)},mute:function(){void 0!=this.mediaNode&&(this.mediaNode.muted=!0,this.stop())},unMute:function(){void 0!=this.mediaNode&&(this.mediaNode.muted=!1,this.play(this.params))},_loadMedia:function(t){this.mediaNode.src=t.url,this._initMediaListeners(t.isLive),this.mediaNode.load()},_emptyMediaNode:function(){this.mediaNode.src=""},_removeMediaSource:function(){o.has(this.audioSource,"src")&&o.remove(this.audioSource,"src"),o.has(this.mediaNode,"src")&&o.remove(this.mediaNode,"src")},_onLoadData:function(){var t=this;this.isStopped||this.isPaused||(u("mozilla")&&this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch(function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})}),this.emit("html5-playback-status",{type:a.DATA_LOADING,mediaNode:this.mediaNode}))},_onCanPlay:function(){var t=this;this.isStopped||this.isPaused||(this.emit("html5-playback-status",{type:a.CAN_PLAY,mediaNode:this.mediaNode}),this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch(function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})}))},_onCanPlayThrough:function(){var t=this;this.isStopped||this.isPaused||(this.emit("html5-playback-status",{type:a.CAN_PLAY_THROUGH,mediaNode:this.mediaNode}),this.mediaNode&&this.mediaNode.paused&&this.mediaNode.play().catch(function(e){"NotAllowedError"===e.name&&t.emit("html5-playback-status",{type:a.PLAY_NOT_ALLOWED,mediaNode:this.audioNode})}))},_onWaiting:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.WAITING,mediaNode:this.mediaNode})},_onEmptied:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.EMPTIED,mediaNode:this.mediaNode})},_onAbort:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.ABORT,mediaNode:this.mediaNode})},_onError:function(t){return this._removeMediaListeners(),this.isStopped||this.isPaused?void this.emit("html5-playback-status",{type:a.STOP,mediaNode:this.mediaNode}):void this.emit("html5-playback-status",{type:3==this.mediaNode.readyState?a.STOP:a.ERROR,mediaNode:this.mediaNode})},_onLoadedmetadata:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.EMPTIED,mediaNode:this.mediaNode})},_onTimeupdate:function(){this.isStopped||this.isPaused||(this.mediaNode.currentTime.toFixed(1)==this.mediaNode.duration.toFixed(1)?(this.isStopped=!0,this.emit("html5-playback-status",{type:a.ENDED,mediaNode:this.mediaNode})):this.emit("html5-playback-status",{type:a.TIME_UPDATE,mediaNode:this.mediaNode}))},_onLoadStart:function(){this.isStopped||this.isPaused||this.emit("html5-playback-status",{type:a.LOAD_START,mediaNode:this.mediaNode})},_onEnded:function(){this.isStopped||(this._removeMediaListeners(),this.emit("html5-playback-status",{type:a.ENDED,mediaNode:this.mediaNode}))},_onPlay:function(){this.emit("html5-playback-status",{type:a.PLAY,mediaNode:this.mediaNode})},_onPause:function(){this.isStopped?this.emit("html5-playback-status",{type:a.STOP,mediaNode:this.mediaNode}):this.emit("html5-playback-status",{type:a.PAUSE,mediaNode:this.mediaNode})},_initMediaListeners:function(t){this._errorHandler=e(this.mediaNode,"error",this._onErrorHandler),this._loadDataHandler=e(this.mediaNode,"loadeddata",this._onLoadDataHandler),this._loadStartHandler=e(this.mediaNode,"loadstart",this._onLoadStartHandler),this._canPlayHandler=e(this.mediaNode,"canplay",this._onCanPlayHandler),this._canPlayThroughHandler=e(this.mediaNode,"canplaythrough",this._onCanPlayThroughHandler),this._waitingHandler=e(this.mediaNode,"waiting",this._onWaitingHandler),this._emptiedHandler=e(this.mediaNode,"emptied",this._onEmptiedHandler),this._abortHandler=e(this.mediaNode,"abort",this._onAbortHandler),this._endedHandler=e(this.mediaNode,"ended",this._onEndedHandler),this._playHandler=e(this.mediaNode,"play",this._onPlayHandler),this._pauseHandler=e(this.mediaNode,"pause",this._onPauseHandler),this._loadedMetadataHandler=e(this.mediaNode,"loadedmetadata",this._onLoadedMetadataHandler),this._timeUpdateHandler=t?null:e(this.mediaNode,"timeupdate",this._onTimeUpdateHandler)},_removeMediaListeners:function(){this.params=null,this._errorHandler.remove(),this._loadDataHandler.remove(),this._loadStartHandler.remove(),this._canPlayHandler.remove(),this._canPlayThroughHandler.remove(),this._waitingHandler.remove(),this._emptiedHandler.remove(),this._abortHandler.remove(),this._endedHandler.remove(),this._playHandler.remove(),this._pauseHandler.remove(),this._loadedMetadataHandler.remove(),this._timeUpdateHandler&&this._timeUpdateHandler.remove()}});return l}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){function n(t,e,r){return"string"==typeof e&&(e=[e]),h.isUndefined(r)&&(r=!1),t.filter(function(t){return!(h.isEmpty(t.tags)&&r)||h.some(e,function(e){return t.tags.indexOf(e)!==-1})})}function i(t){return h.sortBy(t,function(t){return t.mediaFormat.isAudioAdaptive?0:1},function(t){return t.mediaFormat.audioTracks[0].isAAC?0:1})}function a(t){var e=h.groupBy(t,function(t){var e;return e=t.mediaFormat.isAudioAdaptive?"audioAdaptive":t.mediaFormat.audioTracks[0].isAAC?"aac":"mp3"}),r=h.keys(e);return h.flatMap(r,function(t){var r=e[t];return h.orderBy(r,"bitRate","desc")})}function o(t,e){return h.isArray(e)||(e=[e]),h.forEach(t,function(t){var r=t.transports.filter(function(r){return!h.some(e,function(e){return e.transport===r.transport&&t.mediaFormat.audioTracks[0].codec.indexOf(e.codec)>-1})});t.transports=r}),t.filter(function(t){return!h.isEmpty(t.transports)})}function s(t){return h.filter(t,function(t){return!t.mediaFormat.isAudioAdaptive})}function u(t){return o(t,[{transport:"hls",codec:"aac"},{transport:"hlsts",codec:"aac"}])}function l(t,e){return o(t,[{transport:e?"hls":"hlsts",codec:"aac"},{transport:"http",codec:"aac"},{transport:"http",codec:"mp3"}])}function c(t,e){var r=h.map(e,function(t){return function(e){return e.transport===t?0:1}});return h.forEach(t,function(t){var e=t.transports,n=h.sortBy(e,r);t.transports=n}),t}function d(t,e,r){if("flash"==r.toLowerCase())t=s(t),t=o(t,[{transport:"hlsts",codec:"aac"},{transport:"hls",codec:"aac"}]);else switch(e.os.family){case"iOS":t=o(t,{transport:"hlsts",codec:"aac"}),"Chrome Mobile"===e.name&&(t=o(t,[{transport:"hls",codec:"aac"}])),t=c(t,["hls","http"]);break;case"Android":t=c(t,["hlsts","http"]);break;default:switch(e.name){case"Safari":t=o(t,{transport:"hlsts",codec:"aac"}),t=c(t,["hls","http"]);break;case"IE":t="11.0"===e.version&&parseInt(e.os.version)>7?o(t,[{transport:"http",codec:"aac"},{transport:"hlsts",codec:"aac"}]):o(t,[{transport:"hls",codec:"aac"},{transport:"http",codec:"aac"},{transport:"hlsts",codec:"aac"}]),t=c(t,["hls","http"]);break;case"Microsoft Edge":t=o(t,[{transport:"hlsts",codec:"aac"}]),t=c(t,["hls","http"]);break;default:t=o(t,[{transport:"hlsts",codec:"aac"},{transport:"hls",codec:"aac"}]),t=c(t,["hls","http"])}}return t}var h=r(8);t.exports={filterMountPoints:function(t,e,r,o,c,h,f,p,m){return!h||p||m||(t=u(t)),f&&(t=s(t)),t=n(t,o,c),t=p?l(t):m?l(t,!0):d(t,e,r),t=a(t),t=i(t)},filterByTag:n,sortMountpoints:i}},function(t,e,r){var n,i;n=[r(1),r(6),r(2),r(10),r(31),r(75),r(74),r(3)],i=function(t,e,r,n,i,a,o,s){var u=t([i],{constructor:function(t,e){this.albumData=null,this.inherited(arguments)},getArtists:function(){return this.albumData.artists},getArtistId:function(){return this.getArtists()[0].id},getDuration:function(){return this.albumData.duration},getGenres:function(){for(var t=[],e=0;e<this.albumData.genres.length;e++)t.push(this.albumData.genres[e].name);return t},getTitle:function(){return null!=this.albumData?this.albumData.title:this.data.title},getLabel:function(){return this.data.label},getReleaseDate:function(){return null!=this.albumData?this.albumData.release:this.data.release},getReview:function(){return this.albumData.review},getReviewAuthor:function(){return this.albumData.reviewAuthor},getBuyUrl:function(){return null!=this.albumData?this.albumData.buyURL:this.data.buyURL},getRating:function(){return null!=this.albumData?this.albumData.rating:this.data.rating},getCoverArtOriginal:function(){var t=null!=this.albumData?this.albumData.cover:this.data.cover;return null!=t||void 0!=t?{url:t.originalSourceUrl,width:t.width,height:t.height,id:t.id}:null},getCoverArtPicture:function(){return this.coverArtPicture},fetchCoverArtPicture:function(){if(this.coverArtPicture)return void this.notify("cover-complete",this.coverArtPicture);var t=null!=this.albumData?this.albumData.cover:this.data.cover;return null==t?void this.notify("cover-complete"):(t.albumId=this.id,this.coverArtPicture=new o(t,this.platformId),this.coverArtPicture.successCallback&&this.coverArtPicture.successCallback.remove(),this.coverArtPicture.errorCallback&&this.coverArtPicture.errorCallback.remove(),this.coverArtPicture.successCallback=s(this.coverArtPicture,"picture-complete",r.hitch(this,this._onCoverArtPictureComplete)),this.coverArtPicture.errorCallback=s(this.coverArtPicture,"picture-error",r.hitch(this,this._onCoverArtPictureComplete)),void this.coverArtPicture.fetchData())},_onCoverArtPictureComplete:function(t,e){this.notify("cover-complete",this.coverArtPicture)},getTracks:function(){if(null==this.tracks){this.tracks=[];var t;e.forEach(this.albumData.tracks,function(e,r){t=new a(e,this.platformId),this.tracks.push(t)},this)}return this.tracks},getTrackById:function(t){var r=-1;return e.forEach(this.getTracks(),function(e,n){e.id==t&&(r=n)},this),r>-1?this.getTracks()[r]:null},fetchData:function(t){if(t=void 0!=t&&t,t&&(this.url=this.getDynamicAlbumUrl(this.id)),null==this.url)return console.error("album::fetchData - The album url is undefined for album title="+this.getTitle()),void this.notify("album-error",{albumId:this.id});if(0==this.alreadyFetched){var e=new n;e.request(this.url,{albumId:this.id,isDynamicCall:t},this.getRequestArgs(),r.hitch(this,this._onLoadComplete),r.hitch(this,this._onLoadError))}else this.notify("album-complete",{albumId:this.id})},fetchTrackByIds:function(t){"string"==typeof t&&(t=[t]),this.tracksQueue=r.clone(t);for(var e,n=0;n<t.length;n++)e=this.getTrackById(t[n]),e.successCallback&&e.successCallback.remove(),e.errorCallback&&e.errorCallback.remove(),e.successCallback=s(e,"track-complete",r.hitch(this,this._onTrackComplete)),e.errorCallback=s(e,"track-error",r.hitch(this,this._onTrackComplete)),e.fetchData()},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("album-error",{albumId:t.albumId})},_onLoadComplete:function(t,e){this.albumData=e.album,this.alreadyFetched=!0,this.notify("album-complete",{albumId:t.albumId})},_onTrackComplete:function(t,e){this._removeTrackFromQueue(t.trackId),0==this.tracksQueue.length&&this.notify("track-complete",this.tracks)},_removeTrackFromQueue:function(t){var r=-1;e.forEach(this.tracksQueue,function(e,n){e==t&&(r=n)},this),r>-1&&this.tracksQueue.splice(r,1)}});return u}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(2),r(10),r(31)],i=function(t,e,r,n){var i=t([n],{constructor:function(t,e){this.pictureData=null,this.albumId=t.albumId?t.albumId:null,this.artistId=t.artistId?t.artistId:null,this.inherited(arguments)},getOriginalSourceUrl:function(){return this.data.originalSourceUrl},getOriginalWidth:function(){return this.data.width},getOriginalHeight:function(){return this.data.height},getFiles:function(){return null!=this.pictureData&&void 0!=this.pictureData.files&&this.pictureData.files.length>0?this.pictureData.files:null},fetchData:function(t){if(t=void 0!=t&&t,t?null!=this.albumId?this.url=this.getDynamicAlbumPictureUrl(this.albumId,this.id):this.url=this.getDynamicArtistPictureUrl(this.artistId,this.id):null!=this.albumId?this.url+=this.url.indexOf("?")!=-1?"&":"?rewrite_id="+this.albumId:this.url+=this.url.indexOf("?")!=-1?"&":"?rewrite_id="+this.artistId,0==this.alreadyFetched){var n=new r;n.request(this.url,{pictureId:this.id,isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError));
}else this.notify("picture-complete",{pictureId:this.id})},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("picture-error",{pictureId:t.pictureId})},_onLoadComplete:function(t,e){this.pictureData=e.picture,this.alreadyFetched=!0,this.notify("picture-complete",{pictureId:t.pictureId})}});return i}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(2),r(10),r(31)],i=function(t,e,r,n){var i=t([n],{constructor:function(t,e){this.trackData=null,this.inherited(arguments)},getBuyUrl:function(){return null!=this.trackData?this.trackData.buyURL:this.data.buyURL},getDuration:function(){return this.data.duration},getSampleUrl:function(){return null!=this.trackData?this.trackData.sampleURL:this.data.sampleURL},getTitle:function(){return null!=this.trackData?this.trackData.title:this.data.title},getArtists:function(){return this.trackData.artists},getReview:function(){return this.trackData.review},getReviewAuthor:function(){return this.trackData.reviewAuthor},getDisc:function(){return this.data.disc},fetchData:function(t){if(t=void 0!=t&&t,t&&(this.url=this.getDynamicTrackUrl(this.id)),0==this.alreadyFetched){var n=new r;n.request(this.url,{trackId:this.id,isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError))}else this.notify("track-complete",{trackId:this.id})},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("track-error",{trackId:t.trackId})},_onLoadComplete:function(t,e){this.trackData=e.track,this.alreadyFetched=!0,this.notify("track-complete",{trackId:t.trackId})}});return i}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(4),r(27)],i=function(t,e){var r={};if(t("dojo-config-api")){var n,i=e.rawConfig;for(n in i)r[n]=i[n]}else{var a=function(e,r,i){for(n in e)"has"!=n&&t.add(r+n,e[n],0,i)};r=t("dojo-loader")?e.rawConfig:this.dojoConfig||this.djConfig||{},a(r,"config",1),a(r.has,"",1)}return r.locale||(r.locale=(navigator.language||navigator.userLanguage).toLowerCase()),r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5),r(3),r(26),r(33),r(78),r(85),r(79),r(2),r(84)],i=function(t,e,r,n,i,a,o,s){function u(r,i,o,u,l){if(u=s.hitch(o,u),!r||!r.addEventListener&&!r.attachEvent)return n.after(r||t.global,i,u,!0);if("string"==typeof i&&"on"==i.substring(0,2)&&(i=i.substring(2)),r||(r=t.global),!l)switch(i){case"keypress":i=c;break;case"mouseenter":i=a.enter;break;case"mouseleave":i=a.leave}return e(r,i,u,l)}function l(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode}o.add("events-keypress-typed",function(){var t={charCode:0};try{t=document.createEvent("KeyboardEvent"),(t.initKeyboardEvent||t.initKeyEvent).call(t,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return 0==t.charCode&&!o("opera")});var c,d={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},h=o("mac")?"metaKey":"ctrlKey",f=function(t,e){var r=s.mixin({},t,e);return l(r),r.preventDefault=function(){t.preventDefault()},r.stopPropagation=function(){t.stopPropagation()},r};if(o("events-keypress-typed")){var p=function(t,e){try{return t.keyCode=e}catch(t){return 0}};c=function(t,r){var n=e(t,"keydown",function(t){var e=t.keyCode,n=13!=e&&32!=e&&(27!=e||!o("ie"))&&(e<48||e>90)&&(e<96||e>111)&&(e<186||e>192)&&(e<219||e>222)&&229!=e;if(n||t.ctrlKey){var i=n?0:e;if(t.ctrlKey){if(3==e||13==e)return r.call(t.currentTarget,t);i>95&&i<106?i-=48:!t.shiftKey&&i>=65&&i<=90?i+=32:i=d[i]||i}var a=f(t,{type:"keypress",faux:!0,charCode:i});r.call(t.currentTarget,a),o("ie")&&p(t,a.keyCode)}}),i=e(t,"keypress",function(t){var e=t.charCode;return e=e>=32?e:0,t=f(t,{charCode:e,faux:!0}),r.call(this,t)});return{remove:function(){n.remove(),i.remove()}}}}else c=o("opera")?function(t,r){return e(t,"keypress",function(t){var e=t.which;return 3==e&&(e=99),e=e<32&&!t.shiftKey?0:e,t.ctrlKey&&!t.shiftKey&&e>=65&&e<=90&&(e+=32),r.call(this,f(t,{charCode:e}))})}:function(t,r){return e(t,"keypress",function(t){return l(t),r.call(this,t)})};var m={_keypress:c,connect:function(t,e,r,n,i){var a=arguments,o=[],s=0;o.push("string"==typeof a[0]?null:a[s++],a[s++]);var l=a[s+1];o.push("string"==typeof l||"function"==typeof l?a[s++]:null,a[s++]);for(var c=a.length;s<c;s++)o.push(a[s]);return u.apply(this,o)},disconnect:function(t){t&&t.remove()},subscribe:function(t,e,n){return r.subscribe(t,s.hitch(e,n))},publish:function(t,e){return r.publish.apply(r,[t].concat(e))},connectPublisher:function(t,e,r){var n=function(){m.publish(t,arguments)};return r?m.connect(e,r,n):m.connect(e,n)},isCopyKey:function(t){return t[h]}};return m.unsubscribe=m.disconnect,o("extend-dojo")&&s.mixin(t,m),m}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5),r(3),r(4),r(80)],i=function(t,e,r,n){if(e._fixEvent){var i=e._fixEvent;e._fixEvent=function(t,e){return t=i(t,e),t&&n.normalizeEvent(t),t}}var a={fix:function(t,r){return e._fixEvent?e._fixEvent(t,r):t},stop:function(t){r("dom-addeventlistener")||t&&t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t=t||window.event,t.cancelBubble=!0,e._preventDefault.call(t))}};return r("extend-dojo")&&(t.fixEvent=a.fix,t.stopEvent=a.stop),a}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5),r(2),r(9)],i=function(t,e,r){return r("host-browser")?(t._name="browser",e.mixin(t,{isBrowser:!0,isFF:r("ff"),isIE:r("ie"),isKhtml:r("khtml"),isWebKit:r("webkit"),isMozilla:r("mozilla"),isMoz:r("mozilla"),isOpera:r("opera"),isSafari:r("safari"),isChrome:r("chrome"),isMac:r("mac"),isIos:r("ios"),isAndroid:r("android"),isWii:r("wii"),isQuirks:r("quirks"),isAir:r("air")}),r):r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(9),r(17),r(7),r(23)],i=function(t,e,r,n){function i(t,e,r,n,i,a){a=a||"px";var o=t.style;isNaN(e)||(o.left=e+a),isNaN(r)||(o.top=r+a),n>=0&&(o.width=n+a),i>=0&&(o.height=i+a)}function a(t){return"button"==t.tagName.toLowerCase()||"input"==t.tagName.toLowerCase()&&"button"==(t.getAttribute("type")||"").toLowerCase()}function o(t){return"border-box"==s.boxModel||"table"==t.tagName.toLowerCase()||a(t)}var s={};s.boxModel="content-box",t("ie")&&(s.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),s.getPadExtents=function(t,e){t=r.byId(t);var i=e||n.getComputedStyle(t),a=n.toPixelValue,o=a(t,i.paddingLeft),s=a(t,i.paddingTop),u=a(t,i.paddingRight),l=a(t,i.paddingBottom);return{l:o,t:s,r:u,b:l,w:o+u,h:s+l}};var u="none";s.getBorderExtents=function(t,e){t=r.byId(t);var i=n.toPixelValue,a=e||n.getComputedStyle(t),o=a.borderLeftStyle!=u?i(t,a.borderLeftWidth):0,s=a.borderTopStyle!=u?i(t,a.borderTopWidth):0,l=a.borderRightStyle!=u?i(t,a.borderRightWidth):0,c=a.borderBottomStyle!=u?i(t,a.borderBottomWidth):0;return{l:o,t:s,r:l,b:c,w:o+l,h:s+c}},s.getPadBorderExtents=function(t,e){t=r.byId(t);var i=e||n.getComputedStyle(t),a=s.getPadExtents(t,i),o=s.getBorderExtents(t,i);return{l:a.l+o.l,t:a.t+o.t,r:a.r+o.r,b:a.b+o.b,w:a.w+o.w,h:a.h+o.h}},s.getMarginExtents=function(t,e){t=r.byId(t);var i=e||n.getComputedStyle(t),a=n.toPixelValue,o=a(t,i.marginLeft),s=a(t,i.marginTop),u=a(t,i.marginRight),l=a(t,i.marginBottom);return{l:o,t:s,r:u,b:l,w:o+u,h:s+l}},s.getMarginBox=function(e,i){e=r.byId(e);var a,o=i||n.getComputedStyle(e),l=s.getMarginExtents(e,o),c=e.offsetLeft-l.l,d=e.offsetTop-l.t,h=e.parentNode,f=n.toPixelValue;if(t("mozilla")){var p=parseFloat(o.left),m=parseFloat(o.top);isNaN(p)||isNaN(m)?h&&h.style&&(a=n.getComputedStyle(h),"visible"!=a.overflow&&(c+=a.borderLeftStyle!=u?f(e,a.borderLeftWidth):0,d+=a.borderTopStyle!=u?f(e,a.borderTopWidth):0)):(c=p,d=m)}else(t("opera")||8==t("ie")&&!t("quirks"))&&h&&(a=n.getComputedStyle(h),c-=a.borderLeftStyle!=u?f(e,a.borderLeftWidth):0,d-=a.borderTopStyle!=u?f(e,a.borderTopWidth):0);return{l:c,t:d,w:e.offsetWidth+l.w,h:e.offsetHeight+l.h}},s.getContentBox=function(e,i){e=r.byId(e);var a,o=i||n.getComputedStyle(e),u=e.clientWidth,l=s.getPadExtents(e,o),c=s.getBorderExtents(e,o);return u?(a=e.clientHeight,c.w=c.h=0):(u=e.offsetWidth,a=e.offsetHeight),t("opera")&&(l.l+=c.l,l.t+=c.t),{l:l.l,t:l.t,w:u-l.w-c.w,h:a-l.h-c.h}},s.setContentSize=function(t,e,n){t=r.byId(t);var a=e.w,u=e.h;if(o(t)){var l=s.getPadBorderExtents(t,n);a>=0&&(a+=l.w),u>=0&&(u+=l.h)}i(t,NaN,NaN,a,u)};var l={l:0,t:0,w:0,h:0};return s.setMarginBox=function(e,u,c){e=r.byId(e);var d=c||n.getComputedStyle(e),h=u.w,f=u.h,p=o(e)?l:s.getPadBorderExtents(e,d),m=s.getMarginExtents(e,d);if(t("webkit")&&a(e)){var g=e.style;h>=0&&!g.width&&(g.width="4px"),f>=0&&!g.height&&(g.height="4px")}h>=0&&(h=Math.max(h-p.w-m.w,0)),f>=0&&(f=Math.max(f-p.h-m.h,0)),i(e,u.l,u.t,h,f)},s.isBodyLtr=function(t){return t=t||e.doc,"ltr"==(e.body(t).dir||t.documentElement.dir||"ltr").toLowerCase()},s.docScroll=function(r){r=r||e.doc;var n=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in n?{x:n.pageXOffset,y:n.pageYOffset}:(n=t("quirks")?e.body(r):r.documentElement)&&{x:s.fixIeBiDiScrollLeft(n.scrollLeft||0,r),y:n.scrollTop||0}},t("ie")&&(s.getIeDocumentElementOffset=function(r){r=r||e.doc;var n=r.documentElement;if(t("ie")<8){var i=n.getBoundingClientRect(),a=i.left,o=i.top;return t("ie")<7&&(a+=n.clientLeft,o+=n.clientTop),{x:a<0?0:a,y:o<0?0:o}}return{x:0,y:0}}),s.fixIeBiDiScrollLeft=function(r,n){n=n||e.doc;var i=t("ie");if(i&&!s.isBodyLtr(n)){var a=t("quirks"),o=a?e.body(n):n.documentElement,u=e.global;return 6==i&&!a&&u.frameElement&&o.scrollHeight>o.clientHeight&&(r+=o.clientLeft),i<8||a?r+o.clientWidth-o.scrollWidth:-r}return r},s.position=function(n,i){n=r.byId(n);var a=e.body(n.ownerDocument),o=n.getBoundingClientRect();if(o={x:o.left,y:o.top,w:o.right-o.left,h:o.bottom-o.top},t("ie")<9){var u=s.getIeDocumentElementOffset(n.ownerDocument);o.x-=u.x+(t("quirks")?a.clientLeft+a.offsetLeft:0),o.y-=u.y+(t("quirks")?a.clientTop+a.offsetTop:0)}if(i){var l=s.docScroll(n.ownerDocument);o.x+=l.x,o.y+=l.y}return o},s.getMarginSize=function(t,e){t=r.byId(t);var i=s.getMarginExtents(t,e||n.getComputedStyle(t)),a=t.getBoundingClientRect();return{w:a.right-a.left+i.w,h:a.bottom-a.top+i.h}},s.normalizeEvent=function(e){if("layerX"in e||(e.layerX=e.offsetX,e.layerY=e.offsetY),!t("dom-addeventlistener")){var r=e.target,n=r&&r.ownerDocument||document,i=t("quirks")?n.body:n.documentElement,a=s.getIeDocumentElementOffset(n);e.pageX=e.clientX+s.fixIeBiDiScrollLeft(i.scrollLeft||0,n)-a.x,e.pageY=e.clientY+(i.scrollTop||0)-a.y}},s}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[e,r(5),r(9),r(2),r(7),r(23),r(11),r(77)],i=function(t,e,r,n,i,a,o,s){var u={},l=0,c=e._scopeName+"attrid";t.names={class:"className",for:"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},t.get=function(e,r){e=i.byId(e);var n=r.toLowerCase(),a=t.names[n]||r;return e[a]},t.set=function(e,d,h){e=i.byId(e);var f=arguments.length;if(2==f&&"string"!=typeof d){for(var p in d)t.set(e,p,d[p]);return e}var m=d.toLowerCase(),g=t.names[m]||d;if("style"==g&&"string"!=typeof h)return a.set(e,h),e;if("innerHTML"==g)return r("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(o.empty(e),e.appendChild(o.toDom(h,e.ownerDocument))):e[g]=h,e;if(n.isFunction(h)){var v=e[c];v||(v=l++,e[c]=v),u[v]||(u[v]={});var y=u[v][g];if(y)s.disconnect(y);else try{delete e[g]}catch(t){}return h?u[v][g]=s.connect(e,g,h):e[g]=null,e}return e[g]=h,e}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(35),r(34)],i=function(t,e){return t("RequestTimeoutError",null,e,{dojoType:"timeout"})}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(4)],__WEBPACK_AMD_DEFINE_RESULT__=function(has){"use strict";var hasJSON="undefined"!=typeof JSON;if(has.add("json-parse",hasJSON),has.add("json-stringify",hasJSON&&'{"a":1}'==JSON.stringify({a:0},function(t,e){return e||1})),has("json-stringify"))return JSON;var escapeString=function(t){return('"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(t,e,r){function n(t,a,o){e&&(t=e(o,t));var s,u=typeof t;if("number"==u)return isFinite(t)?t+"":"null";if("boolean"==u)return t+"";if(null===t)return"null";if("string"==typeof t)return escapeString(t);if("function"==u||"undefined"==u)return i;if("function"==typeof t.toJSON)return n(t.toJSON(o),a,o);if(t instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(e,r,n){var i=t["getUTC"+r]()+(n?1:0);return i<10?"0"+i:i});if(t.valueOf()!==t)return n(t.valueOf(),a,o);var l=r?a+r:"",c=r?" ":"",d=r?"\n":"";if(t instanceof Array){var h=t.length,f=[];for(o=0;o<h;o++){var p=t[o];s=n(p,l,o),"string"!=typeof s&&(s="null"),f.push(d+l+s)}return"["+f.join(",")+d+a+"]"}var m=[];for(o in t){var g;if(t.hasOwnProperty(o)){if("number"==typeof o)g='"'+o+'"';else{if("string"!=typeof o)continue;g=escapeString(o)}if(s=n(t[o],l,o),"string"!=typeof s)continue;m.push(d+l+g+":"+c+s)}}return"{"+m.join(",")+d+a+"}"}var i;return"string"==typeof e&&(r=e,e=null),n(t,"","")}}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(t,e,r){var n,i;n=[r(5),r(9)],i=function(t,e){return t.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")&&!e("air")?e("safari")?91:224:17}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5),r(3),r(4),r(7),r(17)],i=function(t,e,r,n,i){function a(t,r){var i=function(i,a){return e(i,t,function(t){return r?r(t,a):n.isDescendant(t.relatedTarget,i)?void 0:a.call(this,t)})};return i.bubble=function(e){return a(t,function(t,r){var n=e(t.target),i=t.relatedTarget;if(n&&n!=(i&&1==i.nodeType&&e(i)))return r.call(n,t)})},i}r.add("dom-quirks",i.doc&&"BackCompat"==i.doc.compatMode),r.add("events-mouseenter",i.doc&&"onmouseenter"in i.doc.createElement("div")),r.add("events-mousewheel",i.doc&&"onmousewheel"in i.doc);var o;o=r("dom-quirks")&&r("ie")||!r("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(t,e){return t.button&e},isLeft:function(t){return 1&t.button},isMiddle:function(t){return 4&t.button},isRight:function(t){return 2&t.button}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(t,e){return t.button==e},isLeft:function(t){return 0==t.button},isMiddle:function(t){return 1==t.button},isRight:function(t){return 2==t.button}},t.mouseButtons=o;var s;return s=r("events-mousewheel")?"mousewheel":function(t,r){return e(t,"DOMMouseScroll",function(t){t.wheelDelta=-t.detail,r.call(this,t)})},{_eventHandler:a,enter:a("mouseover"),leave:a("mouseout"),wheel:s,isLeft:o.isLeft,isMiddle:o.isMiddle,isRight:o.isRight}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5),r(4),r(7),r(3),r(6),r(2),r(55),r(89)],i=function(t,e,r,n,i,a,o,s){"use strict";function u(t,e){var n=function(n,i){if("string"==typeof i&&(i=r.byId(i),!i))return new e([]);var a="string"==typeof n?t(n,i):n?n.end&&n.on?n:[n]:[];return a.end&&a.on?a:new e(a)};if(n.matches=t.match||function(t,e,r){return n.filter([t],e,r).length>0},n.filter=t.filter||function(t,e,r){return n(e,r).filter(function(e){return i.indexOf(t,e)>-1})},"function"!=typeof t){var a=t.search;t=function(t,e){return a(e||document,t)}}return n}e.add("array-extensible",function(){return 1==a.delegate([],{length:1}).length&&!e("bug-for-in-skips-shadowed")});var l=Array.prototype,c=l.slice,d=l.concat,h=i.forEach,f=function(t,e,r){var n=new(r||this._NodeListCtor||b)(t);return e?n._stash(e):n},p=function(e,r,n){return r=[0].concat(c.call(r,0)),n=n||t.global,function(t){return r[0]=t,e.apply(n,r)}},m=function(t,e){return function(){return this.forEach(p(t,arguments,e)),this}},g=function(t,e){return function(){return this.map(p(t,arguments,e))}},v=function(t,e){return function(){return this.filter(p(t,arguments,e))}},y=function(e,r,n){return function(){var i=arguments,a=p(e,i,n);return r.call(n||t.global,i)?this.map(a):(this.forEach(a),this)}},_=function(t){var r=this instanceof b&&e("array-extensible");"number"==typeof t&&(t=Array(t));var n=t&&"length"in t?t:arguments;if(r||!n.sort){for(var i=r?this:[],o=i.length=n.length,s=0;s<o;s++)i[s]=n[s];if(r)return i;n=i}return a._mixin(n,E),n._NodeListCtor=function(t){return b(t)},n},b=_,E=b.prototype=e("array-extensible")?[]:{};b._wrap=E._wrap=f,b._adaptAsMap=g,b._adaptAsForEach=m,b._adaptAsFilter=v,b._adaptWithCondition=y,h(["slice","splice"],function(t){var e=l[t];E[t]=function(){return this._wrap(e.apply(this,arguments),"slice"==t?this:null)}}),h(["indexOf","lastIndexOf","every","some"],function(e){var r=i[e];E[e]=function(){return r.apply(t,[this].concat(c.call(arguments,0)))}}),a.extend(_,{constructor:b,_NodeListCtor:b,toString:function(){return this.join(",")},_stash:function(t){return this._parent=t,this},on:function(t,e){var r=this.map(function(r){return n(r,t,e)});return r.remove=function(){for(var t=0;t<r.length;t++)r[t].remove()},r},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(t){var e=c.call(this,0),r=i.map(arguments,function(t){return c.call(t,0)});return this._wrap(d.apply(e,r),this)},map:function(t,e){return this._wrap(i.map(this,t,e),this)},forEach:function(t,e){return h(this,t,e),this},filter:function(t){var e=arguments,r=this,n=0;if("string"==typeof t){if(r=A._filterResult(this,e[0]),1==e.length)return r._stash(this);n=1}return this._wrap(i.filter(r,e[n],e[n+1]),this)},instantiate:function(t,e){var r=a.isFunction(t)?t:a.getObject(t);return e=e||{},this.forEach(function(t){new r(e,t)})},at:function(){var t=new this._NodeListCtor(0);return h(arguments,function(e){e<0&&(e=this.length+e),this[e]&&t.push(this[e])},this),t._stash(this)}});var A=u(s,_);return t.query=u(s,function(t){return _(t)}),A.load=function(t,e,r){o.load(t,e,function(t){r(u(t,_))})},t._filterQueryResult=A._filterResult=function(t,e,r){return new _(A.filter(t,e,r))},t.NodeList=A.NodeList=_,A}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(83),r(5),r(6),r(4),r(55)],i=function(t,e,r,n){function i(t){var e=s[t.options.handleAs];return t.data=e?e(t):t.data||t.text,t}n.add("activex","undefined"!=typeof ActiveXObject),n.add("dom-parser",function(t){return"DOMParser"in t});var a;if(n("activex")){var o=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];a=function(t){var e=t.data;if(e&&n("dom-qsa2.1")&&!e.querySelectorAll&&n("dom-parser")&&(e=(new DOMParser).parseFromString(t.text,"application/xml")),!e||!e.documentElement){var i=t.text;r.some(o,function(t){try{var r=new ActiveXObject(t);r.async=!1,r.loadXML(i),e=r}catch(t){return!1}return!0})}return e}}var s={javascript:function(t){return e.eval(t.text||"")},json:function(e){return t.parse(e.text||null)},xml:a};return i.register=function(t,e){s[t]=e},i}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(53),r(82),r(24),r(6),r(17),r(56)],i=function(t,e,r,n,i,a){function o(){for(var t,r=+new Date,n=0;n<l.length&&(t=l[n]);n++){var i=t.response,a=i.options;t.isCanceled&&t.isCanceled()||t.isValid&&!t.isValid(i)?(l.splice(n--,1),s._onAction&&s._onAction()):t.isReady&&t.isReady(i)?(l.splice(n--,1),t.handleResponse(i),s._onAction&&s._onAction()):t.startTime&&t.startTime+(a.timeout||0)<r&&(l.splice(n--,1),t.cancel(new e("Timeout exceeded",i)),s._onAction&&s._onAction())}s._onInFlight&&s._onInFlight(t),l.length||(clearInterval(u),u=null)}function s(t){t.response.options.timeout&&(t.startTime=+new Date),t.isFulfilled()||(l.push(t),u||(u=setInterval(o,50)),t.response.options.sync&&o())}var u=null,l=[];return s.cancelAll=function(){try{n.forEach(l,function(t){try{t.cancel(new r("All requests canceled."))}catch(t){}})}catch(t){}},i&&a&&i.doc.attachEvent&&a(i.global,"unload",function(){s.cancelAll()}),s}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(4),r(5)],i=function(t,e){"use strict";var r=document.createElement("div"),n=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector,i=r.querySelectorAll,a=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;t.add("dom-matches-selector",!!n),t.add("dom-qsa",!!i);var o=function(t,r){if(l&&t.indexOf(",")>-1)return l(t,r);var n=r?r.ownerDocument||r:e.doc||document,a=(i?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(t);if(r=r||n,a){if(a[2]){var c=e.byId?e.byId(a[2],n):n.getElementById(a[2]);if(!c||a[1]&&a[1]!=c.tagName.toLowerCase())return[];if(r!=n)for(var d=c;d!=r;)if(d=d.parentNode,!d)return[];return a[3]?o(a[3],c):[c]}if(a[3]&&r.getElementsByClassName)return r.getElementsByClassName(a[4]);var c;if(a[5]){if(c=r.getElementsByTagName(a[5]),!a[4]&&!a[6])return c;t=(a[4]||"")+a[6]}}if(i)return 1===r.nodeType&&"object"!==r.nodeName.toLowerCase()?s(r,t,r.querySelectorAll):r.querySelectorAll(t);c||(c=r.getElementsByTagName("*"));for(var h=[],f=0,p=c.length;f<p;f++){var m=c[f];1==m.nodeType&&u(m,t,r)&&h.push(m)}return h},s=function(t,e,r){var n=t,i=t.getAttribute("id"),o=i||"__dojo__",s=t.parentNode,u=/^\s*[+~]/.test(e);if(u&&!s)return[];i?o=o.replace(/'/g,"\\$&"):t.setAttribute("id",o),u&&s&&(t=t.parentNode);for(var l=e.match(a),c=0;c<l.length;c++)l[c]="[id='"+o+"'] "+l[c];e=l.join(",");try{return r.call(t,e)}finally{i||n.removeAttribute("id")}};if(!t("dom-matches-selector"))var u=function(){function t(t,e,r){var n=e.charAt(0);'"'!=n&&"'"!=n||(e=e.slice(1,-1)),e=e.replace(/\\/g,"");var i=s[r||""];return function(r){var n=r.getAttribute(t);return n&&i(n,e)}}function e(t){return function(e,r){for(;(e=e.parentNode)!=r;)if(t(e,r))return!0}}function n(t){return function(e,r){return e=e.parentNode,t?e!=r&&t(e,r):e==r}}function i(t,e){return t?function(r,n){return e(r)&&t(r,n)}:e}var a="div"==r.tagName?"toLowerCase":"toUpperCase",o={"":function(t){return t=t[a](),function(e){return e.tagName==t}},".":function(t){var e=" "+t+" ";return function(r){return r.className.indexOf(t)>-1&&(" "+r.className+" ").indexOf(e)>-1}},"#":function(t){return function(e){return e.id==t}}},s={"^=":function(t,e){return 0==t.indexOf(e)},"*=":function(t,e){return t.indexOf(e)>-1},"$=":function(t,e){return t.substring(t.length-e.length,t.length)==e},"~=":function(t,e){return(" "+t+" ").indexOf(" "+e+" ")>-1},"|=":function(t,e){return 0==(t+"-").indexOf(e+"-")},"=":function(t,e){return t==e},"":function(t,e){return!0}},u={};return function(r,a,s){var l=u[a];if(!l){if(a.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(r,a,s,u,c,d,h){return u?l=i(l,o[s||""](u.replace(/\\/g,""))):a?l=(" "==a?e:n)(l):c&&(l=i(l,t(c,h,d))),""}))throw new Error("Syntax error in query");if(!l)return!0;u[a]=l}return l(r,s)}}();if(!t("dom-qsa"))var l=function(t,e){for(var r=t.match(a),n=[],i=0;i<r.length;i++){t=new String(r[i].replace(/\s*$/,"")),t.indexOf=escape;for(var s=o(t,e),u=0,l=s.length;u<l;u++){var c=s[u];n[c.sourceIndex]=c}}var d=[];for(i in n)d.push(n[i]);return d};return o.match=n?function(t,e,r){return r&&9!=r.nodeType?s(r,e,function(e){return n.call(t,e)}):n.call(t,e)}:u,o}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(32),r(25)],i=function(t,e){"use strict";return function(r,n,i,a){var o=r&&"function"==typeof r.then,s=o&&r instanceof e;if(!o)return arguments.length>1?n?n(r):r:(new t).resolve(r);if(!s){var u=new t(r.cancel);r.then(u.resolve,u.reject,u.progress),r=u.promise}return n||i||a?r.then(n,i,a):r}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),l=r.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(i=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,o,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(s=o;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){!function(){var r={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var n="string"==typeof t.initial?{state:t.initial}:t.initial,i=t.terminal||t.final,a=e||t.target||{},o=t.events||[],s=t.callbacks||{},u={},l={},c=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[r.WILDCARD];u[t.name]=u[t.name]||{};for(var n=0;n<e.length;n++)l[e[n]]=l[e[n]]||[],l[e[n]].push(t.name),u[t.name][e[n]]=t.to||e[n];t.to&&(l[t.to]=l[t.to]||[])};n&&(n.event=n.event||"startup",c({name:n.event,from:"none",to:n.state}));for(var d=0;d<o.length;d++)c(o[d]);for(var h in u)u.hasOwnProperty(h)&&(a[h]=r.buildEvent(h,u[h]));for(var h in s)s.hasOwnProperty(h)&&(a[h]=s[h]);return a.current="none",a.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},a.can=function(t){return!this.transition&&void 0!==u[t]&&(u[t].hasOwnProperty(this.current)||u[t].hasOwnProperty(r.WILDCARD))},a.cannot=function(t){return!this.can(t)},a.transitions=function(){return(l[this.current]||[]).concat(l[r.WILDCARD]||[])},a.isFinished=function(){return this.is(i)},a.error=t.error||function(t,e,r,n,i,a,o){throw o||a},a.states=function(){return Object.keys(l).sort()},n&&!n.defer&&a[n.event](),a},doCallback:function(t,e,n,i,a,o){if(e)try{return e.apply(t,[n,i,a].concat(o))}catch(e){return t.error(n,i,a,o,r.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,n,i,a){return r.doCallback(t,t.onbeforeevent,e,n,i,a)},afterAnyEvent:function(t,e,n,i,a){return r.doCallback(t,t.onafterevent||t.onevent,e,n,i,a)},leaveAnyState:function(t,e,n,i,a){return r.doCallback(t,t.onleavestate,e,n,i,a)},enterAnyState:function(t,e,n,i,a){return r.doCallback(t,t.onenterstate||t.onstate,e,n,i,a)},changeState:function(t,e,n,i,a){return r.doCallback(t,t.onchangestate,e,n,i,a)},beforeThisEvent:function(t,e,n,i,a){return r.doCallback(t,t["onbefore"+e],e,n,i,a)},afterThisEvent:function(t,e,n,i,a){return r.doCallback(t,t["onafter"+e]||t["on"+e],e,n,i,a)},leaveThisState:function(t,e,n,i,a){return r.doCallback(t,t["onleave"+n],e,n,i,a)},enterThisState:function(t,e,n,i,a){return r.doCallback(t,t["onenter"+i]||t["on"+i],e,n,i,a)},beforeEvent:function(t,e,n,i,a){if(!1===r.beforeThisEvent(t,e,n,i,a)||!1===r.beforeAnyEvent(t,e,n,i,a))return!1},afterEvent:function(t,e,n,i,a){r.afterThisEvent(t,e,n,i,a),r.afterAnyEvent(t,e,n,i,a)},leaveState:function(t,e,n,i,a){var o=r.leaveThisState(t,e,n,i,a),s=r.leaveAnyState(t,e,n,i,a);return!1!==o&&!1!==s&&(r.ASYNC===o||r.ASYNC===s?r.ASYNC:void 0)},enterState:function(t,e,n,i,a){r.enterThisState(t,e,n,i,a),r.enterAnyState(t,e,n,i,a)},buildEvent:function(t,e){return function(){var n=this.current,i=e[n]||(e[r.WILDCARD]!=r.WILDCARD?e[r.WILDCARD]:n)||n,a=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,n,i,a,r.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,n,i,a,r.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===r.beforeEvent(this,t,n,i,a))return r.Result.CANCELLED;if(n===i)return r.afterEvent(this,t,n,i,a),r.Result.NOTRANSITION;var o=this;this.transition=function(){return o.transition=null,o.current=i,r.enterState(o,t,n,i,a),r.changeState(o,t,n,i,a),r.afterEvent(o,t,n,i,a),r.Result.SUCCEEDED},this.transition.cancel=function(){o.transition=null,r.afterEvent(o,t,n,i,a)};var s=r.leaveState(this,t,n,i,a);return!1===s?(this.transition=null,
r.Result.CANCELLED):r.ASYNC===s?r.Result.PENDING:this.transition?this.transition():void 0}}};"undefined"!=typeof t&&t.exports&&(e=t.exports=r),e.StateMachine=r}()},function(t,e){t.exports={gettingStationInformation:"Obteniendo información de la estación...",paused:"Pausado",onAir:"En el aire",disconnected:"Desconectado",streamUnavailable:"Transmisión no disponible",buffering:"Buffering",connecting:"Conexión de transmisión en vivo en progreso...",reconnecting:"Conexión de transmisión en vivo en progreso...",seekfailed:"Operación imposible",seekinvalidtime:"Operación imposible: tiempo no válido",ended:"Terminado",pause:"Pausado",play:"En vivo",stop:"Desconectado",error:"Erro",streamGeoBlocked:"Lo sentimos, este contenido no está disponible en su área",stationNotFound:"No se encontró la estación",flashPluginOutOfDate:"Su versión Flash plugin detectada es obsoleta. La versión mínima requerida es: 10.2.0",browserNotSupported:"Su navegador no es compatible con la función HTML5",playbackNotAllowed:"No se permite la reproducción de medios en el contexto o situación actual"}},function(t,e){t.exports={gettingStationInformation:"Chargement des informations de la station...",paused:"En pause",onAir:"En ondes",disconnected:"Déconnecté",streamUnavailable:"Flux indisponible",buffering:"Mise en mémoire tampon",connecting:"Connexion en cours...",reconnecting:"Connexion en cours...",seekfailed:"Opération impossible",seekinvalidtime:"Opération impossible : temps invalide",ended:"Terminé",pause:"En pause",play:"En lecture",stop:"Déconnecté",error:"Erreur",streamGeoBlocked:"Désolé, ce flux n'est pas disponible dans votre région",stationNotFound:"Station inexistante",flashPluginOutOfDate:"La version de votre plugin Flash est obsolète. La version minimale requise est: 10.2.0",browserNotSupported:"Votre navigateur ne supporte pas HTML5",playbackNotAllowed:"La lecture de contenu multimédia dans le contexte ou la situation actuels n'est pas autorisée"}},function(t,e){t.exports={gettingStationInformation:"Obtendo informações da estação...",paused:"Em Pausa",onAir:"No Ar",disconnected:"Desconectado",streamUnavailable:"Streaming não disponível",buffering:"Em Buffer",connecting:"Conexão com stream ao vivo em andamento...",reconnecting:"Conexão com stream ao vivo em andamento...",seekfailed:"Operação impossível",seekinvalidtime:"Operação impossível: hora inválida",ended:"Terminou",pause:"Pausa",play:"Tocando",stop:"Interrompido",error:"Erro",streamGeoBlocked:"Infelizmente, este conteúdo não está disponível na sua área",stationNotFound:"Estação não encontrada",flashPluginOutOfDate:"A versão detectada do seu plug-in Flash está desatualizada. A versão mínima necessária é: 10.2.0",browserNotSupported:"Seu navegador não oferece suporte para o recurso HTML5",playbackNotAllowed:"A reprodução de mídia no contexto ou situação atual não é permitida"}},function(t,e,r){(function(e,r){/*!
	 *
	 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
	 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else{t.exports=e()}}(function(){"use strict";function t(t){return function(){return X.apply(t,arguments)}}function n(t){return t===Object(t)}function i(t){return"[object StopIteration]"===it(t)||t instanceof W}function a(t,e){if(V&&e.stack&&"object"==typeof t&&null!==t&&t.stack){for(var r=[],n=e;n;n=n.source)n.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>n.stackCounter)&&(et(t,"__minimumStackCounter__",{value:n.stackCounter,configurable:!0}),r.unshift(n.stack));r.unshift(t.stack);var i=r.join("\n"+at+"\n"),a=o(i);et(t,"stack",{value:a,configurable:!0})}}function o(t){for(var e=t.split("\n"),r=[],n=0;n<e.length;++n){var i=e[n];l(i)||s(i)||!i||r.push(i)}return r.join("\n")}function s(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(t);return n?[n[1],Number(n[2])]:void 0}function l(t){var e=u(t);if(!e)return!1;var r=e[0],n=e[1];return r===K&&n>=q&&n<=dt}function c(){if(V)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],r=u(e);if(!r)return;return K=r[0],r[1]}}function d(t,e,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+r+" instead.",new Error("").stack),t.apply(t,arguments)}}function h(t){return t instanceof g?t:b(t)?D(t):L(t)}function f(){function t(t){e=t,h.longStackSupport&&V&&(a.source=t),$(r,function(e,r){h.nextTick(function(){t.promiseDispatch.apply(t,r)})},void 0),r=void 0,n=void 0}var e,r=[],n=[],i=tt(f.prototype),a=tt(g.prototype);if(a.promiseDispatch=function(t,i,a){var o=Q(arguments);r?(r.push(o),"when"===i&&a[1]&&n.push(a[1])):h.nextTick(function(){e.promiseDispatch.apply(e,o)})},a.valueOf=function(){if(r)return a;var t=y(e);return _(t)&&(e=t),t},a.inspect=function(){return e?e.inspect():{state:"pending"}},h.longStackSupport&&V)try{throw new Error}catch(t){a.stack=t.stack.substring(t.stack.indexOf("\n")+1),a.stackCounter=ot++}return i.promise=a,i.resolve=function(r){e||t(h(r))},i.fulfill=function(r){e||t(L(r))},i.reject=function(r){e||t(k(r))},i.notify=function(t){e||$(n,function(e,r){h.nextTick(function(){r(t)})},void 0)},i}function p(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=f();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function m(t){return p(function(e,r){for(var n=0,i=t.length;n<i;n++)h(t[n]).then(e,r)})}function g(t,e,r){void 0===e&&(e=function(t){return k(new Error("Promise does not support operation: "+t))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=tt(g.prototype);if(n.promiseDispatch=function(r,i,a){var o;try{o=t[i]?t[i].apply(n,a):e.call(n,i,a)}catch(t){o=k(t)}r&&r(o)},n.inspect=r,r){var i=r();"rejected"===i.state&&(n.exception=i.reason),n.valueOf=function(){var t=r();return"pending"===t.state||"rejected"===t.state?n:t.value}}return n}function v(t,e,r,n){return h(t).then(e,r,n)}function y(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return t instanceof g}function b(t){return n(t)&&"function"==typeof t.then}function E(t){return _(t)&&"pending"===t.inspect().state}function A(t){return!_(t)||"fulfilled"===t.inspect().state}function T(t){return _(t)&&"rejected"===t.inspect().state}function S(){st.length=0,ut.length=0,ct||(ct=!0)}function w(t,r){ct&&("object"==typeof e&&"function"==typeof e.emit&&h.nextTick.runAfter(function(){J(ut,t)!==-1&&(e.emit("unhandledRejection",r,t),lt.push(t))}),ut.push(t),r&&"undefined"!=typeof r.stack?st.push(r.stack):st.push("(no stack) "+r))}function C(t){if(ct){var r=J(ut,t);r!==-1&&("object"==typeof e&&"function"==typeof e.emit&&h.nextTick.runAfter(function(){var n=J(lt,t);n!==-1&&(e.emit("rejectionHandled",st[r],t),lt.splice(n,1))}),ut.splice(r,1),st.splice(r,1))}}function k(t){var e=g({when:function(e){return e&&C(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return w(e,t),e}function L(t){return g({when:function(){return t},get:function(e){return t[e]},set:function(e,r){t[e]=r},delete:function(e){delete t[e]},post:function(e,r){return null===e||void 0===e?t.apply(void 0,r):t[e].apply(t,r)},apply:function(e,r){return t.apply(e,r)},keys:function(){return nt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function D(t){var e=f();return h.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function P(t){return g({isDef:function(){}},function(e,r){return N(t,e,r)},function(){return h(t).inspect()})}function I(t,e,r){return h(t).spread(e,r)}function R(t){return function(){function e(t,e){var o;if("undefined"==typeof StopIteration){try{o=r[t](e)}catch(t){return k(t)}return o.done?h(o.value):v(o.value,n,a)}try{o=r[t](e)}catch(t){return i(t)?h(t.value):k(t)}return v(o,n,a)}var r=t.apply(this,arguments),n=e.bind(e,"next"),a=e.bind(e,"throw");return n()}}function O(t){h.done(h.async(t)())}function x(t){throw new W(t)}function M(t){return function(){return I([this,F(arguments)],function(e,r){return t.apply(e,r)})}}function N(t,e,r){return h(t).dispatch(e,r)}function F(t){return v(t,function(t){var e=0,r=f();return $(t,function(n,i,a){var o;_(i)&&"fulfilled"===(o=i.inspect()).state?t[a]=o.value:(++e,v(i,function(n){t[a]=n,0===--e&&r.resolve(t)},r.reject,function(t){r.notify({index:a,value:t})}))},void 0),0===e&&r.resolve(t),r.promise})}function U(t){if(0===t.length)return h.resolve();var e=h.defer(),r=0;return $(t,function(n,i,a){function o(t){e.resolve(t)}function s(t){if(r--,0===r){var n=t||new Error(""+t);n.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+n.message,e.reject(n)}}function u(t){e.notify({index:a,value:t})}var l=t[a];r++,v(l,o,s,u)},void 0),e.promise}function B(t){return v(t,function(t){return t=Z(t,h),v(F(Z(t,function(t){return v(t,Y,Y)})),function(){return t})})}function j(t){return h(t).allSettled()}function G(t,e){return h(t).then(void 0,void 0,e)}function H(t,e){return h(t).nodeify(e)}var V=!1;try{throw new Error}catch(t){V=!!t.stack}var K,W,q=c(),Y=function(){},z=function(){function t(){for(var t,e;i.next;)i=i.next,t=i.task,i.task=void 0,e=i.domain,e&&(i.domain=void 0,e.enter()),n(t,e);for(;l.length;)t=l.pop(),n(t);o=!1}function n(e,r){try{e()}catch(e){if(u)throw r&&r.exit(),setTimeout(t,0),r&&r.enter(),e;setTimeout(function(){throw e},0)}r&&r.exit()}var i={task:void 0,next:null},a=i,o=!1,s=void 0,u=!1,l=[];if(z=function(t){a=a.next={task:t,domain:u&&e.domain,next:null},o||(o=!0,s())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)u=!0,s=function(){e.nextTick(t)};else if("function"==typeof r)s="undefined"!=typeof window?r.bind(window,t):function(){r(t)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){s=d,c.port1.onmessage=t,t()};var d=function(){c.port2.postMessage(0)};s=function(){setTimeout(t,0),d()}}else s=function(){setTimeout(t,0)};return z.runAfter=function(t){l.push(t),o||(o=!0,s())},z}(),X=Function.call,Q=t(Array.prototype.slice),$=t(Array.prototype.reduce||function(t,e){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){e=this[r++];break}if(++r>=n)throw new TypeError}for(;r<n;r++)r in this&&(e=t(e,this[r],r));return e}),J=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Z=t(Array.prototype.map||function(t,e){var r=this,n=[];return $(r,function(i,a,o){n.push(t.call(e,a,o,r))},void 0),n}),tt=Object.create||function(t){function e(){}return e.prototype=t,new e},et=Object.defineProperty||function(t,e,r){return t[e]=r.value,t},rt=t(Object.prototype.hasOwnProperty),nt=Object.keys||function(t){var e=[];for(var r in t)rt(t,r)&&e.push(r);return e},it=t(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var at="From previous event:";h.resolve=h,h.nextTick=z,h.longStackSupport=!1;var ot=1;"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(h.longStackSupport=!0),h.defer=f,f.prototype.makeNodeResolver=function(){var t=this;return function(e,r){e?t.reject(e):arguments.length>2?t.resolve(Q(arguments,1)):t.resolve(r)}},h.Promise=p,h.promise=p,p.race=m,p.all=F,p.reject=k,p.resolve=h,h.passByCopy=function(t){return t},g.prototype.passByCopy=function(){return this},h.join=function(t,e){return h(t).join(e)},g.prototype.join=function(t){return h([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},h.race=m,g.prototype.race=function(){return this.then(h.race)},h.makePromise=g,g.prototype.toString=function(){return"[object Promise]"},g.prototype.then=function(t,e,r){function n(e){try{return"function"==typeof t?t(e):e}catch(t){return k(t)}}function i(t){if("function"==typeof e){a(t,s);try{return e(t)}catch(t){return k(t)}}return k(t)}function o(t){return"function"==typeof r?r(t):t}var s=this,u=f(),l=!1;return h.nextTick(function(){s.promiseDispatch(function(t){l||(l=!0,u.resolve(n(t)))},"when",[function(t){l||(l=!0,u.resolve(i(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,r=!1;try{e=o(t)}catch(t){if(r=!0,!h.onerror)throw t;h.onerror(t)}r||u.notify(e)}]),u.promise},h.tap=function(t,e){return h(t).tap(e)},g.prototype.tap=function(t){return t=h(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},h.when=v,g.prototype.thenResolve=function(t){return this.then(function(){return t})},h.thenResolve=function(t,e){return h(t).thenResolve(e)},g.prototype.thenReject=function(t){return this.then(function(){throw t})},h.thenReject=function(t,e){return h(t).thenReject(e)},h.nearer=y,h.isPromise=_,h.isPromiseAlike=b,h.isPending=E,g.prototype.isPending=function(){return"pending"===this.inspect().state},h.isFulfilled=A,g.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},h.isRejected=T,g.prototype.isRejected=function(){return"rejected"===this.inspect().state};var st=[],ut=[],lt=[],ct=!0;h.resetUnhandledRejections=S,h.getUnhandledReasons=function(){return st.slice()},h.stopUnhandledRejectionTracking=function(){S(),ct=!1},S(),h.reject=k,h.fulfill=L,h.master=P,h.spread=I,g.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},h.async=R,h.spawn=O,h.return=x,h.promised=M,h.dispatch=N,g.prototype.dispatch=function(t,e){var r=this,n=f();return h.nextTick(function(){r.promiseDispatch(n.resolve,t,e)}),n.promise},h.get=function(t,e){return h(t).dispatch("get",[e])},g.prototype.get=function(t){return this.dispatch("get",[t])},h.set=function(t,e,r){return h(t).dispatch("set",[e,r])},g.prototype.set=function(t,e){return this.dispatch("set",[t,e])},h.del=h.delete=function(t,e){return h(t).dispatch("delete",[e])},g.prototype.del=g.prototype.delete=function(t){return this.dispatch("delete",[t])},h.mapply=h.post=function(t,e,r){return h(t).dispatch("post",[e,r])},g.prototype.mapply=g.prototype.post=function(t,e){return this.dispatch("post",[t,e])},h.send=h.mcall=h.invoke=function(t,e){return h(t).dispatch("post",[e,Q(arguments,2)])},g.prototype.send=g.prototype.mcall=g.prototype.invoke=function(t){return this.dispatch("post",[t,Q(arguments,1)])},h.fapply=function(t,e){return h(t).dispatch("apply",[void 0,e])},g.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},h.try=h.fcall=function(t){return h(t).dispatch("apply",[void 0,Q(arguments,1)])},g.prototype.fcall=function(){return this.dispatch("apply",[void 0,Q(arguments)])},h.fbind=function(t){var e=h(t),r=Q(arguments,1);return function(){return e.dispatch("apply",[this,r.concat(Q(arguments))])}},g.prototype.fbind=function(){var t=this,e=Q(arguments);return function(){return t.dispatch("apply",[this,e.concat(Q(arguments))])}},h.keys=function(t){return h(t).dispatch("keys",[])},g.prototype.keys=function(){return this.dispatch("keys",[])},h.all=F,g.prototype.all=function(){return F(this)},h.any=U,g.prototype.any=function(){return U(this)},h.allResolved=d(B,"allResolved","allSettled"),g.prototype.allResolved=function(){return B(this)},h.allSettled=j,g.prototype.allSettled=function(){return this.then(function(t){return F(Z(t,function(t){function e(){return t.inspect()}return t=h(t),t.then(e,e)}))})},h.fail=h.catch=function(t,e){return h(t).then(void 0,e)},g.prototype.fail=g.prototype.catch=function(t){return this.then(void 0,t)},h.progress=G,g.prototype.progress=function(t){return this.then(void 0,void 0,t)},h.fin=h.finally=function(t,e){return h(t).finally(e)},g.prototype.fin=g.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=h(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},h.done=function(t,e,r,n){return h(t).done(e,r,n)},g.prototype.done=function(t,r,n){var i=function(t){h.nextTick(function(){if(a(t,o),!h.onerror)throw t;h.onerror(t)})},o=t||r||n?this.then(t,r,n):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),o.then(void 0,i)},h.timeout=function(t,e,r){return h(t).timeout(e,r)},g.prototype.timeout=function(t,e){var r=f(),n=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),r.reject(e)},t);return this.then(function(t){clearTimeout(n),r.resolve(t)},function(t){clearTimeout(n),r.reject(t)},r.notify),r.promise},h.delay=function(t,e){return void 0===e&&(e=t,t=void 0),h(t).delay(e)},g.prototype.delay=function(t){return this.then(function(e){var r=f();return setTimeout(function(){r.resolve(e)},t),r.promise})},h.nfapply=function(t,e){return h(t).nfapply(e)},g.prototype.nfapply=function(t){var e=f(),r=Q(t);return r.push(e.makeNodeResolver()),this.fapply(r).fail(e.reject),e.promise},h.nfcall=function(t){var e=Q(arguments,1);return h(t).nfapply(e)},g.prototype.nfcall=function(){var t=Q(arguments),e=f();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},h.nfbind=h.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=Q(arguments,1);return function(){var r=e.concat(Q(arguments)),n=f();return r.push(n.makeNodeResolver()),h(t).fapply(r).fail(n.reject),n.promise}},g.prototype.nfbind=g.prototype.denodeify=function(){var t=Q(arguments);return t.unshift(this),h.denodeify.apply(void 0,t)},h.nbind=function(t,e){var r=Q(arguments,2);return function(){function n(){return t.apply(e,arguments)}var i=r.concat(Q(arguments)),a=f();return i.push(a.makeNodeResolver()),h(n).fapply(i).fail(a.reject),a.promise}},g.prototype.nbind=function(){var t=Q(arguments,0);return t.unshift(this),h.nbind.apply(void 0,t)},h.nmapply=h.npost=function(t,e,r){return h(t).npost(e,r)},g.prototype.nmapply=g.prototype.npost=function(t,e){var r=Q(e||[]),n=f();return r.push(n.makeNodeResolver()),this.dispatch("post",[t,r]).fail(n.reject),n.promise},h.nsend=h.nmcall=h.ninvoke=function(t,e){var r=Q(arguments,2),n=f();return r.push(n.makeNodeResolver()),h(t).dispatch("post",[e,r]).fail(n.reject),n.promise},g.prototype.nsend=g.prototype.nmcall=g.prototype.ninvoke=function(t){var e=Q(arguments,1),r=f();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},h.nodeify=H,g.prototype.nodeify=function(t){return t?void this.then(function(e){h.nextTick(function(){t(null,e)})},function(e){h.nextTick(function(){t(e)})}):this},h.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var dt=c();return h})}).call(e,r(58),r(99).setImmediate)},function(t,e,r){var n,i;/*!
	  * $script.js JS loader & dependency manager
	  * https://github.com/ded/script.js
	  * (c) Dustin Diaz 2014 | License MIT
	  */
!function(a,o){"undefined"!=typeof t&&t.exports?t.exports=o():(n=o,i="function"==typeof n?n.call(e,r,e,t):n,!(void 0!==i&&(t.exports=i)))}("$script",function(){function t(t,e){for(var r=0,n=t.length;r<n;++r)if(!e(t[r]))return u;return 1}function e(e,r){t(e,function(t){return!r(t)})}function r(a,o,s){function u(t){return t.call?t():h[t]}function c(){if(!--y){h[v]=1,g&&g();for(var r in p)t(r.split("|"),u)&&!e(p[r],u)&&(p[r]=[])}}a=a[l]?a:[a];var d=o&&o.call,g=d?o:s,v=d?a.join(""):o,y=a.length;return setTimeout(function(){e(a,function t(e,r){return null===e?c():(r||/^https?:\/\//.test(e)||!i||(e=e.indexOf(".js")===-1?i+e+".js":i+e),m[e]?(v&&(f[v]=1),2==m[e]?c():setTimeout(function(){t(e,!0)},0)):(m[e]=1,v&&(f[v]=1),void n(e,c)))})},0),r}function n(t,e){var r,n=o.createElement("script");n.onload=n.onerror=n[d]=function(){n[c]&&!/^c|loade/.test(n[c])||r||(n.onload=n[d]=null,r=1,m[t]=2,e())},n.async=1,n.src=a?t+(t.indexOf("?")===-1?"?":"&")+a:t,s.insertBefore(n,s.lastChild)}var i,a,o=document,s=o.getElementsByTagName("head")[0],u=!1,l="push",c="readyState",d="onreadystatechange",h={},f={},p={},m={};return r.get=n,r.order=function(t,e,n){!function i(a){a=t.shift(),t.length?r(a,i):r(a,e,n)}()},r.path=function(t){i=t},r.urlArgs=function(t){a=t},r.ready=function(n,i,a){n=n[l]?n:[n];var o=[];return!e(n,function(t){h[t]||o[l](t)})&&t(n,function(t){return h[t]})?i():!function(t){p[t]=p[t]||[],p[t][l](i),a&&a(o)}(n.join("|")),r},r.done=function(t){r([null],t)},r})},function(t,e,r){(function(t,e){!function(t,r){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return m[p]=n,f(p),p++}function i(t){delete m[t]}function a(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}function o(t){if(g)setTimeout(o,0,t);else{var e=m[t];if(e){g=!0;try{a(e)}finally{i(t),g=!1}}}}function s(){f=function(t){e.nextTick(function(){o(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}function l(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&o(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),f=function(r){t.postMessage(e+r,"*")}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;o(e)},f=function(e){t.port2.postMessage(e)}}function d(){var t=v.documentElement;f=function(e){var r=v.createElement("script");r.onreadystatechange=function(){o(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}function h(){f=function(t){setTimeout(o,0,t)}}if(!t.setImmediate){var f,p=1,m={},g=!1,v=t.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,"[object process]"==={}.toString.call(t.process)?s():u()?l():t.MessageChannel?c():v&&"onreadystatechange"in v.createElement("script")?d():h(),y.setImmediate=n,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),r(58))},function(t,e,r){(function(t){function n(t,e){this._id=t,this._clearFn=e}var i="undefined"!=typeof t&&t||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;e.setTimeout=function(){return new n(a.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new n(a.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(98),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},function(t,e,r){!function(t,r){r(e)}(this,function(t){"use strict";function e(t){return t&&DataView.prototype.isPrototypeOf(t)}function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return _.iterable&&(e[Symbol.iterator]=function(){return e}),e}function a(t){this.map={},t instanceof a?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function u(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function l(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function c(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:_.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:_.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:_.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():_.arrayBuffer&&_.blob&&e(t)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||E(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t){var e=t.toUpperCase();return A.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var r=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new a(e.headers)),this.method=f(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function m(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}}),e}function g(t){var e=new a,r=t.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new a(e.headers),this.url=e.url||"",this._initBody(t)}function y(e,r){return new Promise(function(n,i){function a(){s.abort()}var o=new p(e,r);if(o.signal&&o.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:g(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;n(new v(e,t))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&_.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),o.signal&&(o.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",a)}),s.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})}var _={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(_.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(t){return t&&b.indexOf(Object.prototype.toString.call(t))>-1};a.prototype.append=function(t,e){t=r(t),e=n(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},a.prototype.delete=function(t){delete this.map[r(t)]},a.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},a.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},a.prototype.set=function(t,e){this.map[r(t)]=n(e)},a.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},a.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),i(t)},a.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},a.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),i(t)},_.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var T=[301,302,303,307,308];v.redirect=function(t,e){if(T.indexOf(e)===-1)throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.DOMException=self.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}y.polyfill=!0,self.fetch||(self.fetch=y,self.Headers=a,self.Request=p,self.Response=v),t.Headers=a,t.Request=p,t.Response=v,t.fetch=y,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e,r){var n,i;n=[r(12),r(6),r(1),r(14),r(2),r(3),r(130),r(108),r(117),r(114),r(64),r(115),r(116),r(118),r(119)],i=function(t,e,r,n,i,a,o,s,u,l,c,d,h,f,p){var m=r([t],{constructor:function(t,e){this.coreModules=[],this.modulesQueue=this.config&&this.config.coreModules?i.clone(this.config.coreModules):[],this.moduleReadyHandler=a(this.target,"module-ready",i.hitch(this,this._onModuleComplete)),this.moduleErrorHandler=a(this.target,"module-error",i.hitch(this,this._onModuleComplete)),this.inherited(arguments)},loadModules:function(){if(0!=this.modulesQueue.length)for(var t=0;t<this.config.coreModules.length;t++)this.loadModule(this.config.coreModules[t].id,this._getModuleConfigById(this.config.coreModules[t].id))},loadModule:function(t,e){var r=null;switch(t){case"SyncBanners":r=u;break;case"MediaPlayer":r=l;break;case"Npe":r=d;break;case"NowPlayingApi":r=c;break;case"PlayerWebAdmin":r=h;break;case"TargetSpot":r=f;break;case"UserRegistration":r=p}r&&this._instanciateCurrentModule(r,t,e)},getModuleById:function(t){var r=null;return e.forEach(this.coreModules,function(e,n){e.id==t&&(r=e.module)},this),r},_instanciateCurrentModule:function(t,e,r){var n=new t(r,this.target);this.coreModules.push({id:e,module:n}),n.start()},_removeCurrentModuleFromQueue:function(t){var r=-1;e.forEach(this.modulesQueue,function(e,n){e.id==t&&(r=n)},this),r>-1&&this.modulesQueue.splice(r,1)},_onModuleComplete:function(t){this._removeCurrentModuleFromQueue(t.data.id);var e=this;if(0==this.modulesQueue.length){if(this.moduleReadyHandler.remove(),this.moduleErrorHandler.remove(),this.getModuleById("UserRegistration")&&this.getModuleById("MediaPlayer")){new o(i.hitch(this,this.getModuleById),this.target)}var r=this.getModuleById("MediaPlayer");if(void 0==r||"Html5"!=r.tech.type||this.config.adBlockerDetected)this.emit("player-ready");else{var n=new s,a=n.init();a.then(function(){e.emit("player-ready")},function(t){e.emit("player-ready")})}this.config.adBlockerDetected&&this.emit("ad-blocker-detected",{message:"Ad Blocker is activated"})}},_getModuleConfigById:function(t){var r={};return this.config&&this.config.coreModules&&e.forEach(this.config.coreModules,function(e){e.id==t&&(r=e)},this),r}});return m}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(3)],i=function(t,e){var r=t([],{AD_MODULE_PLAYBACK_START:"ad-module-playback-start",AD_MODULE_PLAYBACK_COMPLETE:"ad-module-playback-complete",AD_MODULE_PLAYBACK_DESTROY:"ad-module-playback-destroy",AD_MODULE_PLAYBACK_ERROR:"ad-module-playback-error",AD_MODULE_COUNTDOWN:"ad-module-countdown",AD_MODULE_MEDIA_READY:"ad-module-media-ready",AD_MODULE_MEDIA_EMPTY:"ad-module-media-empty",AD_MODULE_QUARTILE:"ad-module-quartile",AD_MODULE_COMPANIONS:"ad-module-companions",AD_MODULE_CLICK_TRACKING:"ad-module-click-tracking",AD_MODULE_VAST_ERROR:"ad-module-vast-error",AD_MODULE_VAST_EMPTY:"ad-module-vast-empty",AD_MODULE_VAST_PROCESS_COMPLETE:"ad-module-vast-process-complete",emit:function(t,r,n){n&&this.config.playerId!=n.id||e.emit(this.target,t,{data:r,bubbles:!0,cancelable:!0})}});return r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{quartileMap:["start","firstQuartile","midpoint","thirdQuartile","complete"],constructor:function(){},getQuartileByIndex:function(t){return this.quartileMap[t]},isValidType:function(t){for(var e=0;e<this.length();e++)if(this.quartileMap[e]==t)return!0;return!1},length:function(){return this.quartileMap.length}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){return["970x250","120x60","300x600","728x90","970x100","300x250","88x31","300x1050","970x90","180x150","320x480","300x50","320x50","300x300","970x66","160x600"]}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(21),o=a.getProtocol();n=[r(1)],i=function(t){var e=t([],{ENDPOINT:o+"//{host}/ondemand/ars?type={type}",getVastUri:function(t){if(void 0==t.host||void 0==t.type||void 0==t.stationName&&void 0==t.stationId)return null;var e=this.ENDPOINT;return e=e.replace("{host}",t.host),e=e.replace("{type}",t.type),void 0!=t.format&&(e=e+"&fmt="+t.format),void 0!=t.stationName?e=e+"&stn="+t.stationName:void 0!=t.stationId&&(e=e+"&stid="+parseInt(t.stationId)),void 0!=t.maxAds&&(e=e+"&Max_ads="+parseInt(t.maxAds)),void 0!=t.assetType&&(e=e+"&at="+t.assetType),void 0!=t.minFileSize&&(e=e+"&minsz="+parseInt(t.minFileSize)),void 0!=t.maxFileSize&&(e=e+"&maxsz="+parseInt(t.maxFileSize)),void 0!=t.fileFormat&&(e=e+"&cntnr="+t.fileFormat),void 0!=t.minDuration&&(e=e+"&mindur="+parseInt(t.minDuration)),void 0!=t.maxDuration&&(e=e+"&maxdur="+parseInt(t.maxDuration)),void 0!=t.minBitrate&&(e=e+"&minbr="+parseInt(t.minBitrate)),void 0!=t.maxBitrate&&(e=e+"&maxbr="+parseInt(t.maxBitrate)),void 0!=t.minWidth&&(e=e+"&minw="+parseInt(t.minWidth)),void 0!=t.maxWidth&&(e=e+"&maxw="+parseInt(t.maxWidth)),void 0!=t.minHeight&&(e=e+"&minh="+parseInt(t.minHeight)),void 0!=t.maxHeight&&(e=e+"&maxh="+parseInt(t.maxHeight)),void 0!=t.audioCodec&&(e=e+"&acodec="+t.audioCodec),void 0!=t.audioMinChannels&&(e=e+"&minach="+parseInt(t.audioMinChannels)),void 0!=t.audioMaxChannels&&(e=e+"&maxach="+parseInt(t.audioMaxChannels)),void 0!=t.audioSampleRates&&(e=e+"&asr="+t.audioSampleRates),void 0!=t.videoCodec&&(e=e+"&vcodec="+t.videoCodec),void 0!=t.videoAspectRatio&&(e=e+"&vaspect="+t.videoAspectRatio),void 0!=t.minFrameRate&&(e=e+"&minfps="+parseFloat(t.minFrameRate)),void 0!=t.maxFrameRate&&(e=e+"&maxfps="+parseFloat(t.maxFrameRate)),void 0!=t.excludedCategories&&(e=e+"&iab-categories-to-exclude="+t.excludedCategories),e}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(20);n=[r(1)],i=function(t){var e=!0,r="FuckAdBlock",n=function(){var t=this,r={};this.errors={throwError:function(t,e,r){throw'Argument "'+t+'" of method "'+e+'" is not an "'+r+'"'},isObject:function(t,e,r){"object"==typeof t&&Array.isArray(t)!==!0&&null!==t||this.throwError(e,r,"object")},isArray:function(t,e,r){Array.isArray(t)===!1&&this.throwError(e,r,"array")},isFunction:function(t,e,r){"function"!=typeof t&&this.throwError(e,r,"function")},isString:function(t,e,r){"string"!=typeof t&&this.throwError(e,r,"string")},isBoolean:function(t,e,r){"boolean"!=typeof t&&this.throwError(e,r,"boolean")}},this.options={set:function(e){t.errors.isObject(e,"optionsList","options.set");for(var n in e)r[n]=e[n],t.debug.log("options.set",'Set "'+n+'" to "'+e[n]+'"');return t},get:function(t){return r[t]}},this.debug={set:function(r){return e=r,t.debug.log("debug.set",'Set debug to "'+e+'"'),t},isEnable:function(){return e},log:function(r,n){e===!0&&(t.errors.isString(r,"method","debug.log"),t.errors.isString(n,"message","debug.log"))}},this.versionToInt=function(t){for(var e="",r=0;r<3;r++){var n=t[r]||0;1===(""+n).length&&(n="0"+n),e+=n}return parseInt(e)}},i=function(){n.apply(this);var t=null,e=null;this.setDetected=function(e){return t=e,this},this.callDetected=function(){return null!==t&&(t(),t=null,!0)},this.setUndetected=function(t){return e=t,this},this.callUndetected=function(){return null!==e&&(e(),e=null,!0)}},o=function(){n.apply(this),this.options.set({timeout:200});var t=this,e=[4,0,0,"beta",3],i={},o={};this.getVersion=function(t){return t!==!0?e:void this.versionToInt(e)},this.addEvent=function(t,e){return this.errors.isString(t,"name","addEvent"),this.errors.isFunction(e,"callback","addEvent"),void 0===i[t]&&(i[t]=[]),i[t].push(e),this.debug.log("set",'Event "'+t+'" added'),this},this.on=function(t,e){return this.errors.isBoolean(t,"detected","on"),this.errors.isFunction(e,"callback","on"),this.addEvent(t===!0?"detected":"undetected",e)},this.onDetected=function(t){return this.errors.isFunction(t,"callback","onDetected"),this.addEvent("detected",t)},this.onNotDetected=function(t){return this.errors.isFunction(t,"callback","onNotDetected"),this.addEvent("undetected",t)};var l=function(e){var r=i[e];if(t.debug.isEnable()===!0){var n=void 0!==r?r.length:0;t.debug.log("dispatchEvent",'Starts dispatch of events "'+e+'" (0/'+n+")")}if(void 0!==r)for(var a in r)t.debug.isEnable()===!0&&t.debug.log("dispatchEvent",'Dispatch event "'+e+'" ('+(parseInt(a)+1)+"/"+n+")"),r[a]();return this};this.check=function(e,r){e instanceof Array==!1&&void 0===r&&(r=e,e=void 0),void 0===e&&(e=Object.keys(o)),void 0===r&&(r={}),this.errors.isArray(e,"pluginsList","check"),this.errors.isObject(r,"optionsList","check"),this.debug.log("check","Starting check");var n={},i=e.length,a=0,s=function(e,r,o){if(a++,t.debug.log("check",(r===!0?"Positive":"Negative")+'" check of plugin "'+e+'"'),o===!0||r===!0||a===i){clearTimeout(h);for(var s in n)n[s].instance.stop();l(r===!0?"detected":"undetected")}};if(this.debug.log("check","Starting loading plugins (0/"+i+") ("+e.join()+")"),0===i)return s("#NoPlugin",!1,!0),this;for(var u in e){var c=e[u];this.debug.log("check",'Load plugin "'+c+'" ('+(parseInt(u)+1)+"/"+i+")");var d=n[c]={name:c,instance:new o[c],detected:null};void 0!==r[c]&&d.instance.options.set(r[c]),function(t,e){e.instance.setDetected(function(){e.detected=!0,t(e.name,!0)}).setUndetected(function(){e.detected=!1,t(e.name,!1)})}(s,d)}for(var c in n)n[c].instance.start();var h=setTimeout(function(){s("#Timeout",!1,!0)},this.options.get("timeout"));return this},this.registerPlugin=function(t){if(this.errors.isFunction(t,"pluginClass","registerPlugin"),this.errors.isString(t.pluginName,"pluginClass.pluginName","registerPlugin"),this.errors.isArray(t.versionMin,"pluginClass.versionMin","registerPlugin"),3!==t.versionMin.length&&this.errors.throwError("pluginClass.versionMin","registerPlugin","array with 3 values"),void 0===o[t.pluginName]){if(this.versionToInt(e)>=this.versionToInt(t.versionMin))return o[t.pluginName]=t,this.debug.log("registerPlugin",'Plugin "'+t.pluginName+'" registered'),!0;throw'The plugin "'+t.pluginName+'" ('+t.versionMin.join(".")+") is too recent for this version of "+r+" ("+e.join(".")+")"}throw'The plugin "'+t.pluginName+'" is already registered'},"iOS"===a.os.family?this.registerPlugin(u):this.registerPlugin(s)};o.getPluginClass=function(){return i};var s=function(){o.getPluginClass().apply(this,arguments),this.options.set({loopTime:50,baitElement:null,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width:1px!important;height:1px!important;position:absolute!important;left:-10000px!important;top:-1000px!important;",baitParent:null});var t={};this.start=function(){var e=this;if(null===this.options.get("baitElement")){t.bait=this.createBait({class:this.options.get("baitClass"),style:this.options.get("baitStyle")});var r=this.options.get("baitParent");null===r?window.document.body.appendChild(t.bait):r.appendChild(t.bait)}else t.bait=this.options.get("baitElement");var n=function(){e.checkBait(t.bait,!0)===!0&&e.callDetected()};return t.loopTimeout=setTimeout(n,1),t.loopInterval=setInterval(n,this.options.get("loopTime")),this},this.stop=function(){clearInterval(t.loopTimeout),clearInterval(t.loopInterval);var e=this.options.get("baitParent");return null===e?window.document.body.removeChild(t.bait):e.removeChild(t.bait),this},this.createBait=function(t){var e=window.document.createElement("div");return e.setAttribute("class",t.class),e.setAttribute("style",t.style),e.offsetParent,e.offsetHeight,e.offsetLeft,e.offsetTop,e.offsetWidth,e.clientHeight,e.clientWidth,e},this.checkBait=function(t,e){var r=!1;if(e===!0&&null!==window.document.body.getAttribute("abp")||null===t.offsetParent||0==t.offsetHeight||0==t.offsetLeft||0==t.offsetTop||0==t.offsetWidth||0==t.clientHeight||0==t.clientWidth)r=!0;else{var n=window.getComputedStyle(t);"none"!=n.getPropertyValue("display")&&"hidden"!=n.getPropertyValue("visibility")||(r=!0)}return r}};s.pluginName="html",s.version=[1,0,0],s.versionMin=[4,0,0];var u=function(){o.getPluginClass().apply(this,arguments),this.options.set({baitMode:"ajax",baitUrl:"https://sdk.listenlive.co/ad/banner/_adsense_/_adserver/_adview_.ad.json?adzone=top&adsize=300x250&advid={RANDOM}"});var t={};this.start=function(){var e=this;t.end=!1;var r=this.options.get("baitUrl").replace(/\{RANDOM\}/g,function(){return parseInt(1e8*Math.random())});return this._urlCheck(r,this.options.get("baitMode"),function(){t.end===!1&&(t.end=!0,e.callDetected())},function(){t.end===!1&&(t.end=!0,e.callUndetected())}),this},this.stop=function(){return t.end=!0,this},this._urlCheck=function(t,e,r,n){var i=!1,a=function(t){i===!1&&(i=!0,t===!0?r():n())};if("ajax"===e){var o=[!1,!1,!1,!1],s=null,u=function(t){if(void 0!==t)a(t);else{if(0===s)return void a(!0);for(var e=0;e<4;e++)if(o[e]===!1&&404!=s)return void a(!0);a(!1)}},l=new XMLHttpRequest;l.onreadystatechange=function(){o[l.readyState-1]=!0;try{s=l.status}catch(t){}4===l.readyState&&u()};try{l.open("GET",t,!0),l.send()}catch(t){"2153644038"==t.result&&u(!0)}}else if("import"===e){var c=document.createElement("script");c.src=t,c.onerror=function(){a(!0),window.document.body.removeChild(c)},c.onload=function(){a(!1),window.document.body.removeChild(c)},window.document.body.appendChild(c)}else a(!1)}};u.pluginName="http",s.version=[1,0,0],u.versionMin=[4,0,0];var l=t([],{constructor:function(){this.fab=new o}});return l}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;(function(a){n=[r(1),r(2),r(3),r(13),r(6),r(7),r(11),r(52),r(10)],i=function(t,e,n,i,o,s,u,l,c){var d=(r(100),window.TdCompanions=t([i],{JS_BANNER_URL:"https://player.tritondigital.com/tpl/default/jsbanner.php",constructor:function(){this.listeners=[]},loadCompanionIframe:function(t,e,r,n){var i=s.byId(t,document);u.empty(i),u.create("iframe",{src:e,width:r,height:n,scrolling:"no",frameborder:0,marginheight:0,marginwidth:0,allowtransparency:!0,style:{margin:0,padding:0}},i)},loadCompanionStatic:function(t,e,r,n,i,o,l){o=o||"",l=l||"";var c=s.byId(t,document);u.empty(c);var d=e.substring(e.lastIndexOf(".")+1).toLowerCase();if("application/x-shockwave-flash"==l||"swf"==d){if(!a.getFlashPlayerVersion().major>0)return console.error("companions::loadCompanionStatic - SWF file embed error: Flash is not available. containerId="+t+", adSpotUrl="+e),void this.emit("companion-load-error",{containerId:t,adSpotUrl:e});e=e+(e.indexOf("?")>-1?"&":"?")+"cb_"+(new Date).getTime();var h=({expressInstall:!0,path:e,width:r,height:n,allowScriptAccess:"always",allowfullscreen:!0,allowNetworking:"all",minimumVersion:"10.2.0",vars:{clickTAG:encodeURIComponent(i)},params:{scale:"showall",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}},"td_flash_companions");u.create("div",{id:h},c),a.embedSWF(e,h,r,n,"10.2.0",!1,{clickTAG:encodeURIComponent(i)},{scale:"showall",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"},!1,!1)}else{var f="";void 0!=i&&(f='<a href="'+i+'" target="_blank">'),f+='<img src="'+e+'" width="'+r+'" height="'+n+'" title="'+o+'" border="0"/>',void 0!=i&&(f+="</a>"),c.innerHTML=f}},loadVASTCompanionAd:function(t,e){if(e.content)return void(s.byId(t,document).innerHTML=e.content);switch(e.resourceType.name){case"html":e.code.indexOf("document.write")>-1?(e.resourceType.name="iframe",e.url=this.JS_BANNER_URL+"?code="+encodeURIComponent(e.code),this.loadVASTCompanionAd(t,e)):s.byId(t,document).innerHTML=e.code;break;case"iframe":this.loadCompanionIframe(t,e.url,e.width,e.height);break;case"static":"text/javascript"==e.creativeType?(e.resourceType.name="iframe",e.url=this.JS_BANNER_URL+"?url="+encodeURIComponent(e.url),this.loadVASTCompanionAd(t,e)):this.loadCompanionStatic(t,e.url,e.width,e.height,e.clickThroughURL,e.altText,e.creativeType)}e.creativeView&&e.creativeView.length&&e.creativeView.forEach(function(t){window.fetch(t,{mode:"no-cors"})})},addEventListener:function(t,r){var i=-1;o.forEach(this.listeners,function(e,n){e.eventName==t&&e.callback==r&&(i=n)},this),i==-1&&this.listeners.push({eventName:t,callback:r,listener:n(this,t,e.hitch(this,r))})},removeEventListener:function(t,e){var r=-1;o.forEach(this.listeners,function(n,i){n.eventName==t&&n.callback==e&&(r=i)},this),r>-1&&(this.listeners[r].listener.remove(),this.listeners.splice(r,1))}}));return d}.apply(e,n),!(void 0!==i&&(t.exports=i))}).call(e,r(37))},function(t,e,r){var n,i,a=r(97);n=[r(1),r,r(14)],i=function(t,e,r){var n=t([],{constructor:function(){},init:function(){var t="//imasdk.googleapis.com/js/sdkloader/ima3.js",e=new r;return a(t,function(){e.resolve()}),e}});return n}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){var r=function(t){function e(e,r){var n,i=t.createElement(e);for(n in r)r.hasOwnProperty(n)&&i.setAttribute(n,r[n]);return i}function r(t){var e,r,n=l[t];n&&(e=n.callback,r=n.urls,r.shift(),c=0,r.length||(e&&e.call(n.context,n.obj),l[t]=null,d[t].length&&i(t)))}function n(){var e=navigator.userAgent;s={async:t.createElement("script").async===!0},(s.webkit=/AppleWebKit\//.test(e))||(s.ie=/MSIE|Trident/.test(e))||(s.opera=/Opera/.test(e))||(s.gecko=/Gecko\//.test(e))||(s.unknown=!0)}function i(i,c,h,f,p){var m,g,v,y,_,b,E=function(){r(i)},A="css"===i,T=[];if(s||n(),c)if(c="string"==typeof c?[c]:c.concat(),A||s.async||s.gecko||s.opera)d[i].push({urls:c,callback:h,obj:f,context:p});else for(m=0,g=c.length;m<g;++m)d[i].push({urls:[c[m]],callback:m===g-1?h:null,obj:f,context:p});if(!l[i]&&(y=l[i]=d[i].shift())){for(u||(u=t.head||t.getElementsByTagName("head")[0]),_=y.urls.concat(),m=0,g=_.length;m<g;++m)b=_[m],A?v=s.gecko?e("style"):e("link",{href:b,rel:"stylesheet"}):(v=e("script",{src:b}),v.async=!1),v.className="lazyload",v.setAttribute("charset","utf-8"),s.ie&&!A&&"onreadystatechange"in v&&!("draggable"in v)?v.onreadystatechange=function(){/loaded|complete/.test(v.readyState)&&(v.onreadystatechange=null,E())}:A&&(s.gecko||s.webkit)?s.webkit?(y.urls[m]=v.href,o()):(v.innerHTML='@import "'+b+'";',a(v)):v.onload=v.onerror=E,T.push(v);for(m=0,g=T.length;m<g;++m)u.appendChild(T[m])}}function a(t){var e;try{e=!!t.sheet.cssRules}catch(n){return c+=1,void(c<200?setTimeout(function(){a(t)},50):e&&r("css"))}r("css")}function o(){var t,e=l.css;if(e){for(t=h.length;--t>=0;)if(h[t].href===e.urls[0]){r("css");break}c+=1,e&&(c<200?setTimeout(o,50):r("css"))}}var s,u,l={},c=0,d={css:[],js:[]},h=t.styleSheets;return{css:function(t,e,r,n){i("css",t,e,r,n)},js:function(t,e,r,n){i("js",t,e,r,n)}}};t.exports=new r(window.document)},function(t,e,r){var n;(function(t){var i=function(){this.version="1.3";var t={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},e=new RegExp(/(?!xmlns)^.*:/),r=new RegExp(/^\s+|\s+$/g);return this.grokType=function(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):t},this.parseString=function(t,e){return this.parseXML(this.stringToXML(t),e)},this.parseXML=function(n,a){for(var o in a)t[o]=a[o];var s={},u=0,l="";if(t.xmlns&&n.namespaceURI&&(s[t.namespaceKey]=n.namespaceURI),n.attributes&&n.attributes.length>0){var c={};for(u;u<n.attributes.length;u++){var d=n.attributes.item(u);m={};var h="";h=t.stripAttrPrefix?d.name.replace(e,""):d.name,t.grokAttr?m[t.valueKey]=this.grokType(d.value.replace(r,"")):m[t.valueKey]=d.value.replace(r,""),t.xmlns&&d.namespaceURI&&(m[t.namespaceKey]=d.namespaceURI),t.attrsAsObject?c[h]=m:s[t.attrKey+h]=m}t.attrsAsObject&&(s[t.attrKey]=c)}if(n.hasChildNodes())for(var f,p,m,g=0;g<n.childNodes.length;g++)f=n.childNodes.item(g),
4===f.nodeType?t.mergeCDATA?l+=f.nodeValue:s.hasOwnProperty(t.cdataKey)?(s[t.cdataKey].constructor!==Array&&(s[t.cdataKey]=[s[t.cdataKey]]),s[t.cdataKey].push(f.nodeValue)):t.childrenAsArray?(s[t.cdataKey]=[],s[t.cdataKey].push(f.nodeValue)):s[t.cdataKey]=f.nodeValue:3===f.nodeType?l+=f.nodeValue:1===f.nodeType&&(0===u&&(s={}),p=t.stripElemPrefix?f.nodeName.replace(e,""):f.nodeName,m=i.parseXML(f),s.hasOwnProperty(p)?(s[p].constructor!==Array&&(s[p]=[s[p]]),s[p].push(m)):(t.childrenAsArray?(s[p]=[],s[p].push(m)):s[p]=m,u++));else l||(t.childrenAsArray?(s[t.textKey]=[],s[t.textKey].push(null)):s[t.textKey]=null);if(l)if(t.grokText){var v=this.grokType(l.replace(r,""));null!==v&&void 0!==v&&(s[t.textKey]=v)}else t.normalize?s[t.textKey]=l.replace(r,"").replace(/\s+/g," "):s[t.textKey]=l.replace(r,"");return s},this.xmlToString=function(t){try{var e=t.xml?t.xml:(new XMLSerializer).serializeToString(t);return e}catch(t){return null}},this.stringToXML=function(t){try{var e=null;if(window.DOMParser){var r=new DOMParser;return e=r.parseFromString(t,"text/xml")}return e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t),e}catch(t){return null}},this}.call({});"undefined"!=typeof t&&null!==t&&t.exports?t.exports=i:(n=function(){return i}.call(e,r,e,t),!(void 0!==n&&(t.exports=n)))}).call(e,r(28)(t))},function(t,e,r){function n(t){return r(i(t))}function i(t){return a[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var a={"./en.json":57,"./es.json":93,"./fr.json":94,"./pt.json":95};n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id=111},function(t,e){var r=function(){function t(){if(!K){try{var t=F.getElementsByTagName("body")[0].appendChild(v("span"));t.parentNode.removeChild(t)}catch(t){return}K=!0;for(var e=j.length,r=0;r<e;r++)j[r]()}}function e(t){K?t():j[j.length]=t}function n(t){if(typeof N.addEventListener!=D)N.addEventListener("load",t,!1);else if(typeof F.addEventListener!=D)F.addEventListener("load",t,!1);else if(typeof N.attachEvent!=D)y(N,"onload",t);else if("function"==typeof N.onload){var e=N.onload;N.onload=function(){e(),t()}}else N.onload=t}function i(){B?a():o()}function a(){var t=F.getElementsByTagName("body")[0],e=v(P);e.setAttribute("type",O);var r=t.appendChild(e);if(r){var n=0;!function(){if(typeof r.GetVariable!=D){var i=r.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),Y.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(n<10)return n++,void setTimeout(arguments.callee,10);t.removeChild(e),r=null,o()}()}else o()}function o(){var t=G.length;if(t>0)for(var e=0;e<t;e++){var r=G[e].id,n=G[e].callbackFn,i={success:!1,id:r};if(Y.pv[0]>0){var a=g(r);if(a)if(!_(G[e].swfVersion)||Y.wk&&Y.wk<312)if(G[e].expressInstall&&u()){var o={};o.data=G[e].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var d={},h=a.getElementsByTagName("param"),f=h.length,p=0;p<f;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(d[h[p].getAttribute("name")]=h[p].getAttribute("value"));l(o,d,r,n)}else c(a),n&&n(i);else E(r,!0),n&&(i.success=!0,i.ref=s(r),n(i))}else if(E(r,!0),n){var m=s(r);m&&typeof m.SetVariable!=D&&(i.success=!0,i.ref=m),n(i)}}}function s(t){var e=null,r=g(t);if(r&&"OBJECT"==r.nodeName)if(typeof r.SetVariable!=D)e=r;else{var n=r.getElementsByTagName(P)[0];n&&(e=n)}return e}function u(){return!W&&_("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(t,e,r,n){W=!0,w=n||null,C={success:!1,id:r};var i=g(r);if(i){"OBJECT"==i.nodeName?(T=d(i),S=null):(T=i,S=r),t.id=x,(typeof t.width==D||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==D||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var a=Y.ie&&Y.win?"ActiveX":"PlugIn",o="MMredirectURL="+N.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+F.title;if(typeof e.flashvars!=D?e.flashvars+="&"+o:e.flashvars=o,Y.ie&&Y.win&&4!=i.readyState){var s=v("div");r+="SWFObjectNew",s.setAttribute("id",r),i.parentNode.insertBefore(s,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}h(t,e,r)}}function c(t){if(Y.ie&&Y.win&&4!=t.readyState){var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(d(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(d(t),t)}function d(t){var e=v("div");if(Y.win&&Y.ie)e.innerHTML=t.innerHTML;else{var r=t.getElementsByTagName(P)[0];if(r){var n=r.childNodes;if(n)for(var i=n.length,a=0;a<i;a++)1==n[a].nodeType&&"PARAM"==n[a].nodeName||8==n[a].nodeType||e.appendChild(n[a].cloneNode(!0))}}return e}function h(t,e,r){var n,i=g(r);if(Y.wk&&Y.wk<312)return n;if(i)if(typeof t.id==D&&(t.id=r),Y.ie&&Y.win){var a="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?a+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+t[o]+'"'));var s="";for(var u in e)e[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+e[u]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",H[H.length]=t.id,n=g(t.id)}else{var l=v(P);l.setAttribute("type",O);for(var c in t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&f(l,d,e[d]);i.parentNode.replaceChild(l,i),n=l}return n}function f(t,e,r){var n=v("param");n.setAttribute("name",e),n.setAttribute("value",r),t.appendChild(n)}function p(t){var e=g(t);e&&"OBJECT"==e.nodeName&&(Y.ie&&Y.win?(e.style.display="none",function(){4==e.readyState?m(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function m(t){var e=g(t);if(e){for(var r in e)"function"==typeof e[r]&&(e[r]=null);e.parentNode.removeChild(e)}}function g(t){var e=null;try{e=F.getElementById(t)}catch(t){}return e}function v(t){return F.createElement(t)}function y(t,e,r){t.attachEvent(e,r),V[V.length]=[t,e,r]}function _(t){var e=Y.pv,r=t.split(".");return r[0]=parseInt(r[0],10),r[1]=parseInt(r[1],10)||0,r[2]=parseInt(r[2],10)||0,e[0]>r[0]||e[0]==r[0]&&e[1]>r[1]||e[0]==r[0]&&e[1]==r[1]&&e[2]>=r[2]}function b(t,e,r,n){if(!Y.ie||!Y.mac){var i=F.getElementsByTagName("head")[0];if(i){var a=r&&"string"==typeof r?r:"screen";if(n&&(k=null,L=null),!k||L!=a){var o=v("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),k=i.appendChild(o),Y.ie&&Y.win&&typeof F.styleSheets!=D&&F.styleSheets.length>0&&(k=F.styleSheets[F.styleSheets.length-1]),L=a}Y.ie&&Y.win?k&&typeof k.addRule==P&&k.addRule(t,e):k&&typeof F.createTextNode!=D&&k.appendChild(F.createTextNode(t+" {"+e+"}"))}}}function E(t,e){if(q){var r=e?"visible":"hidden";K&&g(t)?g(t).style.visibility=r:b("#"+t,"visibility:"+r)}}function A(t){var e=/[\\\"<>\.;]/,r=null!=e.exec(t);return r&&typeof encodeURIComponent!=D?encodeURIComponent(t):t}var T,S,w,C,k,L,D="undefined",P="object",I="Shockwave Flash",R="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",x="SWFObjectExprInst",M="onreadystatechange",N=window,F=document,U=navigator,B=!1,j=[i],G=[],H=[],V=[],K=!1,W=!1,q=!0,Y=function(){var t=typeof F.getElementById!=D&&typeof F.getElementsByTagName!=D&&typeof F.createElement!=D,e=U.userAgent.toLowerCase(),r=U.platform.toLowerCase(),n=r?/win/.test(r):/win/.test(e),i=r?/mac/.test(r):/mac/.test(e),a=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,s=[0,0,0],u=null;if(typeof U.plugins!=D&&typeof U.plugins[I]==P)u=U.plugins[I].description,!u||typeof U.mimeTypes!=D&&U.mimeTypes[O]&&!U.mimeTypes[O].enabledPlugin||(B=!0,o=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof N.ActiveXObject!=D)try{var l=new ActiveXObject(R);l&&(u=l.GetVariable("$version"),u&&(o=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))}catch(t){}return{w3:t,pv:s,wk:a,ie:o,win:n,mac:i}}();(function(){Y.w3&&((typeof F.readyState!=D&&"complete"==F.readyState||typeof F.readyState==D&&(F.getElementsByTagName("body")[0]||F.body))&&t(),K||(typeof F.addEventListener!=D&&F.addEventListener("DOMContentLoaded",t,!1),Y.ie&&Y.win&&(F.attachEvent(M,function(){"complete"==F.readyState&&(F.detachEvent(M,arguments.callee),t())}),N==top&&!function(){if(!K){try{F.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),Y.wk&&!function(){if(!K)return/loaded|complete/.test(F.readyState)?void t():void setTimeout(arguments.callee,0)}(),n(t)))})(),function(){Y.ie&&Y.win&&window.attachEvent("onunload",function(){for(var t=V.length,e=0;e<t;e++)V[e][0].detachEvent(V[e][1],V[e][2]);for(var n=H.length,i=0;i<n;i++)p(H[i]);for(var a in Y)Y[a]=null;Y=null;for(var o in r)r[o]=null;r=null})}();return{registerObject:function(t,e,r,n){if(Y.w3&&t&&e){var i={};i.id=t,i.swfVersion=e,i.expressInstall=r,i.callbackFn=n,G[G.length]=i,E(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){if(Y.w3)return s(t)},embedSWF:function(t,r,n,i,a,o,s,c,d,f){var p={success:!1,id:r};Y.w3&&!(Y.wk&&Y.wk<312)&&t&&r&&n&&i&&a?(E(r,!1),e(function(){n+="",i+="";var e={};if(d&&typeof d===P)for(var m in d)e[m]=d[m];e.data=t,e.width=n,e.height=i;var g={};if(c&&typeof c===P)for(var v in c)g[v]=c[v];if(s&&typeof s===P)for(var y in s)typeof g.flashvars!=D?g.flashvars+="&"+y+"="+s[y]:g.flashvars=y+"="+s[y];if(_(a)){var b=h(e,g,r);e.id==r&&E(r,!0),p.success=!0,p.ref=b}else{if(o&&u())return e.data=o,void l(e,g,r,f);E(r,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){q=!1},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(t,e,r){return Y.w3?h(t,e,r):void 0},showExpressInstall:function(t,e,r,n){Y.w3&&u()&&l(t,e,r,n)},removeSWF:function(t){Y.w3&&p(t)},createCSS:function(t,e,r,n){Y.w3&&b(t,e,r,n)},addDomLoadEvent:e,addLoadEvent:n,getQueryParamValue:function(t){var e=F.location.search||F.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return A(e);for(var r=e.split("&"),n=0;n<r.length;n++)if(r[n].substring(0,r[n].indexOf("="))==t)return A(r[n].substring(r[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var t=g(x);t&&T&&(t.parentNode.replaceChild(T,t),S&&(E(S,!0),Y.ie&&Y.win&&(T.style.display="block")),w&&w(C)),W=!1}}}}()},function(t,e,r){(function(t){var e=r(1),n=r(2),i=r(3),a=r(13),o=r(6),s=r(101),u=r(104),l=r(106),c=r(18),d=r(22),h=!1,f=function(){h||(document.removeEventListener("touchend",f,!1),document.removeEventListener("touchmove",p,!1),d.init()),h=!1},p=function(){h=!0};document.addEventListener("touchend",f,!1),document.addEventListener("touchmove",p,!1),window.TDSdk=e([],{NAME:"TDSdk",constructor:function(t){this.listeners=[],this.target=new a,this.abBlockProcessFinish=!1,this.MediaElement=d,i(this.target,"module-ready",n.hitch(this,this._onModuleReady));var e=new l;"undefined"==typeof e.fab?this._onAdBlock(t,!0):(e.fab.onDetected(n.hitch(this,this._onAdBlock,t,!0)),e.fab.onNotDetected(n.hitch(this,this._onAdBlock,t,!1)),e.fab.check()),t.playerReady&&this.addEventListener("player-ready",t.playerReady),t.configurationError&&this.addEventListener("configuration-error",t.configurationError),t.moduleError&&this.addEventListener("module-error",t.moduleError),t.adBlockerDetected&&this.addEventListener("ad-blocker-detected",t.adBlockerDetected),this.loadModules()},_parseConfig:function(t,e){if(!t||!t.coreModules)return{coreModules:[]};var r=[],n={},i=o.filter(t.coreModules,function(t){return"SyncBanners"==t.id});if(i.length&&!e){var a=i[0];n=a,o.forEach(a.elements,function(t){if(void 0!=t.width&&void 0!=t.height){var e=t.width+"x"+t.height;o.indexOf(u,e)!=-1&&r.push(e)}},this)}if(i=o.filter(t.coreModules,function(t){return"MediaPlayer"==t.id}),i.length){var s=i[0];s.adBlockerDetected=e,s.adBlockerDetected&&void 0!=s.plugins&&(this._removeMediaplayerPlugins("vastAd",s.plugins),this._removeMediaplayerPlugins("mediaAd",s.plugins)),s.companionAdSelectionSettings=n,void 0==s.defaultTrackingParameters&&(s.defaultTrackingParameters={}),s.defaultTrackingParameters.banners=void 0!=s.defaultTrackingParameters.banners?this._unique(s.defaultTrackingParameters.banners.concat(r)):r,s.defaultTrackingParameters.log={},s.defaultTrackingParameters.log.tdsdk="js-"+this.version.value.substring(0,3),s.defaultTrackingParameters.log.pname=this.NAME,s.defaultTrackingParameters.log.pversion=this.version.value.substring(0,3)}return"string"==typeof t.locale&&c.setLocalization(t.locale),t},_removeMediaplayerPlugins:function(t,e){o.forEach(e,function(r,n){r&&r.id==t&&e.splice(n,1)})},_onModuleReady:function(t){t.data.module.api&&e.safeMixin(this,t.data.module.api),this[t.data.id]=t.data.module},_onAdBlock:function(t,e){t&&(this.abBlockProcessFinish=!0,t.adBlockerDetected=e,this.moduleManager=new s(this._parseConfig(t,e),this.target),this.loadModulesCalled&&this.moduleManager.loadModules())},loadModules:function(){this.abBlockProcessFinished?this.moduleManager.loadModules():this.loadModulesCalled=!0},loadModule:function(t,e){this.moduleManager.loadModule(t,e)},getModuleById:function(t){return this.moduleManager.getModuleById(t)},addEventListener:function(t,e){var r=-1;o.forEach(this.listeners,function(n,i){n.eventName==t&&n.callback==e&&(r=i)},this),r==-1&&this.listeners.push({eventName:t,callback:e,listener:i(this.target,t,n.hitch(this,e))})},removeEventListener:function(t,e){var r=-1;o.forEach(this.listeners,function(n,i){n.eventName==t&&n.callback==e&&(r=i)},this),r>-1&&(this.listeners[r].listener.remove(),this.listeners.splice(r,1))},_unique:function(t){var e={};return o.filter(t,function(t){return!e[t]&&(e[t]=!0)})},version:{value:"@tdversion@",build:"@tdbuild@",codename:"bitter lime"},flash:{available:t.getFlashPlayerVersion().major>0,version:t.getFlashPlayerVersion()}})}).call(e,r(37))},function(t,e,r){var n,i,a=(r(72),r(20)),o=r(18),s=r(138),u=r(139),l=r(21),c=r(22),d=r(8);n=[r(6),r(1),r(14),r(2),r(4),r(3),r(26),r(17),r(7),r(11),r(19),r(120),r(12),r(132),r(131)],i=function(t,e,r,n,i,h,f,p,m,g,v,y,_,b,E){var A=e([_],{LIVE_PLAYING:"livePlaying",LIVE_STOPPED:"liveStopped",statusMap:{GETTING_STATION_INFORMATION:{status:"gettingStationInformation",code:"GETTING_STATION_INFORMATION"},STREAM_GEO_BLOCKED:{status:"streamGeoBlocked",code:"STREAM_GEO_BLOCKED"},STATION_NOT_FOUND:{status:"stationNotFound",code:"STATION_NOT_FOUND"},PLAY_NOT_ALLOWED:{status:"playbackNotAllowed",code:"PLAY_NOT_ALLOWED"}},constructor:function(t,e){this.inherited(arguments);var r=this;"function"==typeof __cmp?__cmp("getConsentData",null,function(t){r.consentData=t,void 0!=r.config.idSync&&r._loadIdSync(r.config.idSync)}):void 0!=this.config.idSync&&this._loadIdSync(this.config.idSync),this.liveStreamConfig=null,this.streamingConnections=null,this.liveStreamConfiguration=null,this.tech=null,this.techErrors=[],this.techPriority=this.config.techPriority&&this.config.techPriority.length>0?this.config.techPriority:["Html5","Flash"],(i("ios")||i("android")||i("bb")||i("safari")>7||l.currentProtocolIsHttps())&&(this.techPriority=["Html5"]),this.geoTargeting=void 0!=this.config.geoTargeting?this.config.geoTargeting:{desktop:{isActive:!0},iOS:{isActive:!1},android:{isActive:!1}},this.isGeoTargetingActive=!1,this.position=null,this.geoTargeting&&this._initGeoTargeting(),this.hls=void 0==t.hls||t.hls,this.audioAdaptive=void 0!=t.audioAdaptive&&t.audioAdaptive,this.adManager=null,this._lowActivated=!1,this._isPlaying=!1,this.fallbackTried=!1,this.api={play:n.hitch(this,this._play),pause:n.hitch(this,this._pause),stop:n.hitch(this,this._stop),resume:n.hitch(this,this._resume),seek:n.hitch(this,this._seek),seekLive:n.hitch(this,this.seekLive),restartConnectionTimeOut:n.hitch(this,this.restartConnectionTimeOut),setVolume:n.hitch(this,this.setVolume),getVolume:n.hitch(this,this.getVolume),mute:n.hitch(this,this.mute),unMute:n.hitch(this,this.unMute),playAd:n.hitch(this,this.playAd),skipAd:n.hitch(this,this.skipAd),destroyAd:n.hitch(this,this.destroyAd),initMediaElement:n.hitch(this,this._initMediaElement),destroy:n.hitch(this,this._destroy)},f.subscribe("api/request",n.hitch(this,this._onApiInternalRequest))},start:function(){h(this.target,"tech-ready",n.hitch(this,this._onTechReady)),h(this.target,"tech-error",n.hitch(this,this._onTechError)),this._loadTech(this.techPriority[0])},_onApiInternalRequest:function(){var t=arguments[0],e=n.hitch(this,this.INTERNAL_REQUEST_API_FUNCTIONS[t]);"function"==typeof e&&e(arguments[1])},_onApiRequestGetAlternateContent:function(t){if(t){var e=this._getCurrentLiveApiParams();t.mount?(e.station=null,e.mount=t.mount,this._play(e)):t.url&&(e.station=null,e.mount=null,e.url=t.url,this.tech.isLiveStream=!0,this.tech.play({file:e.url}))}},_onApiRequestGetVastInstream:function(t){null!=t.vastUrl?this._getAdManager().playAd("vastAd",{url:t.vastUrl,skipMediaAdPlayback:!0,adBreak:!0}):null!=t.adVast&&this._getAdManager().playAd("vastAd",{rawXML:t.adVast,skipMediaAdPlayback:!0,adBreak:!0})},_hqTags:[],addHqTag:function(e){t.indexOf(this._hqTags,e)==-1&&this._hqTags.push(e)},removeHqTag:function(e){var r=t.indexOf(this._hqTags,e);r!=-1&&this._hqTags.splice(r,1)},_lowTags:["low-bw"],addLowTag:function(e){t.indexOf(this._lowTags,e)==-1&&this._lowTags.push(e)},removeLowTag:function(e){var r=t.indexOf(this._lowTags,e);r!=-1&&this._lowTags.splice(r,1)},_hqEnabled:!1,enableHQ:function(){this._hqEnabled=!0,!this.isHQ()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},disableHQ:function(){this._hqEnabled=!1,this.isHQ()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},_lowEnabled:!0,enableLow:function(){this._lowEnabled=!0,this._refreshConnectionIterator()},disableLow:function(){this._lowEnabled=!1,this.isLow()&&this.isPlaying()&&(this._stop(),this._play(this._getCurrentLiveApiParams()))},activateLow:function(){this._lowEnabled&&(this._lowActivated=!0,!this.isLow()&&this.isPlaying()?(this._stop(),this._play(this._getCurrentLiveApiParams())):this._refreshConnectionIterator())},deactivateLow:function(){this._lowActivated=!1,this.isLow()&&this.isPlaying()?(this._stop(),this._play(this._getCurrentLiveApiParams())):this._refreshConnectionIterator()},_refreshConnectionIterator:function(t){if(t){if(t.length>0)return this.emit("stream-config-ready"),this.tech.setConnectionIterator(new s(t)),!0;this.emit("stream-config-error",{errors:this.liveStreamConfig.mountPointsError}),this.tech.setConnectionIterator(null);var e=!1,r=!1;return d.forEach(this.liveStreamConfig.mountPointsError,function(t){t.status.isGeoBlocked&&(e=!0),t.alternateContent&&(r=t.alternateContent)}),e?(this._emitStreamStatusByCode(this.statusMap.STREAM_GEO_BLOCKED),r&&f.publish("api/request","get-alternate-content",r)):this._emitStreamStatusByCode(this.statusMap.STATION_NOT_FOUND),!1}},_loadTech:function(t){n.hitch(this,this._techLoaded),n.hitch(this,this._techLoadingError);switch(t){case"Html5":this._techLoaded(b,t);break;case"Flash":this._techLoaded(E,t)}},_techLoaded:function(t,e){this.tech=new t(this.config,this.target,e),this.tech.start()},_techLoadingError:function(t){console.error("mediaPlayer::_techError - "+t),this.emit("module-error",{id:"MediaPlayer",error:t})},_onTechReady:function(t){this.liveStreamConfig=new u(this.config.platformId,a,this.tech.type,this.config.hls,this.config.audioAdaptive,this.config.forceHls,this.config.forceHslts,this.config.playerServicesRegion),h(this.target,"stream-start",n.hitch(this,this._onStreamStart)),h(this.target,"stream-stop",n.hitch(this,this._onStreamStop)),this.emit("module-ready",{id:"MediaPlayer",module:this})},_onStreamStart:function(){this._isPlaying=!0},_onStreamStop:function(){this._isPlaying=!1},_onTechError:function(t){console.error("mediaPlayer::_onTechError"),this.techPriority.length>1&&0==this.fallbackTried?(this.techErrors.push(t),this.fallbackTried=!0,this._loadTech(this.techPriority[1])):(this.techErrors.push(t),this.emit("module-error",{id:"MediaPlayer",errors:this.techErrors}))},_initGeoTargeting:function(){void 0!=i("ios")&&void 0!=this.geoTargeting.iOS&&void 0!=this.geoTargeting.iOS.isActive&&1==this.geoTargeting.iOS.isActive?this.isGeoTargetingActive=!0:void 0!=i("android")&&void 0!=this.geoTargeting.android&&void 0!=this.geoTargeting.android.isActive&&1==this.geoTargeting.android.isActive?this.isGeoTargetingActive=!0:void 0==i("ios")&&void 0==i("android")&&void 0!=this.geoTargeting.desktop&&void 0!=this.geoTargeting.desktop.isActive&&1==this.geoTargeting.desktop.isActive&&(this.isGeoTargetingActive=!0),1==this.isGeoTargetingActive&&this._getLocation()},_play:function(t){if(void 0!=t){this.tech.prepare(),this._initMediaElement();var e=this;if(t.trackingParameters=this._getFinalTrackingParameters(t.trackingParameters),void 0!=t.file&&""!=t.file)e.tech.play(t);else{this._emitStreamStatusByCode(this.statusMap.GETTING_STATION_INFORMATION),this._liveApiParams=t;var r=("Flash"==this.tech.type?this.liveStreamConfig.RTMP_TRANSPORTS:[]).concat(this.liveStreamConfig.DEFAULT_TRANSPORTS),n={station:t.station,mount:t.mount,transports:r},i=[];this._hqEnabled&&(i=i.concat(this._hqTags)),this._lowEnabled&&(i=i.concat(this._lowTags)),this.liveStreamConfig.getStreamingConnections(n,i).then(function(r){this.streamingConnections=r,e._refreshConnectionIterator(r)&&e.tech.play(t)}).catch(function(t){e.emit("stream-config-load-error",{error:t})})}}},isPlaying:function(){return this._isPlaying},hasHQ:function(){var t=this;return d.some(this._hqTags,function(e){t.tagsToLookup(e,t.streamingConnections)})},tagsToLookup:function(t,e){return d.some(e,function(e){return d.some(e.tags,function(e){return e.name===t})})},isHQ:function(){var t=this;return!!this.tech.currentConnection()&&(null!=this.tech.currentConnection()&&d.some(this._hqTags,function(e){t.tagsToLookup(e,[t.tech.currentConnection()])}))},hasLow:function(){var t=this;return d.some(this._lowTags,function(e){t.tagsToLookup(e,t.streamingConnections)})},isLow:function(){var t=this;return!!this.tech.currentConnection()&&(null!=this.tech.currentConnection()&&d.some(this._lowTags,function(e){t.tagsToLookup(e,[t.tech.currentConnection()])}))},_pause:function(){this.tech.pause()},_stop:function(){this.tech.stop()},_resume:function(){this.tech.resume()},_seek:function(t){this.tech.seek(t)},seekLive:function(){this.tech.seekLive()},restartConnectionTimeOut:function(){this.tech.restartConnectionTimeOut()},setVolume:function(t){this.tech.setVolume(t)},getVolume:function(){return this.tech.getVolume()},mute:function(){this.tech.mute()},unMute:function(){this.tech.unMute()},playAd:function(t,e){e.trackingParameters=this._getFinalTrackingParameters(e.trackingParameters),this._getAdManager().playAd(t,e),this.tech.playAdCalled=!0},skipAd:function(){this._getAdManager().skipAd()},destroyAd:function(){this._getAdManager().destroyAd(!0)},_initMediaElement:function(){c.init()},_destroy:function(){this._stop(),setTimeout(function(){var t=document.getElementById("tdplayer_ondemand");t&&(c.destroyAudioElement(),c.resetAudioNode(),g.destroy(t))},500)},_getAdManager:function(){return null==this.adManager&&(this.adManager=new y(this.tech,this.tech.type,this.target,this.config)),this.adManager},_emitStreamStatusByCode:function(t){var e=o.getLocalization();void 0!=e&&e[t.status]&&this.emit("stream-status",{code:t.code,status:e[t.status]})},_getLocation:function(){window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(n.hitch(this,this._setPosition),n.hitch(this,this._getPositionErrorHandler),{enableHighAccuracy:!0,timeout:2e3})},_setPosition:function(t){this.position=void 0!=t&&void 0!=t.coords.latitude&&void 0!=t.coords.longitude?t:null},_getPositionErrorHandler:function(t){console.info("mediaPlayer::_getPositionErrorHandler, code : "+t.code+", message : "+t.message),this.position=null},_getGeoTargetingPos:function(t){return null!=this.position&&void 0!=this.position&&void 0!=this.position.coords.latitude&&void 0!=this.position.coords.longitude?void 0!=t?(t.lat=parseFloat(this.position.coords.latitude.toFixed(1)),t.long=parseFloat(this.position.coords.longitude.toFixed(1)),t):{lat:parseFloat(this.position.coords.latitude.toFixed(1)),long:parseFloat(this.position.coords.longitude.toFixed(1))}:t},_getFinalTrackingParameters:function(e){void 0==e&&(e={}),e.tdsdk=this.config.defaultTrackingParameters.log.tdsdk,this.isGeoTargetingActive&&(e=this._getGeoTargetingPos(e)),d.isEmpty(this.config.defaultTrackingParameters.banners)&&(this.config.defaultTrackingParameters.banners=[],this.config.defaultTrackingParameters.banners.push("none")),"Flash"!=this.tech.type||this.config.adBlockerDetected||this.config.defaultTrackingParameters.banners.indexOf("none")!==-1||(t.indexOf(this.config.defaultTrackingParameters.banners,"swf")==-1&&this.config.defaultTrackingParameters.banners.push("swf"),t.indexOf(this.config.defaultTrackingParameters.banners,"vpaid")==-1&&this.config.defaultTrackingParameters.banners.push("vpaid")),e.pname||(e.pname=this.config.defaultTrackingParameters.log.pname,e.pversion=this.config.defaultTrackingParameters.log.pversion),void 0!=this.config.defaultTrackingParameters.banners&&this.config.defaultTrackingParameters.banners.length&&(void 0!=e.banners&&e.banners.length&&e.banners.indexOf(this.config.defaultTrackingParameters.banners.join())==-1?e.banners+=","+this.config.defaultTrackingParameters.banners.join():e.banners=this.config.defaultTrackingParameters.banners.join());for(var r in this.config.defaultTrackingParameters.user)e[r]=this.config.defaultTrackingParameters.user[r];return e},_getCurrentLiveApiParams:function(){return this._liveApiParams},_loadIdSync:function(t){var e=this._getIdSyncQueryParam(t);m.byId("idSyncScript",document)&&g.destroy(m.byId("idSyncScript",document)),scriptTag=g.create("script",{id:"idSyncScript"},m.byId(this.config.playerId,document)),v.set(scriptTag,"type","text/javascript"),v.set(scriptTag,"src","//playerservices.live.streamtheworld.com/api/idsync.js?"+e),document.getElementsByTagName("body")[0].appendChild(scriptTag)},_getIdSyncQueryParam:function(t){var e;if(t.station?e="station="+t.station:t.stationId?e="stationId="+t.stationId:t.mount&&(e="mount="+t.mount),void 0!=e){this.consentData&&(t.gdpr=this.consentData.gdprApplies?1:0,t.gdpr_consent=this.consentData.consentData),e=t.gdpr&&t.gdpr.toString().match(/^[0,1]$/g)?e+"&gdpr="+t.gdpr:e,e=t.gdpr_consent?e+"&gdpr_consent="+t.gdpr_consent:e;var r=t.dob&&!isNaN(Date.parse(t.dob))?new Date(t.dob.replace(/-/g,"/")):null;if(r){var n=r.getFullYear(),i=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,a=r.getDate()<10?"0"+r.getDate():r.getDate();e=r?e+"&dob="+n+"-"+i+"-"+a:e}return e=t.yob&&!isNaN(t.yob)&&e.indexOf("dob")===-1?e+"&yob="+t.yob:e,e=t.age&&!isNaN(t.age)&&t.age>0&&t.age<=125&&e.indexOf("dob")===-1&&e.indexOf("yob")===-1?e+"&age="+t.age:e,e=t.gender&&t.gender.match(/[m,f]/g)&&1===t.gender.length?e+"&gender="+t.gender:e,e=t.ip&&t.ip.match(/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/g)?e+"&ip="+t.ip:e}}});return A}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(15);n=[r(1),r(14),r(2),r(10),r(12),r(153)],i=function(t,e,r,n,i,o){var s=t([i],{constructor:function(t,e){this.platform=new a(t.platformId),this.library=[],this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"Npe",module:this})},loadNpeMetadata:function(t,r,n){var i=this._urlToNPEId(t),a=this.getSongByNpeId(i);if(null!=a){this.emit("npe-song",{song:a});var o=new e;return o.resolve({song:a}),o}return this._fetchData(!1,i,t,r,n,new e)},getSongByNpeId:function(t){for(var e=this.library.length,r=0;r<e;r++)if(this.library[r].npeId==t)return this.library[r];return null},getDynamicUrl:function(){return this.platform.endpoint.npe},_getDynamicSongUrl:function(t,e){return this.getDynamicUrl()+"song?artist="+encodeURIComponent(t)+"&title="+encodeURIComponent(e)},_fetchData:function(t,e,i,a,o,s){t&&(i=this._getDynamicSongUrl(a,o));var u=new n;return u.request(i,{npeId:e,npUrl:i,isDynamicCall:t,artist:a,title:o,deferred:s},this._getRequestArgs(),r.hitch(this,this._onLoadComplete),r.hitch(this,this._onLoadError)),s},_onLoadError:function(t,e){return console.error("npe::_onLoadError - npUrl="+t.npUrl+" - error="+e),0!=t.isDynamicCall?(this.emit("npe-song-error",{npeId:this._urlToNPEId(t.npUrl)}),t.deferred.reject({npeId:this._urlToNPEId(t.npUrl)})):void this._fetchData(!0,t.npeId,null,t.artist,t.title,t.deferred)},_onLoadComplete:function(t,e){var r=new o(e.song,this._urlToNPEId(t.npUrl),this.config.platformId);return this.library.push(r),this.emit("npe-song",{song:r}),t.deferred.resolve({song:r})},_getRequestArgs:function(){return{handleAs:"json",preventCache:!1,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}},_urlToNPEId:function(t){if(null==t||void 0==t||""==t)return null;var e=t.lastIndexOf("/");return t.substr(e-2,2)+t.substring(e+1,t.lastIndexOf("."))}});return s}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(15);n=[r(1),r(2),r(12),r(10)],i=function(t,e,r,n){var i=t([r],{constructor:function(t,e){this.platform=new a(t.platformId),this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"PlayerWebAdmin",module:this})},load:function(t,r){var i=e.hitch(this,this._onLoadComplete),a=e.hitch(this,this._onLoadError),o=new n,s=this._getRequestArgs(t,r);o.request(this.platform.endpoint.playerWebAdmin,s.query,{handleAs:"xml",preventCache:!0,query:s.query,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}},function(e,r){i(t,JSON.parse(r))},function(e,r){a(t,"An unexpected error occurred: "+r)})},_onLoadError:function(t,e){console.error("playerWebAdmin::_onLoadError - mount="+t+" - error="+e),this.emit("pwa-data-error",{mount:t,error:e})},_onLoadComplete:function(t,e){this.emit("pwa-data-loaded",{mount:t,config:e})},_getRequestArgs:function(t,e){return{jsonp:"callback",preventCache:!0,query:{callsign:t,streamid:e}}}});return i}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(2),r(6),r(7),r(3),r(11),r(12),r(107)],i=function(t,e,r,n,i,a,o,s){var u=t([o],{LEGACY:"legacy",VAST:"vast",constructor:function(t,e){this.inherited(arguments),this._vastCompanionPriority=t.vastCompanionPriority||["static","iframe","html"],this.companions=new s},start:function(){this.config.elements&&(i(this.target,"vast-process-complete",e.hitch(this,this._onVastProcessComplete)),i(this.target,"vast-companions-ready",e.hitch(this,this._onVastCompanionsReady)),i(this.target,"ad-break-cue-point",e.hitch(this,this._onAdBreakCuePoint)),i(this.target,"ad-break-cue-point-complete",e.hitch(this,this._onAdBreakCuePointComplete)),i(this.target,"stream-stop",e.hitch(this,this._onStreamStop))),this.emit("module-ready",{id:"SyncBanners",module:this})},getSyncedElementBySize:function(t,e){var n=null;return r.forEach(this.config.elements,function(r){r.width==t&&r.height==e&&(n=r)},this),n},_onAdBreakCuePoint:function(t){var r=t.data.adBreakData,n=r.url;if(r.isVastInStream)this._cleanAdVastListeners(),this.vastProcessCompleteListener=i(this.target,"vast-process-complete",e.hitch(this,this._onVastProcessComplete)),this.vastErrorListener=i(this.target,"ad-playback-error",e.hitch(this,this._onVastAdPlaybackError));else if(n&&n.length>1&&n.indexOf("|")!=-1){var a=n.split("|")[1],o=n.split("|")[0];a&&a.length>1&&null!=this.getSyncedElementBySize(300,250)&&(this.emit("ad-break-synced-element",{type:this.LEGACY,id:this.getSyncedElementBySize(300,250).id,url:a}),this._loadElementIframe(this.getSyncedElementBySize(300,250).id,a,300,250)),
o&&o.length>1&&null!=this.getSyncedElementBySize(728,90)&&(this.emit("ad-break-synced-element",{type:this.LEGACY,id:this.getSyncedElementBySize(728,90).id,url:o}),this._loadElementIframe(this.getSyncedElementBySize(728,90).id,o,728,90))}},_onAdBreakCuePointComplete:function(t){this.config.keepElementsVisible||this._hideElements()},_onStreamStop:function(){this._hideElements()},_hideElements:function(){var t=this.getSyncedElementBySize(300,250);null!=t&&null!=n.byId(t.id,document)&&a.empty(n.byId(t.id,document));var e=this.getSyncedElementBySize(728,90);null!=e&&null!=n.byId(e.id,document)&&a.empty(n.byId(e.id,document))},_loadElementIframe:function(t,e,r,i){var o=n.byId(t,document);null!=o&&(a.empty(o),a.create("iframe",{src:e,width:r,height:i,scrolling:"no",frameborder:0,marginheight:0,marginwidth:0,allowtransparency:!0,style:{margin:0,padding:0}},o))},_showVastCompanions:function(t){this._cleanAdVastListeners();var e=this._filterCompanionAds(t.data.companions);e&&e.length&&r.forEach(e,function(t,r){var i=this.getSyncedElementBySize(t.width,t.height);null!=i&&null!=n.byId(i.id,document)&&(this.emit("ad-break-synced-element",{type:this.VAST,id:i.id,data:e[r]}),this.companions.loadVASTCompanionAd(i.id,e[r]))},this)},_onVastProcessComplete:function(t){this._showVastCompanions(t)},_onVastCompanionsReady:function(t){this._showVastCompanions(t)},_onVastAdPlaybackError:function(t){console.error("syncBanners::_onVastAdPlaybackError"),console.error(t),this._cleanAdVastListeners()},_cleanAdVastListeners:function(){this.vastProcessCompleteListener&&this.vastProcessCompleteListener.remove(),this.vastErrorListener&&this.vastErrorListener.remove()},_filterCompanionAds:function(t){if(!t||!t.length)return t;var e=[],n=[];return r.forEach(this._vastCompanionPriority,function(i){r.forEach(t,function(t){var a=t.width+t.height;t.resourceType.name==i&&r.indexOf(n,a)<0&&(e.push(t),n.push(a))},this)},this),e}});return u}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(2),r(12),r(7),r(11)],i=function(t,e,r,n,i){var a=t([r],{constructor:function(t,e){this.inherited(arguments)},start:function(){this.emit("module-ready",{id:"TargetSpot",module:this})},embed:function(t,r,a,o){var s=i.create("div",{id:"tsWrapper"},n.byId(t,document));window.ts_ready=e.hitch(this,this._tsReady);try{window.ts_swf_embed(s.id,this._getComponentSettings(r,a,o))}catch(t){this.emit("module-error",{id:"TargetSpot",error:"Error in targetSpot::embed: "+t.message})}},_getComponentSettings:function(t,e,r){return{w:300,h:250,prl:r,pageDomain:"player.tritondigital.com",htmlBanner:0,s:t,v:e}},playAd:function(t){window.ts_streamEvent({eventType:"playAd",eventDuration:t})},playPreroll:function(){window.ts_streamEvent({eventType:"tsPlayPreroll"})},interruptAd:function(){window.ts_streamEvent({eventType:"interruptAd"})},setStationId:function(t){window.ts_setStation({stationId:t})},setVolume:function(t){window.ts_setVolume({volume:t})},ts_setTargeting:function(t,e){window.ts_setTargeting({eventType:t,eventData:e})},_tsReady:function(){window.ts_mutePlayer=e.hitch(this,this._ts_mutePlayer),window.ts_unmutePlayer=e.hitch(this,this._ts_unmutePlayer),window.ts_noAds=e.hitch(this,this._ts_noAds),window.ts_noPreRoll=e.hitch(this,this._ts_noPreRoll),window.ts_adStarted=e.hitch(this,this._ts_adStarted),window.ts_adFinished=e.hitch(this,this._ts_adFinished),this.emit("targetspot-ready")},_ts_mutePlayer:function(t){this.emit("targetspot-mute")},_ts_unmutePlayer:function(){this.emit("targetspot-unmute")},_ts_noAds:function(){this.emit("targetspot-no-ads")},_ts_noPreRoll:function(){this.emit("targetspot-no-preroll")},_ts_adStarted:function(t){this.emit("targetspot-ad-started")},_ts_adFinished:function(t){this.emit("targetspot-ad-finished")}});return a}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(109),o=r(15);n=[r(1),r(2),r(14),r(12)],i=function(t,e,r,n){var i=t([n],{constructor:function(t,e){this.inherited(arguments),this.see=null,this.seeRegApi=null,this.seeMetaApi=null,this.tenantId=t.tenantId,this.seeApiUrl=t.seeApiUrl,this.platform=new o(t.platformId)},start:function(){this.emit("module-ready",{id:"UserRegistration",module:this})},init:function(){var t=(void 0!=this.seeApiUrl?this.seeApiUrl:this.platform.endpoint.see).replace("{tenantId}",this.tenantId),n=new r;a.js(t,function(){n.resolve()});var i=e.hitch(this,this._seeApiLoaded),o=e.hitch(this,this._seeApiError);n.then(function(){window._See.bindEvent("RegApiReady",i)},function(t){o()},function(t){})},_seeApiLoaded:function(){this.see=window._See,this.seeRegApi=window._See?window._See.regApi:void 0,this.seeMetaApi=window._See?window._See.metaApi:void 0,this.see.source="StreamingPlayer",void 0!=this.see?this.see.bindOrFireEvent("metaApiReady",e.hitch(this,function(){this.emit("see-api-loaded"),this.isLoggedIn()&&this.emit("user-logged-in")})):this._seeApiError()},_seeApiError:function(){this.emit("see-api-error")},login:function(t){if(void 0==this.seeRegApi)return void this.emit("see-regapi-not-ready");switch(t.method){case"Userpwd":this.seeRegApi.login(t.username,t.password,t.persist,e.hitch(this,this._onLoginHandler));break;case"Facebook":this.seeRegApi.loginFacebook(e.hitch(this,this._onLoginHandler));break;case"Google":this.seeRegApi.loginGoogle(e.hitch(this,this._onLoginHandler))}},connectSocial:function(t){if(void 0==this.seeRegApi)return void this.emit("see-regapi-not-ready");switch(t){case"Facebook":this.seeRegApi.loginFacebook(e.hitch(this,this._onConnectSocialHandler));break;case"Google":this.seeRegApi.loginGoogle(e.hitch(this,this._onConnectSocialHandler))}},removeSocial:function(t){if(void 0==this.seeRegApi)return void this.emit("see-regapi-not-ready");switch(t){case"Facebook":this.seeRegApi.removeSocial("facebook",e.hitch(this,this._onRemoveSocialHandler));break;case"Google":this.seeRegApi.removeSocial("google",e.hitch(this,this._onRemoveSocialHandler))}},isLoggedIn:function(){return this.see.config.user.is_loggedin},logout:function(){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.logout(e.hitch(this,this._onLogoutHandler))},forgotPassword:function(t,r){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.forgotPassword(t,e.hitch(this,this._onForgotPasswordHandler),r)},resetPassword:function(t,r){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.resetPassword(t,r,e.hitch(this,this._onResetPasswordHandler))},getUserDetails:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getUserDetails(e.hitch(this,this._onGetUserDetailsHandler),t)},registerFields:function(){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.registerFields(e.hitch(this,this._onRegisterFieldsHandler))},registerUser:function(t,r){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.registerUser(t,r,e.hitch(this,this._onRegisterUserHandler))},updateUser:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.updateUser(t,e.hitch(this,this._onUpdateUserHandler))},completeRegisterUser:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.completeRegister(t,e.hitch(this,this._onLoginHandler))},setLanguage:function(t){this.see.setLanguage(t,e.hitch(this,this._onSetLanguageHandler))},getStatusLevel:function(t,r){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getStatusLevel(t,r,e.hitch(this,this._onGetStatusLevel))},getLadderStatusLevels:function(t){return void 0==this.seeRegApi?void this.emit("see-regapi-not-ready"):void this.seeRegApi.getLadderStatusLevels(t,e.hitch(this,this._onGetLadderStatusLevels))},metaSet:function(t,r,n){return this.seeMetaApi?(n="object"==typeof n?n:{},n.callback=e.hitch(this,this._onMetaSetHandler),void this.seeMetaApi.set(t,r,n)):void this.emit("see-metaapi-not-ready")},metaGet:function(t,r){return this.seeMetaApi?(r="object"==typeof r?r:{},r.callback=e.hitch(this,this._onMetaGetHandler),void this.seeMetaApi.get(t,r)):void this.emit("see-metaapi-not-ready")},metaUpdate:function(t,r){if(!this.seeMetaApi)return void this.emit("see-metaapi-not-ready");var n={callback:e.hitch(this,this._onMetaUpdateHandler)};this.seeMetaApi.update(t,r,n)},metaDelete:function(t){if(!this.seeMetaApi)return void this.emit("see-metaapi-not-ready");var r={callback:e.hitch(this,this._onMetaDeleteHandler)};this.seeMetaApi.del(t,r)},metaClear:function(t){if(!this.seeMetaApi)return void this.emit("see-metaapi-not-ready");var r={callback:e.hitch(this,this._onMetaClearHandler)};this.seeMetaApi.clear(t,r)},metaList:function(t,r){return this.seeMetaApi?(r="object"==typeof r?r:{},r.callback=e.hitch(this,this._onMetaListHandler),void this.seeMetaApi.list(t,r)):void this.emit("see-metaapi-not-ready")},triggerEvent:function(t){return this.see?void this.see.triggerEvent(t):void this.emit("see-not-ready")},bindEvent:function(t,e,r){return this.see?void this.see.bindEvent(t,e,r):void this.emit("see-not-ready")},bindOrFireEvent:function(t,e,r){return this.see?void this.see.bindOrFireEvent(t,e,r):void this.emit("see-not-ready")},cookieTest:function(){return this.see?(callback=e.hitch(this,this._onCookieTest),void this.see.cookieTest(callback)):void this.emit("see-not-ready")},isGamesEnabled:function(){return this.see?this.see.config.tenant.playerShowGames:(this.emit("see-not-ready"),!1)},getUserConfig:function(){return this.see?this.see.config.user:(this.emit("see-not-ready"),!1)},getConfig:function(){return this.see?this.see.config:(this.emit("see-not-ready"),!1)},initWidgets:function(t){return this.see?void this.see.initWidgets(t):(this.emit("see-not-ready"),!1)},_onLoginHandler:function(t){switch(t.status){case"PASS":this.emit("user-logged-in",t.context);break;case"FAIL":this.emit("user-login-error",t.context);break;case"DELAY":}},_onConnectSocialHandler:function(t){switch(t.status){case"PASS":this.emit("social-connect",t.context);break;case"FAIL":this.emit("social-connect-error",t.context);break;case"DELAY":}},_onRemoveSocialHandler:function(t){switch(t.status){case"PASS":this.emit("social-remove",t.context);break;case"FAIL":this.emit("social-remove-error",t.context);break;case"DELAY":}},_onLogoutHandler:function(t){switch(t.status){case"PASS":this.emit("user-logged-out",t.context);break;case"FAIL":this.emit("user-logout-error",t.context);break;case"DELAY":}},_onForgotPasswordHandler:function(t){switch(t.status){case"PASS":this.emit("forgot-password",t.context);break;case"FAIL":this.emit("forgot-password-error",t.context);break;case"DELAY":}},_onResetPasswordHandler:function(t){switch(t.status){case"PASS":this.emit("reset-password",t.context);break;case"FAIL":this.emit("reset-password-error",t.context);break;case"DELAY":}},_onGetUserDetailsHandler:function(t){switch(t.status){case"PASS":this.emit("user-details",t.context);break;case"FAIL":this.emit("user-details-error",t.context);break;case"DELAY":}},_onRegisterFieldsHandler:function(t){switch(t.status){case"PASS":this.emit("register-fields",t.context);break;case"FAIL":this.emit("register-fields-error",t.context);break;case"DELAY":}},_onRegisterUserHandler:function(t){switch(t.status){case"PASS":this.emit("register-user",t.context);break;case"FAIL":this.emit("register-user-error",t.context);break;case"DELAY":}},_onUpdateUserHandler:function(t){switch(t.status){case"PASS":this.emit("user-update",t.context);break;case"FAIL":this.emit("user-update-error",t.context);break;case"DELAY":}},_onSetLanguageHandler:function(t){switch(t.status){case"PASS":this.emit("language-change-success",t.context);break;case"FAIL":this.emit("language-change-error",t.context)}},_onGetStatusLevel:function(t){switch(t.status){case"PASS":this.emit("user-status",t.context);break;case"FAIL":this.emit("user-status-error",t.context);break;case"DELAY":}},_onGetLadderStatusLevels:function(t){switch(t.status){case"PASS":this.emit("status-levels",t.context);break;case"FAIL":this.emit("status-levels-error",t.context);break;case"DELAY":}},_onMetaSetHandler:function(t){switch(t.status){case"PASS":this.emit("meta-set",t.context);break;case"FAIL":this.emit("meta-set-error",t.context)}},_onMetaGetHandler:function(t){switch(t.status){case"PASS":this.emit("meta-get",t.context);break;case"FAIL":this.emit("meta-get-error",t.context)}},_onMetaUpdateHandler:function(t){switch(t.status){case"PASS":this.emit("meta-update",t.context);break;case"FAIL":this.emit("meta-update-error",t.context)}},_onMetaDeleteHandler:function(t){switch(t.status){case"PASS":this.emit("meta-delete",t.context);break;case"FAIL":this.emit("meta-delete-error",t.context)}},_onMetaClearHandler:function(t){switch(t.status){case"PASS":this.emit("meta-clear",t.context);break;case"FAIL":this.emit("meta-clear-error",t.context)}},_onMetaListHandler:function(t){switch(t.status){case"PASS":this.emit("meta-list",t.context);break;case"FAIL":this.emit("meta-list-error",t.context)}},_onCookieTest:function(t){switch(t.status){case"PASS":this.emit("cookie-test-pass");break;case"FAIL":this.emit("cookie-test-fail")}}});return i}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(22);n=[r(1),r(2),r,r(14),r(3),r(11),r(7),r(29),r(105),r(10),r(121),r(123),r(122)],i=function(t,e,r,n,i,o,s,u,l,c,d,h,f){var p=t([],{AD_PLAYBACK_START:"ad-playback-start",AD_PLAYBACK_COMPLETE:"ad-playback-complete",AD_PLAYBACK_DESTROY:"ad-playback-destroy",AD_PLAYBACK_ERROR:"ad-playback-error",AD_COUNTDOWN:"ad-countdown",AD_QUARTILE:"ad-quartile",VAST_COMPANIONS_READY:"vast-companions-ready",VAST_COMPANIONS_VPAID:"vast-companions-vpaid",AD_BLOCKER_DETECTED:"ad-blocker-detected",STREAMING_GUIDE_VERSION:"1.5.1",constructor:function(t,r,n,a){this.target=n,this.config=a,this.playerNode=s.byId(this.config.playerId,document),this.tech=t,this.techType=r,this.adModules=[],this.currentAdModule=null,this.xhrProv=new c,a.adBlockerDetected||(this.imaSdkModule=new d(n,a),this.VASTAdModule=new h(n,a),this.mediaAdModule=new f(n,a)),this.inherited(arguments),this._adParser=null,this._adSource=null,this._adFormat=null,i(this.target,"ad-playback-start",e.hitch(this,this._onAdPlaybackStart)),i(this.target,"ad-playback-error",e.hitch(this,this._onAdPlaybackError))},playAd:function(t,e){if(e.adBreak!==!0&&a.init(),this.config.adBlockerDetected)return void(1!=e.adBreak&&this.target.emit(this.AD_BLOCKER_DETECTED,{data:{message:"playAd function has been disabled because Ad Blocker is activated"}}));if(this.destroyAd(!1),t==u.TRITON_AD_PLATFORM&&(t=u.VAST_AD,e=this._convertTAPConfigToVast(e)),e.url&&(e.url=this._generateUrl(e)),null==e.url&&void 0==e.mediaUrl&&void 0==e.rawXML&&void 0==e.sid)return void this.target.emit(this.AD_PLAYBACK_ERROR,{data:{type:null,error:!0}});if(e.url?(e.fallbackToVastPlugin=e.url.toLowerCase().indexOf("daast")>-1||e.url.toLowerCase().indexOf("/ondemand/ars")>-1,this._adFormat=e.url.toLowerCase().indexOf("daast")>-1?"DAAST":"VAST",this._adSource=e.url.toLowerCase().indexOf("daast")>-1?"TAP":e.sid?"CM3":"Others"):e.rawXML&&(e.fallbackToVastPlugin=e.rawXML.toLowerCase().indexOf("daast")>-1,this._adFormat=e.rawXML.toLowerCase().indexOf("daast")>-1?"DAAST":"VAST",this._adSource=e.rawXML.toLowerCase().indexOf("daast")>-1?"TAP":e.sid?"CM3":"Others"),"Flash"==this.techType)return void this.tech.playAd(t,e);switch(this.tech.prepare("adModule"),t){case u.VAST_AD:e.adBreak||e.fallbackToVastPlugin?(this._initAdModule(this.VASTAdModule,e),this._adParser="VASTModule"):(this._initAdModule(this.imaSdkModule,e),this._adParser="IMA");break;case u.MEDIA_AD:this._initAdModule(this.mediaAdModule,e),this._adParser="Direct";break;default:this.target.emit(this.AD_PLAYBACK_COMPLETE,{data:{type:null,error:!1}})}},skipAd:function(){return"Flash"==this.techType?void this.tech.skipAd():void(this.currentAdModule&&this.currentAdModule.skipAd())},destroyAd:function(t){return"Flash"==this.techType?void this.tech.destroyAd(t):void(this.currentAdModule&&this.currentAdModule.destroyAd(t))},_initAdModule:function(t,r){this._removeListeners(),this.currentAdModule=t,this._mediaAdReadyHandler=i(this.target,this.currentAdModule.AD_MODULE_MEDIA_READY,e.hitch(this,this._onMediaAdReady)),this._mediaAdEmptyHandler=i(this.target,this.currentAdModule.AD_MODULE_MEDIA_EMPTY,e.hitch(this,this._onMediaAdEmpty)),this._adCountdownHandler=i(this.target,this.currentAdModule.AD_MODULE_COUNTDOWN,e.hitch(this,this._onAdModuleCountdown)),this._adModulePlaybackStartHandler=i(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_START,e.hitch(this,this._onAdModulePlaybackStart)),this._adModulePlaybackCompleteHandler=i(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_COMPLETE,e.hitch(this,this._onAdModulePlaybackComplete)),this._adModulePlaybackDestroyHandler=i(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_DESTROY,e.hitch(this,this._onAdModulePlaybackDestroy)),this._adModulePlaybackErrorHandler=i(this.target,this.currentAdModule.AD_MODULE_PLAYBACK_ERROR,e.hitch(this,this._onAdModulePlaybackError)),this._adModuleQuartileHandler=i(this.target,this.currentAdModule.AD_MODULE_QUARTILE,e.hitch(this,this._onAdModuleQuartile)),this._adModuleCompanionsHandler=i(this.target,this.currentAdModule.AD_MODULE_COMPANIONS,e.hitch(this,this._onAdModuleCompanions)),this._adModuleClickTrackingHandler=i(this.target,this.currentAdModule.AD_MODULE_CLICK_TRACKING,e.hitch(this,this._onAdModuleClickTracking)),this._adModuleVastEmptyHandler=i(this.target,this.currentAdModule.AD_MODULE_VAST_EMPTY,e.hitch(this,this._onAdError)),this._adModuleVastErrorHandler=i(this.target,this.currentAdModule.AD_MODULE_VAST_ERROR,e.hitch(this,this._onAdError)),this.currentAdModule.init(r),this.currentAdModule.initAdListeners(this.tech.html5OnDemand)},_onAdPlaybackStart:function(t){},_onAdPlaybackError:function(t){},_onAdModuleCompanions:function(t){this.currentAdModule.emit(this.VAST_COMPANIONS_READY,t.data)},_onAdModulePlaybackStart:function(t){this._callImpressions(),this.currentAdModule.emit(this.AD_PLAYBACK_START,{type:t.data.type})},_onAdModulePlaybackComplete:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_COMPLETE,{type:t.data.type})},_onAdModulePlaybackDestroy:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_DESTROY)},_onAdModulePlaybackError:function(t){this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_ERROR,{type:t.data.type})},_onAdModuleCountdown:function(t){this.currentAdModule.emit(this.AD_COUNTDOWN,{countDown:t.data.countDown})},_onAdModuleClickTracking:function(t){if(null!=t&&void 0!=t.data){var e=void 0!=t.data.clickThrough?t.data.clickThrough:null,r=void 0!=t.data.clickTrackings?t.data.clickTrackings:null,n=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,i=n.test(e);if(null!=e&&1==i&&window.open(e),r)for(var a=r.length,o=0;o<a;o++)this.xhrProv.request(r[o],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})}},_onAdModuleQuartile:function(t){if(this.currentAdModule.getVastInlineAd())for(var e=this.currentAdModule.getVastInlineAd().getLinearTrackingEvents(this.currentAdModule._defaultSequence),r=e.length,n=0;n<r;n++)if(e[n].type==t.adQuartile)for(var i=e[n].urls,a=i.length,o=0;o<a;o++)this.xhrProv.request(i[o],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})},_onMediaAdReady:function(t){var e=t.data,r=this._getSupportedMediaFile(e);null!=r?this.tech.html5OnDemand.playAd({adServerType:e.adServerType,mediaUrl:r.url,mediaFormat:r.format,clickThrough:e.clickThrough,clickTrackings:e.clickTrackings}):this.target.emit(this.AD_PLAYBACK_ERROR,{data:{type:e.adServerType,error:!1}})},_onMediaAdEmpty:function(t){var e=t.data;this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_COMPLETE,{type:e.adServerType,error:!1})},_onAdError:function(t){var e=t.data;this._removeListeners(),this.currentAdModule.emit(this.AD_PLAYBACK_ERROR,{type:e.adServerType,error:!1})},_removeListeners:function(){this._mediaAdReadyHandler&&this._mediaAdReadyHandler.remove(),this._mediaAdEmptyHandler&&this._mediaAdEmptyHandler.remove(),this._adCountdownHandler&&this._adCountdownHandler.remove(),this._adModulePlaybackStartHandler&&this._adModulePlaybackStartHandler.remove(),this._adModulePlaybackCompleteHandler&&this._adModulePlaybackCompleteHandler.remove(),this._adModulePlaybackErrorHandler&&this._adModulePlaybackErrorHandler.remove(),this._adModuleQuartileHandler&&this._adModuleQuartileHandler.remove(),this._adModuleClickTrackingHandler&&this._adModuleClickTrackingHandler.remove(),this._adModuleVastEmptyHandler&&this._adModuleVastEmptyHandler.remove(),this._adModuleVastErrorHandler&&this._adModuleVastErrorHandler.remove(),this._adModuleVastProcessCompleteHandler&&this._adModuleVastProcessCompleteHandler.remove(),this._adModuleCompanionsHandler&&this._adModuleCompanionsHandler.remove(),this._adModulePlaybackDestroyHandler&&this._adModulePlaybackDestroyHandler.remove()},_callImpressions:function(){if(this.currentAdModule.getVastInlineAd()){var t=this.currentAdModule.getVastInlineAd().impressions;if(t){var e=t.length;if(0==e)return;for(var r=0;r<e;r++)this.xhrProv.request(t[r],null,{method:"GET",handleAs:"text",headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}})}}},_getAdModuleById:function(t,e){var r=this.adModules.length;if(0==r){var n=new t(this.target,this.config);return this.adModules.push({moduleId:e,module:n}),n}for(var i=0;i<r;i++)if(this.adModules[i].moduleId==e)return this.adModules[i].module;var n=new t(this.target,this.config);return this.adModules.push({moduleId:e,module:n}),n},_getSupportedMediaFile:function(t){if(null==t)return null;switch(t.adServerType){case u.VAST_AD:case u.MEDIA_AD:if(null==t.mediaFiles||0==t.mediaFiles.length)return null;for(var e=t.mediaFiles,r=e.length,n=0;n<r;n++){this._isTypeSupported("video","video/mp4;");if(("audio/aac"==e[n].type||"aac"==e[n].url.split(".").pop())&&this._isTypeSupported("audio","audio/aac;"))return{url:e[n].url,format:"audio"};if(("audio/mp4"==e[n].type||"m4a"==e[n].url.split(".").pop())&&this._isTypeSupported("audio","audio/mp4;"))return{url:e[n].url,format:"audio"};if(("audio/mpeg"==e[n].type||"mp3"==e[n].url.split(".").pop())&&this._isTypeSupported("audio","audio/mpeg;"))return{url:e[n].url,format:"audio"};if(("audio/wav"==e[n].type||"wav"==e[n].url.split(".").pop())&&this._isTypeSupported("audio","audio/wav;"))return{url:e[n].url,format:"audio"};if(("audio/ogg"==e[n].type||"oga"==e[n].url.split(".").pop()||"ogg"==e[n].url.split(".").pop())&&this._isTypeSupported("audio","audio/ogg;"))return{url:e[n].url,format:"audio"};if("audio/webm"==e[n].type&&this._isTypeSupported("audio","audio/webm;"))return{url:e[n].url,format:"audio"};if(("video/mp4"==e[n].type||"mp4"==e[n].url.split(".").pop()||"m4v"==e[n].url.split(".").pop())&&this._isTypeSupported("video","video/mp4;"))return{url:e[n].url,format:"video"};if(("video/ogg"==e[n].type||"ogv"==e[n].url.split(".").pop())&&this._isTypeSupported("video","video/ogg;"))return{url:e[n].url,format:"video"};if(("video/webm"==e[n].type||"webm"==e[n].url.split(".").pop())&&this._isTypeSupported("video","video/webm;"))return{url:e[n].url,format:"video"}}return null;default:return null}},_isTypeSupported:function(t,e){var r=s.byId("tdplayer_od_videonode",document);return!!r.canPlayType&&r.canPlayType(e)},_convertTAPConfigToVast:function(t){var e=new l;return t.url=e.getVastUri(t),t},_generateUrl:function(t){if(void 0!=t&&void 0!=t.url){if(t.url.indexOf("/ondemand/ars")>-1&&void 0!=t.trackingParameters){var r;void 0!=t.trackingParameters.tdsdk&&(r=t.url.indexOf("?")>-1?"&":"?",t.url+=r+"tdsdk="+t.trackingParameters.tdsdk),void 0!=t.trackingParameters.position&&void 0!=t.trackingParameters.position.coords.latitude&&void 0!=t.trackingParameters.position.coords&&void 0!=t.trackingParameters.position.coords.longitude&&(r=t.url.indexOf("?")>-1?"&":"?",t.url+=r+"lat="+parseFloat(t.trackingParameters.position.coords.latitude.toFixed(1))+"&long="+parseFloat(t.trackingParameters.position.coords.longitude.toFixed(1))),void 0!=t.trackingParameters.banners&&(r=t.url.indexOf("?")>-1?"&":"?",t.url+=r+"banners="+t.trackingParameters.banners);var n=e.clone(t.trackingParameters);delete n.tdsdk,delete n.position,delete n.banners,delete n.pname,delete n.pversion;for(var i in n)r=t.url.indexOf("?")>-1?"&":"?",t.url+=r+i+"="+encodeURIComponent(n[i]);return t.url+=r+"version="+this.STREAMING_GUIDE_VERSION,t.url}return t.url}}});return p}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(2),r(40),r(59),r(29),r(4)],i=function(t,e,r,n,i,a){var o=t([r],{VAST_COMPANIONS_PRIORITY:["static","iframe","html"],IMA_LIBRARY_URL:"//imasdk.googleapis.com/js/sdkloader/ima3.js",_videoContent:null,_countdownTimer:null,_adDisplayContainer:null,_currentAd:null,_adsLoader:null,_adsRequest:null,_adsManager:null,_currentAdConfig:null,constructor:function(t,e){this.config=e,this._imaSdkLoaded=!1},init:function(t){this._destroy(),this._currentAdConfig=t,this.createAdDisplayContainer()},destroyAd:function(t){this._destroy(t),0!=t&&this.emit(this.AD_MODULE_PLAYBACK_DESTROY)},skipAd:function(){this._adsManager&&this._adsManager.getAdSkippableState()?this._adsManager.skip():this.emit(this.AD_MODULE_SKIPPABLE_STATE,{state:this._adsManager.getAdSkippableState()})},createAdDisplayContainer:function(){this._videoContent=document.getElementById("tdplayer_od_videonode"),this._adDisplayContainer||(this._adDisplayContainer=new google.ima.AdDisplayContainer(document.getElementById(this.config.playerId),this._videoContent),this._adDisplayContainer.initialize()),this.requestAds()},requestAds:function(){if(this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e.hitch(this,this._onAdsManagerLoaded),!1),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e.hitch(this,this._onAdError),!1),this._adsRequest=new google.ima.AdsRequest,void 0!==this._currentAdConfig.url)this._adsRequest.adTagUrl=encodeURI(this._currentAdConfig.url+(void 0==this.config.allowPersonalisedAds||this.config.allowPersonalisedAds?"":"&npa=1"));else if(void 0!==this._currentAdConfig.sid){var t=new n,r=t.getVastUri(t.ENDPOINT,this._currentAdConfig.sid,this._currentAdConfig.mediaformat);this._adsRequest.adTagUrl=encodeURI(r)}else void 0!==this._currentAdConfig.rawXML&&(this._adsRequest.adsResponse=this._currentAdConfig.rawXML);this._adsLoader.requestAds(this._adsRequest)},_onAdsManagerLoaded:function(t){var r=this,n=new google.ima.AdsRenderingSettings;if(this._adsManager=t.getAdsManager(this._videoContent,n),void 0!==this._adsManager){this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onCompanionsReady)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onStarted)),this._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,e.hitch(this,this._onAllAdsCompleted)),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,e.hitch(this,this._onContentResumeRequested)),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,e.hitch(this,this._onResumed)),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,e.hitch(this,this._onAdPaused)),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETED,e.hitch(this,this._onQuartileEvent)),this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e.hitch(this,this._onAdError));var i=document.getElementById(this.config.playerId).offsetWidth,a=document.getElementById(r.config.playerId).offsetHeight;this.resizeHandler=setInterval(function(){i!=document.getElementById(r.config.playerId).offsetWidth&&(i=document.getElementById(r.config.playerId).offsetWidth,a=document.getElementById(r.config.playerId).offsetHeight,r._adsManager.resize(i,a,google.ima.ViewMode.NORMAL),r._resizeVideoTag(i,a))},250),this._resizeVideoTag(i,a);try{var o=document.getElementById(this.config.playerId).offsetWidth,s=document.getElementById(this.config.playerId).offsetHeight;this._adsManager.init(o,s,google.ima.ViewMode.NORMAL),this._adsManager.start()}catch(t){}}},_resizeVideoTag:function(t,e){var r=document.getElementById("tdplayer_od_videonode");void 0!=a("ios")&&r?(r.width=t,r.height=e):r&&(r.style.width="0px",r.style.height="0px")},_onAdPaused:function(){this._removeCountdownTimer(),this._adsManager.resume()},_onResumed:function(t){var e=this;this._adsManager&&(this._countdownTimer=setInterval(function(){var t=parseInt(e._adsManager.getRemainingTime());e._onRemainingTimeChanged(t)},250))},_onStarted:function(t){var e=this;this._removeCountdownTimer(),this._currentAd=t.getAd(),this._countdownTimer=setInterval(function(){var t=parseInt(e._adsManager.getRemainingTime());e._onRemainingTimeChanged(t)},250),this.emit(this.AD_MODULE_PLAYBACK_START,{type:i.VAST_AD})},_onAllAdsCompleted:function(t){this._destroy(),this.emit(this.AD_MODULE_PLAYBACK_COMPLETE,{type:i.VAST_AD})},_onRemainingTimeChanged:function(t){this.emit(this.AD_MODULE_COUNTDOWN,{countDown:t})},_onContentResumeRequested:function(t){this._removeCountdownTimer()},_removeCountdownTimer:function(){this._countdownTimer&&clearInterval(this._countdownTimer)},_onAdError:function(t){this.emit(this.AD_MODULE_PLAYBACK_ERROR,{error:{message:t.getError().getMessage(),code:t.getError().getErrorCode()}}),this._destroy()},_onCompanionsReady:function(t){if(void 0!=this.config.companionAdSelectionSettings&&void 0!=this.config.companionAdSelectionSettings.elements){for(var e=new google.ima.CompanionAdSelectionSettings,r=void 0!==this.config.companionAdSelectionSettings.vastCompanionPriority?this.config.companionAdSelectionSettings.vastCompanionPriority:this.VAST_COMPANIONS_PRIORITY,n=[],i=0;i<this.config.companionAdSelectionSettings.elements.length;i++)for(var a=this.config.companionAdSelectionSettings.elements[i],o=0;o<r.length;o++){var s=r[o];switch(e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.SELECT_EXACT_MATCH,s){case"static":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC;break;case"html":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.HTML;break;case"iframe":e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.IFRAME}var u=t.getAd().getCompanionAds(a.width,a.height,e);if(u.length>0){var l=new Object;l.width=a.width,l.height=a.height,l.content=u[0].getContent(),l.resourceType=new Object,l.resourceType.name=s,n.push(l);break}}n.length>0&&this.emit(this.AD_MODULE_COMPANIONS,{companions:n})}},_onQuartileEvent:function(t){switch(t.type){case google.ima.AdEvent.Type.STARTED:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(0),error:!1});break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(1),error:!1});break;case google.ima.AdEvent.Type.MIDPOINT:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(2),error:!1});break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(3),error:!1});break;case google.ima.AdEvent.Type.COMPLETED:this.emit(this.AD_MODULE_QUARTILE,{adQuartile:this.adQuartile.getQuartileByIndex(4),
error:!1})}},_destroy:function(t){t&&(this._adDisplayContainer&&this._adDisplayContainer.destroy(),this._adsLoader&&this._adsLoader.destroy(),this._adsManager&&this._adsManager.destroy()),this.resizeHandler&&clearInterval(this.resizeHandler),this._resizeVideoTag(0,0),this._videoContent&&("function"==typeof this._videoContent.exitFullscreen?this._videoContent.exitFullscreen():"function"==typeof this._videoContent.webkitExitFullscreen?this._videoContent.webkitExitFullscreen():"function"==typeof this._videoContent.mozCancelFullScreen?this._videoContent.mozCancelFullScreen():"function"==typeof this._videoContent.msExitFullscreen&&this._videoContent.msExitFullscreen()),this._removeCountdownTimer()}});return o}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(2),r(40),r(29)],i=function(t,e,r,n){var i=t([r],{constructor:function(t,e){this.target=t,this.config=e},init:function(t){this.inherited(arguments),void 0!=t.mediaUrl?this.playAdUrl(t):this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:n.MEDIA_AD})},playAdUrl:function(t){var e=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,r=e.test(t.mediaUrl);if(1==r){var i=void 0!=t.linkUrl?t.linkUrl:null;this.emit(this.AD_MODULE_MEDIA_READY,{adServerType:n.MEDIA_AD,mediaFiles:[{url:t.mediaUrl}],clickThrough:i,clickTrackings:null})}else this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:n.MEDIA_AD})}});return i}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(16);n=[r(1),r(2),r(6),r(52),r(10),r(40),r(128),r(129),r(127),r(29),r(59)],i=function(t,e,r,n,i,o,s,u,l,c,d){var h=t([o],{VAST_1_ROOT:"VideoAdServingTemplate",VAST_2_ROOT:"VAST",DAAST_ROOT:"DAAST",VERSION_1_0:"1.0",VERSION_2_0:"2.0",DAAST_VERSION_1_0:"DAAST_1.0",constructor:function(t,e){this.target=t,this._mediaAdBlankFiles=null,this._skipMediaAdPlayback=!1,this._adBreak=!1,this._defaultSequence=-1,this._vastWrapperAd=null,this._wrapperCachedData=null,this.vastParser=null,this.vastDocument=null,this.onPlaybackStartHandler=null,this.onQuartileReachedHandler=null,this.onClickTrackingElementClickedHandler=null,this.xhrProv=new i},init:function(t){this.inherited(arguments),this._adBreak=!!t.adBreak,this._skipMediaAdPlayback=void 0!=t.skipMediaAdPlayback&&t.skipMediaAdPlayback,this._defaultSequence=void 0!=t.sequence?t.sequence:-1,this.loadVast(t)},loadVast:function(t){if(void 0!=t.rawXML)this._parseVast(a.parse(t.rawXML).documentElement);else if(void 0!=t.url)this.setMediaAdBlankFiles(null),this.xhrProv.request(t.url,t.url,this._getRequestArgs(),e.hitch(this,this._onVastLoadComplete),e.hitch(this,this._onVastLoadError));else if(void 0!=t.sid){var r=new d,n=r.getVastUri(r.ENDPOINT,this.config.sid,t.mediaformat);this.setMediaAdBlankFiles(r.mediaAdBlankFiles),this.xhrProv.request(n,n,this._getRequestArgs(),e.hitch(this,this._onVastLoadComplete),e.hitch(this,this._onVastLoadError))}},setMediaAdBlankFiles:function(t){this._mediaAdBlankFiles=t},getVastInlineAd:function(){return this.vastDocument.vastAd.inlineAd},_onVastLoadComplete:function(t,e){this._parseVast(e)},_onVastLoadError:function(t,e){console.error("vastAdModule::_onVastLoadError - url ="+t+" - error="+e),null!=this._vastWrapperAd&&(null!=this._vastWrapperAd.error&&""!=this._vastWrapperAd.error&&this.xhrProv.request(this._vastWrapperAd.error,this._vastWrapperAd.error,this._getRequestArgs(),null,null),this._vastWrapperAd=null),0==this._adBreak&&this.emit(this.AD_MODULE_VAST_ERROR,{error:e})},_parseVast:function(t){if(this.vastDocument=null,this.vastParser=null,void 0==t||void 0==t.nodeName)return void this.emit(this.AD_MODULE_VAST_EMPTY,{adServerType:c.VAST_AD});var e=this._getVersion(t.nodeName);if(this.vastParser=this._getVastParser(e),null!=this.vastParser&&(this.vastDocument=this.vastParser.parse(t)),null!=this.vastDocument)if(this._needToLoadVASTWrapper(this.vastDocument.vastAd))this._vastWrapperAd=this.vastDocument.vastAd.wrapperAd,this._cacheWrapperData(this._vastWrapperAd),this.loadVast({url:this.vastDocument.vastAd.wrapperAd.vastAdTagURL,skipMediaAdPlayback:this._skipMediaAdPlayback,sequence:this._defaultSequence});else{if(null!=this._vastWrapperAd&&(this.vastDocument.vastAd.inlineAd.addWrapperLinearTrackingEvents(this._wrapperCachedData.wrapperTrackingEvents),this.vastDocument.vastAd.inlineAd.addImpressions(this._wrapperCachedData.wrapperImpressions),this.vastDocument.vastAd.inlineAd.addWrapperLinearVideoClickTracking(this._wrapperCachedData.wrapperVideoClickTracking),this._vastWrapperAd=null,this._wrapperCachedData=null),this._vastWrapperAd=null,void 0!=this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence)&&this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence).length>0&&this.emit(this.AD_MODULE_COMPANIONS,{companions:this.vastDocument.vastAd.inlineAd.getCompanionAds(this._defaultSequence)}),1==this._skipMediaAdPlayback)return;var r=this._checkMediaAdBlankFiles(this.vastDocument.vastAd.inlineAd.getLinearMediaFiles(this._defaultSequence));if(null!=r){var n=this.vastDocument.vastAd.inlineAd.getLinearVideoClick(this._defaultSequence),i=null!=n?n.clickThrough:null,a=null!=n?n.clickTrackings:null;this.emit(this.AD_MODULE_MEDIA_READY,{adServerType:c.VAST_AD,mediaFiles:r,clickThrough:i,clickTrackings:a})}else this.emit(this.AD_MODULE_MEDIA_EMPTY,{adServerType:c.VAST_AD})}else this.emit(this.AD_MODULE_VAST_EMPTY,{adServerType:c.VAST_AD})},_getVersion:function(t){switch(t){case this.VAST_1_ROOT:return this.VERSION_1_0;case this.VAST_2_ROOT:return this.VERSION_2_0;case this.DAAST_ROOT:return this.DAAST_VERSION_1_0}return null},_cacheWrapperData:function(t){null==this._wrapperCachedData&&(this._wrapperCachedData={wrapperImpressions:[],wrapperTrackingEvents:[],wrapperVideoClickTracking:[]});var e=this._vastWrapperAd.getLinearTrackingEvents(this._defaultSequence);null!=e&&e.length>0&&(this._wrapperCachedData.wrapperTrackingEvents=this._wrapperCachedData.wrapperTrackingEvents.concat(e));var r=this._vastWrapperAd.impressions;null!=r&&r.length>0&&(this._wrapperCachedData.wrapperImpressions=this._wrapperCachedData.wrapperImpressions.concat(r));var n=this._vastWrapperAd.getLinearVideoClick(this._defaultSequence);null!=n&&n.clickTrackings.length>0&&(this._wrapperCachedData.wrapperVideoClickTracking=this._wrapperCachedData.wrapperVideoClickTracking.concat(n.clickTrackings))},_needToLoadVASTWrapper:function(t){return null!=t.wrapperAd&&null!=t.wrapperAd.vastAdTagURL},_getVastParser:function(t){switch(t){case this.VERSION_1_0:return null==this.vastParser&&(this.vastParser=new s(this.target)),this.vastParser;case this.VERSION_2_0:return null==this.vastParser&&(this.vastParser=new u(this.target)),this.vastParser;case this.DAAST_VERSION_1_0:return null==this.vastParser&&(this.vastParser=new l(this.target)),this.vastParser}return null},_checkMediaAdBlankFiles:function(t){if(null==t)return null;for(var e=[],r=t.length,n=0;n<r;n++)this._isMediaAdBlankFile(t[n].url)||e.push(t[n]);return e},_isMediaAdBlankFile:function(t){if(null==this._mediaAdBlankFiles||0==this._mediaAdBlankFiles.length)return!1;for(var e=t.substr(t.lastIndexOf("/")+1),r=this._mediaAdBlankFiles.length,n=0;n<r;n++)if(this._mediaAdBlankFiles[n]==e)return!0;return!1},_getRequestArgs:function(){return{handleAs:"xml",preventCache:!1,withCredentials:!0,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}}}});return h}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(42)],i=function(t,e){var r=t(e,{constructor:function(){this.logoTile=null,this.logoTitle=null,this.logoArtist=null,this.logoURL=null}});return r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.trackingEvents=[],this.companionAds=[],this.nonLinearAds=[],this.video=null,this.inherited(arguments)},addWrapperLinearTrackingEvents:function(t){this.trackingEvents=this.trackingEvents.concat(t)},addWrapperLinearVideoClickTracking:function(t){null!=this.video&&(this.video.videoClick.clickTrackings=this.video.videoClick.clickTrackings.concat(t))},addImpression:function(t){this.impressions.push(t)},addImpressions:function(t){null!=t&&(this.impressions=this.impressions.concat(t))},getLinearTrackingEvents:function(t){var t=t;return void 0==t&&(t=-1),this.trackingEvents},getCompanionAdUrl:function(t,e,r,n){var i=this.getCompanionAds(n);if(null==i)return null;for(var a=!1,o=i.length,s=0;s<o;s++)if(a=i[s].width==t&&i[s].height==e,1!=a){if(null==r)return i[s];if(i[s].resourceType==r)return i[s]}return null},getCompanionAds:function(t){var t=t;return void 0==t&&(t=-1),this.companionAds},getLinearMediaFiles:function(t){var t=t;return void 0==t&&(t=-1),this.video.mediaFiles},getLinearMediaFileByIndex:function(t,e){var e=e;void 0==e&&(e=-1);var t=t;return void 0==t&&(t=0),null!=this.video&&null!=this.video.mediaFiles[t]?this.video.mediaFiles[t]:null},getLinearVideoClick:function(t){var t=t;return void 0==t&&(t=-1),this.video.videoClick},getNonLinearAds:function(t){var t=t;return void 0==t&&(t=-1),this.nonLinearAds},getLinearDuration:function(t){var t=t;return void 0==t&&(t=-1),this.video.duration},addCompanionAd:function(t){this.companionAds.push(t)},addNonLinearAd:function(t){this.nonLinearAds.push(t)}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1)],i=function(t){var e=t([],{constructor:function(){this.duration=null,this.adID=null,this.videoClick=null,this.mediaFiles=[]}});return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(16);n=[r(1),r(50),r(49),r(43),r(41),r(66),r(48),r(65),r(67),r(68),r(124),r(46),r(47),r(44),r(45)],i=function(t,e,r,n,i,o,s,u,l,c,d,h,f,p,m){var g=t([e],{AD:"Ad",IMPRESSION:"Impression",DAAST_AD_TAG_URI:"DAASTAdTagURI",CREATIVES:"Creatives",CREATIVE:"Creative",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new n;var e=t.getElementsByTagName(this.AD);if(void 0==e[0])return null;var a=e[0].getAttribute(r.ID),o=new i(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,n=0;n<e;n++)t[n].getElementsByTagName(r.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[n].getElementsByTagName(r.INLINE)):t[n].getElementsByTagName(r.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[n].getElementsByTagName(r.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,n=t[0].childNodes,i=n.length,s=0;s<i;s++)n[s].nodeName==r.AD_SYSTEM?e.adSystem=a.textContent(n[s]):n[s].nodeName==r.AD_TITLE?e.adTitle=a.textContent(n[s]):n[s].nodeName==r.ERROR?e.errorURL=this.trim(a.textContent(n[s])):n[s].nodeName==r.DESCRIPTION?e.description=a.textContent(n[s]):n[s].nodeName==r.EXPIRES?e.expires=a.textContent(n[s]):n[s].nodeName==r.CATEGORY?e.category=a.textContent(n[s]):n[s].nodeName==r.SURVEY?e.survey=a.textContent(n[s]):n[s].nodeName==r.ADVERTISER&&(e.advertiser=a.textContent(n[s]));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseWrapperTag:function(t){for(var e=new s,n=t[0].childNodes,i=n.length,o=0;o<i;o++)n[o].nodeName==this.DAAST_AD_TAG_URI?e.vastAdTagURL=this.trim(a.textContent(n[o])):n[o].nodeName==r.ERROR&&(e.error=this.trim(a.textContent(n[o])));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseImpressionTag:function(t){var e=[];if(void 0==t)return e;for(var r=t.length,n=0;n<r;n++)e.push(this.trim(a.textContent(t[n])));return e},_parseCreatives:function(t){var e=[];if(void 0==t[0]||void 0==t[0].getElementsByTagName(this.CREATIVE))return e;for(var r=t[0].getElementsByTagName(this.CREATIVE).length,n=t[0].getElementsByTagName(this.CREATIVE),i=0;i<r;i++){var a=this._parseCreative(n[i]);e.push(a)}return e},_parseCreative:function(t){var e=new u;return e.adID=t.getAttribute(r.AD_ID),e.id=t.getAttribute(r.ID),e.sequence=t.getAttribute(r.SEQUENCE),0!=t.getElementsByTagName(r.LINEAR).length?e.linearElement=this._parseCreativeLinear(t.getElementsByTagName(r.LINEAR)):0!=t.getElementsByTagName(r.NON_LINEAR_ADS).length?e.nonLinearAds=this._parseCreativeNonLinearAds(t.getElementsByTagName(r.NON_LINEAR_ADS)):0!=t.getElementsByTagName(r.COMPANION_ADS).length&&(e.companionAds=this._parseCreativeCompanionAds(t.getElementsByTagName(r.COMPANION_ADS))),e},_parseCreativeLinear:function(t){for(var e=new l,n=t[0].childNodes,i=n.length,o=0;o<i;o++)n[o].nodeName==r.DURATION?e.duration=a.textContent(n[o]):n[o].nodeName==r.TRACKING_EVENTS?e.trackingEvents=this._parseTrackingEvents(n[o]):n[o].nodeName==r.AUDIO_INTERACTIONS?e.videoClick=this._parseVideoClick(n[o]):n[o].nodeName==r.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(n[o]));return e},_parseCreativeNonLinearAds:function(t){for(var e=[],n=t[0].getElementsByTagName(r.NON_LINEAR),i=n.length,o=0;o<i;o++){var s=new c;s.id=n[o].getAttribute(r.ID),s.width=n[o].getAttribute(r.WIDTH),s.height=n[o].getAttribute(r.HEIGHT),s.expandedWidth=n[o].getAttribute(r.EXPANDED_WIDTH),s.expandedHeight=n[o].getAttribute(r.EXPANDED_HEIGHT),s.scalable="true"==n[o].getAttribute(r.SCALABLE),s.maintainAspectRatio="true"==n[o].getAttribute(r.MAINTAIN_ASPECT_RATIO),s.apiFramework=n[o].getAttribute(r.API_FRAMEWORK),s.minSuggestedDuration=n[o].getAttribute(r.MIN_SUGGESTED_DURATION);for(var u=n[o].childNodes,l=u.length,d=0;d<l;d++)if(u[d].nodeName==r.AD_PARAMETERS)s.adParameters=a.textContent(u[d]);else if(u[d].nodeName==r.NON_LINEAR_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[d]));else if(u[d].nodeName==r.IFRAME_RESOURCE){var h=new m;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[d]))}else if(u[d].nodeName==r.HTML_RESOURCE){var h=new m;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[d])}else if(u[d].nodeName==r.STATIC_RESOURCE){var h=new m;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[d].getAttribute(r.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[d]))}e.push(s)}return s},_parseCreativeCompanionAds:function(t){for(var e=[],n=t[0].getElementsByTagName(r.COMPANION),i=n.length,o=0;o<i;o++){var s=new d;s.id=n[o].getAttribute(r.ID),s.width=n[o].getAttribute(r.WIDTH),s.height=n[o].getAttribute(r.HEIGHT),s.expandedWidth=n[o].getAttribute(r.EXPANDED_WIDTH),s.expandedHeight=n[o].getAttribute(r.EXPANDED_HEIGHT),s.logoTile=n[o].getAttribute(r.LOGO_TILE),s.logoTitle=n[o].getAttribute(r.LOGO_TITLE),s.logoArtist=n[o].getAttribute(r.LOGO_ARTIST),s.logoTile=n[o].getAttribute(r.LOGO_TILE);for(var u=n[o].childNodes,l=u.length,c=0;c<l;c++)if(u[c].nodeName==r.AD_PARAMETERS)s.adParameters=a.textContent(u[c]);else if(u[c].nodeName==r.ALT_TEXT)s.altText=a.textContent(u[c]);else if(u[c].nodeName==r.COMPANION_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[c]));else if(u[c].nodeName==r.IFRAME_RESOURCE){var h=new m;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==r.HTML_RESOURCE){var h=new m;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[c])}else if(u[c].nodeName==r.STATIC_RESOURCE){var h=new m;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[c].getAttribute(r.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==r.TRACKING_EVENTS){var f=u[c].getElementsByTagName(r.TRACKING),p=f.length;if(p>0){var g=f[0].getAttribute(r.EVENT);g==r.CREATIVE_VIEW&&(s.creativeView=this.trim(a.textContent(u[c])))}}e.push(s)}return e},_parseTrackingEvents:function(t){for(var e=[],n=t.getElementsByTagName(r.TRACKING),i=n.length,o=0;o<i;o++){var s=new h;s.urls.push(a.textContent(n[o])),s.type=n[o].getAttribute(r.EVENT),e.push(s)}return e},_parseVideoClick:function(t){for(var e=new f,n=t.childNodes,i=n.length,o=0;o<i;o++)n[o].nodeName==r.CLICK_THROUGH?e.clickThrough=this.trim(a.textContent(n[o])):n[o].nodeName==r.CLICK_TRACKING?e.clickTrackings.push(this.trim(a.textContent(n[o]))):n[o].nodeName==r.CUSTOM_CLICK&&e.customClicks.push(this.trim(a.textContent(n[o])));return e},_parseMediaFiles:function(t){for(var e=[],n=t.getElementsByTagName(r.MEDIA_FILE),i=n.length,o=0;o<i;o++){var s=new p;s.id=n[o].getAttribute(r.ID),s.bitrate=n[o].getAttribute(r.BITRATE),s.minbitrate=n[o].getAttribute(r.MIN_BITRATE),s.maxbitrate=n[o].getAttribute(r.MAX_BITRATE),s.codec=n[o].getAttribute(r.CODEC),s.height=n[o].getAttribute(r.HEIGHT),s.width=n[o].getAttribute(r.WIDTH),s.delivery=n[o].getAttribute(r.DELIVERY),s.type=n[o].getAttribute(r.TYPE),s.scalable="true"==n[o].getAttribute(r.SCALABLE),s.maintainAspectRatio="true"==n[o].getAttribute(r.MAINTAIN_ASPECT_RATIO),s.apiFramework=n[o].getAttribute(r.API_FRAMEWORK),s.url=this.trim(a.textContent(n[o])),e.push(s)}return e}});return g}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(16);n=[r(1),r(50),r(49),r(43),r(41),r(125),r(48),r(126),r(47),r(46),r(42),r(44),r(45)],i=function(t,e,r,n,i,o,s,u,l,c,d,h,f){var p=t([e],{AD:"Ad",VAST_AD_TAG_URL:"VASTAdTagURL",VIDEO:"Video",URL:"URL",CODE:"Code",RESOURCE_TYPE:"resourceType",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new n;var e=t.getElementsByTagName(this.AD);if(void 0==e[0])return null;var a=e[0].getAttribute(r.ID),o=new i(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,n=0;n<e;n++)t[n].getElementsByTagName(r.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[n].getElementsByTagName(r.INLINE)):t[n].getElementsByTagName(r.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[n].getElementsByTagName(r.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,n=t[0].childNodes,i=n.length,s=0;s<i;s++)n[s].nodeName==r.AD_SYSTEM?e.adSystem=a.textContent(n[s]):n[s].nodeName==r.AD_TITLE?e.adTitle=a.textContent(n[s]):n[s].nodeName==r.ERROR&&(e.errorURL=this.trim(a.textContent(n[s])));e.video=this._parseVideo(t[0].getElementsByTagName(this.VIDEO)),e.impressions=this._parseImpressions(t[0].getElementsByTagName(r.IMPRESSION));var u=t[0].getElementsByTagName(r.TRACKING_EVENTS);return void 0!=u&&u.length>0&&(e.trackingEvents=this._parseTrackingEvents(u[0])),e.companionAds=this._parseCompanionsAds(t[0].getElementsByTagName(r.COMPANION_ADS)),e.nonLinearAds=this._parseNonLinearAds(t[0].getElementsByTagName(r.NON_LINEAR_ADS)),e},_parseImpressions:function(t){var e=[];if(void 0==t||0==t.length)return e;for(var r=t[0].getElementsByTagName(this.URL).length,n=t[0].getElementsByTagName(this.URL),i=0;i<r;i++)e.push(a.textContent(n[i]));return e},_parseVideo:function(t){for(var e=new u,n=t[0].childNodes,i=n.length,o=0;o<i;o++)n[o].nodeName==r.DURATION?e.duration=a.textContent(n[o]):n[o].nodeName==r.AD_ID?e.adID=a.textContent(n[o]):n[o].nodeName==r.VIDEO_CLICKS?e.videoClick=this._parseVideoClick(n[o]):n[o].nodeName==r.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(n[o]));return e},_parseVideoClick:function(t){for(var e=new l,n=t.childNodes,i=n.length,a=null,o=0;o<i;o++)n[o].nodeName==r.CLICK_THROUGH?(a=this._parseURLTags(n[o]),a.length>0&&(e.clickThrough=a[0])):n[o].nodeName==r.CLICK_TRACKING?e.clickTrackings=this._parseURLTags(n[o]):n[o].nodeName==r.CUSTOM_CLICK&&(e.customClicks=this._parseURLTags(n[o]));return e},_parseMediaFiles:function(t){for(var e,n=[],i=t.getElementsByTagName(r.MEDIA_FILE),a=i.length,o=0;o<a;o++)e=new h,e.id=i[o].getAttribute(r.ID),e.bitrate=i[o].getAttribute(r.BITRATE),e.height=i[o].getAttribute(r.HEIGHT),e.width=i[o].getAttribute(r.WIDTH),e.delivery=i[o].getAttribute(r.DELIVERY),e.type=i[o].getAttribute(r.TYPE),e.url=this.trim(this.getTagValue(i[o],"URL")),n.push(e);return n},_parseTrackingEvents:function(t){for(var e,n,i,o=[],s=t.getElementsByTagName(r.TRACKING),u=s.length,l=0;l<u;l++){e=new c,n=s[l].getElementsByTagName(this.URL),i=n.length;for(var d=0;d<i;d++)e.urls.push(this.trim(a.textContent(n[d])));e.type=s[l].getAttribute(r.EVENT),o.push(e)}return o},_parseCompanionsAds:function(t){for(var e,n,i=[],o=t[0].getElementsByTagName(r.COMPANION),s=o.length,u=null,l=0;l<s;l++){n=new d,n.id=o[l].getAttribute(r.ID),n.width=o[l].getAttribute(r.WIDTH),n.height=o[l].getAttribute(r.HEIGHT),n.expandedWidth=o[l].getAttribute(r.EXPANDED_WIDTH),n.expandedHeight=o[l].getAttribute(r.EXPANDED_HEIGHT);var c=new f;c.name=o[l].getAttribute(this.RESOURCE_TYPE).toLowerCase(),n.resourceType=c,n.creativeType=o[l].getAttribute(r.CREATIVE_TYPE),u=o[l].childNodes,e=u.length;for(var h=0;h<e;h++)u[h].nodeName==r.AD_PARAMETERS?n.adParameters=a.textContent(u[h]):u[h].nodeName==r.ALT_TEXT?n.altText=a.textContent(u[h]):u[h].nodeName==r.COMPANION_CLICK_THROUGH?n.clickThroughURL=this.trim(a.textContent(u[h])):u[h].nodeName==this.URL?n.url=this.trim(a.textContent(u[h])):u[h].nodeName==this.CODE&&(n.code=this.trim(a.textContent(u[h])));i.push(n)}return i},_parseNonLinearAds:function(t){return null},_parseWrapperTag:function(t){for(var e=new s,n=t[0].childNodes,i=n.length,o=0;o<i;o++)n[o].nodeName==this.VAST_AD_TAG_URL?e.vastAdTagURL=this.trim(a.textContent(n[o])):n[o].nodeName==r.VIDEO_CLICKS?e.videoClicks=this._parseVideoClick(n[o]):n[o].nodeName==r.ERROR?e.error=this.trim(a.textContent(n[o])):n[o].nodeName==r.TRACKING_EVENTS&&(e.trackingEvents=this._parseTrackingEvents(n[o]));return e.impressions=this._parseImpressions(t[0].getElementsByTagName(r.IMPRESSION)),e},_parseURLTags:function(t){for(var e=[],r=t.childNodes,n=r.length,i=0;i<n;i++)r[i].nodeName==this.URL&&e.push(this.trim(a.textContent(r[i])));return e}});return p}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(16);n=[r(1),r(50),r(49),r(43),r(41),r(66),r(48),r(65),r(67),r(68),r(42),r(46),r(47),r(44),r(45)],i=function(t,e,r,n,i,o,s,u,l,c,d,h,f,p,m){var g=t([e],{AD:"Ad",IMPRESSION:"Impression",VAST_AD_TAG_URI:"VASTAdTagURI",CREATIVES:"Creatives",CREATIVE:"Creative",constructor:function(){this.vastDocument=null,this.inherited(arguments)},parse:function(t){this.vastDocument=new n;var e=t.getElementsByTagName(this.AD);if(void 0==e[0])return null;var a=e[0].getAttribute(r.ID),o=new i(a);return this.vastDocument.vastAd=o,this._parseAdTag(e),this.vastDocument},_parseAdTag:function(t){for(var e=t.length,n=0;n<e;n++)t[n].getElementsByTagName(r.INLINE).length>0?this.vastDocument.vastAd.inlineAd=this._parseInLineTag(t[n].getElementsByTagName(r.INLINE)):t[n].getElementsByTagName(r.WRAPPER).length>0?this.vastDocument.vastAd.wrapperAd=this._parseWrapperTag(t[n].getElementsByTagName(r.WRAPPER)):console.error("VAST - parseAdTag() - Unsupported VAST tag")},_parseInLineTag:function(t){for(var e=new o,n=t[0].childNodes,i=n.length,s=0;s<i;s++)n[s].nodeName==r.AD_SYSTEM?e.adSystem=a.textContent(n[s]):n[s].nodeName==r.AD_TITLE?e.adTitle=a.textContent(n[s]):n[s].nodeName==r.ERROR?e.errorURL=this.trim(a.textContent(n[s])):n[s].nodeName==r.DESCRIPTION&&(e.description=a.textContent(n[s]));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseWrapperTag:function(t){for(var e=new s,n=t[0].childNodes,i=n.length,o=0;o<i;o++)n[o].nodeName==this.VAST_AD_TAG_URI?e.vastAdTagURL=this.trim(a.textContent(n[o])):n[o].nodeName==r.ERROR&&(e.error=this.trim(a.textContent(n[o])));return e.impressions=this._parseImpressionTag(t[0].getElementsByTagName(this.IMPRESSION)),e.creatives=this._parseCreatives(t[0].getElementsByTagName(this.CREATIVES)),e},_parseImpressionTag:function(t){var e=[];if(void 0==t)return e;for(var r=t.length,n=0;n<r;n++)e.push(this.trim(a.textContent(t[n])));return e},_parseCreatives:function(t){var e=[];if(void 0==t[0]||void 0==t[0].getElementsByTagName(this.CREATIVE))return e;for(var r=t[0].getElementsByTagName(this.CREATIVE).length,n=t[0].getElementsByTagName(this.CREATIVE),i=0;i<r;i++){var a=this._parseCreative(n[i]);e.push(a)}return e},_parseCreative:function(t){var e=new u;return e.adID=t.getAttribute(r.AD_ID),e.id=t.getAttribute(r.ID),e.sequence=t.getAttribute(r.SEQUENCE),0!=t.getElementsByTagName(r.LINEAR).length?e.linearElement=this._parseCreativeLinear(t.getElementsByTagName(r.LINEAR)):0!=t.getElementsByTagName(r.NON_LINEAR_ADS).length?e.nonLinearAds=this._parseCreativeNonLinearAds(t.getElementsByTagName(r.NON_LINEAR_ADS)):0!=t.getElementsByTagName(r.COMPANION_ADS).length&&(e.companionAds=this._parseCreativeCompanionAds(t.getElementsByTagName(r.COMPANION_ADS))),e},_parseCreativeLinear:function(t){for(var e=new l,n=t[0].childNodes,i=n.length,o=0;o<i;o++)n[o].nodeName==r.DURATION?e.duration=a.textContent(n[o]):n[o].nodeName==r.TRACKING_EVENTS?e.trackingEvents=this._parseTrackingEvents(n[o]):n[o].nodeName==r.VIDEO_CLICKS?e.videoClick=this._parseVideoClick(n[o]):n[o].nodeName==r.MEDIA_FILES&&(e.mediaFiles=this._parseMediaFiles(n[o]));return e},_parseCreativeNonLinearAds:function(t){for(var e=[],n=t[0].getElementsByTagName(r.NON_LINEAR),i=n.length,o=0;o<i;o++){var s=new c;s.id=n[o].getAttribute(r.ID),s.width=n[o].getAttribute(r.WIDTH),s.height=n[o].getAttribute(r.HEIGHT),s.expandedWidth=n[o].getAttribute(r.EXPANDED_WIDTH),s.expandedHeight=n[o].getAttribute(r.EXPANDED_HEIGHT),s.scalable="true"==n[o].getAttribute(r.SCALABLE),s.maintainAspectRatio="true"==n[o].getAttribute(r.MAINTAIN_ASPECT_RATIO),s.apiFramework=n[o].getAttribute(r.API_FRAMEWORK),s.minSuggestedDuration=n[o].getAttribute(r.MIN_SUGGESTED_DURATION);for(var u=n[o].childNodes,l=u.length,d=0;d<l;d++)if(u[d].nodeName==r.AD_PARAMETERS)s.adParameters=a.textContent(u[d]);else if(u[d].nodeName==r.NON_LINEAR_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[d]));else if(u[d].nodeName==r.IFRAME_RESOURCE){var h=new m;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[d]))}else if(u[d].nodeName==r.HTML_RESOURCE){var h=new m;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[d])}else if(u[d].nodeName==r.STATIC_RESOURCE){var h=new m;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[d].getAttribute(r.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[d]))}e.push(s)}return s},_parseCreativeCompanionAds:function(t){for(var e=[],n=t[0].getElementsByTagName(r.COMPANION),i=n.length,o=0;o<i;o++){var s=new d;s.id=n[o].getAttribute(r.ID),s.width=n[o].getAttribute(r.WIDTH),s.height=n[o].getAttribute(r.HEIGHT),s.expandedWidth=n[o].getAttribute(r.EXPANDED_WIDTH),s.expandedHeight=n[o].getAttribute(r.EXPANDED_HEIGHT);for(var u=n[o].childNodes,l=u.length,c=0;c<l;c++)if(u[c].nodeName==r.AD_PARAMETERS)s.adParameters=a.textContent(u[c]);else if(u[c].nodeName==r.ALT_TEXT)s.altText=a.textContent(u[c]);else if(u[c].nodeName==r.COMPANION_CLICK_THROUGH)s.clickThroughURL=this.trim(a.textContent(u[c]));else if(u[c].nodeName==r.IFRAME_RESOURCE){var h=new m;h.name=h.IFRAME,s.resourceType=h,s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==r.HTML_RESOURCE){var h=new m;h.name=h.HTML,s.resourceType=h,s.code=a.textContent(u[c])}else if(u[c].nodeName==r.STATIC_RESOURCE){var h=new m;h.name=h.STATIC,s.resourceType=h,s.creativeType=u[c].getAttribute(r.CREATIVE_TYPE),s.url=this.trim(a.textContent(u[c]))}else if(u[c].nodeName==r.TRACKING_EVENTS){var f=u[c].getElementsByTagName(r.TRACKING),p=f.length;if(p>0){s.creativeView=[];for(var g=0;g<p;g++){var v=f[g].getAttribute(r.EVENT);v==r.CREATIVE_VIEW&&s.creativeView.push(this.trim(a.textContent(f[g])))}}}e.push(s)}return e},_parseTrackingEvents:function(t){for(var e=[],n=t.getElementsByTagName(r.TRACKING),i=n.length,o=0;o<i;o++){var s=new h;s.urls.push(a.textContent(n[o])),s.type=n[o].getAttribute(r.EVENT),e.push(s)}return e},_parseVideoClick:function(t){for(var e=new f,n=t.childNodes,i=n.length,o=0;o<i;o++)n[o].nodeName==r.CLICK_THROUGH?e.clickThrough=this.trim(a.textContent(n[o])):n[o].nodeName==r.CLICK_TRACKING?e.clickTrackings.push(this.trim(a.textContent(n[o]))):n[o].nodeName==r.CUSTOM_CLICK&&e.customClicks.push(this.trim(a.textContent(n[o])));return e},_parseMediaFiles:function(t){for(var e=[],n=t.getElementsByTagName(r.MEDIA_FILE),i=n.length,o=0;o<i;o++){var s=new p;s.id=n[o].getAttribute(r.ID),s.bitrate=n[o].getAttribute(r.BITRATE),s.height=n[o].getAttribute(r.HEIGHT),s.width=n[o].getAttribute(r.WIDTH),s.delivery=n[o].getAttribute(r.DELIVERY),s.type=n[o].getAttribute(r.TYPE),s.scalable="true"==n[o].getAttribute(r.SCALABLE),s.maintainAspectRatio="true"==n[o].getAttribute(r.MAINTAIN_ASPECT_RATIO),s.apiFramework=n[o].getAttribute(r.API_FRAMEWORK),s.url=this.trim(a.textContent(n[o])),e.push(s)}return e}});return g}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(2),r(3)],i=function(t,e,r){var n=t([],{TDAS_REG_ONLY:"tdas-reg-only",constructor:function(t,n){this.mediaPlayer=t("MediaPlayer"),this.userRegistration=t("UserRegistration"),this.mediaPlayer.addHqTag(this.TDAS_REG_ONLY),r(n,"stream-start",e.hitch(this,this._onStreamStarted)),r(n,"stream-stop",e.hitch(this,this._onStreamStopped)),r(n,"user-logged-out",e.hitch(this,this._onUserLoggedOut)),r(n,"user-details",e.hitch(this,this._onUserDetails)),this.inherited(arguments)},_onStreamStarted:function(){this.userRegistration.triggerEvent("playerStart")},_onStreamStopped:function(){this.userRegistration.triggerEvent("playerStop")},_onUserLoggedOut:function(t){this._removeUserParameters(),this.mediaPlayer.disableHQ()},_onUserDetails:function(t){if(t.data||t.data){var e={};if(t.data.dob){var r=t.data.dob.split("/");e.dob=r[2]+"-"+r[0]+"-"+r[1]}t.data.gender&&(e.gender=t.data.gender.substr(0,1).toLowerCase()),t.data.zip&&(e.postalcode=t.data.zip),t.data.country&&(e.country=t.data.country),t.data.vid&&(e["tdas-vid"]=this.userRegistration.tenantId.toString()+"."+t.data.vid.toString()),t.data.tdas&&(e["tdas-utags"]=t.data.tdas["user-tags"],e["tdas-utcheck"]=t.data.tdas["user-tags-hash"]),void 0==this.mediaPlayer.config.defaultTrackingParameters&&(this.mediaPlayer.config.defaultTrackingParameters={}),this.mediaPlayer.config.defaultTrackingParameters.user=e,this.mediaPlayer.enableHQ()}},_removeUserParameters:function(){this.mediaPlayer.config.defaultTrackingParameters.user={}}});return n}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;(function(a){var o=r(18),s=r(15);n=[r(1),r(2),r(7),r(69),r(70),r(11)],i=function(t,e,r,n,i,u){var l=t([i],{eventMap:{onPlayerReady:"tech-ready",onStreamStarted:"stream-start",onStreamStopped:"stream-stop",onStreamFailed:"stream-fail",onStreamStatus:"_onStreamStatus",onTrackCuePoint:"_onTrackCuePoint",onSpeechCuePoint:"_onSpeechCuePoint",onCustomCuePoint:"_onCustomCuePoint",onTargetSpot:"targetspot-cue-point",onAdBreak:"_onAdBreakCuePoint",onSeekFailed:"seek-fail",onSeekInvalidTime:"seek-invalid-time",onTimeShiftPlaybackModeChanged:"time-shift-playback-mode-change",onTimeShiftStreamStart:"time-shift-stream-start",onTimeShiftPlayheadUpdate:"time-shift-playhead-update",onAdPlaybackStart:"ad-playback-start",onAdPlaybackComplete:"ad-playback-complete",onAdPlaybackError:"_onAdPlaybackError",onAdPlaybackSkippableState:"ad-playback-skippable-state",onAdCountdown:"ad-countdown",onAdQuartile:"ad-quartile",onVastProcessComplete:"vast-process-complete",onVastCompanionsReady:"vast-companions-ready",onConfigurationError:"configuration-error",onVideoMidRollPlaybackStart:"video-mid-roll-playback-start",onVideoMidRollPlaybackComplete:"video-mid-roll-playback-complete",onVpaidAdCompanions:"vpaid-ad-companions",onMediaLoadingStatus:"media-loading-status",onMediaPlaybackStatus:"_onMediaPlaybackStatus",onMediaPlaybackTimeUpdate:"media-playback-timeupdate",onMediaPlaybackMetadata:"media-playback-metadata",onMediaError:"_onMediaError"},statusMap:{LIVE_PAUSE:"paused",LIVE_PLAYING:"onAir",LIVE_STOP:"disconnected",LIVE_FAILED:"streamUnavailable",LIVE_BUFFERING:"buffering",LIVE_CONNECTING:"connecting",LIVE_RECONNECTING:"reconnecting",MEDIA_TIME_UPDATE:"timeupdate",MEDIA_SEEK_FAILED:"seekfailed",MEDIA_SEEK_INVALID_TIME:"seekinvalidtime",MEDIA_ENDED:"ended",
MEDIA_PAUSED:"pause",MEDIA_STARTED:"play",MEDIA_STOPPED:"stop",MEDIA_RESUMED:"play",MEDIA_SEEKED:"play",MEDIA_BUFFERING:"buffering"},minimumVersionRequired:{major:10,minor:2,rev:0},CDN_URL:"sdk.listenlive.co",constructor:function(t,e,r){this.errorCode=new n,this.config.platformId=void 0!=this.config.platformId&&""!=this.config.platformId?this.config.platformId:"prod01";var i=new s(this.config.platformId);this.config.moduleDir=i.endpoint.coreModuleDir,this._isAdBreak=!1,this.inherited(arguments)},start:function(){return this.isMinimalRequiredVersion(this.minimumVersionRequired.major,this.minimumVersionRequired.minor,this.minimumVersionRequired.rev)?(this.inherited(arguments),this.swfPath=this.config.tdPlayerPath||this._getApiSwfUrl(),void this._embedFlash()):void this._onError(this.errorCode.flashModuleMap.flashPluginOutOfDate)},_getApiSwfUrl:function(){var t=this.CDN_URL;return"//"+t+"/tdplayerapi/swf/tdplayer-api-6.0.swf"},_onReady:function(){},_onError:function(t){console.error("flash::_onError - code : "+t.code+", message : "+t.message),this.emit("tech-error",{error:t})},prepare:function(t){this.inherited(arguments)},playStream:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_playStream&&this.flashMovie.tdPlayer_playStream(t)},pauseStream:function(){this.inherited(arguments),this.flashMovie.tdPlayer_pauseStream()},stopStream:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_stopStream&&this.flashMovie.tdPlayer_stopStream()},resumeStream:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_resumeStream&&this.flashMovie.tdPlayer_resumeStream()},seekStream:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_seekStream&&this.flashMovie.tdPlayer_seekStream(t)},seekLive:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_seekLive&&this.flashMovie.tdPlayer_seekLive()},setVolume:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_setVolume&&this.flashMovie.tdPlayer_setVolume(t)},mute:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_mute&&this.flashMovie.tdPlayer_mute()},unMute:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_unMute&&this.flashMovie.tdPlayer_unMute()},playAd:function(t,e){this.inherited(arguments),e.companionAdSelectionSettings=this.config.companionAdSelectionSettings,"function"==typeof this.flashMovie.tdPlayer_playAd&&this.flashMovie.tdPlayer_playAd(t,e)},skipAd:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_skipAd&&this.flashMovie.tdPlayer_skipAd()},destroyAd:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_destroyAd&&this.flashMovie.tdPlayer_destroyAd(),0!=t&&this.emit("ad-playback-destroy")},playMedia:function(t){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_playMedia&&this.flashMovie.tdPlayer_playMedia({url:t.url,autoStart:!0})},pauseMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_pauseMedia&&this.flashMovie.tdPlayer_pauseMedia()},resumeMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_resumeMedia&&this.flashMovie.tdPlayer_resumeMedia()},stopMedia:function(){this.inherited(arguments),"function"==typeof this.flashMovie.tdPlayer_stopMedia&&this.flashMovie.tdPlayer_stopMedia()},seekMedia:function(t){this.inherited(arguments),0==t&&(t=.001),"function"==typeof this.flashMovie.tdPlayer_seekMedia&&this.flashMovie.tdPlayer_seekMedia(t)},_onStreamStatus:function(t){var e=r.byId(t.id,document);if(e){var n=o.getLocalization(),i=this.statusMap[t.code];i&&n[i]&&(t.status=n[i]),this.emit("stream-status",t,e)}},_onMediaPlaybackStatus:function(t){var e=r.byId(t.id,document);if(e){var n=o.getLocalization(),i=this.statusMap[t.code];i&&n[i]&&(t.status=n[i]),"MEDIA_STARTED"===t.code&&this.emit("media-playback-started"),this.emit("media-playback-status",t,e)}},_onMediaError:function(t){var e=r.byId(t.id,document);if(e){var n=o.getLocalization();n.error&&(t.error=n.error),this.emit("media-playback-error",t,e)}},_onTrackCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("track-cue-point",t)},_onSpeechCuePoint:function(t){t.cuePoint&&(t.cuePoint.mount=this.connection.mount),this.emit("speech-cue-point",t)},_onCustomCuePoint:function(t){t.cuePoint&&(t.cuePoint.mount=this.connection.mount),this.emit("custom-cue-point",t)},_onAdBreakCuePoint:function(t){this._adBreak=!!t.adBreakData.isVastInStream,this.emit("ad-break-cue-point",t)},_onAdPlaybackError:function(t){this._adBreak||this.emit("ad-playback-error",t)},_tdPlayerEvents:function(t,n){var i=r.byId(n.id,document);if("_"==this.eventMap[t].substr(0,1)){var a=e.hitch(this,this.eventMap[t]);a(n,t)}else i&&this.eventMap[t]&&this.emit(this.eventMap[t],n,i)},_embedFlash:function(){window.tdPlayerEvents=e.hitch(this,this._tdPlayerEvents);var t=o.getLocalization(),r=[{id:"directLiveStream"}];r[0].timeshift=this.config.timeShift?{active:this.config.timeShift.active||0,max_listening_time:this.config.timeShift.max_listening_time||30}:{active:0},void 0!=this.config.plugins&&this.config.plugins.length>0&&(r=r.concat(this.config.plugins));var n={playercore:{platform_id:this.config.platformId,plugins:r}};null!=this.config.moduleDir&&(n.playercore.module_dir=this.config.moduleDir),document.getElementById(this.config.playerId).innerHTML="";var i="flash_content";u.create("div",{id:i},document.getElementById(this.config.playerId)),a.embedSWF(this.swfPath,i,"100%","100%",this.minimumVersionRequired.major+"."+this.minimumVersionRequired.minor+"."+this.minimumVersionRequired.rev,!1,{isDebug:this.config.isDebug,config:encodeURIComponent(JSON.stringify(n)),id:this.playerNode.id},{scale:"showall",wmode:"transparent",allowScriptAccess:"always",allowNetworking:"all",hasPriority:"true"},!1,e.hitch(this,function(e){e.success?(this.flashMovie=e.ref,this._onReady()):this._onError({message:t.embedFailed})}))},isMinimalRequiredVersion:function(t,e,r){var n=a.getFlashPlayerVersion();return t<n.major||!(t>n.major)&&(0==e||e<n.minor||!(e>n.minor)&&(0==r||r<n.rev||!(r>n.rev)))}});return l}.apply(e,n),!(void 0!==i&&(t.exports=i))}).call(e,r(37))},function(t,e,r){var n,i;n=[r(1),r(2),r(26),r(11),r(69),r(70),r(60),r(38),r(134),r(135)],i=function(t,e,r,n,i,a,o,s,u,l){var c=t([a],{constructor:function(t,e,r){this.errorCode=new i,this.playbackStatus=null,this.html5CheckerNode=null,this.target=e,this.inherited(arguments)},start:function(){return this._isHTML5Supported()?(this.inherited(arguments),this.html5Live=new u(this.playerNode,this.config),this.html5Live.setPlaybackStatusHandler(e.hitch(this,this._onPlaybackStatus)),this.html5Live.setCuePointHandler(e.hitch(this,this._onTrackCuePoint)),this.html5Live.setAdBreakHandler(e.hitch(this,this._onAdBreak)),this.html5Live.setHlsCuePointHandler(e.hitch(this,this._onHlsCuePoint)),this.html5Live.setSpeechCuePointHandler(e.hitch(this,this._onSpeechCuePoint)),this.html5Live.setCustomCuePointHandler(e.hitch(this,this._onCustomCuePoint)),this.html5Live.setStreamStartHandler(e.hitch(this,this._onStreamStart)),this.html5Live.setStreamStopHandler(e.hitch(this,this._onStreamStop)),this.html5Live.setStreamFailedHandler(e.hitch(this,this._onStreamFailed)),this.html5OnDemand=new l(this.playerNode),this._isMediaTagInitialized=!1,void this.emit("tech-ready",{id:this.playerNode})):void this.emit("tech-error",{error:this.errorCode.html5ModuleMap.browserNotSupported})},prepare:function(t){this.inherited(arguments),this._initMediaTag()},playStream:function(t){this.params=t,this.inherited(arguments),this._isMediaTagInitialized||this._initMediaTag(),this.html5OnDemand.clean(),this.html5Live.play(t)},pauseStream:function(){this.inherited(arguments),this.html5Live.pause()},stopStream:function(){this.inherited(arguments),this.html5Live.stop()},resumeStream:function(){this.inherited(arguments),this.html5Live.resume()},seekStream:function(t){this.inherited(arguments)},seekLive:function(){this.inherited(arguments)},setVolume:function(t){this.inherited(arguments),this.html5Live.setVolume(t),this.html5OnDemand.setVolume(t)},mute:function(){this.inherited(arguments),this.html5Live.mute(),this.html5OnDemand.mute()},unMute:function(){this.inherited(arguments),this.html5Live.unMute(this.params),this.html5OnDemand.unMute(this.params)},playMedia:function(t){this.params=t,void 0!=this.html5OnDemand&&(this.inherited(arguments),this.playbackOnDemandStatushandler=this.html5OnDemand.setPlaybackStatusHandler(e.hitch(this,this._onMediaPlaybackStatus)),this.html5OnDemand.play({mediaUrl:t.url,mediaFormat:"audio"}))},pauseMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.pause())},resumeMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.resume())},stopMedia:function(t){void 0!=this.html5OnDemand&&(this.inherited(arguments),this.html5OnDemand.stop())},seekMedia:function(t){this.inherited(arguments),this.html5OnDemand.seek(t)},_initMediaTag:function(){this.html5OnDemand.initMediaTag(),this._isMediaTagInitialized=!0},_onTrackCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("track-cue-point",t)},_onSpeechCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("speech-cue-point",t)},_onCustomCuePoint:function(t){t.cuePoint&&this.connection.mount&&(t.cuePoint.mount=this.connection.mount),this.emit("custom-cue-point",t)},_onHlsCuePoint:function(t){if(this.emit("hls-cue-point",t),t.cuePoint&&t.cuePoint.hlsTrackId){var e=this.connection.mountpoint.mediaFormat.audioTracks;e&&e.length&&e.length>=t.cuePoint.hlsTrackId&&this._currentBitrate!=e[t.cuePoint.hlsTrackId].bitRate&&(this._currentBitrate=e[t.cuePoint.hlsTrackId].bitRate,this.setCurrentTrack(e[t.cuePoint.hlsTrackId]),t.cuePoint.audioTrack=e[t.cuePoint.hlsTrackId],this.emit("stream-track-change",t))}},_onAdBreak:function(t){void 0!=t.cuePoint&&(t.adBreakData={},t.adBreakData.adVast=void 0!=t.cuePoint[s.AD_VAST]&&""!=t.cuePoint[s.AD_VAST]?t.cuePoint[s.AD_VAST]:null,t.adBreakData.cueID=void 0!=t.cuePoint[s.AD_ID]&&""!=t.cuePoint[s.AD_ID]?t.cuePoint[s.AD_ID]:null,t.adBreakData.cueTitle=void 0!=t.cuePoint[s.CUE_TITLE]&&""!=t.cuePoint[s.CUE_TITLE]?t.cuePoint[s.CUE_TITLE]:null,t.adBreakData.duration=void 0!=t.cuePoint[s.CUE_TIME_DURATION]&&""!=t.cuePoint[s.CUE_TIME_DURATION]?t.cuePoint[s.CUE_TIME_DURATION]:null,t.adBreakData.isVastInStream=!!(void 0!=t.cuePoint[s.AD_VAST_URL]&&""!=t.cuePoint[s.AD_VAST_URL]||t.cuePoint[s.AD_VAST]&&""!=t.cuePoint[s.AD_VAST]),t.adBreakData.url=void 0!=t.cuePoint[s.AD_URL]&&""!=t.cuePoint[s.AD_URL]?t.cuePoint[s.AD_URL]:null,t.adBreakData.vastUrl=void 0!=t.cuePoint[s.AD_VAST_URL]&&""!=t.cuePoint[s.AD_VAST_URL]?t.cuePoint[s.AD_VAST_URL]:null),1==t.adBreakData.isVastInStream&&(t.adBreakData.adVast||t.adBreakData.vastUrl)&&r.publish("api/request","get-vast-instream",t.adBreakData),this.emit("ad-break-cue-point",t)},_onPlaybackStatus:function(t){this.playbackStatus!=t.code&&(this.playbackStatus=t.code,this.emit("stream-status",t))},_onMediaPlaybackStatus:function(t){return"Error"==t.type?void this.emit("media-playback-error",{error:t.type,mediaElement:t.html5Node}):"timeupdate"==t.type?void this.emit("media-playback-timeupdate",{status:t.type,code:t.code,duration:parseInt(t.html5Node.duration),playedTime:parseInt(t.html5Node.currentTime),remainingTime:parseInt(t.html5Node.duration-t.html5Node.currentTime),percent:(t.html5Node.currentTime/t.html5Node.duration).toFixed(2)}):(this.emit("media-playback-status",{status:t.type,mediaElement:t.html5Node}),"play"==t.type&&this.emit("media-playback-started"),void("Ended"==t.type&&this.html5OnDemand.stop()))},_onMediaLoadingStatus:function(t){this.emit("media-loading-status",{percent:t.percent,mediaElement:t.html5Node})},_onStreamStart:function(){this._currentBitrate=null,this.setCurrentTrack(null),this.emit("stream-start")},_onStreamStop:function(){this.setCurrentTrack(null),this.emit("stream-stop")},_onStreamFailed:function(){this.setCurrentTrack(null),this.emit("stream-fail")},_isHTML5Supported:function(){this.html5CheckerNode=n.create("audio",{id:"testHtml5Node"},this.playerNode,"first");var t=!!this.html5CheckerNode.canPlayType;return null!=this.html5CheckerNode&&n.destroy(this.html5CheckerNode),t}});return c}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(3),r(13),r(2),r(64)],i=function(t,e,r,n,i){var a=t([],{POLLING_DELAY:5e3,constructor:function(t){this.mount=null,this._cuePoint=[],this._adBreaks=[],this._npChecker=0,this._npTimerId=null,this._init(t)},_init:function(t){var a=null;this.nowPlayingApi=new i(t,new r),a=this.nowPlayingApi.target,this._onCuePointHandler=n.hitch(this,this._onCuePoint),this._onEmptyCuePointHandler=n.hitch(this,this._onEmptyCuePoint),null!=a&&(e(a,"cue-point",this._onCuePointHandler),e(a,"cue-point-empty",this._onEmptyCuePointHandler))},startCuePointsListener:function(t){this.mount=t,this._getNowPlaying(this.mount),this._npTimerId=setInterval(n.hitch(this,function(){n.hitch(this,this._getNowPlaying(this.mount))}),this.POLLING_DELAY)},stopCuePointsListener:function(){clearInterval(this._npTimerId),this._cuePoint.length>0&&this._cuePoint.pop()},setTrackCuePointCallback:function(t){this._trackCuePointCallback=t},setAdBreakCuePointCallback:function(t){this._adBreakCuePointCallback=t},_getNowPlaying:function(t){this.nowPlayingApi.load({mount:t,hd:!1,numberToFetch:1,eventType:"track",mode:"nowPlaying"})},_onCuePoint:function(t){this.currentCuePoint=t.data.cuePoint,this.currentCuePoint.adUrl=null,this.currentCuePoint.cueTimeDuration=parseInt(this.currentCuePoint.cueTimeDuration)>0?parseInt(this.currentCuePoint.cueTimeDuration):15e3,this.currentMount=t.data.mount;var e=this.currentCuePoint.type,r=this.currentCuePoint.timestamp;if("ad"==e){if("endbreak"==this.currentCuePoint.adType)return;this._onAdBreak(r)}else{var n=this.currentCuePoint.artistName,i=this.currentCuePoint.cueTitle;if(this._cuePoint.length>0)for(var a=0;a<this._cuePoint.length;a++)if(this._cuePoint[a].artist==n&&this._cuePoint[a].title==i)return;void 0!=n&&void 0!=i&&this._onTrack(n,i)}},_onTrack:function(t,e){this._cuePoint.length>1&&this._cuePoint.shift(),this._cuePoint.push({artist:t,title:e}),this._trackCuePointCallback({mount:this.currentMount,cuePoint:this.currentCuePoint})},_onEmptyCuePoint:function(){this._npChecker+=1,3==this._npChecker&&(clearInterval(this._npTimerId),this._npChecker=0)},_onAdBreak:function(t){var e=this._adBreakChecker(t);0==e&&this._adBreakCuePointCallback({mount:this.currentMount,cuePoint:this.currentCuePoint})},_adBreakChecker:function(t){if(0==this._adBreaks.length)return this._adBreaks.push({timestamp:t}),0==this._cuePoint.length;for(var e=0;e<this._adBreaks.length;e++)if(this._adBreaks[e].timestamp==t)return!0;return this._adBreaks.length>2&&this._adBreaks.shift(),this._adBreaks.push({timestamp:t}),!1}});return a}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(18),o=r(20),s=r(36),u=(r(62),r(22));n=[r(1),r(13),r(2),r(11),r(19),r(7),r(39),r(71),r(150),r(133)],i=function(t,e,r,n,i,l,c,d,h,f){var p=t([e],{statusMap:{abort:{status:"connecting",code:"LIVE_CONNECTING"},canPlay:{status:"buffering",code:"LIVE_BUFFERING"},canPlayThrough:{status:"onAir",code:"LIVE_PLAYING"},dataLoading:{status:"buffering",code:"LIVE_BUFFERING"},emptied:{status:"connecting",code:"LIVE_CONNECTING"},ended:{status:"disconnected",code:"LIVE_STOP"},error:{status:"streamUnavailable",code:"LIVE_FAILED"},loadStart:{status:"connecting",code:"LIVE_CONNECTING"},pause:{status:"paused",code:"LIVE_PAUSE"},play:{status:"onAir",code:"LIVE_PLAYING"},progress:{status:"onAir",code:"LIVE_PLAYING"},reconnecting:{status:"reconnecting",code:"LIVE_RECONNECTING"},stalled:{status:"disconnected",code:"LIVE_STOP"},stop:{status:"disconnected",code:"LIVE_STOP"},suspend:{status:"connecting",code:"LIVE_CONNECTING"},waiting:{status:"buffering",code:"LIVE_BUFFERING"},playbackNotAllowed:{status:"playbackNotAllowed",code:"PLAY_NOT_ALLOWED"}},constructor:function(t,e){this.playerNode=t,this.cfg=e,this.html5Node=null,this.audioNode=null,this.connections=null,this._playbackStatusCallback=null,this._cuePointCallback=null,this._adBreakCallback=null,this._hlsCuePointCallback=null,this._speechCuePointCallback=null,this._customCuePointCallback=null,this._streamStartCallback=null,this._streamStopCallback=null,this._streamFailedCallback=null,this.isPaused=!1,this.audioEventListenersAttached=!1},setPlaybackStatusHandler:function(t){this._playbackStatusCallback=t},setCuePointHandler:function(t){this._cuePointCallback=t},setAdBreakHandler:function(t){this._adBreakCallback=t},setHlsCuePointHandler:function(t){this._hlsCuePointCallback=t},setSpeechCuePointHandler:function(t){this._speechCuePointCallback=t},setCustomCuePointHandler:function(t){this._customCuePointCallback=t},setStreamStartHandler:function(t){this._streamStartCallback=t},setStreamStopHandler:function(t){this._streamStopCallback=t},setStreamFailedHandler:function(t){this._streamFailedCallback=t},play:function(t){t&&(this._liveApiParams=t,this.mount=this._liveApiParams.mount,this.__isSidebandMetadataActivated()?(this.sidebandMetadata&&this.sidebandMetadata.destroy(),this.__activateSidebandMetadata()):this.__isASyncCuePointDispatcherActivated()&&this.__activateAsyncCuePointDispatcher(),this.__initAudioElement(),s.isSupported()&&this._liveApiParams.isHLS&&"Safari"!==o.name?u.playAudio(this._liveApiParams.url,!0,!0):u.playAudio(this._liveApiParams.url,!1,!0))},pause:function(){this.isPaused=!1,u.stop()},stop:function(){u.stop()},resume:function(){u.resume()},seekStream:function(t){},seekLive:function(){},setVolume:function(t){u.setVolume(t)},mute:function(){!u.audioNode||u.audioNode.paused||u.isStopped()||u.mute()},unMute:function(t){u.isStopped()&&(u.unMute(),this.play(t))},__initAudioElement:function(){0==this.audioEventListenersAttached&&(u.on("destroyAudioElement",this.__destroyAudioElement),u.on("html5-playback-status",r.hitch(this,this.__onHTML5PlayerStatus)),this.audioEventListenersAttached=!0)},__destroyAudioElement:function(){u.removeAllListeners("html5-playback-status"),u.removeAllListeners("destroyAudioElement"),this.sidebandMetadata&&this.sidebandMetadata.destroy()},__onHTML5PlayerStatus:function(t){this.__emitPlaybackStatus(t),t.type==c.PLAY?(!this.isPaused&&this.__isSidebandMetadataActivated()&&this.sidebandMetadata?this.sidebandMetadata.init(this._liveApiParams):this.aSyncCuePointDispatcher&&this.aSyncCuePointDispatcher.startCuePointsListener(this.mount),this.isPaused=!1,this._streamStartCallback()):t.type!=c.STOP&&t.type!=c.PAUSE&&t.type!=c.ERROR&&t.type!=c.ABORT&&t.type!=c.ENDED&&t.type!=c.PLAY_NOT_ALLOWED||(this.aSyncCuePointDispatcher&&this.aSyncCuePointDispatcher.stopCuePointsListener(),t.type!=c.STOP&&t.type!=c.ERROR&&t.type!=c.ABORT&&t.type!=c.PLAY_NOT_ALLOWED||(this.__isSidebandMetadataActivated()&&this.sidebandMetadata&&this.sidebandMetadata.destroy(),this._streamStopCallback()),t.type!=c.ERROR&&t.type!=c.ENDED||this._streamFailedCallback())},__isSidebandMetadataActivated:function(){return void 0!=this._liveApiParams&&void 0!=this._liveApiParams.sbmConfig&&null!==this._liveApiParams.sbmConfig&&this._liveApiParams.sbmConfig.active&&this._liveApiParams.sbmConfig.info.active},__isASyncCuePointDispatcherActivated:function(){return void 0!=this._liveApiParams&&this._liveApiParams.sbmConfig&&this._liveApiParams.sbmConfig.aSyncCuePointFallback},__onCuePoint:function(t){this._cuePointCallback(t)},__onHlsCuePoint:function(t){this._hlsCuePointCallback(t)},__onSpeechCuePoint:function(t){this._speechCuePointCallback(t)},__onCustomCuePoint:function(t){this._customCuePointCallback(t)},__onAdBreak:function(t){this._adBreakCallback(t)},__activateSidebandMetadata:function(){this.sidebandMetadata||(this.sidebandMetadata=new h(this.audioNode)),this._liveApiParams.url=this.sidebandMetadata.getStreamConnectionUrl(this._liveApiParams.url),this.sidebandMetadata.setTrackCuePointCallback(r.hitch(this,this.__onCuePoint)),this.sidebandMetadata.setAdBreakCuePointCallback(r.hitch(this,this.__onAdBreak)),this.sidebandMetadata.setHlsCuePointCallback(r.hitch(this,this.__onHlsCuePoint)),this.sidebandMetadata.setSpeechCuePointCallback(r.hitch(this,this.__onSpeechCuePoint)),this.sidebandMetadata.setCustomCuePointCallback(r.hitch(this,this.__onCustomCuePoint)),this._liveApiParams.sbmConfig.aSyncCuePointFallback&&this.sidebandMetadata.setErrorCallback(r.hitch(this,this.__onSidebandMetadataError))},__activateAsyncCuePointDispatcher:function(){void 0==this.aSyncCuePointDispatcher&&(this.aSyncCuePointDispatcher=new f(this.cfg),this.aSyncCuePointDispatcher.setTrackCuePointCallback(r.hitch(this,this.__onCuePoint)),this.aSyncCuePointDispatcher.setAdBreakCuePointCallback(r.hitch(this,this.__onAdBreak)))},__onSidebandMetadataError:function(){u.isStopped()||(this.aSyncCuePointDispatcher||this.__activateAsyncCuePointDispatcher(),this.aSyncCuePointDispatcher.startCuePointsListener(this.mount))},__emitPlaybackStatus:function(t){if(null!=this._playbackStatusCallback){var e=a.getLocalization();if(void 0==e)return;var r=this.statusMap[t.type];r&&e[r.status]&&this._playbackStatusCallback({status:e[r.status],code:r.code})}}});return p}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i,a=r(18);n=[r(1),r(2),r(3),r(13),r(11),r(19),r(23),r(4),r(71)],i=function(t,e,r,n,i,o,s,u,l){var c=t([n],{constructor:function(t){this.playerNode=t,this.html5Player=new l,this.html5Player.on("html5-playback-status",e.hitch(this,this.__onHTML5PlayerStatus)),this.html5OnDemandNode=this.__createHTML5Elements(),this._playbackStatusCallback=null,this._clickTrackingElementClickedCallback=null,this._adServerType=null,this._clickThrough=null,this._clickTrackings=null,this.onVideoNodeClickHandler=r(this.html5OnDemandNode,"click",e.hitch(this,this.__onVideoNodeClick)),this.onVideoNodeTouchHandler=r(this.html5OnDemandNode,"touchstart",e.hitch(this,this.__onVideoNodeClick))},play:function(t){this._adServerType=null,this.html5Player.play({url:t.mediaUrl,type:t.mediaFormat,mediaNode:this.audioNode,isLive:!1})},playAd:function(t){this.__initHtml5AdPlayer(this.videoNode),this._clickThrough=t.clickThrough,this._clickTrackings=t.clickTrackings,this._adServerType=t.adServerType,this.html5Player.play({url:t.mediaUrl,type:t.mediaFormat,mediaNode:this.videoNode,isLive:!1})},skip:function(){void 0!=this.html5Player&&(this.html5Player.skip(),this.__resetHTML5ElementsStyle(this.mediaNode))},stop:function(){void 0!=this.html5Player&&this.html5Player.stop()},pause:function(){void 0!=this.html5Player&&this.html5Player.pause()},resume:function(){void 0!=this.html5Player&&this.html5Player.resume()},seek:function(t){void 0!=this.html5Player&&this.html5Player.seek(t)},setVolume:function(t){null!=this.html5Player&&this.html5Player.setVolume(t)},mute:function(){null!=this.html5Player&&this.html5Player.mute()},unMute:function(){null!=this.html5Player&&this.html5Player.unMute()},initMediaTag:function(){this.audioNode||(this.audioNode=this.__createMediaTag("audio")),this.videoNode||(this.videoNode=this.__createMediaTag("video"))},setPlaybackStatusHandler:function(t){this._playbackStatusCallback=t},setClickTrackingElementClickedHandler:function(t){this._clickTrackingElementClickedCallback=t},clean:function(){null!=this.audioNode&&(u("ie11")?(i.destroy(this.audioNode),this.audioNode=null):(o.has(this.audioNode,"src")&&o.remove(this.audioNode,"src"),"function"==typeof this.audioNode.webkitExitFullScreen&&this.audioNode.webkitExitFullScreen())),null!=this.videoNode&&(u("ie11")?(i.destroy(this.videoNode),this.videoNode=null):(o.has(this.videoNode,"src")&&o.remove(this.videoNode,"src"),"function"==typeof window.document.exitFullscreen&&window.document.fullscreen&&window.document.exitFullscreen(),this.__resetHTML5ElementsStyle(this.videoNode))),this.__createHTML5Elements()},__onHTML5PlayerStatus:function(t){t.adServerType=this._adServerType,this.__emitPlaybackStatus(t)},__emitPlaybackStatus:function(t){if(null!=this._playbackStatusCallback){var e=a.getLocalization();if(void 0==e)return;this._adServerType||"canPlayThrough"!=t.type||(t.type="play");var r=this.statusMap[t.type];r&&(statusMsg=e[r.status]?e[r.status]:r.status,codeMsg=e[r.code]?e[r.code]:r.code,this._playbackStatusCallback({type:statusMsg,code:codeMsg,html5Node:t.mediaNode,adServerType:t.adServerType}))}},__createHTML5Elements:function(){if(null==this.html5OnDemandNode){var t=i.create("div",{id:"tdplayer_ondemand"},this.playerNode,"first");return t}},__createMediaTag:function(t){if(t){var e=i.create(t,{id:"tdplayer_od_"+t+"node",type:t},this.html5OnDemandNode,"first");o.set(e,"height","0%"),o.set(e,"width","0%"),o.set(e,"x-webkit-airplay","allow");var r=i.create("source",{id:"tdplayer_od"+t+"source"},e,"first");o.set(r,"src",""),o.set(e,"playsinline","");try{e.play().catch(function(t){}),e.pause()}catch(t){}return e}},__initHtml5AdPlayer:function(t){this.initHTMLElementsStyle(t),this.isVideoClicked=!1},__resetHTML5ElementsStyle:function(t){t&&(s.set(t,"width","0px"),s.set(t,"height","0px"),s.set(t,"display","none"))},initHTMLElementsStyle:function(t){t&&(s.set(t,"width","100%"),s.set(t,"height","100%"),s.set(t,"display","block"),s.set(this.html5OnDemandNode,"width","100%"),s.set(this.html5OnDemandNode,"height","100%"),s.set(this.html5OnDemandNode,"background-color","#000000"),s.set(this.html5OnDemandNode,"display","block"))},__onVideoNodeClick:function(t){null!=this._clickThrough&&("touchstart"==t.type&&this.onVideoNodeClickHandler.remove(),this._clickTrackingElementClickedCallback({clickThrough:this._clickThrough,clickTrackings:this._clickTrackings}))},statusMap:{canPlay:{status:"buffering",code:"MEDIA_BUFFERING"},canPlayThrough:{status:"buffering",code:"MEDIA_BUFFERING"},dataLoading:{status:"buffering",code:"MEDIA_BUFFERING"},emptied:{status:"buffering",code:"MEDIA_BUFFERING"},ended:{status:"ended",code:"MEDIA_ENDED"},error:{status:"error",code:"MEDIA_ERROR"},loadStart:{status:"buffering",code:"MEDIA_BUFFERING"},pause:{status:"pause",code:"MEDIA_PAUSED"},play:{status:"play",code:"MEDIA_STARTED"},stalled:{status:"stop",code:"MEDIA_STOPPED"},stop:{status:"stop",code:"MEDIA_STOPPED"},suspend:{status:"buffering",code:"MEDIA_BUFFERING"},waiting:{status:"buffering",code:"MEDIA_BUFFERING"},timeupdate:{status:"timeupdate",code:"MEDIA_TIME_UPDATE"},playbackNotAllowed:{status:"playbackNotAllowed",code:"PLAY_NOT_ALLOWED"}}});return c}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){function r(t){function e(t,e){t.url=e.url?e.url._text:null,t.mount=e.mount?e.mount._text:null}this.url=null,this.mount=null,e(this,t)}t.exports=r},function(t,e){function r(t){function e(t,e){t.index=parseInt(e._attr.index._value),t.codec=e._attr.codec._value,t.bitRate=parseInt(e._attr.bitrate._value),t.sampleRate=parseInt(e._attr.samplerate._value),t.codec=e._attr.codec._value,t.channels=parseInt(e._attr.channels._value),t.isMP3=t.codec.indexOf("mp3")!==-1,t.isAAC=t.codec.indexOf("aac")!==-1}this.index=null,this.codec=null,this.bitRate=null,this.sampleRate=null,this.codec=null,this.channels=null,e(this,t)}t.exports=r},function(t,e,r){function n(t){if(this.streamingConnections=t,this.totalIteration=1,this.first=!1,this.last=!1,this.streamingConnectionIndex=0,i.isEmpty(this.streamingConnections))throw new Error("ConnectionIterator::constructor At least one connection is needed.");this.reset=function(){this.streamingConnectionIndex=0},this.current=function(){return this.streamingConnections[this.streamingConnectionIndex]},this.next=function(){return this.first=!1,this.streamingConnectionIndex++,this.last=i.last(this.streamingConnections)===this.streamingConnections[this.streamingConnectionIndex],this.current()},this.hasLooped=function(){return this.last},this.isLastConnectionByMount=function(){var t=i.groupBy(this.streamingConnections,"mount"),e=t[this.current().mount].length;return this.totalIteration===e?(this.totalIteration=1,!0):(this.totalIteration++,!1)},this.reset()}var i=r(8);t.exports=n},function(t,e,r){function n(t,e,r,n,c,h,f,p){function m(t,e){return i.flatMap(t,function(t){return i.flatMap(t.servers,function(r){return t.transports.map(function(n){var a=g(t),o=y(t);return{url:r+"/"+t.mount+(n.mountSuffix?n.mountSuffix:"")+("html5"===e.toLowerCase()?a:""),mount:t.mount,isGeoBlocked:t.status.isGeoBlocked,isAudioAdaptive:t.mediaFormat.isAudioAdaptive,alternateContent:t.alternateContent,mimeType:o,format:t.format,uuidEnabled:i.some(t.metrics,function(t){return"uuid"===t.name}),sendPageUrl:t.sendPageURL,hasVideo:t.mediaFormat.hasVideo,type:t.mediaFormat.type,metadata:t.metadata,tags:t.tags,mountpoint:t,isHLS:!!n.transport&&"hls"===n.transport.toLowerCase(),isHLSTS:!!n.transport&&"hlsts"===n.transport.toLowerCase()}})})})}function g(t){return t.mediaFormat.audioTracks[0].isMP3?".mp3":v(t)}function v(t){return!t.mediaFormat.audioTracks[0].isAAC||t.isAudioAdaptive||t.hasHLS()||t.hasHLSTS()?"":".aac"}function y(t){var e=null;return t.hasHLS()||t.mediaFormat.isAudioAdaptive?e="application/x-mpegURL":t.mediaFormat.audioTracks[0].isAAC?e="audio/mp4":t.mediaFormat.audioTracks[0].isMP3&&(e="audio/mpeg;codecs=mp3"),e}this.DEFAULT_TRANSPORTS=["http","hls","hlsts"],this.RTMP_TRANSPORTS=["rtmpe","rtmpte","rtmp","rtmpt"],this.mountPointsError=[];var _=new a(t),b=p?d+"//"+p+"-"+_.endpoint.liveStream:d+"//"+_.endpoint.liveStream,E=this;this.getStreamingConnections=function(t,i,a){var d=new o(b);return d.getLiveStreamConfig(t).then(function(t){var o=l.toSafeArray(t.mountpoints.mountpoint).filter(function(t){return t.status["status-code"]._text>=300&&E.mountPointsError.push(new s(t)),t.status["status-code"]._text<300}).map(function(t){return new s(t)});return o=u.filterMountPoints(o,e,r,i,a,!n,!c,h,f),m(o,r)})}}var i=r(8),a=r(15),o=r(140),s=r(143),u=r(72),l=r(30),c=r(21),d=c.getProtocol();t.exports=n},function(t,e,r){function n(t,e){return o.Promise(function(r,n,i){var a=new l;a.request(t,e,{handleAs:"xml",preventCache:!0,query:e,headers:{"X-Requested-With":null,"Content-Type":"text/plain; charset=utf-8"}},function(t,e){t.station||t.mount,r(e)},function(t,e){t.station?console.error("liveStreamAPI::_onLoadError - station:"+t.station):t.mount&&console.error("liveStreamAPI::_onLoadError - mount:"+t.mount),n(e)})})}function i(t){var e=s.assign({},t);if(void 0==e||null==e)throw new Error("liveStreamAPI::getLiveStreamConfig() A query must be provided.");if("string"==typeof e&&(e={station:e}),"object"!=typeof e)throw new Error("liveStreamAPI::getLiveStreamConfig() A query object must be provided.");if(!e.station&&!e.mount)throw new Error("liveStreamAPI::getLiveStreamConfig(): A query must contain at least a station or mount parameter.");return e.transports&&0!=e.transports.length||(e.transports=c),e.transports&&(e.transports=e.transports.join(",")),e}function a(t){var e=this;this.configs=[],this._requestProvisioningData=n,this.getConfig=function(t){var e;return t.station?e=this.configs[t.station]:delete t.station,t.mount?e=this.configs[t.mount+"_MOUNT"]:delete t.mount,e},this.getLiveStreamConfig=function(r){return o.Promise(function(n,a){try{var o=i(r)}catch(t){a(t)}var s=e.getConfig(o);s&&s.lastRefreshTime+d>=(new Date).getTime()?n(s):(o.version=h,e._requestProvisioningData(t,o).then(function(t){var r=u.xmlToJson(t);o.station?(e.configs[o.station]=r,e.configs[o.station].lastRefreshTime=(new Date).getTime()):o.mount&&(e.configs[o.mount+"_MOUNT"]=r,e.configs[o.mount+"_MOUNT"].lastRefreshTime=(new Date).getTime()),n(r)}))})}}var o=r(96),s=r(8),u=r(16),l=r(10),c=["http","hls","hlsts"],d=6e4,h=1.9;t.exports=a},function(t,e,r){function n(t){function e(t,e){t.container=e._attr.container._value,t.cuePoints=e._attr.cuepoints._value,t.trackScheme=e._attr.trackScheme._value;var r=a.toSafeArray(e.audio);t.audioTracks=r.map(function(t){return new o(t);
});var n=a.toSafeArray(e.video);t.videoTracks=n.map(function(t){return new s(t)}),t.isAudioAdaptive=t.trackScheme===l,t.hasAudio=!i.isEmpty(t.audioTracks),t.hasVideo=!i.isEmpty(t.videoTracks),t.type=t.hasVideo?u.VIDEO:u.AUDIO}this.container=null,this.cuePoints=null,this.trackScheme=null,this.audioTracks=null,this.videoTracks=null,this.hasAudio=null,this.hasVideo=null,this.type=null,this.isAudioAdaptive=null,e(this,t)}var i=r(8),a=r(30),o=r(137),s=r(149),u=r(62),l="audio-adaptive";t.exports=n},function(t,e){function r(t){function e(t,e){t.shoutcastV1=e["shoutcast-v1"]?{active:e["shoutcast-v1"]._attr.enabled._value,mountSuffix:e["shoutcast-v1"]._attr.mountSuffix._value}:null,t.shoutcastV2=e["shoutcast-v2"]?{active:e["shoutcast-v2"]._attr.enabled._value,mountSuffix:e["shoutcast-v2"]._attr.mountSuffix._value}:null,t.sseSideband=e["sse-sideband"]?{active:e["sse-sideband"]._attr.enabled._value,streamSuffix:e["sse-sideband"]._attr.streamSuffix._value,metadataSuffix:e["sse-sideband"]._attr.metadataSuffix._value}:null}this.shoutcastV1=null,this.shoutcastV2=null,this.sseSideband=null,e(this,t)}t.exports=r},function(t,e,r){function n(t){function e(t,e){t.alternateContent=e["alternate-content"]?new o(e["alternate-content"]):null,t.mount=e.mount._text||null,t.status=new s(e.status),e.status["status-code"]._text<300&&(t.tags=!e._attr||e._attr.tags||""===e._attr.tags._value?[]:e._attr.tags._value.split(",").map(function(t){return new u(t)}),t.transports=a.toSafeArray(e.transports.transport).map(function(t){return new l(t)}),t.metadata=new c(e.metadata),t.servers=new d(e.servers).servers,t.mediaFormat=new h(e["media-format"]),t.metrics=!e.metrics||i.isEmpty(e.metrics.tag)?[]:a.toSafeArray(e.metrics.tag).map(function(t){return new u(t)}),t.format=e.format._text||null,t.bitRate=i.toSafeInteger(e.bitrate._text),t.authentication=!!e.authentication&&!!parseInt(e.authentication._text),t.timeout=e.timeout?i.toSafeInteger(e.timeout._text):0,t.sendPageURL=!!e["send-page-url"]&&!!parseInt(e["send-page-url"]._text),t.isAvailable=!t.status.isError&&!t.status.isGeoBlocked&&!i.isEmpty(t.servers))}f.call(this),e(this,t),this.hasTag=function(t){return i.some(this.tags,function(e){return e.name==t})},this.hasMetric=function(t){return i.some(this.metrics,function(e){return e.name===t})}}var i=r(8),a=r(30),o=r(136),s=r(146),u=r(147),l=r(148),c=r(142),d=r(145),h=r(141),f=r(144);t.exports=n},function(t,e,r){function n(){this.hasHLS=function(t){return t||(t=this),i.some(t.transports,function(t){return"hls"===t.transport})},this.hasHLSTS=function(t){return t||(t=this),i.some(t.transports,function(t){return"hlsts"===t.transport})}}var i=r(8);t.exports=n},function(t,e,r){function n(t){function e(t,e){t.servers=i.flatMap(a.toSafeArray(e.server),function(t){var e=t.ip._text;return a.toSafeArray(t.ports.port).map(function(t){var r=t._attr.type._value,n=t._text;return r+"://"+e+":"+n})})}this.servers=null,e(this,t)}var i=r(8),a=r(30);t.exports=n},function(t,e){function r(t){function e(t,e){t.statusCode=e["status-code"]?e["status-code"]._text:-1,t.message=e["status-message"]?e["status-message"]._text:null,t.isError=t.statusCode>=300||t.statusCode===-1,t.isGeoBlocked=453===t.statusCode}this.statusCode=null,this.message=null,this.isError=!1,this.isGeoBlocked=!1,e(this,t)}t.exports=r},function(t,e){function r(t){function e(t,e){t.name=e?e:null}this.name=null,e(this,t)}t.exports=r},function(t,e){function r(t){function e(t,e){t.mountSuffix=e._attr?e._attr.mountSuffix._value:null,t.transport=e._text||null}this.mountSuffix=null,this.transport=null,e(this,t)}t.exports=r},function(t,e){function r(t){function e(t,e){t.index=parseInt(e._attr.index._value),t.codec=e._attr.codec._value,t.bitRate=parseInt(e._attr.bitrate._value),t.frameRate=parseFloat(e._attr.framerate._value),t.width=parseInt(e._attr.width._value),t.height=parseInt(e._attr.height._value),t.aspect=parseFloat(e._attr.aspect._value),t.keyframeInterval=parseInt(e._attr["keyframe-interval"]._value)}this.index=null,this.codec=null,this.bitRate=null,this.frameRate=null,this.width=null,this.height=null,this.aspect=null,this.keyframeInterval=null,e(this,t)}t.exports=r},function(t,e,r){var n,i;n=[r(1),r(3),r(2),r(151)],i=function(t,e,r,n){var i=t([],{constructor:function(t){this._sessionId=null,this._mediaNode=t,this._streamTimer=null,this._timer=0,this._connectionTime=0,this._onPlayHandler=r.hitch(this,this.__onTimeUpdate)},init:function(t){this._connectionTime=(new Date).getTime(),this._streamTimer=setInterval(this._onPlayHandler,250),this.sidebandMetadataConnector=new n,this.sidebandMetadataConnector.setSidebandMetadataFallbackCallback(r.hitch(this,this.__onSidebandMetadataFallback)),this.sidebandMetadataConnector.connect(this.__getMetadataConnectionUrl(t.url,t.mount,t.sbmConfig))},destroy:function(){this.onTimeUpdateListener&&this.onTimeUpdateListener.remove(),clearInterval(this._streamTimer),this._timer=0,this._connectionTime=0,this.sidebandMetadataConnector&&this.sidebandMetadataConnector.destroy(),delete this.sidebandMetadataConnector},getStreamConnectionUrl:function(t){return t+(t.indexOf("?")!=-1?"&":"?")+"sbmid="+this.__generateSessionId()},setTrackCuePointCallback:function(t){this._trackCuePointCallback=t},setAdBreakCuePointCallback:function(t){this._adBreakCuePointCallback=t},setHlsCuePointCallback:function(t){this._hlsCuePointCallback=t},setSpeechCuePointCallback:function(t){this._speechCuePointCallback=t},setCustomCuePointCallback:function(t){this._customCuePointCallback=t},setErrorCallback:function(t){this._errorCallback=t},__getMetadataConnectionUrl:function(t,e,r){return t&&e&&null!==r&&null!==r.info?t.split("/")[0]+"//"+t.split("/")[2]+"/"+e+r.info.metadataSuffix+"?sbmid="+this._sessionId:null},__generateSessionId:function(){var t=(new Date).getTime();return this._sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:7&r|8).toString(16)}),this._sessionId},__onSidebandMetadataFallback:function(){this.destroy(),this._errorCallback({})},__onTimeUpdate:function(){this._timer=(new Date).getTime()-this._connectionTime,this.isStopped||this.isPaused||this.sidebandMetadataConnector&&this.sidebandMetadataConnector.getCurrentCuePoint()&&this._timer>=this.sidebandMetadataConnector.getCurrentCuePoint().timestamp&&("track"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._trackCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"ad"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._adBreakCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"hls"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._hlsCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"speech"===this.sidebandMetadataConnector.getCurrentCuePoint().type?this._speechCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}):"custom"===this.sidebandMetadataConnector.getCurrentCuePoint().type&&this._customCuePointCallback({cuePoint:this.sidebandMetadataConnector.getCurrentCuePoint()}),this.sidebandMetadataConnector.shiftCuePointQueue())}});return i}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(3),r(6),r(2),r(63),r(61),r(38),r(60)],i=function(t,e,r,n,i,a,o,s){var u=t([],{SUPPORTED_EVENTS:["onMetaData","onCuePoint","onCuePointPreview","onCuePointPreviewExpired"],MAX_BACKOFF_RETRY:3,cuePointMap:{timestamp:"timestamp",type:"name",cue_title:a.CUE_TITLE,track_artist_name:a.ARTIST_NAME,track_album_name:a.ALBUM_NAME,program_id:a.PROGRAM_ID,cue_time_duration:a.CUE_TIME_DURATION,cue_time_start:a.CUE_TIME_START,track_id:a.TRACK_ID,track_nowplaying_url:a.NOW_PLAYING_URL,track_cover_url:a.TRACK_COVER_URL,ad_id:o.AD_ID,ad_type:o.AD_TYPE,cue_title:o.CUE_TITLE,cue_time_duration:o.CUE_TIME_DURATION,ad_url:o.AD_URL,ad_vast_url:o.AD_VAST_URL,ad_vast:o.AD_VAST,hls_track_id:s.HLS_TRACK_ID,hls_segment_id:s.HLS_SEGMENT_ID},constructor:function(){this._eventSource=null,this._eventQueue=[],this._currentSbmUrl=null,this._backOffRetry=0,this.__onMessageHandler=n.hitch(this,this.__onMessage),this.__onOpenHandler=n.hitch(this,this.__onOpen),this.__onErrorHandler=n.hitch(this,this.__onError)},connect:function(t){this._currentSbmUrl=t,this.__subscribe(t),this.__resetBackOff()},destroy:function(){this.__unlisten(),this.__close()},getCurrentCuePoint:function(){return this._eventQueue.length>0?this._eventQueue[0]:null},shiftCuePointQueue:function(){this._eventQueue.length&&this._eventQueue.shift()},setSidebandMetadataFallbackCallback:function(t){this._sidebandMetadataFallbackCallback=t},__subscribe:function(t){null!=this._eventSource&&(this._eventSource.close(),this._eventSource=null),"undefined"!=typeof EventSource&&(this._eventSource=new EventSource(t),this.__listen())},__listen:function(){this._messageListener=e(this._eventSource,"message",this.__onMessageHandler),this._openListener=e(this._eventSource,"open",this.__onOpenHandler),this._errorListener=e(this._eventSource,"error",this.__onErrorHandler)},__unlisten:function(){this._messageListener&&this._messageListener.remove(),this._openListener&&this._openListener.remove(),this._errorListener&&this._errorListener.remove()},__close:function(){this._currentSbmUrl=null,null!=this._eventSource&&(this._eventSource.close(),this._eventSource=null)},__onMessage:function(t){var e=JSON.parse(t.data);if(void 0==e.type||this.__isSupportedEvent(e)){var r={};switch(e.type){case"onMetaData":this.__onMetadata(e);break;case"onCuePoint":r=this.__onCuePoint(e);break;case"onCuePointPreview":r=this.__onCuePointPreview(e);break;case"onCuePointPreviewExpired":r=this.__onCuePointPreviewExpired(e)}this._eventQueue.push(r)}},__onCuePoint:function(t){var e={};e.parameters=t.parameters,e.timestamp=t.timestamp,e.type=t.name;for(var r in t.parameters)this.cuePointMap[r]&&(e[this.cuePointMap[r]]=t.parameters[r]);return"ad"==e.type&&(e.isVastInStream=!!(void 0!=e[o.AD_VAST_URL]&&""!=e[o.AD_VAST_URL]||e[o.AD_VAST]&&""!=e[o.AD_VAST])),e},__onMetadata:function(t){},__onCuePointPreview:function(t){},__onCuePointPreviewExpired:function(t){},__onOpen:function(t){this.__resetBackOff()},__onError:function(t){console.error("sidebandMetadataConnector:error"),this._backOffRetry==this.MAX_BACKOFF_RETRY?this._sidebandMetadataFallbackCallback():this.__reconnect()},__isSupportedEvent:function(t){return r.indexOf(this.SUPPORTED_EVENTS,t.type)!=-1},__reconnect:function(){this._backOffRetry++,null!=this._currentSbmUrl&&this.__subscribe(this._currentSbmUrl)},__resetBackOff:function(){this._backOffRetry=0}});return u}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(2),r(10),r(31),r(6),r(73),r(74),r(3)],i=function(t,e,r,n,i,a,o,s){var u=t([n],{constructor:function(t,e){this.artistData=null,this.inherited(arguments)},getName:function(){return null!=this.artistData?this.artistData.name:this.data.name},getBiography:function(){return this.artistData.biography},getBirthDate:function(){return this.artistData.beginDate},getEndDate:function(){return this.artistData.endDate},getBeginPlace:function(){return this.artistData.beginPlace},getEndPlace:function(){return this.artistData.endPlace},getIsGroup:function(){return this.artistData.isGroup},getCountry:function(){return this.artistData.country},getGenres:function(){for(var t=[],e=0;e<this.artistData.genres.length;e++)t.push(this.artistData.genres[e].name);return t},getSimilar:function(){return this.artistData.similars},getMembers:function(){return this.artistData.members},getWebsite:function(){return this.artistData.website},getTwitterUsername:function(){return this.artistData.twitter},getFacebookUrl:function(){return this.artistData.facebook},getAlbums:function(){if(null==this.albums){this.albums=[];var t;i.forEach(this.artistData.albums,function(e,r){t=new a(e,this.platformId),this.albums.push(t)},this)}return this.albums},getAlbumById:function(t){var e=-1;return i.forEach(this.getAlbums(),function(r,n){r.id==t&&(e=n)},this),e>-1?this.getAlbums()[e]:null},getPictures:function(){if(null==this.pictures){this.pictures=[];var t;i.forEach(this.artistData.pictures,function(e,r){e.artistId=this.id,t=new o(e,this.platformId),this.pictures.push(t)},this)}return this.pictures},getPictureById:function(t){var e=-1;return i.forEach(this.getPictures(),function(r,n){r.id==t&&(e=n)},this),e>-1?this.getPictures()[e]:null},fetchData:function(t){if(t=void 0!=t&&t,t&&(this.url=this.getDynamicArtistUrl(this.id)),0==this.alreadyFetched){var n=new r;n.request(this.url,{isDynamicCall:t},this.getRequestArgs(),e.hitch(this,this._onLoadComplete),e.hitch(this,this._onLoadError))}else this.notify("artist-complete",{artistId:this.id})},fetchAlbumByIds:function(t){"string"==typeof t&&(t=[t]),this.albumsQueue=e.clone(t);for(var r,n=0;n<t.length;n++)r=this.getAlbumById(t[n]),r.successCallback&&r.successCallback.remove(),r.errorCallback&&r.errorCallback.remove(),r.successCallback=s(r,"album-complete",e.hitch(this,this._onAlbumComplete)),r.errorCallback=s(r,"album-error",e.hitch(this,this._onAlbumComplete)),r.fetchData()},fetchPictureByIds:function(t){"string"==typeof t&&(t=[t]),this.picturesQueue=e.clone(t);for(var r,n=0;n<t.length;n++)r=this.getPictureById(t[n]),r.successCallback&&r.successCallback.remove(),r.errorCallback&&r.errorCallback.remove(),r.successCallback=s(r,"picture-complete",e.hitch(this,this._onPictureComplete)),r.errorCallback=s(r,"picture-error",e.hitch(this,this._onPictureComplete)),r.fetchData()},_onLoadError:function(t,e){console.error(e),0==t.isDynamicCall?this.fetchData(!0):this.notify("artist-error",{artistId:this.id})},_onLoadComplete:function(t,e){this.artistData=e.artist,this.alreadyFetched=!0,this.notify("artist-complete",{artistId:this.id})},_onAlbumComplete:function(t,e){this._removeAlbumFromQueue(t.albumId),0==this.albumsQueue.length&&this.notify("album-complete",this.albums)},_removeAlbumFromQueue:function(t){var e=-1;i.forEach(this.albumsQueue,function(r,n){r==t&&(e=n)},this),e>-1&&this.albumsQueue.splice(e,1)},_onPictureComplete:function(t,e){this._removePictureFromQueue(t.pictureId),0==this.picturesQueue.length&&this.notify("picture-complete",this.pictures)},_removePictureFromQueue:function(t){var e=-1;i.forEach(this.picturesQueue,function(r,n){r==t&&(e=n)},this),e>-1&&this.picturesQueue.splice(e,1)}});return u}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(1),r(75),r(152),r(73)],i=function(t,e,r,n){var i=t([],{constructor:function(t,e,r){this.songData=t,this.npeId=e,this.platformId=r,this.trackInstance=null,this.albumInstance=null,this.artistInstance=null,this.inherited(arguments)},track:function(){return void 0==this.songData.track?null:(null==this.trackInstance&&(this.trackInstance=new e(this.songData.track,this.platformId)),this.trackInstance)},artist:function(){return void 0==this.songData.artists?null:(null==this.artistInstance&&(this.artistInstance=new r(this.songData.artists[0],this.platformId)),this.artistInstance)},album:function(){return void 0==this.songData.album?null:(null==this.albumInstance&&(this.albumInstance=new n(this.songData.album,this.platformId)),this.albumInstance)}});return i}.apply(e,n),!(void 0!==i&&(t.exports=i))}])});
//# sourceMappingURL=td-sdk.min.js.map